{"file_contents":{"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        chart: {\n          \"1\": \"var(--chart-1)\",\n          \"2\": \"var(--chart-2)\",\n          \"3\": \"var(--chart-3)\",\n          \"4\": \"var(--chart-4)\",\n          \"5\": \"var(--chart-5)\",\n        },\n        sidebar: {\n          DEFAULT: \"var(--sidebar-background)\",\n          foreground: \"var(--sidebar-foreground)\",\n          primary: \"var(--sidebar-primary)\",\n          \"primary-foreground\": \"var(--sidebar-primary-foreground)\",\n          accent: \"var(--sidebar-accent)\",\n          \"accent-foreground\": \"var(--sidebar-accent-foreground)\",\n          border: \"var(--sidebar-border)\",\n          ring: \"var(--sidebar-ring)\",\n        },\n        \"rksd-blue\": \"var(--rksd-blue)\",\n        \"rksd-light\": \"var(--rksd-light)\",\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n        inter: [\"Inter\", \"system-ui\", \"sans-serif\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2903},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/WaveformAnimation.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { motion } from \"framer-motion\";\n\ninterface WaveformAnimationProps {\n  isListening: boolean;\n  audioLevel?: number;\n  isSpeaking?: boolean;\n  isActive?: boolean;\n}\n\nexport function WaveformAnimation({ isListening, audioLevel = 0.5, isSpeaking = false, isActive = true }: WaveformAnimationProps) {\n  const [bars] = useState(() => Array.from({ length: 4 }, (_, i) => i));\n  const [animationTime, setAnimationTime] = useState(0);\n\n  // Update animation time for smooth animations using RAF\n  useEffect(() => {\n    if (!isListening && !isSpeaking) return;\n    \n    let animationId: number;\n    const updateTime = () => {\n      setAnimationTime(Date.now());\n      animationId = requestAnimationFrame(updateTime);\n    };\n    \n    animationId = requestAnimationFrame(updateTime);\n    \n    return () => cancelAnimationFrame(animationId);\n  }, [isListening, isSpeaking]);\n\n  const getBarHeight = (index: number) => {\n    if (!isListening && !isSpeaking) return 32;\n    \n    // Create unique timing for each bar with different frequencies and phases\n    const baseHeight = 32;\n    const maxHeight = isSpeaking ? 90 : 70;\n    \n    // More dramatic movement with different frequencies and phases for each bar\n    const frequencies = [0.015, 0.022, 0.028, 0.018]; // Faster speeds for more movement\n    const phases = [0, 2.1, 4.2, 1.4]; // Different starting points\n    const amplitudes = [0.8, 1.0, 0.9, 1.1]; // Higher intensities for more movement\n    \n    const frequency = frequencies[index % frequencies.length];\n    const phase = phases[index % phases.length];\n    const amplitude = amplitudes[index % amplitudes.length];\n    \n    // Add secondary wave for more natural voice-like movement\n    const primaryWave = Math.sin(animationTime * frequency + phase) * amplitude;\n    const secondaryWave = Math.sin(animationTime * frequency * 1.3 + phase * 0.7) * 0.3;\n    const variation = (primaryWave + secondaryWave) * 0.5 + 0.7;\n    \n    return baseHeight + (maxHeight - baseHeight) * audioLevel * Math.max(0.3, variation);\n  };\n\n  const barVariants = {\n    idle: (index: number) => ({\n      height: 32,\n      backgroundColor: \"hsl(220 8% 65%)\", // Soft gray\n      transition: { \n        duration: 0.5,\n        type: \"spring\",\n        damping: 20,\n        stiffness: 100\n      }\n    }),\n    listening: (index: number) => ({\n      height: getBarHeight(index),\n      backgroundColor: \"hsl(210 60% 70%)\", // Gentle blue\n      transition: {\n        height: {\n          duration: 0.2,\n          ease: \"easeInOut\",\n          type: \"tween\"\n        }\n      }\n    }),\n    speaking: (index: number) => ({\n      height: getBarHeight(index),\n      backgroundColor: \"hsl(210 45% 60%)\", // Professional blue-gray\n      transition: {\n        height: {\n          duration: 0.08 + (index * 0.015), // Faster, more responsive timing\n          ease: \"easeOut\",\n          type: \"tween\"\n        }\n      }\n    })\n  };\n\n  const getAnimationState = () => {\n    if (isSpeaking) return \"speaking\";\n    if (isListening) return \"listening\";\n    return \"idle\";\n  };\n\n  return (\n    <div \n      className={`flex items-center justify-center space-x-2 transition-opacity duration-300 ${\n        isActive ? 'opacity-100' : 'opacity-30'\n      }`}\n      style={{ \n        willChange: 'auto',\n        contain: 'layout',\n        transform: 'translateZ(0)',\n        height: '80px',\n        display: 'flex',\n        alignItems: 'center'\n      }}\n      data-testid=\"waveform-animation\"\n    >\n      {bars.map((index) => (\n        <motion.div\n          key={index}\n          custom={index}\n          variants={barVariants}\n          animate={getAnimationState()}\n          className=\"w-4 rounded-full\"\n          style={{\n            minHeight: 32,\n            maxHeight: 80, // Prevent bars from growing beyond container\n            filter: \"drop-shadow(0 4px 12px rgba(71, 85, 105, 0.25)) drop-shadow(0 0 8px rgba(71, 85, 105, 0.15))\",\n            willChange: 'height',\n            transform: 'translateZ(0)',\n            contain: 'layout'\n          }}\n        />\n      ))}\n    </div>\n  );\n}","size_bytes":4093},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"server/routes-tts-clean.ts":{"content":"/**\n * Clean TTS Route Implementation \n * Keeps working sequential processing + all optimizations\n */\n\n// Clean TTS Route (to replace broken section)\nexport const cleanTTSRoute = `\n  // Text-to-Speech with optimized processing\n  app.post(\"/api/tts\", async (req, res) => {\n    try {\n      const { text, voiceId, modelId, stability, similarityBoost, cartesiaModelId, speed, emotions, language } = ttsSchema.parse(req.body);\n      if (!text || text.trim().length === 0) {\n        return res.status(400).json({\n          message: \"Text cannot be empty\",\n          error: \"EMPTY_TEXT\"\n        });\n      }\n\n      const cleanTextForSpeech = (text: string) => {\n        return text\n          .replace(/\\\\|/g, ' ')\n          .replace(/---+/g, ' ')\n          .replace(/#{1,6}\\\\s+/g, '')\n          .replace(/\\\\*\\\\*(.*?)\\\\*\\\\*/g, '$1')\n          .replace(/\\\\*(.*?)\\\\*/g, '$1')\n          .replace(/\\`(.*?)\\`/g, '$1')\n          .replace(/\\\\[(.*?)\\\\]\\\\(.*?\\\\)/g, '$1')\n          .replace(/ðŸ“Š|ðŸ“Œ|ðŸŽ“|â°|ðŸ“ž/g, '')\n          .replace(/\\\\s+/g, ' ')\n          .trim();\n      };\n\n      const detectLanguage = (text: string): 'hi' | 'en' => {\n        const hindiWords = ['aap', 'hai', 'hain', 'kya', 'kaise', 'kahan', 'namaste', 'dhanyawad', 'main', 'hum', 'kar', 'karo', 'karna', 'kiya', 'ghar', 'paani', 'khana', 'college', 'student', 'teacher', 'library', 'hostel', 'fees', 'exam', 'result', 'madad', 'help', 'problem', 'achha', 'bura', 'naya', 'purana', 'bada', 'chota', 'se', 'ko', 'ke', 'ki', 'ka', 'me', 'mein', 'par', 'pe', 'tak', 'aur', 'ya', 'lekin', 'agar', 'to', 'phir', 'fir', 'kyun', 'kyon', 'kab', 'kon', 'kaun', 'kitna', 'kitni', 'kitne'];\n        const lowerText = text.toLowerCase();\n        const hindiWordCount = hindiWords.filter(word => lowerText.includes(word)).length;\n        const totalWords = text.split(/\\\\s+/).length;\n        return hindiWordCount / totalWords > 0.2 ? 'hi' : 'en';\n      };\n\n      // OPTIMIZATIONS APPLIED:\n      const cleanedText = cleanTextForSpeech(text);\n      const normalizedText = normalizeTextForTTS(cleanedText); // âœ… Text normalization\n      const textChunks = splitTextIntoChunks(normalizedText, 900); // âœ… Improved chunking (900 chars)\n      const detectedLanguage = detectLanguage(textChunks[0] || cleanedText);\n      \n      console.log('TTS: Text split into', textChunks.length, 'chunks');\n      console.log('TTS: Detected language:', detectedLanguage);\n      console.log('TTS: Starting optimized sequential processing...');\n      \n      // Sequential processing with optimizations\n      const audioBuffers: Buffer[] = [];\n\n      // Helper function with retry logic (exponential backoff)\n      const processChunkWithRetry = async (chunk: string, chunkIndex: number, provider: 'elevenlabs' | 'cartesia'): Promise<Buffer | null> => {\n        const maxRetries = 3;\n        const baseDelay = 250;\n        \n        for (let attempt = 0; attempt <= maxRetries; attempt++) {\n          try {\n            console.log(\\`TTS: Processing chunk \\${chunkIndex + 1}/\\${textChunks.length} with \\${provider} (attempt \\${attempt + 1}): \"\\${chunk.substring(0, 50)}...\"\\`);\n            \n            if (provider === 'elevenlabs') {\n              const requestBody = {\n                text: chunk,\n                model_id: modelId || \"eleven_english_v2\", // âœ… English model for consistency\n                voice_settings: {\n                  stability: stability || 0.9,  // âœ… Higher stability for consistency\n                  similarity_boost: similarityBoost || 0.85, // âœ… Optimized settings\n                  speed: 1.0\n                }\n              };\n              \n              const response = await fetch(\\`https://api.elevenlabs.io/v1/text-to-speech/\\${voiceId}\\`, {\n                method: 'POST',\n                headers: {\n                  'Accept': 'audio/mpeg',\n                  'Content-Type': 'application/json',\n                  'xi-api-key': elevenlabsApiKey\n                },\n                body: JSON.stringify(requestBody)\n              });\n              \n              if (response.ok) {\n                const audioBuffer = await response.arrayBuffer();\n                console.log(\\`TTS: Chunk \\${chunkIndex + 1} ElevenLabs success! Audio size:\\`, audioBuffer.byteLength, 'bytes');\n                return Buffer.from(audioBuffer);\n              } else {\n                throw new Error(\\`ElevenLabs API error: \\${response.status}\\`);\n              }\n            } else {\n              // Cartesia processing with pronunciation corrections\n              const correctedText = applyPronunciationCorrections(chunk);\n              const cartesiaVoiceMapping = {\n                \"iWNf11sz1GrUE4ppxTOL\": \"fd2ada67-c2d9-4afe-b474-6386b87d8fc3\",\n              };\n              const cartesiaVoiceId = cartesiaVoiceMapping[voiceId as keyof typeof cartesiaVoiceMapping] || \"fd2ada67-c2d9-4afe-b474-6386b87d8fc3\";\n              const defaultEmotions = emotions && emotions.length > 0 ? emotions : [\"positivity\"];\n              \n              const requestBody = {\n                model_id: cartesiaModelId || \"sonic-2.0\",\n                transcript: correctedText,\n                voice: {\n                  mode: \"id\",\n                  id: cartesiaVoiceId,\n                  __experimental_controls: {\n                    speed: speed || \"normal\",\n                    emotion: defaultEmotions\n                  }\n                },\n                output_format: {\n                  container: \"wav\",\n                  encoding: \"pcm_s16le\",\n                  sample_rate: 44100\n                },\n                language: \"hi\"\n              };\n              \n              const response = await fetch('https://api.cartesia.ai/tts/bytes', {\n                method: 'POST',\n                headers: {\n                  'Authorization': \\`Bearer \\${cartesiaApiKey}\\`,\n                  'Cartesia-Version': '2025-04-16',\n                  'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(requestBody)\n              });\n              \n              if (response.ok) {\n                const audioBuffer = await response.arrayBuffer();\n                console.log(\\`TTS: Chunk \\${chunkIndex + 1} Cartesia success! Audio size:\\`, audioBuffer.byteLength, 'bytes');\n                return Buffer.from(audioBuffer);\n              } else {\n                throw new Error(\\`Cartesia API error: \\${response.status}\\`);\n              }\n            }\n            \n          } catch (error) {\n            if (attempt === maxRetries) {\n              console.error(\\`TTS: Chunk \\${chunkIndex + 1} failed after \\${maxRetries + 1} attempts:\\`, error);\n              return null;\n            }\n            \n            const delay = baseDelay * Math.pow(2, attempt);\n            console.warn(\\`TTS: Chunk \\${chunkIndex + 1} attempt \\${attempt + 1} failed, retrying in \\${delay}ms:\\`, error);\n            await new Promise(resolve => setTimeout(resolve, delay));\n          }\n        }\n        \n        return null;\n      };\n      \n      // Try ElevenLabs first (single provider for consistency)\n      const elevenlabsApiKey = process.env.ELEVENLABS_API_KEY;\n      if (elevenlabsApiKey && elevenlabsApiKey !== 'your_elevenlabs_api_key_here') {\n        console.log('TTS: Attempting ElevenLabs for all chunks...');\n        \n        let allSuccessful = true;\n        for (let i = 0; i < textChunks.length; i++) {\n          const chunkAudio = await processChunkWithRetry(textChunks[i], i, 'elevenlabs');\n          if (chunkAudio) {\n            audioBuffers.push(chunkAudio);\n          } else {\n            allSuccessful = false;\n            console.warn(\\`TTS: Failed to process chunk \\${i + 1}, stopping ElevenLabs processing\\`);\n            break;\n          }\n        }\n        \n        if (allSuccessful && audioBuffers.length === textChunks.length) {\n          const finalAudio = Buffer.concat(audioBuffers);\n          console.log(\\`TTS: ElevenLabs completed! Combined \\${audioBuffers.length} chunks, total audio size:\\`, finalAudio.length, 'bytes');\n          res.set({\n            'Content-Type': 'audio/mpeg',\n            'Content-Length': finalAudio.length.toString(),\n            'X-TTS-Provider': 'elevenlabs',\n            'X-TTS-Chunks': textChunks.length.toString(),\n            'X-TTS-Optimized': 'true'\n          });\n          return res.send(finalAudio);\n        }\n        \n        console.log('TTS: ElevenLabs partial failure, trying Cartesia fallback...');\n        audioBuffers.length = 0; // Clear failed attempts\n      } else {\n        console.log('TTS: ElevenLabs API key not configured, skipping...');\n      }\n      \n      // Cartesia fallback (whole response, not mixed)\n      const cartesiaApiKey = process.env.CARTESIA_API_KEY;\n      if (cartesiaApiKey && cartesiaApiKey !== 'your_cartesia_api_key_here') {\n        console.log('TTS: Attempting Cartesia fallback for all chunks...');\n        \n        let allSuccessful = true;\n        for (let i = 0; i < textChunks.length; i++) {\n          const chunkAudio = await processChunkWithRetry(textChunks[i], i, 'cartesia');\n          if (chunkAudio) {\n            audioBuffers.push(chunkAudio);\n          } else {\n            allSuccessful = false;\n            console.warn(\\`TTS: Failed to process chunk \\${i + 1} with Cartesia\\`);\n            break;\n          }\n        }\n        \n        if (allSuccessful && audioBuffers.length === textChunks.length) {\n          const finalAudio = Buffer.concat(audioBuffers);\n          console.log(\\`TTS: Cartesia completed! Combined \\${audioBuffers.length} chunks, total audio size:\\`, finalAudio.length, 'bytes');\n          res.set({\n            'Content-Type': 'audio/wav',\n            'Content-Length': finalAudio.length.toString(),\n            'X-TTS-Provider': 'cartesia',\n            'X-TTS-Chunks': textChunks.length.toString(),\n            'X-TTS-Optimized': 'true'\n          });\n          return res.send(finalAudio);\n        }\n      } else {\n        console.log('TTS: Cartesia API key not configured, skipping...');\n      }\n\n      console.error('TTS: All providers failed');\n      return res.status(503).json({\n        message: \"Speech synthesis unavailable - please check API configuration\",\n        error: \"ALL_TTS_PROVIDERS_FAILED\"\n      });\n\n    } catch (error) {\n      console.error(\"Error in TTS endpoint:\", error);\n      res.status(500).json({\n        message: \"Internal server error during speech generation\",\n        error: \"SERVER_ERROR\",\n        details: error instanceof Error ? error.message : \"Unknown error\"\n      });\n    }\n  });\n`;\n","size_bytes":10544},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"replit.md":{"content":"# WayFinder.Ai Navigation System - Multi-Institution Platform\n\n## Overview\nWayFinder.Ai is a multi-institution AI navigation platform providing voice-powered AI assistants, real-time mapping, and intelligent pathfinding for various institutions like colleges, hospitals, and courts. It aims to offer a scalable solution for institutional navigation with a world-class professional design, building on the foundation of a college management system. The platform's ambition is to solve navigation chaos with intelligent, accessible guidance, making complex institutions easily navigable for everyone.\n\n## User Preferences\nI want the AI to ask before making major changes and to prefer detailed explanations. Do not make changes to the folder `Z` or the file `Y`. I prefer an iterative development approach.\n\n## System Architecture\n\n### UI/UX Decisions\nThe platform features a professional, futuristic AI-themed landing page with neon glows, glassmorphism effects, and smooth animations. Admin panels are designed with professional dashboards, gradient-styled statistics, and real-time sync indicators. The AI Assistant interface supports both voice and text input, offering clear conversation flows and text-to-speech responses. The design system leverages Radix UI and Tailwind CSS for consistent and modern UI components across all interfaces.\n\n**Court Admin Panel** (`/court-admin`): Professional purple gradient-themed admin panel for Kaithal District Court with 6 sections - Dashboard, Courtrooms, Buildings, Staff Directory, Files Tracking, and Building Images. Features include comprehensive CRUD operations, building image upload with metadata (title, description, room number, building name, department, contact person), and stats dashboard displaying total courtrooms, buildings, staff members, and active files.\n\n### Technical Implementations\nThe frontend is built with React 18 and TypeScript, using Wouter for routing and TanStack Query for state management. Voice input is handled via the Web Speech API. The backend utilizes Express.js with TypeScript for API services, supported by a custom in-memory session manager for AI and token-based authentication. Supabase (PostgreSQL) serves as the primary database, employing Realtime subscriptions for instant data synchronization. AI capabilities are powered by OpenAI GPT-4 (Court Assistant) and Groq API Llama-3.3-70B (Campus AI), integrating data from both static JSON and live Supabase sources with intelligent intent classification. The system implements secure login for administrators and departments, provides real-time updates via Supabase Realtime, and is fully mobile-friendly.\n\n**Court-Specific Features**: Three-tier TTS system (OpenAI â†’ Cartesia â†’ Browser fallback), intelligent query analyzer detecting location/navigation questions with keyword extraction, building images feature displaying relevant court location photos with metadata when users ask \"where is X?\" or \"show me the registry office\", and comprehensive admin panel for managing all court data with graceful error handling in database-unavailable scenarios.\n\n### System Design Choices\nThe architecture is a three-tier model ensuring clear separation of concerns and access levels. It incorporates event-driven real-time updates through Supabase Realtime. The AI uses a hybrid data source approach, combining static JSON with dynamic Supabase data for comprehensive information. A 3-layer AI-powered hybrid layer model handles query processing, focusing on intent classification, smart source prioritization, and cross-verification for high accuracy.\n\n## External Dependencies\n- **OpenAI API**: Powers Court Assistant with GPT-4 and provides TTS capabilities for voice responses.\n- **Groq API**: For Campus AI voice assistant capabilities and language model inference (Llama-3.3-70B).\n- **Supabase**: Provides PostgreSQL database, authentication, and Realtime functionalities.\n- **React 18**: Core library for building user interfaces.\n- **Radix UI**: Unstyled component library for building accessible UI components.\n- **Tailwind CSS**: Utility-first CSS framework for styling.\n- **Wouter**: A minimalist routing library for React.\n- **TanStack Query (React Query)**: For data fetching, caching, and state management.\n- **Express.js**: Backend web application framework for API services.\n- **Web Speech API**: For enabling browser-based voice input.\n- **Cheerio**: Used for HTML parsing and web scraping.\n- **SerpAPI**: For enhanced external data accuracy and AI Overview integration.\n\n## Recent Updates\n\n### November 10, 2025\n- **Court Image Display & UX Enhancement**: Improved building image presentation with full-screen modal and compact chat layout\n  - Fixed image cropping issue by changing from `object-cover` to `object-contain` with white padding - now shows complete images without cutting\n  - Reduced chat image size (h-28 sm:h-32) for compact chat area while maintaining clarity\n  - Implemented click-to-expand modal: images are small in chat, clicking opens full-screen modal with dark overlay, close button, and smooth animations\n  - Modal features: max-h-[80vh] object-contain sizing, backdrop dismissal, AnimatePresence transitions\n  - Updated all building responses to conversational Hinglish format instead of direct listings\n  - Example: \"Civil Block me aapko courtrooms, judge chambers aur legal aid cell milenge. Hearing ke liye aap Room 21 ya Room 22 me ja sakte hain...\" (friendly and helpful vs robotic listing)\n- **Court Building Image + Room & Service Lookup System**: Implemented static data-driven navigation system for instant deterministic responses without LLM latency\n  - Created `server/court-static-data.ts` with BUILDINGS (civil, record, filing), ROOMS (15 mapped rooms), and SERVICES (30+ Hinglish keywords) data structures\n  - Added static lookup in `/api/court/ask` that preempts LLM call when service keywords, room numbers, or building names are detected\n  - Supports queries like \"Mujhe certified copy leni hai\" â†’ instant response with Room 14 (Record Section) + building image\n  - Uploaded 3 building images to `client/public/images/court/` (civil_block.png, record_section.png, filing_section.png)\n  - System returns structured JSON with `buildingImages` array containing id, title, description, image_url, room_number, building_name\n  - Maintains full backward compatibility - non-matching queries still flow through Supabase + AI-powered responses\n- **Court TTS Text Normalization Enhancement**: Implemented comprehensive text normalization for Court Voice Assistant to properly read times, phone numbers, and email addresses - matching college voice assistant functionality\n  - Added `normalizeEmails()` function with letter-by-letter domain spelling: \"kaithalcourt@gov.in\" â†’ \"kaithalcourt at the rate g, o, v dot i, n\"\n  - Enhanced phone number normalization to handle both international format (+91-1746-234567 â†’ \"plus nine one, one seven four six, two three four five six seven\") and plain 10-digit Indian mobile numbers (9876543210 â†’ \"nine eight seven six five, four three two one zero\")\n  - Applied `normalizeTextForTTS()` in both Court TTS endpoints (ElevenLabs `/api/court/tts` and OpenAI `/api/court/tts-openai`) for consistent pronunciation\n  - Added debug logging to preview normalized text in console for monitoring\n  - Normalization pipeline: custom pronunciations â†’ URLs â†’ emails â†’ phone numbers â†’ years â†’ times â†’ ordinals â†’ acronyms â†’ general numbers\n- **Court Response Formatting Overhaul**: Eliminated all markdown and complex formatting from voice responses for clean, natural TTS\n  - Updated system prompt with critical formatting rules: \"NEVER use ANY markdown formatting: no **, ***, *, __, [], (), etc.\"\n  - Provided explicit correct/wrong format examples in system prompt to guide AI responses\n  - Enhanced text cleaning function in both TTS endpoints to strip ALL markdown: triple asterisks (***), double asterisks (**), single asterisks (*), underscores (__, _), markdown links [text](url), standalone URLs in parentheses\n  - Added comprehensive emoji removal for cleaner speech output\n  - Result: Responses go from \"**Email:** kaithalcourt@gov.in\" to clean \"Email: kaithalcourt@gov.in\" for perfect TTS pronunciation\n- **Court TTS Optimization**: Removed chunking system for continuous natural speech like normal assistants - text now processed in single ElevenLabs API call for smooth playback\n- **Character Limit Protection**: Added 4500 character safety limit with intelligent sentence-boundary truncation to prevent ElevenLabs API failures on long responses\n- **Enhanced Error Handling**: Implemented specific error messages for common TTS failures (413 text too long, 401/403 authentication, 429 rate limit) with detailed logging\n- **ElevenLabs Settings Update**: Voice changed to \"3AMU7jXQuQa3oRvRqUmb\" with optimized parameters (stability: 0.55, similarity_boost: 0.7, style: 0.4) for better Hinglish pronunciation\n- **Platform Rebranding**: Complete rebranding from \"Re-Act\" to \"WayFinder.Ai\" across all user-facing pages, documentation, and footer - maintaining consistent brand identity\n\n### November 6, 2025\n- **Court Admin General Info Enhancement**: Expanded General Info section with comprehensive court details including all contact information (Reception, PRO, Legal Aid), official email, website, working hours, and lunch break timings\n- **Holidays Calendar System**: Implemented color-coded calendar with 4 holiday types (Gazetted Holiday - red, Restricted Holiday - orange, Weekly Off - blue, Vacation - green) with visual calendar display and management interface\n- **AI-Powered Additional Information**: Added Additional Information section with dual modes - Manual entry and AI-assisted generation using GROQ_API_KEY (same as RKSD admin panel), featuring preview, edit, and regenerate capabilities\n- **Backend API Routes**: Created `/api/court-admin/holidays`, `/api/court-admin/additional-info`, and `/api/court-admin/ai-generate` endpoints; data stored in `court_settings` table using JSON format with keys: 'court_holidays' and 'court_additional_info'\n- **UI/UX Consistency**: All new features follow the RKSD admin panel pattern with EnhancedAIInput and EnhancedAIPreview components for consistent user experience\n\n### November 5, 2025\n- **Court Admin Login Fix**: Fixed authentication issue by generating proper bcrypt hash for default admin password ('admin123')\n- **Schema Update**: Updated `court-admin-supabase-schema-fixed.sql` with correct password hash for `court_main_admin` table\n- **Code Cleanup**: Removed duplicate/outdated `court-admin.tsx` file; `court-admin-main.tsx` is now the sole admin panel implementation\n- **Documentation**: Created `COURT_ADMIN_LOGIN_FIX.md` with step-by-step instructions for database setup and login credentials\n\n### November 4, 2025\n- **Court Admin Panel**: Built comprehensive admin interface at `/court-admin` with purple gradient theme matching Court Assistant\n- **Building Images Feature**: Admins can upload court building/location images with metadata; images automatically display in Court Assistant responses when users ask navigation/location questions\n- **Enhanced Query Analyzer**: Court query analyzer now detects location-related questions and fetches relevant building images from database\n- **Database Schema**: Added `court_building_images` table with fields for title, description, room_number, building_name, department, contact_person, and image_url\n- **API Structure**: Court admin routes at `/api/court-admin/*` with placeholder mode for graceful operation when Supabase is not configured","size_bytes":11618},"pnpm-lock.yaml":{"content":"lockfileVersion: '9.0'\n\nsettings:\n  autoInstallPeers: true\n  excludeLinksFromLockfile: false\n\nimporters:\n\n  .:\n    dependencies:\n      '@hookform/resolvers':\n        specifier: ^3.10.0\n        version: 3.10.0(react-hook-form@7.62.0(react@18.3.1))\n      '@jridgewell/trace-mapping':\n        specifier: ^0.3.30\n        version: 0.3.30\n      '@neondatabase/serverless':\n        specifier: ^0.10.4\n        version: 0.10.4\n      '@radix-ui/react-accordion':\n        specifier: ^1.2.12\n        version: 1.2.12(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-alert-dialog':\n        specifier: ^1.1.15\n        version: 1.1.15(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-aspect-ratio':\n        specifier: ^1.1.7\n        version: 1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-avatar':\n        specifier: ^1.1.10\n        version: 1.1.10(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-checkbox':\n        specifier: ^1.3.3\n        version: 1.3.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-collapsible':\n        specifier: ^1.1.12\n        version: 1.1.12(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-context-menu':\n        specifier: ^2.2.16\n        version: 2.2.16(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-dialog':\n        specifier: ^1.1.15\n        version: 1.1.15(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-dropdown-menu':\n        specifier: ^2.1.16\n        version: 2.1.16(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-hover-card':\n        specifier: ^1.1.15\n        version: 1.1.15(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-label':\n        specifier: ^2.1.7\n        version: 2.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-menubar':\n        specifier: ^1.1.16\n        version: 1.1.16(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-navigation-menu':\n        specifier: ^1.2.14\n        version: 1.2.14(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-popover':\n        specifier: ^1.1.15\n        version: 1.1.15(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-progress':\n        specifier: ^1.1.7\n        version: 1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-radio-group':\n        specifier: ^1.3.8\n        version: 1.3.8(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-scroll-area':\n        specifier: ^1.2.10\n        version: 1.2.10(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-select':\n        specifier: ^2.2.6\n        version: 2.2.6(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-separator':\n        specifier: ^1.1.7\n        version: 1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-slider':\n        specifier: ^1.3.6\n        version: 1.3.6(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-slot':\n        specifier: ^1.2.3\n        version: 1.2.3(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-switch':\n        specifier: ^1.2.6\n        version: 1.2.6(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-tabs':\n        specifier: ^1.1.13\n        version: 1.1.13(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-toast':\n        specifier: ^1.2.15\n        version: 1.2.15(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-toggle':\n        specifier: ^1.1.10\n        version: 1.1.10(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-toggle-group':\n        specifier: ^1.1.11\n        version: 1.1.11(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-tooltip':\n        specifier: ^1.2.8\n        version: 1.2.8(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@tanstack/react-query':\n        specifier: ^5.87.1\n        version: 5.87.1(react@18.3.1)\n      '@types/cors':\n        specifier: ^2.8.19\n        version: 2.8.19\n      '@types/three':\n        specifier: ^0.179.0\n        version: 0.179.0\n      class-variance-authority:\n        specifier: ^0.7.1\n        version: 0.7.1\n      clsx:\n        specifier: ^2.1.1\n        version: 2.1.1\n      cmdk:\n        specifier: ^1.1.1\n        version: 1.1.1(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      connect-pg-simple:\n        specifier: ^10.0.0\n        version: 10.0.0\n      cors:\n        specifier: ^2.8.5\n        version: 2.8.5\n      date-fns:\n        specifier: ^3.6.0\n        version: 3.6.0\n      dotenv:\n        specifier: ^17.2.2\n        version: 17.2.2\n      drizzle-orm:\n        specifier: ^0.39.3\n        version: 0.39.3(@neondatabase/serverless@0.10.4)(@types/pg@8.15.5)(pg@8.16.3)\n      drizzle-zod:\n        specifier: ^0.7.1\n        version: 0.7.1(drizzle-orm@0.39.3(@neondatabase/serverless@0.10.4)(@types/pg@8.15.5)(pg@8.16.3))(zod@3.25.76)\n      embla-carousel-react:\n        specifier: ^8.6.0\n        version: 8.6.0(react@18.3.1)\n      express:\n        specifier: ^4.21.2\n        version: 4.21.2\n      express-session:\n        specifier: ^1.18.2\n        version: 1.18.2\n      framer-motion:\n        specifier: ^11.18.2\n        version: 11.18.2(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      groq-sdk:\n        specifier: ^0.30.0\n        version: 0.30.0\n      input-otp:\n        specifier: ^1.4.2\n        version: 1.4.2(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      lucide-react:\n        specifier: ^0.453.0\n        version: 0.453.0(react@18.3.1)\n      memorystore:\n        specifier: ^1.6.7\n        version: 1.6.7\n      nanoid:\n        specifier: ^5.1.5\n        version: 5.1.5\n      next-themes:\n        specifier: ^0.4.6\n        version: 0.4.6(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      passport:\n        specifier: ^0.7.0\n        version: 0.7.0\n      passport-local:\n        specifier: ^1.0.0\n        version: 1.0.0\n      react:\n        specifier: ^18.3.1\n        version: 18.3.1\n      react-day-picker:\n        specifier: ^8.10.1\n        version: 8.10.1(date-fns@3.6.0)(react@18.3.1)\n      react-dom:\n        specifier: ^18.3.1\n        version: 18.3.1(react@18.3.1)\n      react-hook-form:\n        specifier: ^7.62.0\n        version: 7.62.0(react@18.3.1)\n      react-icons:\n        specifier: ^5.5.0\n        version: 5.5.0(react@18.3.1)\n      react-resizable-panels:\n        specifier: ^2.1.9\n        version: 2.1.9(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      recharts:\n        specifier: ^2.15.4\n        version: 2.15.4(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      simplex-noise:\n        specifier: ^4.0.3\n        version: 4.0.3\n      tailwind-merge:\n        specifier: ^2.6.0\n        version: 2.6.0\n      tailwindcss-animate:\n        specifier: ^1.0.7\n        version: 1.0.7(tailwindcss@3.4.17)\n      three:\n        specifier: ^0.179.1\n        version: 0.179.1\n      tw-animate-css:\n        specifier: ^1.3.8\n        version: 1.3.8\n      vaul:\n        specifier: ^1.1.2\n        version: 1.1.2(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      wouter:\n        specifier: ^3.7.1\n        version: 3.7.1(react@18.3.1)\n      ws:\n        specifier: ^8.18.3\n        version: 8.18.3(bufferutil@4.0.9)\n      zod:\n        specifier: ^3.25.76\n        version: 3.25.76\n      zod-validation-error:\n        specifier: ^3.5.3\n        version: 3.5.3(zod@3.25.76)\n    optionalDependencies:\n      bufferutil:\n        specifier: ^4.0.9\n        version: 4.0.9\n    devDependencies:\n      '@replit/vite-plugin-cartographer':\n        specifier: ^0.3.0\n        version: 0.3.0\n      '@replit/vite-plugin-runtime-error-modal':\n        specifier: ^0.0.3\n        version: 0.0.3\n      '@tailwindcss/typography':\n        specifier: ^0.5.16\n        version: 0.5.16(tailwindcss@3.4.17)\n      '@tailwindcss/vite':\n        specifier: ^4.1.13\n        version: 4.1.13(vite@5.4.20(@types/node@20.19.13)(lightningcss@1.30.1))\n      '@types/connect-pg-simple':\n        specifier: ^7.0.3\n        version: 7.0.3\n      '@types/express':\n        specifier: 4.17.21\n        version: 4.17.21\n      '@types/express-session':\n        specifier: ^1.18.2\n        version: 1.18.2\n      '@types/node':\n        specifier: ^20.19.13\n        version: 20.19.13\n      '@types/passport':\n        specifier: ^1.0.17\n        version: 1.0.17\n      '@types/passport-local':\n        specifier: ^1.0.38\n        version: 1.0.38\n      '@types/react':\n        specifier: ^18.3.24\n        version: 18.3.24\n      '@types/react-dom':\n        specifier: ^18.3.7\n        version: 18.3.7(@types/react@18.3.24)\n      '@types/ws':\n        specifier: ^8.18.1\n        version: 8.18.1\n      '@vitejs/plugin-react':\n        specifier: ^4.7.0\n        version: 4.7.0(vite@5.4.20(@types/node@20.19.13)(lightningcss@1.30.1))\n      autoprefixer:\n        specifier: ^10.4.21\n        version: 10.4.21(postcss@8.5.6)\n      cross-env:\n        specifier: ^10.0.0\n        version: 10.0.0\n      drizzle-kit:\n        specifier: ^0.30.6\n        version: 0.30.6\n      esbuild:\n        specifier: ^0.25.9\n        version: 0.25.9\n      postcss:\n        specifier: ^8.5.6\n        version: 8.5.6\n      tailwindcss:\n        specifier: ^3.4.17\n        version: 3.4.17\n      tsx:\n        specifier: ^4.20.5\n        version: 4.20.5\n      typescript:\n        specifier: 5.6.3\n        version: 5.6.3\n      vite:\n        specifier: ^5.4.20\n        version: 5.4.20(@types/node@20.19.13)(lightningcss@1.30.1)\n\npackages:\n\n  '@alloc/quick-lru@5.2.0':\n    resolution: {integrity: sha512-UrcABB+4bUrFABwbluTIBErXwvbsU/V7TZWfmbgJfbkwiBuziS9gxdODUyuiecfdGQ85jglMW6juS3+z5TsKLw==}\n    engines: {node: '>=10'}\n\n  '@babel/code-frame@7.27.1':\n    resolution: {integrity: sha512-cjQ7ZlQ0Mv3b47hABuTevyTuYN4i+loJKGeV9flcCgIK37cCXRh+L1bd3iBHlynerhQ7BhCkn2BPbQUL+rGqFg==}\n    engines: {node: '>=6.9.0'}\n\n  '@babel/compat-data@7.28.4':\n    resolution: {integrity: sha512-YsmSKC29MJwf0gF8Rjjrg5LQCmyh+j/nD8/eP7f+BeoQTKYqs9RoWbjGOdy0+1Ekr68RJZMUOPVQaQisnIo4Rw==}\n    engines: {node: '>=6.9.0'}\n\n  '@babel/core@7.28.4':\n    resolution: {integrity: sha512-2BCOP7TN8M+gVDj7/ht3hsaO/B/n5oDbiAyyvnRlNOs+u1o+JWNYTQrmpuNp1/Wq2gcFrI01JAW+paEKDMx/CA==}\n    engines: {node: '>=6.9.0'}\n\n  '@babel/generator@7.28.3':\n    resolution: {integrity: sha512-3lSpxGgvnmZznmBkCRnVREPUFJv2wrv9iAoFDvADJc0ypmdOxdUtcLeBgBJ6zE0PMeTKnxeQzyk0xTBq4Ep7zw==}\n    engines: {node: '>=6.9.0'}\n\n  '@babel/helper-compilation-targets@7.27.2':\n    resolution: {integrity: sha512-2+1thGUUWWjLTYTHZWK1n8Yga0ijBz1XAhUXcKy81rd5g6yh7hGqMp45v7cadSbEHc9G3OTv45SyneRN3ps4DQ==}\n    engines: {node: '>=6.9.0'}\n\n  '@babel/helper-globals@7.28.0':\n    resolution: {integrity: sha512-+W6cISkXFa1jXsDEdYA8HeevQT/FULhxzR99pxphltZcVaugps53THCeiWA8SguxxpSp3gKPiuYfSWopkLQ4hw==}\n    engines: {node: '>=6.9.0'}\n\n  '@babel/helper-module-imports@7.27.1':\n    resolution: {integrity: sha512-0gSFWUPNXNopqtIPQvlD5WgXYI5GY2kP2cCvoT8kczjbfcfuIljTbcWrulD1CIPIX2gt1wghbDy08yE1p+/r3w==}\n    engines: {node: '>=6.9.0'}\n\n  '@babel/helper-module-transforms@7.28.3':\n    resolution: {integrity: sha512-gytXUbs8k2sXS9PnQptz5o0QnpLL51SwASIORY6XaBKF88nsOT0Zw9szLqlSGQDP/4TljBAD5y98p2U1fqkdsw==}\n    engines: {node: '>=6.9.0'}\n    peerDependencies:\n      '@babel/core': ^7.0.0\n\n  '@babel/helper-plugin-utils@7.27.1':\n    resolution: {integrity: sha512-1gn1Up5YXka3YYAHGKpbideQ5Yjf1tDa9qYcgysz+cNCXukyLl6DjPXhD3VRwSb8c0J9tA4b2+rHEZtc6R0tlw==}\n    engines: {node: '>=6.9.0'}\n\n  '@babel/helper-string-parser@7.27.1':\n    resolution: {integrity: sha512-qMlSxKbpRlAridDExk92nSobyDdpPijUq2DW6oDnUqd0iOGxmQjyqhMIihI9+zv4LPyZdRje2cavWPbCbWm3eA==}\n    engines: {node: '>=6.9.0'}\n\n  '@babel/helper-validator-identifier@7.27.1':\n    resolution: {integrity: sha512-D2hP9eA+Sqx1kBZgzxZh0y1trbuU+JoDkiEwqhQ36nodYqJwyEIhPSdMNd7lOm/4io72luTPWH20Yda0xOuUow==}\n    engines: {node: '>=6.9.0'}\n\n  '@babel/helper-validator-option@7.27.1':\n    resolution: {integrity: sha512-YvjJow9FxbhFFKDSuFnVCe2WxXk1zWc22fFePVNEaWJEu8IrZVlda6N0uHwzZrUM1il7NC9Mlp4MaJYbYd9JSg==}\n    engines: {node: '>=6.9.0'}\n\n  '@babel/helpers@7.28.4':\n    resolution: {integrity: sha512-HFN59MmQXGHVyYadKLVumYsA9dBFun/ldYxipEjzA4196jpLZd8UjEEBLkbEkvfYreDqJhZxYAWFPtrfhNpj4w==}\n    engines: {node: '>=6.9.0'}\n\n  '@babel/parser@7.28.4':\n    resolution: {integrity: sha512-yZbBqeM6TkpP9du/I2pUZnJsRMGGvOuIrhjzC1AwHwW+6he4mni6Bp/m8ijn0iOuZuPI2BfkCoSRunpyjnrQKg==}\n    engines: {node: '>=6.0.0'}\n    hasBin: true\n\n  '@babel/plugin-transform-react-jsx-self@7.27.1':\n    resolution: {integrity: sha512-6UzkCs+ejGdZ5mFFC/OCUrv028ab2fp1znZmCZjAOBKiBK2jXD1O+BPSfX8X2qjJ75fZBMSnQn3Rq2mrBJK2mw==}\n    engines: {node: '>=6.9.0'}\n    peerDependencies:\n      '@babel/core': ^7.0.0-0\n\n  '@babel/plugin-transform-react-jsx-source@7.27.1':\n    resolution: {integrity: sha512-zbwoTsBruTeKB9hSq73ha66iFeJHuaFkUbwvqElnygoNbj/jHRsSeokowZFN3CZ64IvEqcmmkVe89OPXc7ldAw==}\n    engines: {node: '>=6.9.0'}\n    peerDependencies:\n      '@babel/core': ^7.0.0-0\n\n  '@babel/runtime@7.28.4':\n    resolution: {integrity: sha512-Q/N6JNWvIvPnLDvjlE1OUBLPQHH6l3CltCEsHIujp45zQUSSh8K+gHnaEX45yAT1nyngnINhvWtzN+Nb9D8RAQ==}\n    engines: {node: '>=6.9.0'}\n\n  '@babel/template@7.27.2':\n    resolution: {integrity: sha512-LPDZ85aEJyYSd18/DkjNh4/y1ntkE5KwUHWTiqgRxruuZL2F1yuHligVHLvcHY2vMHXttKFpJn6LwfI7cw7ODw==}\n    engines: {node: '>=6.9.0'}\n\n  '@babel/traverse@7.28.4':\n    resolution: {integrity: sha512-YEzuboP2qvQavAcjgQNVgsvHIDv6ZpwXvcvjmyySP2DIMuByS/6ioU5G9pYrWHM6T2YDfc7xga9iNzYOs12CFQ==}\n    engines: {node: '>=6.9.0'}\n\n  '@babel/types@7.28.4':\n    resolution: {integrity: sha512-bkFqkLhh3pMBUQQkpVgWDWq/lqzc2678eUyDlTBhRqhCHFguYYGM0Efga7tYk4TogG/3x0EEl66/OQ+WGbWB/Q==}\n    engines: {node: '>=6.9.0'}\n\n  '@dimforge/rapier3d-compat@0.12.0':\n    resolution: {integrity: sha512-uekIGetywIgopfD97oDL5PfeezkFpNhwlzlaEYNOA0N6ghdsOvh/HYjSMek5Q2O1PYvRSDFcqFVJl4r4ZBwOow==}\n\n  '@drizzle-team/brocli@0.10.2':\n    resolution: {integrity: sha512-z33Il7l5dKjUgGULTqBsQBQwckHh5AbIuxhdsIxDDiZAzBOrZO6q9ogcWC65kU382AfynTfgNumVcNIjuIua6w==}\n\n  '@epic-web/invariant@1.0.0':\n    resolution: {integrity: sha512-lrTPqgvfFQtR/eY/qkIzp98OGdNJu0m5ji3q/nJI8v3SXkRKEnWiOxMmbvcSoAIzv/cGiuvRy57k4suKQSAdwA==}\n\n  '@esbuild-kit/core-utils@3.3.2':\n    resolution: {integrity: sha512-sPRAnw9CdSsRmEtnsl2WXWdyquogVpB3yZ3dgwJfe8zrOzTsV7cJvmwrKVa+0ma5BoiGJ+BoqkMvawbayKUsqQ==}\n    deprecated: 'Merged into tsx: https://tsx.is'\n\n  '@esbuild-kit/esm-loader@2.6.5':\n    resolution: {integrity: sha512-FxEMIkJKnodyA1OaCUoEvbYRkoZlLZ4d/eXFu9Fh8CbBBgP5EmZxrfTRyN0qpXZ4vOvqnE5YdRdcrmUUXuU+dA==}\n    deprecated: 'Merged into tsx: https://tsx.is'\n\n  '@esbuild/aix-ppc64@0.19.12':\n    resolution: {integrity: sha512-bmoCYyWdEL3wDQIVbcyzRyeKLgk2WtWLTWz1ZIAZF/EGbNOwSA6ew3PftJ1PqMiOOGu0OyFMzG53L0zqIpPeNA==}\n    engines: {node: '>=12'}\n    cpu: [ppc64]\n    os: [aix]\n\n  '@esbuild/aix-ppc64@0.21.5':\n    resolution: {integrity: sha512-1SDgH6ZSPTlggy1yI6+Dbkiz8xzpHJEVAlF/AM1tHPLsf5STom9rwtjE4hKAF20FfXXNTFqEYXyJNWh1GiZedQ==}\n    engines: {node: '>=12'}\n    cpu: [ppc64]\n    os: [aix]\n\n  '@esbuild/aix-ppc64@0.25.9':\n    resolution: {integrity: sha512-OaGtL73Jck6pBKjNIe24BnFE6agGl+6KxDtTfHhy1HmhthfKouEcOhqpSL64K4/0WCtbKFLOdzD/44cJ4k9opA==}\n    engines: {node: '>=18'}\n    cpu: [ppc64]\n    os: [aix]\n\n  '@esbuild/android-arm64@0.18.20':\n    resolution: {integrity: sha512-Nz4rJcchGDtENV0eMKUNa6L12zz2zBDXuhj/Vjh18zGqB44Bi7MBMSXjgunJgjRhCmKOjnPuZp4Mb6OKqtMHLQ==}\n    engines: {node: '>=12'}\n    cpu: [arm64]\n    os: [android]\n\n  '@esbuild/android-arm64@0.19.12':\n    resolution: {integrity: sha512-P0UVNGIienjZv3f5zq0DP3Nt2IE/3plFzuaS96vihvD0Hd6H/q4WXUGpCxD/E8YrSXfNyRPbpTq+T8ZQioSuPA==}\n    engines: {node: '>=12'}\n    cpu: [arm64]\n    os: [android]\n\n  '@esbuild/android-arm64@0.21.5':\n    resolution: {integrity: sha512-c0uX9VAUBQ7dTDCjq+wdyGLowMdtR/GoC2U5IYk/7D1H1JYC0qseD7+11iMP2mRLN9RcCMRcjC4YMclCzGwS/A==}\n    engines: {node: '>=12'}\n    cpu: [arm64]\n    os: [android]\n\n  '@esbuild/android-arm64@0.25.9':\n    resolution: {integrity: sha512-IDrddSmpSv51ftWslJMvl3Q2ZT98fUSL2/rlUXuVqRXHCs5EUF1/f+jbjF5+NG9UffUDMCiTyh8iec7u8RlTLg==}\n    engines: {node: '>=18'}\n    cpu: [arm64]\n    os: [android]\n\n  '@esbuild/android-arm@0.18.20':\n    resolution: {integrity: sha512-fyi7TDI/ijKKNZTUJAQqiG5T7YjJXgnzkURqmGj13C6dCqckZBLdl4h7bkhHt/t0WP+zO9/zwroDvANaOqO5Sw==}\n    engines: {node: '>=12'}\n    cpu: [arm]\n    os: [android]\n\n  '@esbuild/android-arm@0.19.12':\n    resolution: {integrity: sha512-qg/Lj1mu3CdQlDEEiWrlC4eaPZ1KztwGJ9B6J+/6G+/4ewxJg7gqj8eVYWvao1bXrqGiW2rsBZFSX3q2lcW05w==}\n    engines: {node: '>=12'}\n    cpu: [arm]\n    os: [android]\n\n  '@esbuild/android-arm@0.21.5':\n    resolution: {integrity: sha512-vCPvzSjpPHEi1siZdlvAlsPxXl7WbOVUBBAowWug4rJHb68Ox8KualB+1ocNvT5fjv6wpkX6o/iEpbDrf68zcg==}\n    engines: {node: '>=12'}\n    cpu: [arm]\n    os: [android]\n\n  '@esbuild/android-arm@0.25.9':\n    resolution: {integrity: sha512-5WNI1DaMtxQ7t7B6xa572XMXpHAaI/9Hnhk8lcxF4zVN4xstUgTlvuGDorBguKEnZO70qwEcLpfifMLoxiPqHQ==}\n    engines: {node: '>=18'}\n    cpu: [arm]\n    os: [android]\n\n  '@esbuild/android-x64@0.18.20':\n    resolution: {integrity: sha512-8GDdlePJA8D6zlZYJV/jnrRAi6rOiNaCC/JclcXpB+KIuvfBN4owLtgzY2bsxnx666XjJx2kDPUmnTtR8qKQUg==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [android]\n\n  '@esbuild/android-x64@0.19.12':\n    resolution: {integrity: sha512-3k7ZoUW6Q6YqhdhIaq/WZ7HwBpnFBlW905Fa4s4qWJyiNOgT1dOqDiVAQFwBH7gBRZr17gLrlFCRzF6jFh7Kew==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [android]\n\n  '@esbuild/android-x64@0.21.5':\n    resolution: {integrity: sha512-D7aPRUUNHRBwHxzxRvp856rjUHRFW1SdQATKXH2hqA0kAZb1hKmi02OpYRacl0TxIGz/ZmXWlbZgjwWYaCakTA==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [android]\n\n  '@esbuild/android-x64@0.25.9':\n    resolution: {integrity: sha512-I853iMZ1hWZdNllhVZKm34f4wErd4lMyeV7BLzEExGEIZYsOzqDWDf+y082izYUE8gtJnYHdeDpN/6tUdwvfiw==}\n    engines: {node: '>=18'}\n    cpu: [x64]\n    os: [android]\n\n  '@esbuild/darwin-arm64@0.18.20':\n    resolution: {integrity: sha512-bxRHW5kHU38zS2lPTPOyuyTm+S+eobPUnTNkdJEfAddYgEcll4xkT8DB9d2008DtTbl7uJag2HuE5NZAZgnNEA==}\n    engines: {node: '>=12'}\n    cpu: [arm64]\n    os: [darwin]\n\n  '@esbuild/darwin-arm64@0.19.12':\n    resolution: {integrity: sha512-B6IeSgZgtEzGC42jsI+YYu9Z3HKRxp8ZT3cqhvliEHovq8HSX2YX8lNocDn79gCKJXOSaEot9MVYky7AKjCs8g==}\n    engines: {node: '>=12'}\n    cpu: [arm64]\n    os: [darwin]\n\n  '@esbuild/darwin-arm64@0.21.5':\n    resolution: {integrity: sha512-DwqXqZyuk5AiWWf3UfLiRDJ5EDd49zg6O9wclZ7kUMv2WRFr4HKjXp/5t8JZ11QbQfUS6/cRCKGwYhtNAY88kQ==}\n    engines: {node: '>=12'}\n    cpu: [arm64]\n    os: [darwin]\n\n  '@esbuild/darwin-arm64@0.25.9':\n    resolution: {integrity: sha512-XIpIDMAjOELi/9PB30vEbVMs3GV1v2zkkPnuyRRURbhqjyzIINwj+nbQATh4H9GxUgH1kFsEyQMxwiLFKUS6Rg==}\n    engines: {node: '>=18'}\n    cpu: [arm64]\n    os: [darwin]\n\n  '@esbuild/darwin-x64@0.18.20':\n    resolution: {integrity: sha512-pc5gxlMDxzm513qPGbCbDukOdsGtKhfxD1zJKXjCCcU7ju50O7MeAZ8c4krSJcOIJGFR+qx21yMMVYwiQvyTyQ==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [darwin]\n\n  '@esbuild/darwin-x64@0.19.12':\n    resolution: {integrity: sha512-hKoVkKzFiToTgn+41qGhsUJXFlIjxI/jSYeZf3ugemDYZldIXIxhvwN6erJGlX4t5h417iFuheZ7l+YVn05N3A==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [darwin]\n\n  '@esbuild/darwin-x64@0.21.5':\n    resolution: {integrity: sha512-se/JjF8NlmKVG4kNIuyWMV/22ZaerB+qaSi5MdrXtd6R08kvs2qCN4C09miupktDitvh8jRFflwGFBQcxZRjbw==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [darwin]\n\n  '@esbuild/darwin-x64@0.25.9':\n    resolution: {integrity: sha512-jhHfBzjYTA1IQu8VyrjCX4ApJDnH+ez+IYVEoJHeqJm9VhG9Dh2BYaJritkYK3vMaXrf7Ogr/0MQ8/MeIefsPQ==}\n    engines: {node: '>=18'}\n    cpu: [x64]\n    os: [darwin]\n\n  '@esbuild/freebsd-arm64@0.18.20':\n    resolution: {integrity: sha512-yqDQHy4QHevpMAaxhhIwYPMv1NECwOvIpGCZkECn8w2WFHXjEwrBn3CeNIYsibZ/iZEUemj++M26W3cNR5h+Tw==}\n    engines: {node: '>=12'}\n    cpu: [arm64]\n    os: [freebsd]\n\n  '@esbuild/freebsd-arm64@0.19.12':\n    resolution: {integrity: sha512-4aRvFIXmwAcDBw9AueDQ2YnGmz5L6obe5kmPT8Vd+/+x/JMVKCgdcRwH6APrbpNXsPz+K653Qg8HB/oXvXVukA==}\n    engines: {node: '>=12'}\n    cpu: [arm64]\n    os: [freebsd]\n\n  '@esbuild/freebsd-arm64@0.21.5':\n    resolution: {integrity: sha512-5JcRxxRDUJLX8JXp/wcBCy3pENnCgBR9bN6JsY4OmhfUtIHe3ZW0mawA7+RDAcMLrMIZaf03NlQiX9DGyB8h4g==}\n    engines: {node: '>=12'}\n    cpu: [arm64]\n    os: [freebsd]\n\n  '@esbuild/freebsd-arm64@0.25.9':\n    resolution: {integrity: sha512-z93DmbnY6fX9+KdD4Ue/H6sYs+bhFQJNCPZsi4XWJoYblUqT06MQUdBCpcSfuiN72AbqeBFu5LVQTjfXDE2A6Q==}\n    engines: {node: '>=18'}\n    cpu: [arm64]\n    os: [freebsd]\n\n  '@esbuild/freebsd-x64@0.18.20':\n    resolution: {integrity: sha512-tgWRPPuQsd3RmBZwarGVHZQvtzfEBOreNuxEMKFcd5DaDn2PbBxfwLcj4+aenoh7ctXcbXmOQIn8HI6mCSw5MQ==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [freebsd]\n\n  '@esbuild/freebsd-x64@0.19.12':\n    resolution: {integrity: sha512-EYoXZ4d8xtBoVN7CEwWY2IN4ho76xjYXqSXMNccFSx2lgqOG/1TBPW0yPx1bJZk94qu3tX0fycJeeQsKovA8gg==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [freebsd]\n\n  '@esbuild/freebsd-x64@0.21.5':\n    resolution: {integrity: sha512-J95kNBj1zkbMXtHVH29bBriQygMXqoVQOQYA+ISs0/2l3T9/kj42ow2mpqerRBxDJnmkUDCaQT/dfNXWX/ZZCQ==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [freebsd]\n\n  '@esbuild/freebsd-x64@0.25.9':\n    resolution: {integrity: sha512-mrKX6H/vOyo5v71YfXWJxLVxgy1kyt1MQaD8wZJgJfG4gq4DpQGpgTB74e5yBeQdyMTbgxp0YtNj7NuHN0PoZg==}\n    engines: {node: '>=18'}\n    cpu: [x64]\n    os: [freebsd]\n\n  '@esbuild/linux-arm64@0.18.20':\n    resolution: {integrity: sha512-2YbscF+UL7SQAVIpnWvYwM+3LskyDmPhe31pE7/aoTMFKKzIc9lLbyGUpmmb8a8AixOL61sQ/mFh3jEjHYFvdA==}\n    engines: {node: '>=12'}\n    cpu: [arm64]\n    os: [linux]\n\n  '@esbuild/linux-arm64@0.19.12':\n    resolution: {integrity: sha512-EoTjyYyLuVPfdPLsGVVVC8a0p1BFFvtpQDB/YLEhaXyf/5bczaGeN15QkR+O4S5LeJ92Tqotve7i1jn35qwvdA==}\n    engines: {node: '>=12'}\n    cpu: [arm64]\n    os: [linux]\n\n  '@esbuild/linux-arm64@0.21.5':\n    resolution: {integrity: sha512-ibKvmyYzKsBeX8d8I7MH/TMfWDXBF3db4qM6sy+7re0YXya+K1cem3on9XgdT2EQGMu4hQyZhan7TeQ8XkGp4Q==}\n    engines: {node: '>=12'}\n    cpu: [arm64]\n    os: [linux]\n\n  '@esbuild/linux-arm64@0.25.9':\n    resolution: {integrity: sha512-BlB7bIcLT3G26urh5Dmse7fiLmLXnRlopw4s8DalgZ8ef79Jj4aUcYbk90g8iCa2467HX8SAIidbL7gsqXHdRw==}\n    engines: {node: '>=18'}\n    cpu: [arm64]\n    os: [linux]\n\n  '@esbuild/linux-arm@0.18.20':\n    resolution: {integrity: sha512-/5bHkMWnq1EgKr1V+Ybz3s1hWXok7mDFUMQ4cG10AfW3wL02PSZi5kFpYKrptDsgb2WAJIvRcDm+qIvXf/apvg==}\n    engines: {node: '>=12'}\n    cpu: [arm]\n    os: [linux]\n\n  '@esbuild/linux-arm@0.19.12':\n    resolution: {integrity: sha512-J5jPms//KhSNv+LO1S1TX1UWp1ucM6N6XuL6ITdKWElCu8wXP72l9MM0zDTzzeikVyqFE6U8YAV9/tFyj0ti+w==}\n    engines: {node: '>=12'}\n    cpu: [arm]\n    os: [linux]\n\n  '@esbuild/linux-arm@0.21.5':\n    resolution: {integrity: sha512-bPb5AHZtbeNGjCKVZ9UGqGwo8EUu4cLq68E95A53KlxAPRmUyYv2D6F0uUI65XisGOL1hBP5mTronbgo+0bFcA==}\n    engines: {node: '>=12'}\n    cpu: [arm]\n    os: [linux]\n\n  '@esbuild/linux-arm@0.25.9':\n    resolution: {integrity: sha512-HBU2Xv78SMgaydBmdor38lg8YDnFKSARg1Q6AT0/y2ezUAKiZvc211RDFHlEZRFNRVhcMamiToo7bDx3VEOYQw==}\n    engines: {node: '>=18'}\n    cpu: [arm]\n    os: [linux]\n\n  '@esbuild/linux-ia32@0.18.20':\n    resolution: {integrity: sha512-P4etWwq6IsReT0E1KHU40bOnzMHoH73aXp96Fs8TIT6z9Hu8G6+0SHSw9i2isWrD2nbx2qo5yUqACgdfVGx7TA==}\n    engines: {node: '>=12'}\n    cpu: [ia32]\n    os: [linux]\n\n  '@esbuild/linux-ia32@0.19.12':\n    resolution: {integrity: sha512-Thsa42rrP1+UIGaWz47uydHSBOgTUnwBwNq59khgIwktK6x60Hivfbux9iNR0eHCHzOLjLMLfUMLCypBkZXMHA==}\n    engines: {node: '>=12'}\n    cpu: [ia32]\n    os: [linux]\n\n  '@esbuild/linux-ia32@0.21.5':\n    resolution: {integrity: sha512-YvjXDqLRqPDl2dvRODYmmhz4rPeVKYvppfGYKSNGdyZkA01046pLWyRKKI3ax8fbJoK5QbxblURkwK/MWY18Tg==}\n    engines: {node: '>=12'}\n    cpu: [ia32]\n    os: [linux]\n\n  '@esbuild/linux-ia32@0.25.9':\n    resolution: {integrity: sha512-e7S3MOJPZGp2QW6AK6+Ly81rC7oOSerQ+P8L0ta4FhVi+/j/v2yZzx5CqqDaWjtPFfYz21Vi1S0auHrap3Ma3A==}\n    engines: {node: '>=18'}\n    cpu: [ia32]\n    os: [linux]\n\n  '@esbuild/linux-loong64@0.18.20':\n    resolution: {integrity: sha512-nXW8nqBTrOpDLPgPY9uV+/1DjxoQ7DoB2N8eocyq8I9XuqJ7BiAMDMf9n1xZM9TgW0J8zrquIb/A7s3BJv7rjg==}\n    engines: {node: '>=12'}\n    cpu: [loong64]\n    os: [linux]\n\n  '@esbuild/linux-loong64@0.19.12':\n    resolution: {integrity: sha512-LiXdXA0s3IqRRjm6rV6XaWATScKAXjI4R4LoDlvO7+yQqFdlr1Bax62sRwkVvRIrwXxvtYEHHI4dm50jAXkuAA==}\n    engines: {node: '>=12'}\n    cpu: [loong64]\n    os: [linux]\n\n  '@esbuild/linux-loong64@0.21.5':\n    resolution: {integrity: sha512-uHf1BmMG8qEvzdrzAqg2SIG/02+4/DHB6a9Kbya0XDvwDEKCoC8ZRWI5JJvNdUjtciBGFQ5PuBlpEOXQj+JQSg==}\n    engines: {node: '>=12'}\n    cpu: [loong64]\n    os: [linux]\n\n  '@esbuild/linux-loong64@0.25.9':\n    resolution: {integrity: sha512-Sbe10Bnn0oUAB2AalYztvGcK+o6YFFA/9829PhOCUS9vkJElXGdphz0A3DbMdP8gmKkqPmPcMJmJOrI3VYB1JQ==}\n    engines: {node: '>=18'}\n    cpu: [loong64]\n    os: [linux]\n\n  '@esbuild/linux-mips64el@0.18.20':\n    resolution: {integrity: sha512-d5NeaXZcHp8PzYy5VnXV3VSd2D328Zb+9dEq5HE6bw6+N86JVPExrA6O68OPwobntbNJ0pzCpUFZTo3w0GyetQ==}\n    engines: {node: '>=12'}\n    cpu: [mips64el]\n    os: [linux]\n\n  '@esbuild/linux-mips64el@0.19.12':\n    resolution: {integrity: sha512-fEnAuj5VGTanfJ07ff0gOA6IPsvrVHLVb6Lyd1g2/ed67oU1eFzL0r9WL7ZzscD+/N6i3dWumGE1Un4f7Amf+w==}\n    engines: {node: '>=12'}\n    cpu: [mips64el]\n    os: [linux]\n\n  '@esbuild/linux-mips64el@0.21.5':\n    resolution: {integrity: sha512-IajOmO+KJK23bj52dFSNCMsz1QP1DqM6cwLUv3W1QwyxkyIWecfafnI555fvSGqEKwjMXVLokcV5ygHW5b3Jbg==}\n    engines: {node: '>=12'}\n    cpu: [mips64el]\n    os: [linux]\n\n  '@esbuild/linux-mips64el@0.25.9':\n    resolution: {integrity: sha512-YcM5br0mVyZw2jcQeLIkhWtKPeVfAerES5PvOzaDxVtIyZ2NUBZKNLjC5z3/fUlDgT6w89VsxP2qzNipOaaDyA==}\n    engines: {node: '>=18'}\n    cpu: [mips64el]\n    os: [linux]\n\n  '@esbuild/linux-ppc64@0.18.20':\n    resolution: {integrity: sha512-WHPyeScRNcmANnLQkq6AfyXRFr5D6N2sKgkFo2FqguP44Nw2eyDlbTdZwd9GYk98DZG9QItIiTlFLHJHjxP3FA==}\n    engines: {node: '>=12'}\n    cpu: [ppc64]\n    os: [linux]\n\n  '@esbuild/linux-ppc64@0.19.12':\n    resolution: {integrity: sha512-nYJA2/QPimDQOh1rKWedNOe3Gfc8PabU7HT3iXWtNUbRzXS9+vgB0Fjaqr//XNbd82mCxHzik2qotuI89cfixg==}\n    engines: {node: '>=12'}\n    cpu: [ppc64]\n    os: [linux]\n\n  '@esbuild/linux-ppc64@0.21.5':\n    resolution: {integrity: sha512-1hHV/Z4OEfMwpLO8rp7CvlhBDnjsC3CttJXIhBi+5Aj5r+MBvy4egg7wCbe//hSsT+RvDAG7s81tAvpL2XAE4w==}\n    engines: {node: '>=12'}\n    cpu: [ppc64]\n    os: [linux]\n\n  '@esbuild/linux-ppc64@0.25.9':\n    resolution: {integrity: sha512-++0HQvasdo20JytyDpFvQtNrEsAgNG2CY1CLMwGXfFTKGBGQT3bOeLSYE2l1fYdvML5KUuwn9Z8L1EWe2tzs1w==}\n    engines: {node: '>=18'}\n    cpu: [ppc64]\n    os: [linux]\n\n  '@esbuild/linux-riscv64@0.18.20':\n    resolution: {integrity: sha512-WSxo6h5ecI5XH34KC7w5veNnKkju3zBRLEQNY7mv5mtBmrP/MjNBCAlsM2u5hDBlS3NGcTQpoBvRzqBcRtpq1A==}\n    engines: {node: '>=12'}\n    cpu: [riscv64]\n    os: [linux]\n\n  '@esbuild/linux-riscv64@0.19.12':\n    resolution: {integrity: sha512-2MueBrlPQCw5dVJJpQdUYgeqIzDQgw3QtiAHUC4RBz9FXPrskyyU3VI1hw7C0BSKB9OduwSJ79FTCqtGMWqJHg==}\n    engines: {node: '>=12'}\n    cpu: [riscv64]\n    os: [linux]\n\n  '@esbuild/linux-riscv64@0.21.5':\n    resolution: {integrity: sha512-2HdXDMd9GMgTGrPWnJzP2ALSokE/0O5HhTUvWIbD3YdjME8JwvSCnNGBnTThKGEB91OZhzrJ4qIIxk/SBmyDDA==}\n    engines: {node: '>=12'}\n    cpu: [riscv64]\n    os: [linux]\n\n  '@esbuild/linux-riscv64@0.25.9':\n    resolution: {integrity: sha512-uNIBa279Y3fkjV+2cUjx36xkx7eSjb8IvnL01eXUKXez/CBHNRw5ekCGMPM0BcmqBxBcdgUWuUXmVWwm4CH9kg==}\n    engines: {node: '>=18'}\n    cpu: [riscv64]\n    os: [linux]\n\n  '@esbuild/linux-s390x@0.18.20':\n    resolution: {integrity: sha512-+8231GMs3mAEth6Ja1iK0a1sQ3ohfcpzpRLH8uuc5/KVDFneH6jtAJLFGafpzpMRO6DzJ6AvXKze9LfFMrIHVQ==}\n    engines: {node: '>=12'}\n    cpu: [s390x]\n    os: [linux]\n\n  '@esbuild/linux-s390x@0.19.12':\n    resolution: {integrity: sha512-+Pil1Nv3Umes4m3AZKqA2anfhJiVmNCYkPchwFJNEJN5QxmTs1uzyy4TvmDrCRNT2ApwSari7ZIgrPeUx4UZDg==}\n    engines: {node: '>=12'}\n    cpu: [s390x]\n    os: [linux]\n\n  '@esbuild/linux-s390x@0.21.5':\n    resolution: {integrity: sha512-zus5sxzqBJD3eXxwvjN1yQkRepANgxE9lgOW2qLnmr8ikMTphkjgXu1HR01K4FJg8h1kEEDAqDcZQtbrRnB41A==}\n    engines: {node: '>=12'}\n    cpu: [s390x]\n    os: [linux]\n\n  '@esbuild/linux-s390x@0.25.9':\n    resolution: {integrity: sha512-Mfiphvp3MjC/lctb+7D287Xw1DGzqJPb/J2aHHcHxflUo+8tmN/6d4k6I2yFR7BVo5/g7x2Monq4+Yew0EHRIA==}\n    engines: {node: '>=18'}\n    cpu: [s390x]\n    os: [linux]\n\n  '@esbuild/linux-x64@0.18.20':\n    resolution: {integrity: sha512-UYqiqemphJcNsFEskc73jQ7B9jgwjWrSayxawS6UVFZGWrAAtkzjxSqnoclCXxWtfwLdzU+vTpcNYhpn43uP1w==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [linux]\n\n  '@esbuild/linux-x64@0.19.12':\n    resolution: {integrity: sha512-B71g1QpxfwBvNrfyJdVDexenDIt1CiDN1TIXLbhOw0KhJzE78KIFGX6OJ9MrtC0oOqMWf+0xop4qEU8JrJTwCg==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [linux]\n\n  '@esbuild/linux-x64@0.21.5':\n    resolution: {integrity: sha512-1rYdTpyv03iycF1+BhzrzQJCdOuAOtaqHTWJZCWvijKD2N5Xu0TtVC8/+1faWqcP9iBCWOmjmhoH94dH82BxPQ==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [linux]\n\n  '@esbuild/linux-x64@0.25.9':\n    resolution: {integrity: sha512-iSwByxzRe48YVkmpbgoxVzn76BXjlYFXC7NvLYq+b+kDjyyk30J0JY47DIn8z1MO3K0oSl9fZoRmZPQI4Hklzg==}\n    engines: {node: '>=18'}\n    cpu: [x64]\n    os: [linux]\n\n  '@esbuild/netbsd-arm64@0.25.9':\n    resolution: {integrity: sha512-9jNJl6FqaUG+COdQMjSCGW4QiMHH88xWbvZ+kRVblZsWrkXlABuGdFJ1E9L7HK+T0Yqd4akKNa/lO0+jDxQD4Q==}\n    engines: {node: '>=18'}\n    cpu: [arm64]\n    os: [netbsd]\n\n  '@esbuild/netbsd-x64@0.18.20':\n    resolution: {integrity: sha512-iO1c++VP6xUBUmltHZoMtCUdPlnPGdBom6IrO4gyKPFFVBKioIImVooR5I83nTew5UOYrk3gIJhbZh8X44y06A==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [netbsd]\n\n  '@esbuild/netbsd-x64@0.19.12':\n    resolution: {integrity: sha512-3ltjQ7n1owJgFbuC61Oj++XhtzmymoCihNFgT84UAmJnxJfm4sYCiSLTXZtE00VWYpPMYc+ZQmB6xbSdVh0JWA==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [netbsd]\n\n  '@esbuild/netbsd-x64@0.21.5':\n    resolution: {integrity: sha512-Woi2MXzXjMULccIwMnLciyZH4nCIMpWQAs049KEeMvOcNADVxo0UBIQPfSmxB3CWKedngg7sWZdLvLczpe0tLg==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [netbsd]\n\n  '@esbuild/netbsd-x64@0.25.9':\n    resolution: {integrity: sha512-RLLdkflmqRG8KanPGOU7Rpg829ZHu8nFy5Pqdi9U01VYtG9Y0zOG6Vr2z4/S+/3zIyOxiK6cCeYNWOFR9QP87g==}\n    engines: {node: '>=18'}\n    cpu: [x64]\n    os: [netbsd]\n\n  '@esbuild/openbsd-arm64@0.25.9':\n    resolution: {integrity: sha512-YaFBlPGeDasft5IIM+CQAhJAqS3St3nJzDEgsgFixcfZeyGPCd6eJBWzke5piZuZ7CtL656eOSYKk4Ls2C0FRQ==}\n    engines: {node: '>=18'}\n    cpu: [arm64]\n    os: [openbsd]\n\n  '@esbuild/openbsd-x64@0.18.20':\n    resolution: {integrity: sha512-e5e4YSsuQfX4cxcygw/UCPIEP6wbIL+se3sxPdCiMbFLBWu0eiZOJ7WoD+ptCLrmjZBK1Wk7I6D/I3NglUGOxg==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [openbsd]\n\n  '@esbuild/openbsd-x64@0.19.12':\n    resolution: {integrity: sha512-RbrfTB9SWsr0kWmb9srfF+L933uMDdu9BIzdA7os2t0TXhCRjrQyCeOt6wVxr79CKD4c+p+YhCj31HBkYcXebw==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [openbsd]\n\n  '@esbuild/openbsd-x64@0.21.5':\n    resolution: {integrity: sha512-HLNNw99xsvx12lFBUwoT8EVCsSvRNDVxNpjZ7bPn947b8gJPzeHWyNVhFsaerc0n3TsbOINvRP2byTZ5LKezow==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [openbsd]\n\n  '@esbuild/openbsd-x64@0.25.9':\n    resolution: {integrity: sha512-1MkgTCuvMGWuqVtAvkpkXFmtL8XhWy+j4jaSO2wxfJtilVCi0ZE37b8uOdMItIHz4I6z1bWWtEX4CJwcKYLcuA==}\n    engines: {node: '>=18'}\n    cpu: [x64]\n    os: [openbsd]\n\n  '@esbuild/openharmony-arm64@0.25.9':\n    resolution: {integrity: sha512-4Xd0xNiMVXKh6Fa7HEJQbrpP3m3DDn43jKxMjxLLRjWnRsfxjORYJlXPO4JNcXtOyfajXorRKY9NkOpTHptErg==}\n    engines: {node: '>=18'}\n    cpu: [arm64]\n    os: [openharmony]\n\n  '@esbuild/sunos-x64@0.18.20':\n    resolution: {integrity: sha512-kDbFRFp0YpTQVVrqUd5FTYmWo45zGaXe0X8E1G/LKFC0v8x0vWrhOWSLITcCn63lmZIxfOMXtCfti/RxN/0wnQ==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [sunos]\n\n  '@esbuild/sunos-x64@0.19.12':\n    resolution: {integrity: sha512-HKjJwRrW8uWtCQnQOz9qcU3mUZhTUQvi56Q8DPTLLB+DawoiQdjsYq+j+D3s9I8VFtDr+F9CjgXKKC4ss89IeA==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [sunos]\n\n  '@esbuild/sunos-x64@0.21.5':\n    resolution: {integrity: sha512-6+gjmFpfy0BHU5Tpptkuh8+uw3mnrvgs+dSPQXQOv3ekbordwnzTVEb4qnIvQcYXq6gzkyTnoZ9dZG+D4garKg==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [sunos]\n\n  '@esbuild/sunos-x64@0.25.9':\n    resolution: {integrity: sha512-WjH4s6hzo00nNezhp3wFIAfmGZ8U7KtrJNlFMRKxiI9mxEK1scOMAaa9i4crUtu+tBr+0IN6JCuAcSBJZfnphw==}\n    engines: {node: '>=18'}\n    cpu: [x64]\n    os: [sunos]\n\n  '@esbuild/win32-arm64@0.18.20':\n    resolution: {integrity: sha512-ddYFR6ItYgoaq4v4JmQQaAI5s7npztfV4Ag6NrhiaW0RrnOXqBkgwZLofVTlq1daVTQNhtI5oieTvkRPfZrePg==}\n    engines: {node: '>=12'}\n    cpu: [arm64]\n    os: [win32]\n\n  '@esbuild/win32-arm64@0.19.12':\n    resolution: {integrity: sha512-URgtR1dJnmGvX864pn1B2YUYNzjmXkuJOIqG2HdU62MVS4EHpU2946OZoTMnRUHklGtJdJZ33QfzdjGACXhn1A==}\n    engines: {node: '>=12'}\n    cpu: [arm64]\n    os: [win32]\n\n  '@esbuild/win32-arm64@0.21.5':\n    resolution: {integrity: sha512-Z0gOTd75VvXqyq7nsl93zwahcTROgqvuAcYDUr+vOv8uHhNSKROyU961kgtCD1e95IqPKSQKH7tBTslnS3tA8A==}\n    engines: {node: '>=12'}\n    cpu: [arm64]\n    os: [win32]\n\n  '@esbuild/win32-arm64@0.25.9':\n    resolution: {integrity: sha512-mGFrVJHmZiRqmP8xFOc6b84/7xa5y5YvR1x8djzXpJBSv/UsNK6aqec+6JDjConTgvvQefdGhFDAs2DLAds6gQ==}\n    engines: {node: '>=18'}\n    cpu: [arm64]\n    os: [win32]\n\n  '@esbuild/win32-ia32@0.18.20':\n    resolution: {integrity: sha512-Wv7QBi3ID/rROT08SABTS7eV4hX26sVduqDOTe1MvGMjNd3EjOz4b7zeexIR62GTIEKrfJXKL9LFxTYgkyeu7g==}\n    engines: {node: '>=12'}\n    cpu: [ia32]\n    os: [win32]\n\n  '@esbuild/win32-ia32@0.19.12':\n    resolution: {integrity: sha512-+ZOE6pUkMOJfmxmBZElNOx72NKpIa/HFOMGzu8fqzQJ5kgf6aTGrcJaFsNiVMH4JKpMipyK+7k0n2UXN7a8YKQ==}\n    engines: {node: '>=12'}\n    cpu: [ia32]\n    os: [win32]\n\n  '@esbuild/win32-ia32@0.21.5':\n    resolution: {integrity: sha512-SWXFF1CL2RVNMaVs+BBClwtfZSvDgtL//G/smwAc5oVK/UPu2Gu9tIaRgFmYFFKrmg3SyAjSrElf0TiJ1v8fYA==}\n    engines: {node: '>=12'}\n    cpu: [ia32]\n    os: [win32]\n\n  '@esbuild/win32-ia32@0.25.9':\n    resolution: {integrity: sha512-b33gLVU2k11nVx1OhX3C8QQP6UHQK4ZtN56oFWvVXvz2VkDoe6fbG8TOgHFxEvqeqohmRnIHe5A1+HADk4OQww==}\n    engines: {node: '>=18'}\n    cpu: [ia32]\n    os: [win32]\n\n  '@esbuild/win32-x64@0.18.20':\n    resolution: {integrity: sha512-kTdfRcSiDfQca/y9QIkng02avJ+NCaQvrMejlsB3RRv5sE9rRoeBPISaZpKxHELzRxZyLvNts1P27W3wV+8geQ==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [win32]\n\n  '@esbuild/win32-x64@0.19.12':\n    resolution: {integrity: sha512-T1QyPSDCyMXaO3pzBkF96E8xMkiRYbUEZADd29SyPGabqxMViNoii+NcK7eWJAEoU6RZyEm5lVSIjTmcdoB9HA==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [win32]\n\n  '@esbuild/win32-x64@0.21.5':\n    resolution: {integrity: sha512-tQd/1efJuzPC6rCFwEvLtci/xNFcTZknmXs98FYDfGE4wP9ClFV98nyKrzJKVPMhdDnjzLhdUyMX4PsQAPjwIw==}\n    engines: {node: '>=12'}\n    cpu: [x64]\n    os: [win32]\n\n  '@esbuild/win32-x64@0.25.9':\n    resolution: {integrity: sha512-PPOl1mi6lpLNQxnGoyAfschAodRFYXJ+9fs6WHXz7CSWKbOqiMZsubC+BQsVKuul+3vKLuwTHsS2c2y9EoKwxQ==}\n    engines: {node: '>=18'}\n    cpu: [x64]\n    os: [win32]\n\n  '@floating-ui/core@1.7.3':\n    resolution: {integrity: sha512-sGnvb5dmrJaKEZ+LDIpguvdX3bDlEllmv4/ClQ9awcmCZrlx5jQyyMWFM5kBI+EyNOCDDiKk8il0zeuX3Zlg/w==}\n\n  '@floating-ui/dom@1.7.4':\n    resolution: {integrity: sha512-OOchDgh4F2CchOX94cRVqhvy7b3AFb+/rQXyswmzmGakRfkMgoWVjfnLWkRirfLEfuD4ysVW16eXzwt3jHIzKA==}\n\n  '@floating-ui/react-dom@2.1.6':\n    resolution: {integrity: sha512-4JX6rEatQEvlmgU80wZyq9RT96HZJa88q8hp0pBd+LrczeDI4o6uA2M+uvxngVHo4Ihr8uibXxH6+70zhAFrVw==}\n    peerDependencies:\n      react: '>=16.8.0'\n      react-dom: '>=16.8.0'\n\n  '@floating-ui/utils@0.2.10':\n    resolution: {integrity: sha512-aGTxbpbg8/b5JfU1HXSrbH3wXZuLPJcNEcZQFMxLs3oSzgtVu6nFPkbbGGUvBcUjKV2YyB9Wxxabo+HEH9tcRQ==}\n\n  '@hookform/resolvers@3.10.0':\n    resolution: {integrity: sha512-79Dv+3mDF7i+2ajj7SkypSKHhl1cbln1OGavqrsF7p6mbUv11xpqpacPsGDCTRvCSjEEIez2ef1NveSVL3b0Ag==}\n    peerDependencies:\n      react-hook-form: ^7.0.0\n\n  '@isaacs/cliui@8.0.2':\n    resolution: {integrity: sha512-O8jcjabXaleOG9DQ0+ARXWZBTfnP4WNAqzuiJK7ll44AmxGKv/J2M4TPjxjY3znBCfvBXFzucm1twdyFybFqEA==}\n    engines: {node: '>=12'}\n\n  '@isaacs/fs-minipass@4.0.1':\n    resolution: {integrity: sha512-wgm9Ehl2jpeqP3zw/7mo3kRHFp5MEDhqAdwy1fTGkHAwnkGOVsgpvQhL8B5n1qlb01jV3n/bI0ZfZp5lWA1k4w==}\n    engines: {node: '>=18.0.0'}\n\n  '@jridgewell/gen-mapping@0.3.13':\n    resolution: {integrity: sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==}\n\n  '@jridgewell/remapping@2.3.5':\n    resolution: {integrity: sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==}\n\n  '@jridgewell/resolve-uri@3.1.2':\n    resolution: {integrity: sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==}\n    engines: {node: '>=6.0.0'}\n\n  '@jridgewell/sourcemap-codec@1.5.5':\n    resolution: {integrity: sha512-cYQ9310grqxueWbl+WuIUIaiUaDcj7WOq5fVhEljNVgRfOUhY9fy2zTvfoqWsnebh8Sl70VScFbICvJnLKB0Og==}\n\n  '@jridgewell/trace-mapping@0.3.30':\n    resolution: {integrity: sha512-GQ7Nw5G2lTu/BtHTKfXhKHok2WGetd4XYcVKGx00SjAk8GMwgJM3zr6zORiPGuOE+/vkc90KtTosSSvaCjKb2Q==}\n\n  '@neondatabase/serverless@0.10.4':\n    resolution: {integrity: sha512-2nZuh3VUO9voBauuh+IGYRhGU/MskWHt1IuZvHcJw6GLjDgtqj/KViKo7SIrLdGLdot7vFbiRRw+BgEy3wT9HA==}\n\n  '@nodelib/fs.scandir@2.1.5':\n    resolution: {integrity: sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==}\n    engines: {node: '>= 8'}\n\n  '@nodelib/fs.stat@2.0.5':\n    resolution: {integrity: sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==}\n    engines: {node: '>= 8'}\n\n  '@nodelib/fs.walk@1.2.8':\n    resolution: {integrity: sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==}\n    engines: {node: '>= 8'}\n\n  '@petamoriken/float16@3.9.2':\n    resolution: {integrity: sha512-VgffxawQde93xKxT3qap3OH+meZf7VaSB5Sqd4Rqc+FP5alWbpOyan/7tRbOAvynjpG3GpdtAuGU/NdhQpmrog==}\n\n  '@pkgjs/parseargs@0.11.0':\n    resolution: {integrity: sha512-+1VkjdD0QBLPodGrJUeqarH8VAIvQODIbwh9XpP5Syisf7YoQgsJKPNFoqqLQlu+VQ/tVSshMR6loPMn8U+dPg==}\n    engines: {node: '>=14'}\n\n  '@radix-ui/number@1.1.1':\n    resolution: {integrity: sha512-MkKCwxlXTgz6CFoJx3pCwn07GKp36+aZyu/u2Ln2VrA5DcdyCZkASEDBTd8x5whTQQL5CiYf4prXKLcgQdv29g==}\n\n  '@radix-ui/primitive@1.1.3':\n    resolution: {integrity: sha512-JTF99U/6XIjCBo0wqkU5sK10glYe27MRRsfwoiq5zzOEZLHU3A3KCMa5X/azekYRCJ0HlwI0crAXS/5dEHTzDg==}\n\n  '@radix-ui/react-accordion@1.2.12':\n    resolution: {integrity: sha512-T4nygeh9YE9dLRPhAHSeOZi7HBXo+0kYIPJXayZfvWOWA0+n3dESrZbjfDPUABkUNym6Hd+f2IR113To8D2GPA==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-alert-dialog@1.1.15':\n    resolution: {integrity: sha512-oTVLkEw5GpdRe29BqJ0LSDFWI3qu0vR1M0mUkOQWDIUnY/QIkLpgDMWuKxP94c2NAC2LGcgVhG1ImF3jkZ5wXw==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-arrow@1.1.7':\n    resolution: {integrity: sha512-F+M1tLhO+mlQaOWspE8Wstg+z6PwxwRd8oQ8IXceWz92kfAmalTRf0EjrouQeo7QssEPfCn05B4Ihs1K9WQ/7w==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-aspect-ratio@1.1.7':\n    resolution: {integrity: sha512-Yq6lvO9HQyPwev1onK1daHCHqXVLzPhSVjmsNjCa2Zcxy2f7uJD2itDtxknv6FzAKCwD1qQkeVDmX/cev13n/g==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-avatar@1.1.10':\n    resolution: {integrity: sha512-V8piFfWapM5OmNCXTzVQY+E1rDa53zY+MQ4Y7356v4fFz6vqCyUtIz2rUD44ZEdwg78/jKmMJHj07+C/Z/rcog==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-checkbox@1.3.3':\n    resolution: {integrity: sha512-wBbpv+NQftHDdG86Qc0pIyXk5IR3tM8Vd0nWLKDcX8nNn4nXFOFwsKuqw2okA/1D/mpaAkmuyndrPJTYDNZtFw==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-collapsible@1.1.12':\n    resolution: {integrity: sha512-Uu+mSh4agx2ib1uIGPP4/CKNULyajb3p92LsVXmH2EHVMTfZWpll88XJ0j4W0z3f8NK1eYl1+Mf/szHPmcHzyA==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-collection@1.1.7':\n    resolution: {integrity: sha512-Fh9rGN0MoI4ZFUNyfFVNU4y9LUz93u9/0K+yLgA2bwRojxM8JU1DyvvMBabnZPBgMWREAJvU2jjVzq+LrFUglw==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-compose-refs@1.1.2':\n    resolution: {integrity: sha512-z4eqJvfiNnFMHIIvXP3CY57y2WJs5g2v3X0zm9mEJkrkNv4rDxu+sg9Jh8EkXyeqBkB7SOcboo9dMVqhyrACIg==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-context-menu@2.2.16':\n    resolution: {integrity: sha512-O8morBEW+HsVG28gYDZPTrT9UUovQUlJue5YO836tiTJhuIWBm/zQHc7j388sHWtdH/xUZurK9olD2+pcqx5ww==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-context@1.1.2':\n    resolution: {integrity: sha512-jCi/QKUM2r1Ju5a3J64TH2A5SpKAgh0LpknyqdQ4m6DCV0xJ2HG1xARRwNGPQfi1SLdLWZ1OJz6F4OMBBNiGJA==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-dialog@1.1.15':\n    resolution: {integrity: sha512-TCglVRtzlffRNxRMEyR36DGBLJpeusFcgMVD9PZEzAKnUs1lKCgX5u9BmC2Yg+LL9MgZDugFFs1Vl+Jp4t/PGw==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-direction@1.1.1':\n    resolution: {integrity: sha512-1UEWRX6jnOA2y4H5WczZ44gOOjTEmlqv1uNW4GAJEO5+bauCBhv8snY65Iw5/VOS/ghKN9gr2KjnLKxrsvoMVw==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-dismissable-layer@1.1.11':\n    resolution: {integrity: sha512-Nqcp+t5cTB8BinFkZgXiMJniQH0PsUt2k51FUhbdfeKvc4ACcG2uQniY/8+h1Yv6Kza4Q7lD7PQV0z0oicE0Mg==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-dropdown-menu@2.1.16':\n    resolution: {integrity: sha512-1PLGQEynI/3OX/ftV54COn+3Sud/Mn8vALg2rWnBLnRaGtJDduNW/22XjlGgPdpcIbiQxjKtb7BkcjP00nqfJw==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-focus-guards@1.1.3':\n    resolution: {integrity: sha512-0rFg/Rj2Q62NCm62jZw0QX7a3sz6QCQU0LpZdNrJX8byRGaGVTqbrW9jAoIAHyMQqsNpeZ81YgSizOt5WXq0Pw==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-focus-scope@1.1.7':\n    resolution: {integrity: sha512-t2ODlkXBQyn7jkl6TNaw/MtVEVvIGelJDCG41Okq/KwUsJBwQ4XVZsHAVUkK4mBv3ewiAS3PGuUWuY2BoK4ZUw==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-hover-card@1.1.15':\n    resolution: {integrity: sha512-qgTkjNT1CfKMoP0rcasmlH2r1DAiYicWsDsufxl940sT2wHNEWWv6FMWIQXWhVdmC1d/HYfbhQx60KYyAtKxjg==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-id@1.1.1':\n    resolution: {integrity: sha512-kGkGegYIdQsOb4XjsfM97rXsiHaBwco+hFI66oO4s9LU+PLAC5oJ7khdOVFxkhsmlbpUqDAvXw11CluXP+jkHg==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-label@2.1.7':\n    resolution: {integrity: sha512-YT1GqPSL8kJn20djelMX7/cTRp/Y9w5IZHvfxQTVHrOqa2yMl7i/UfMqKRU5V7mEyKTrUVgJXhNQPVCG8PBLoQ==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-menu@2.1.16':\n    resolution: {integrity: sha512-72F2T+PLlphrqLcAotYPp0uJMr5SjP5SL01wfEspJbru5Zs5vQaSHb4VB3ZMJPimgHHCHG7gMOeOB9H3Hdmtxg==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-menubar@1.1.16':\n    resolution: {integrity: sha512-EB1FktTz5xRRi2Er974AUQZWg2yVBb1yjip38/lgwtCVRd3a+maUoGHN/xs9Yv8SY8QwbSEb+YrxGadVWbEutA==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-navigation-menu@1.2.14':\n    resolution: {integrity: sha512-YB9mTFQvCOAQMHU+C/jVl96WmuWeltyUEpRJJky51huhds5W2FQr1J8D/16sQlf0ozxkPK8uF3niQMdUwZPv5w==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-popover@1.1.15':\n    resolution: {integrity: sha512-kr0X2+6Yy/vJzLYJUPCZEc8SfQcf+1COFoAqauJm74umQhta9M7lNJHP7QQS3vkvcGLQUbWpMzwrXYwrYztHKA==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-popper@1.2.8':\n    resolution: {integrity: sha512-0NJQ4LFFUuWkE7Oxf0htBKS6zLkkjBH+hM1uk7Ng705ReR8m/uelduy1DBo0PyBXPKVnBA6YBlU94MBGXrSBCw==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-portal@1.1.9':\n    resolution: {integrity: sha512-bpIxvq03if6UNwXZ+HTK71JLh4APvnXntDc6XOX8UVq4XQOVl7lwok0AvIl+b8zgCw3fSaVTZMpAPPagXbKmHQ==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-presence@1.1.5':\n    resolution: {integrity: sha512-/jfEwNDdQVBCNvjkGit4h6pMOzq8bHkopq458dPt2lMjx+eBQUohZNG9A7DtO/O5ukSbxuaNGXMjHicgwy6rQQ==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-primitive@2.1.3':\n    resolution: {integrity: sha512-m9gTwRkhy2lvCPe6QJp4d3G1TYEUHn/FzJUtq9MjH46an1wJU+GdoGC5VLof8RX8Ft/DlpshApkhswDLZzHIcQ==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-progress@1.1.7':\n    resolution: {integrity: sha512-vPdg/tF6YC/ynuBIJlk1mm7Le0VgW6ub6J2UWnTQ7/D23KXcPI1qy+0vBkgKgd38RCMJavBXpB83HPNFMTb0Fg==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-radio-group@1.3.8':\n    resolution: {integrity: sha512-VBKYIYImA5zsxACdisNQ3BjCBfmbGH3kQlnFVqlWU4tXwjy7cGX8ta80BcrO+WJXIn5iBylEH3K6ZTlee//lgQ==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-roving-focus@1.1.11':\n    resolution: {integrity: sha512-7A6S9jSgm/S+7MdtNDSb+IU859vQqJ/QAtcYQcfFC6W8RS4IxIZDldLR0xqCFZ6DCyrQLjLPsxtTNch5jVA4lA==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-scroll-area@1.2.10':\n    resolution: {integrity: sha512-tAXIa1g3sM5CGpVT0uIbUx/U3Gs5N8T52IICuCtObaos1S8fzsrPXG5WObkQN3S6NVl6wKgPhAIiBGbWnvc97A==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-select@2.2.6':\n    resolution: {integrity: sha512-I30RydO+bnn2PQztvo25tswPH+wFBjehVGtmagkU78yMdwTwVf12wnAOF+AeP8S2N8xD+5UPbGhkUfPyvT+mwQ==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-separator@1.1.7':\n    resolution: {integrity: sha512-0HEb8R9E8A+jZjvmFCy/J4xhbXy3TV+9XSnGJ3KvTtjlIUy/YQ/p6UYZvi7YbeoeXdyU9+Y3scizK6hkY37baA==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-slider@1.3.6':\n    resolution: {integrity: sha512-JPYb1GuM1bxfjMRlNLE+BcmBC8onfCi60Blk7OBqi2MLTFdS+8401U4uFjnwkOr49BLmXxLC6JHkvAsx5OJvHw==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-slot@1.2.3':\n    resolution: {integrity: sha512-aeNmHnBxbi2St0au6VBVC7JXFlhLlOnvIIlePNniyUNAClzmtAUEY8/pBiK3iHjufOlwA+c20/8jngo7xcrg8A==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-switch@1.2.6':\n    resolution: {integrity: sha512-bByzr1+ep1zk4VubeEVViV592vu2lHE2BZY5OnzehZqOOgogN80+mNtCqPkhn2gklJqOpxWgPoYTSnhBCqpOXQ==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-tabs@1.1.13':\n    resolution: {integrity: sha512-7xdcatg7/U+7+Udyoj2zodtI9H/IIopqo+YOIcZOq1nJwXWBZ9p8xiu5llXlekDbZkca79a/fozEYQXIA4sW6A==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-toast@1.2.15':\n    resolution: {integrity: sha512-3OSz3TacUWy4WtOXV38DggwxoqJK4+eDkNMl5Z/MJZaoUPaP4/9lf81xXMe1I2ReTAptverZUpbPY4wWwWyL5g==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-toggle-group@1.1.11':\n    resolution: {integrity: sha512-5umnS0T8JQzQT6HbPyO7Hh9dgd82NmS36DQr+X/YJ9ctFNCiiQd6IJAYYZ33LUwm8M+taCz5t2ui29fHZc4Y6Q==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-toggle@1.1.10':\n    resolution: {integrity: sha512-lS1odchhFTeZv3xwHH31YPObmJn8gOg7Lq12inrr0+BH/l3Tsq32VfjqH1oh80ARM3mlkfMic15n0kg4sD1poQ==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-tooltip@1.2.8':\n    resolution: {integrity: sha512-tY7sVt1yL9ozIxvmbtN5qtmH2krXcBCfjEiCgKGLqunJHvgvZG2Pcl2oQ3kbcZARb1BGEHdkLzcYGO8ynVlieg==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-use-callback-ref@1.1.1':\n    resolution: {integrity: sha512-FkBMwD+qbGQeMu1cOHnuGB6x4yzPjho8ap5WtbEJ26umhgqVXbhekKUQO+hZEL1vU92a3wHwdp0HAcqAUF5iDg==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-use-controllable-state@1.2.2':\n    resolution: {integrity: sha512-BjasUjixPFdS+NKkypcyyN5Pmg83Olst0+c6vGov0diwTEo6mgdqVR6hxcEgFuh4QrAs7Rc+9KuGJ9TVCj0Zzg==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-use-effect-event@0.0.2':\n    resolution: {integrity: sha512-Qp8WbZOBe+blgpuUT+lw2xheLP8q0oatc9UpmiemEICxGvFLYmHm9QowVZGHtJlGbS6A6yJ3iViad/2cVjnOiA==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-use-escape-keydown@1.1.1':\n    resolution: {integrity: sha512-Il0+boE7w/XebUHyBjroE+DbByORGR9KKmITzbR7MyQ4akpORYP/ZmbhAr0DG7RmmBqoOnZdy2QlvajJ2QA59g==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-use-is-hydrated@0.1.0':\n    resolution: {integrity: sha512-U+UORVEq+cTnRIaostJv9AGdV3G6Y+zbVd+12e18jQ5A3c0xL03IhnHuiU4UV69wolOQp5GfR58NW/EgdQhwOA==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-use-layout-effect@1.1.1':\n    resolution: {integrity: sha512-RbJRS4UWQFkzHTTwVymMTUv8EqYhOp8dOOviLj2ugtTiXRaRQS7GLGxZTLL1jWhMeoSCf5zmcZkqTl9IiYfXcQ==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-use-previous@1.1.1':\n    resolution: {integrity: sha512-2dHfToCj/pzca2Ck724OZ5L0EVrr3eHRNsG/b3xQJLA2hZpVCS99bLAX+hm1IHXDEnzU6by5z/5MIY794/a8NQ==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-use-rect@1.1.1':\n    resolution: {integrity: sha512-QTYuDesS0VtuHNNvMh+CjlKJ4LJickCMUAqjlE3+j8w+RlRpwyX3apEQKGFzbZGdo7XNG1tXa+bQqIE7HIXT2w==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-use-size@1.1.1':\n    resolution: {integrity: sha512-ewrXRDTAqAXlkl6t/fkXWNAhFX9I+CkKlw6zjEwk86RSPKwZr3xpBRso655aqYafwtnbpHLj6toFzmd6xdVptQ==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-visually-hidden@1.2.3':\n    resolution: {integrity: sha512-pzJq12tEaaIhqjbzpCuv/OypJY/BPavOofm+dbab+MHLajy277+1lLm6JFcGgF5eskJ6mquGirhXY2GD/8u8Ug==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/rect@1.1.1':\n    resolution: {integrity: sha512-HPwpGIzkl28mWyZqG52jiqDJ12waP11Pa1lGoiyUkIEuMLBP0oeK/C89esbXrxsky5we7dfd8U58nm0SgAWpVw==}\n\n  '@replit/vite-plugin-cartographer@0.3.0':\n    resolution: {integrity: sha512-sCeHU694gqRKtUHpLSNiRDpsOW6ppMvXjCgCDAHQicgdQjTr3TKZkZLZPtUZfR7iIThmFMf3T0O+wZE06rXfzQ==}\n\n  '@replit/vite-plugin-runtime-error-modal@0.0.3':\n    resolution: {integrity: sha512-4wZHGuI9W4o9p8g4Ma/qj++7SP015+FMDGYobj7iap5oEsxXMm0B02TO5Y5PW8eqBPd4wX5l3UGco/hlC0qapw==}\n\n  '@rolldown/pluginutils@1.0.0-beta.27':\n    resolution: {integrity: sha512-+d0F4MKMCbeVUJwG96uQ4SgAznZNSq93I3V+9NHA4OpvqG8mRCpGdKmK8l/dl02h2CCDHwW2FqilnTyDcAnqjA==}\n\n  '@rollup/rollup-android-arm-eabi@4.50.1':\n    resolution: {integrity: sha512-HJXwzoZN4eYTdD8bVV22DN8gsPCAj3V20NHKOs8ezfXanGpmVPR7kalUHd+Y31IJp9stdB87VKPFbsGY3H/2ag==}\n    cpu: [arm]\n    os: [android]\n\n  '@rollup/rollup-android-arm64@4.50.1':\n    resolution: {integrity: sha512-PZlsJVcjHfcH53mOImyt3bc97Ep3FJDXRpk9sMdGX0qgLmY0EIWxCag6EigerGhLVuL8lDVYNnSo8qnTElO4xw==}\n    cpu: [arm64]\n    os: [android]\n\n  '@rollup/rollup-darwin-arm64@4.50.1':\n    resolution: {integrity: sha512-xc6i2AuWh++oGi4ylOFPmzJOEeAa2lJeGUGb4MudOtgfyyjr4UPNK+eEWTPLvmPJIY/pgw6ssFIox23SyrkkJw==}\n    cpu: [arm64]\n    os: [darwin]\n\n  '@rollup/rollup-darwin-x64@4.50.1':\n    resolution: {integrity: sha512-2ofU89lEpDYhdLAbRdeyz/kX3Y2lpYc6ShRnDjY35bZhd2ipuDMDi6ZTQ9NIag94K28nFMofdnKeHR7BT0CATw==}\n    cpu: [x64]\n    os: [darwin]\n\n  '@rollup/rollup-freebsd-arm64@4.50.1':\n    resolution: {integrity: sha512-wOsE6H2u6PxsHY/BeFHA4VGQN3KUJFZp7QJBmDYI983fgxq5Th8FDkVuERb2l9vDMs1D5XhOrhBrnqcEY6l8ZA==}\n    cpu: [arm64]\n    os: [freebsd]\n\n  '@rollup/rollup-freebsd-x64@4.50.1':\n    resolution: {integrity: sha512-A/xeqaHTlKbQggxCqispFAcNjycpUEHP52mwMQZUNqDUJFFYtPHCXS1VAG29uMlDzIVr+i00tSFWFLivMcoIBQ==}\n    cpu: [x64]\n    os: [freebsd]\n\n  '@rollup/rollup-linux-arm-gnueabihf@4.50.1':\n    resolution: {integrity: sha512-54v4okehwl5TaSIkpp97rAHGp7t3ghinRd/vyC1iXqXMfjYUTm7TfYmCzXDoHUPTTf36L8pr0E7YsD3CfB3ZDg==}\n    cpu: [arm]\n    os: [linux]\n\n  '@rollup/rollup-linux-arm-musleabihf@4.50.1':\n    resolution: {integrity: sha512-p/LaFyajPN/0PUHjv8TNyxLiA7RwmDoVY3flXHPSzqrGcIp/c2FjwPPP5++u87DGHtw+5kSH5bCJz0mvXngYxw==}\n    cpu: [arm]\n    os: [linux]\n\n  '@rollup/rollup-linux-arm64-gnu@4.50.1':\n    resolution: {integrity: sha512-2AbMhFFkTo6Ptna1zO7kAXXDLi7H9fGTbVaIq2AAYO7yzcAsuTNWPHhb2aTA6GPiP+JXh85Y8CiS54iZoj4opw==}\n    cpu: [arm64]\n    os: [linux]\n\n  '@rollup/rollup-linux-arm64-musl@4.50.1':\n    resolution: {integrity: sha512-Cgef+5aZwuvesQNw9eX7g19FfKX5/pQRIyhoXLCiBOrWopjo7ycfB292TX9MDcDijiuIJlx1IzJz3IoCPfqs9w==}\n    cpu: [arm64]\n    os: [linux]\n\n  '@rollup/rollup-linux-loongarch64-gnu@4.50.1':\n    resolution: {integrity: sha512-RPhTwWMzpYYrHrJAS7CmpdtHNKtt2Ueo+BlLBjfZEhYBhK00OsEqM08/7f+eohiF6poe0YRDDd8nAvwtE/Y62Q==}\n    cpu: [loong64]\n    os: [linux]\n\n  '@rollup/rollup-linux-ppc64-gnu@4.50.1':\n    resolution: {integrity: sha512-eSGMVQw9iekut62O7eBdbiccRguuDgiPMsw++BVUg+1K7WjZXHOg/YOT9SWMzPZA+w98G+Fa1VqJgHZOHHnY0Q==}\n    cpu: [ppc64]\n    os: [linux]\n\n  '@rollup/rollup-linux-riscv64-gnu@4.50.1':\n    resolution: {integrity: sha512-S208ojx8a4ciIPrLgazF6AgdcNJzQE4+S9rsmOmDJkusvctii+ZvEuIC4v/xFqzbuP8yDjn73oBlNDgF6YGSXQ==}\n    cpu: [riscv64]\n    os: [linux]\n\n  '@rollup/rollup-linux-riscv64-musl@4.50.1':\n    resolution: {integrity: sha512-3Ag8Ls1ggqkGUvSZWYcdgFwriy2lWo+0QlYgEFra/5JGtAd6C5Hw59oojx1DeqcA2Wds2ayRgvJ4qxVTzCHgzg==}\n    cpu: [riscv64]\n    os: [linux]\n\n  '@rollup/rollup-linux-s390x-gnu@4.50.1':\n    resolution: {integrity: sha512-t9YrKfaxCYe7l7ldFERE1BRg/4TATxIg+YieHQ966jwvo7ddHJxPj9cNFWLAzhkVsbBvNA4qTbPVNsZKBO4NSg==}\n    cpu: [s390x]\n    os: [linux]\n\n  '@rollup/rollup-linux-x64-gnu@4.50.1':\n    resolution: {integrity: sha512-MCgtFB2+SVNuQmmjHf+wfI4CMxy3Tk8XjA5Z//A0AKD7QXUYFMQcns91K6dEHBvZPCnhJSyDWLApk40Iq/H3tA==}\n    cpu: [x64]\n    os: [linux]\n\n  '@rollup/rollup-linux-x64-musl@4.50.1':\n    resolution: {integrity: sha512-nEvqG+0jeRmqaUMuwzlfMKwcIVffy/9KGbAGyoa26iu6eSngAYQ512bMXuqqPrlTyfqdlB9FVINs93j534UJrg==}\n    cpu: [x64]\n    os: [linux]\n\n  '@rollup/rollup-openharmony-arm64@4.50.1':\n    resolution: {integrity: sha512-RDsLm+phmT3MJd9SNxA9MNuEAO/J2fhW8GXk62G/B4G7sLVumNFbRwDL6v5NrESb48k+QMqdGbHgEtfU0LCpbA==}\n    cpu: [arm64]\n    os: [openharmony]\n\n  '@rollup/rollup-win32-arm64-msvc@4.50.1':\n    resolution: {integrity: sha512-hpZB/TImk2FlAFAIsoElM3tLzq57uxnGYwplg6WDyAxbYczSi8O2eQ+H2Lx74504rwKtZ3N2g4bCUkiamzS6TQ==}\n    cpu: [arm64]\n    os: [win32]\n\n  '@rollup/rollup-win32-ia32-msvc@4.50.1':\n    resolution: {integrity: sha512-SXjv8JlbzKM0fTJidX4eVsH+Wmnp0/WcD8gJxIZyR6Gay5Qcsmdbi9zVtnbkGPG8v2vMR1AD06lGWy5FLMcG7A==}\n    cpu: [ia32]\n    os: [win32]\n\n  '@rollup/rollup-win32-x64-msvc@4.50.1':\n    resolution: {integrity: sha512-StxAO/8ts62KZVRAm4JZYq9+NqNsV7RvimNK+YM7ry//zebEH6meuugqW/P5OFUCjyQgui+9fUxT6d5NShvMvA==}\n    cpu: [x64]\n    os: [win32]\n\n  '@tailwindcss/node@4.1.13':\n    resolution: {integrity: sha512-eq3ouolC1oEFOAvOMOBAmfCIqZBJuvWvvYWh5h5iOYfe1HFC6+GZ6EIL0JdM3/niGRJmnrOc+8gl9/HGUaaptw==}\n\n  '@tailwindcss/oxide-android-arm64@4.1.13':\n    resolution: {integrity: sha512-BrpTrVYyejbgGo57yc8ieE+D6VT9GOgnNdmh5Sac6+t0m+v+sKQevpFVpwX3pBrM2qKrQwJ0c5eDbtjouY/+ew==}\n    engines: {node: '>= 10'}\n    cpu: [arm64]\n    os: [android]\n\n  '@tailwindcss/oxide-darwin-arm64@4.1.13':\n    resolution: {integrity: sha512-YP+Jksc4U0KHcu76UhRDHq9bx4qtBftp9ShK/7UGfq0wpaP96YVnnjFnj3ZFrUAjc5iECzODl/Ts0AN7ZPOANQ==}\n    engines: {node: '>= 10'}\n    cpu: [arm64]\n    os: [darwin]\n\n  '@tailwindcss/oxide-darwin-x64@4.1.13':\n    resolution: {integrity: sha512-aAJ3bbwrn/PQHDxCto9sxwQfT30PzyYJFG0u/BWZGeVXi5Hx6uuUOQEI2Fa43qvmUjTRQNZnGqe9t0Zntexeuw==}\n    engines: {node: '>= 10'}\n    cpu: [x64]\n    os: [darwin]\n\n  '@tailwindcss/oxide-freebsd-x64@4.1.13':\n    resolution: {integrity: sha512-Wt8KvASHwSXhKE/dJLCCWcTSVmBj3xhVhp/aF3RpAhGeZ3sVo7+NTfgiN8Vey/Fi8prRClDs6/f0KXPDTZE6nQ==}\n    engines: {node: '>= 10'}\n    cpu: [x64]\n    os: [freebsd]\n\n  '@tailwindcss/oxide-linux-arm-gnueabihf@4.1.13':\n    resolution: {integrity: sha512-mbVbcAsW3Gkm2MGwA93eLtWrwajz91aXZCNSkGTx/R5eb6KpKD5q8Ueckkh9YNboU8RH7jiv+ol/I7ZyQ9H7Bw==}\n    engines: {node: '>= 10'}\n    cpu: [arm]\n    os: [linux]\n\n  '@tailwindcss/oxide-linux-arm64-gnu@4.1.13':\n    resolution: {integrity: sha512-wdtfkmpXiwej/yoAkrCP2DNzRXCALq9NVLgLELgLim1QpSfhQM5+ZxQQF8fkOiEpuNoKLp4nKZ6RC4kmeFH0HQ==}\n    engines: {node: '>= 10'}\n    cpu: [arm64]\n    os: [linux]\n\n  '@tailwindcss/oxide-linux-arm64-musl@4.1.13':\n    resolution: {integrity: sha512-hZQrmtLdhyqzXHB7mkXfq0IYbxegaqTmfa1p9MBj72WPoDD3oNOh1Lnxf6xZLY9C3OV6qiCYkO1i/LrzEdW2mg==}\n    engines: {node: '>= 10'}\n    cpu: [arm64]\n    os: [linux]\n\n  '@tailwindcss/oxide-linux-x64-gnu@4.1.13':\n    resolution: {integrity: sha512-uaZTYWxSXyMWDJZNY1Ul7XkJTCBRFZ5Fo6wtjrgBKzZLoJNrG+WderJwAjPzuNZOnmdrVg260DKwXCFtJ/hWRQ==}\n    engines: {node: '>= 10'}\n    cpu: [x64]\n    os: [linux]\n\n  '@tailwindcss/oxide-linux-x64-musl@4.1.13':\n    resolution: {integrity: sha512-oXiPj5mi4Hdn50v5RdnuuIms0PVPI/EG4fxAfFiIKQh5TgQgX7oSuDWntHW7WNIi/yVLAiS+CRGW4RkoGSSgVQ==}\n    engines: {node: '>= 10'}\n    cpu: [x64]\n    os: [linux]\n\n  '@tailwindcss/oxide-wasm32-wasi@4.1.13':\n    resolution: {integrity: sha512-+LC2nNtPovtrDwBc/nqnIKYh/W2+R69FA0hgoeOn64BdCX522u19ryLh3Vf3F8W49XBcMIxSe665kwy21FkhvA==}\n    engines: {node: '>=14.0.0'}\n    cpu: [wasm32]\n    bundledDependencies:\n      - '@napi-rs/wasm-runtime'\n      - '@emnapi/core'\n      - '@emnapi/runtime'\n      - '@tybys/wasm-util'\n      - '@emnapi/wasi-threads'\n      - tslib\n\n  '@tailwindcss/oxide-win32-arm64-msvc@4.1.13':\n    resolution: {integrity: sha512-dziTNeQXtoQ2KBXmrjCxsuPk3F3CQ/yb7ZNZNA+UkNTeiTGgfeh+gH5Pi7mRncVgcPD2xgHvkFCh/MhZWSgyQg==}\n    engines: {node: '>= 10'}\n    cpu: [arm64]\n    os: [win32]\n\n  '@tailwindcss/oxide-win32-x64-msvc@4.1.13':\n    resolution: {integrity: sha512-3+LKesjXydTkHk5zXX01b5KMzLV1xl2mcktBJkje7rhFUpUlYJy7IMOLqjIRQncLTa1WZZiFY/foAeB5nmaiTw==}\n    engines: {node: '>= 10'}\n    cpu: [x64]\n    os: [win32]\n\n  '@tailwindcss/oxide@4.1.13':\n    resolution: {integrity: sha512-CPgsM1IpGRa880sMbYmG1s4xhAy3xEt1QULgTJGQmZUeNgXFR7s1YxYygmJyBGtou4SyEosGAGEeYqY7R53bIA==}\n    engines: {node: '>= 10'}\n\n  '@tailwindcss/typography@0.5.16':\n    resolution: {integrity: sha512-0wDLwCVF5V3x3b1SGXPCDcdsbDHMBe+lkFzBRaHeLvNi+nrrnZ1lA18u+OTWO8iSWU2GxUOCvlXtDuqftc1oiA==}\n    peerDependencies:\n      tailwindcss: '>=3.0.0 || insiders || >=4.0.0-alpha.20 || >=4.0.0-beta.1'\n\n  '@tailwindcss/vite@4.1.13':\n    resolution: {integrity: sha512-0PmqLQ010N58SbMTJ7BVJ4I2xopiQn/5i6nlb4JmxzQf8zcS5+m2Cv6tqh+sfDwtIdjoEnOvwsGQ1hkUi8QEHQ==}\n    peerDependencies:\n      vite: ^5.2.0 || ^6 || ^7\n\n  '@tanstack/query-core@5.87.1':\n    resolution: {integrity: sha512-HOFHVvhOCprrWvtccSzc7+RNqpnLlZ5R6lTmngb8aq7b4rc2/jDT0w+vLdQ4lD9bNtQ+/A4GsFXy030Gk4ollA==}\n\n  '@tanstack/react-query@5.87.1':\n    resolution: {integrity: sha512-YKauf8jfMowgAqcxj96AHs+Ux3m3bWT1oSVKamaRPXSnW2HqSznnTCEkAVqctF1e/W9R/mPcyzzINIgpOH94qg==}\n    peerDependencies:\n      react: ^18 || ^19\n\n  '@tweenjs/tween.js@23.1.3':\n    resolution: {integrity: sha512-vJmvvwFxYuGnF2axRtPYocag6Clbb5YS7kLL+SO/TeVFzHqDIWrNKYtcsPMibjDx9O+bu+psAy9NKfWklassUA==}\n\n  '@types/babel__core@7.20.5':\n    resolution: {integrity: sha512-qoQprZvz5wQFJwMDqeseRXWv3rqMvhgpbXFfVyWhbx9X47POIA6i/+dXefEmZKoAgOaTdaIgNSMqMIU61yRyzA==}\n\n  '@types/babel__generator@7.27.0':\n    resolution: {integrity: sha512-ufFd2Xi92OAVPYsy+P4n7/U7e68fex0+Ee8gSG9KX7eo084CWiQ4sdxktvdl0bOPupXtVJPY19zk6EwWqUQ8lg==}\n\n  '@types/babel__template@7.4.4':\n    resolution: {integrity: sha512-h/NUaSyG5EyxBIp8YRxo4RMe2/qQgvyowRwVMzhYhBCONbW8PUsg4lkFMrhgZhUe5z3L3MiLDuvyJ/CaPa2A8A==}\n\n  '@types/babel__traverse@7.28.0':\n    resolution: {integrity: sha512-8PvcXf70gTDZBgt9ptxJ8elBeBjcLOAcOtoO/mPJjtji1+CdGbHgm77om1GrsPxsiE+uXIpNSK64UYaIwQXd4Q==}\n\n  '@types/body-parser@1.19.6':\n    resolution: {integrity: sha512-HLFeCYgz89uk22N5Qg3dvGvsv46B8GLvKKo1zKG4NybA8U2DiEO3w9lqGg29t/tfLRJpJ6iQxnVw4OnB7MoM9g==}\n\n  '@types/connect-pg-simple@7.0.3':\n    resolution: {integrity: sha512-NGCy9WBlW2bw+J/QlLnFZ9WjoGs6tMo3LAut6mY4kK+XHzue//lpNVpAvYRpIwM969vBRAM2Re0izUvV6kt+NA==}\n\n  '@types/connect@3.4.38':\n    resolution: {integrity: sha512-K6uROf1LD88uDQqJCktA4yzL1YYAK6NgfsI0v/mTgyPKWsX1CnJ0XPSDhViejru1GcRkLWb8RlzFYJRqGUbaug==}\n\n  '@types/cors@2.8.19':\n    resolution: {integrity: sha512-mFNylyeyqN93lfe/9CSxOGREz8cpzAhH+E93xJ4xWQf62V8sQ/24reV2nyzUWM6H6Xji+GGHpkbLe7pVoUEskg==}\n\n  '@types/d3-array@3.2.1':\n    resolution: {integrity: sha512-Y2Jn2idRrLzUfAKV2LyRImR+y4oa2AntrgID95SHJxuMUrkNXmanDSed71sRNZysveJVt1hLLemQZIady0FpEg==}\n\n  '@types/d3-color@3.1.3':\n    resolution: {integrity: sha512-iO90scth9WAbmgv7ogoq57O9YpKmFBbmoEoCHDB2xMBY0+/KVrqAaCDyCE16dUspeOvIxFFRI+0sEtqDqy2b4A==}\n\n  '@types/d3-ease@3.0.2':\n    resolution: {integrity: sha512-NcV1JjO5oDzoK26oMzbILE6HW7uVXOHLQvHshBUW4UMdZGfiY6v5BeQwh9a9tCzv+CeefZQHJt5SRgK154RtiA==}\n\n  '@types/d3-interpolate@3.0.4':\n    resolution: {integrity: sha512-mgLPETlrpVV1YRJIglr4Ez47g7Yxjl1lj7YKsiMCb27VJH9W8NVM6Bb9d8kkpG/uAQS5AmbA48q2IAolKKo1MA==}\n\n  '@types/d3-path@3.1.1':\n    resolution: {integrity: sha512-VMZBYyQvbGmWyWVea0EHs/BwLgxc+MKi1zLDCONksozI4YJMcTt8ZEuIR4Sb1MMTE8MMW49v0IwI5+b7RmfWlg==}\n\n  '@types/d3-scale@4.0.9':\n    resolution: {integrity: sha512-dLmtwB8zkAeO/juAMfnV+sItKjlsw2lKdZVVy6LRr0cBmegxSABiLEpGVmSJJ8O08i4+sGR6qQtb6WtuwJdvVw==}\n\n  '@types/d3-shape@3.1.7':\n    resolution: {integrity: sha512-VLvUQ33C+3J+8p+Daf+nYSOsjB4GXp19/S/aGo60m9h1v6XaxjiT82lKVWJCfzhtuZ3yD7i/TPeC/fuKLLOSmg==}\n\n  '@types/d3-time@3.0.4':\n    resolution: {integrity: sha512-yuzZug1nkAAaBlBBikKZTgzCeA+k1uy4ZFwWANOfKw5z5LRhV0gNA7gNkKm7HoK+HRN0wX3EkxGk0fpbWhmB7g==}\n\n  '@types/d3-timer@3.0.2':\n    resolution: {integrity: sha512-Ps3T8E8dZDam6fUyNiMkekK3XUsaUEik+idO9/YjPtfj2qruF8tFBXS7XhtE4iIXBLxhmLjP3SXpLhVf21I9Lw==}\n\n  '@types/estree@1.0.8':\n    resolution: {integrity: sha512-dWHzHa2WqEXI/O1E9OjrocMTKJl2mSrEolh1Iomrv6U+JuNwaHXsXx9bLu5gG7BUWFIN0skIQJQ/L1rIex4X6w==}\n\n  '@types/express-serve-static-core@4.19.6':\n    resolution: {integrity: sha512-N4LZ2xG7DatVqhCZzOGb1Yi5lMbXSZcmdLDe9EzSndPV2HpWYWzRbaerl2n27irrm94EPpprqa8KpskPT085+A==}\n\n  '@types/express-session@1.18.2':\n    resolution: {integrity: sha512-k+I0BxwVXsnEU2hV77cCobC08kIsn4y44C3gC0b46uxZVMaXA04lSPgRLR/bSL2w0t0ShJiG8o4jPzRG/nscFg==}\n\n  '@types/express@4.17.21':\n    resolution: {integrity: sha512-ejlPM315qwLpaQlQDTjPdsUFSc6ZsP4AN6AlWnogPjQ7CVi7PYF3YVz+CY3jE2pwYf7E/7HlDAN0rV2GxTG0HQ==}\n\n  '@types/http-errors@2.0.5':\n    resolution: {integrity: sha512-r8Tayk8HJnX0FztbZN7oVqGccWgw98T/0neJphO91KkmOzug1KkofZURD4UaD5uH8AqcFLfdPErnBod0u71/qg==}\n\n  '@types/mime@1.3.5':\n    resolution: {integrity: sha512-/pyBZWSLD2n0dcHE3hq8s8ZvcETHtEuF+3E7XVt0Ig2nvsVQXdghHVcEkIWjy9A0wKfTn97a/PSDYohKIlnP/w==}\n\n  '@types/node-fetch@2.6.13':\n    resolution: {integrity: sha512-QGpRVpzSaUs30JBSGPjOg4Uveu384erbHBoT1zeONvyCfwQxIkUshLAOqN/k9EjGviPRmWTTe6aH2qySWKTVSw==}\n\n  '@types/node@18.19.124':\n    resolution: {integrity: sha512-hY4YWZFLs3ku6D2Gqo3RchTd9VRCcrjqp/I0mmohYeUVA5Y8eCXKJEasHxLAJVZRJuQogfd1GiJ9lgogBgKeuQ==}\n\n  '@types/node@20.19.13':\n    resolution: {integrity: sha512-yCAeZl7a0DxgNVteXFHt9+uyFbqXGy/ShC4BlcHkoE0AfGXYv/BUiplV72DjMYXHDBXFjhvr6DD1NiRVfB4j8g==}\n\n  '@types/passport-local@1.0.38':\n    resolution: {integrity: sha512-nsrW4A963lYE7lNTv9cr5WmiUD1ibYJvWrpE13oxApFsRt77b0RdtZvKbCdNIY4v/QZ6TRQWaDDEwV1kCTmcXg==}\n\n  '@types/passport-strategy@0.2.38':\n    resolution: {integrity: sha512-GC6eMqqojOooq993Tmnmp7AUTbbQSgilyvpCYQjT+H6JfG/g6RGc7nXEniZlp0zyKJ0WUdOiZWLBZft9Yug1uA==}\n\n  '@types/passport@1.0.17':\n    resolution: {integrity: sha512-aciLyx+wDwT2t2/kJGJR2AEeBz0nJU4WuRX04Wu9Dqc5lSUtwu0WERPHYsLhF9PtseiAMPBGNUOtFjxZ56prsg==}\n\n  '@types/pg@8.11.6':\n    resolution: {integrity: sha512-/2WmmBXHLsfRqzfHW7BNZ8SbYzE8OSk7i3WjFYvfgRHj7S1xj+16Je5fUKv3lVdVzk/zn9TXOqf+avFCFIE0yQ==}\n\n  '@types/pg@8.15.5':\n    resolution: {integrity: sha512-LF7lF6zWEKxuT3/OR8wAZGzkg4ENGXFNyiV/JeOt9z5B+0ZVwbql9McqX5c/WStFq1GaGso7H1AzP/qSzmlCKQ==}\n\n  '@types/prop-types@15.7.15':\n    resolution: {integrity: sha512-F6bEyamV9jKGAFBEmlQnesRPGOQqS2+Uwi0Em15xenOxHaf2hv6L8YCVn3rPdPJOiJfPiCnLIRyvwVaqMY3MIw==}\n\n  '@types/qs@6.14.0':\n    resolution: {integrity: sha512-eOunJqu0K1923aExK6y8p6fsihYEn/BYuQ4g0CxAAgFc4b/ZLN4CrsRZ55srTdqoiLzU2B2evC+apEIxprEzkQ==}\n\n  '@types/range-parser@1.2.7':\n    resolution: {integrity: sha512-hKormJbkJqzQGhziax5PItDUTMAM9uE2XXQmM37dyd4hVM+5aVl7oVxMVUiVQn2oCQFN/LKCZdvSM0pFRqbSmQ==}\n\n  '@types/react-dom@18.3.7':\n    resolution: {integrity: sha512-MEe3UeoENYVFXzoXEWsvcpg6ZvlrFNlOQ7EOsvhI3CfAXwzPfO8Qwuxd40nepsYKqyyVQnTdEfv68q91yLcKrQ==}\n    peerDependencies:\n      '@types/react': ^18.0.0\n\n  '@types/react@18.3.24':\n    resolution: {integrity: sha512-0dLEBsA1kI3OezMBF8nSsb7Nk19ZnsyE1LLhB8r27KbgU5H4pvuqZLdtE+aUkJVoXgTVuA+iLIwmZ0TuK4tx6A==}\n\n  '@types/send@0.17.5':\n    resolution: {integrity: sha512-z6F2D3cOStZvuk2SaP6YrwkNO65iTZcwA2ZkSABegdkAh/lf+Aa/YQndZVfmEXT5vgAp6zv06VQ3ejSVjAny4w==}\n\n  '@types/serve-static@1.15.8':\n    resolution: {integrity: sha512-roei0UY3LhpOJvjbIP6ZZFngyLKl5dskOtDhxY5THRSpO+ZI+nzJ+m5yUMzGrp89YRa7lvknKkMYjqQFGwA7Sg==}\n\n  '@types/stats.js@0.17.4':\n    resolution: {integrity: sha512-jIBvWWShCvlBqBNIZt0KAshWpvSjhkwkEu4ZUcASoAvhmrgAUI2t1dXrjSL4xXVLB4FznPrIsX3nKXFl/Dt4vA==}\n\n  '@types/three@0.179.0':\n    resolution: {integrity: sha512-VgbFG2Pgsm84BqdegZzr7w2aKbQxmgzIu4Dy7/75ygiD/0P68LKmp5ie08KMPNqGTQwIge8s6D1guZf1RnZE0A==}\n\n  '@types/webxr@0.5.23':\n    resolution: {integrity: sha512-GPe4AsfOSpqWd3xA/0gwoKod13ChcfV67trvxaW2krUbgb9gxQjnCx8zGshzMl8LSHZlNH5gQ8LNScsDuc7nGQ==}\n\n  '@types/ws@8.18.1':\n    resolution: {integrity: sha512-ThVF6DCVhA8kUGy+aazFQ4kXQ7E1Ty7A3ypFOe0IcJV8O/M511G99AW24irKrW56Wt44yG9+ij8FaqoBGkuBXg==}\n\n  '@vitejs/plugin-react@4.7.0':\n    resolution: {integrity: sha512-gUu9hwfWvvEDBBmgtAowQCojwZmJ5mcLn3aufeCsitijs3+f2NsrPtlAWIR6OPiqljl96GVCUbLe0HyqIpVaoA==}\n    engines: {node: ^14.18.0 || >=16.0.0}\n    peerDependencies:\n      vite: ^4.2.0 || ^5.0.0 || ^6.0.0 || ^7.0.0\n\n  '@webgpu/types@0.1.64':\n    resolution: {integrity: sha512-84kRIAGV46LJTlJZWxShiOrNL30A+9KokD7RB3dRCIqODFjodS5tCD5yyiZ8kIReGVZSDfA3XkkwyyOIF6K62A==}\n\n  abort-controller@3.0.0:\n    resolution: {integrity: sha512-h8lQ8tacZYnR3vNQTgibj+tODHI5/+l06Au2Pcriv/Gmet0eaj4TwWH41sO9wnHDiQsEj19q0drzdWdeAHtweg==}\n    engines: {node: '>=6.5'}\n\n  accepts@1.3.8:\n    resolution: {integrity: sha512-PYAthTa2m2VKxuvSD3DPC/Gy+U+sOA1LAuT8mkmRuvw+NACSaeXEQ+NHcVF7rONl6qcaxV3Uuemwawk+7+SJLw==}\n    engines: {node: '>= 0.6'}\n\n  agentkeepalive@4.6.0:\n    resolution: {integrity: sha512-kja8j7PjmncONqaTsB8fQ+wE2mSU2DJ9D4XKoJ5PFWIdRMa6SLSN1ff4mOr4jCbfRSsxR4keIiySJU0N9T5hIQ==}\n    engines: {node: '>= 8.0.0'}\n\n  ansi-regex@5.0.1:\n    resolution: {integrity: sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==}\n    engines: {node: '>=8'}\n\n  ansi-regex@6.2.2:\n    resolution: {integrity: sha512-Bq3SmSpyFHaWjPk8If9yc6svM8c56dB5BAtW4Qbw5jHTwwXXcTLoRMkpDJp6VL0XzlWaCHTXrkFURMYmD0sLqg==}\n    engines: {node: '>=12'}\n\n  ansi-styles@4.3.0:\n    resolution: {integrity: sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==}\n    engines: {node: '>=8'}\n\n  ansi-styles@6.2.3:\n    resolution: {integrity: sha512-4Dj6M28JB+oAH8kFkTLUo+a2jwOFkuqb3yucU0CANcRRUbxS0cP0nZYCGjcc3BNXwRIsUVmDGgzawme7zvJHvg==}\n    engines: {node: '>=12'}\n\n  any-promise@1.3.0:\n    resolution: {integrity: sha512-7UvmKalWRt1wgjL1RrGxoSJW/0QZFIegpeGvZG9kjp8vrRu55XTHbwnqq2GpXm9uLbcuhxm3IqX9OB4MZR1b2A==}\n\n  anymatch@3.1.3:\n    resolution: {integrity: sha512-KMReFUr0B4t+D+OBkjR3KYqvocp2XaSzO55UcB6mgQMd3KbcE+mWTyvVV7D/zsdEbNnV6acZUutkiHQXvTr1Rw==}\n    engines: {node: '>= 8'}\n\n  arg@5.0.2:\n    resolution: {integrity: sha512-PYjyFOLKQ9y57JvQ6QLo8dAgNqswh8M1RMJYdQduT6xbWSgK36P/Z/v+p888pM69jMMfS8Xd8F6I1kQ/I9HUGg==}\n\n  aria-hidden@1.2.6:\n    resolution: {integrity: sha512-ik3ZgC9dY/lYVVM++OISsaYDeg1tb0VtP5uL3ouh1koGOaUMDPpbFIei4JkFimWUFPn90sbMNMXQAIVOlnYKJA==}\n    engines: {node: '>=10'}\n\n  array-flatten@1.1.1:\n    resolution: {integrity: sha512-PCVAQswWemu6UdxsDFFX/+gVeYqKAod3D3UVm91jHwynguOwAvYPhx8nNlM++NqRcK6CxxpUafjmhIdKiHibqg==}\n\n  asynckit@0.4.0:\n    resolution: {integrity: sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==}\n\n  autoprefixer@10.4.21:\n    resolution: {integrity: sha512-O+A6LWV5LDHSJD3LjHYoNi4VLsj/Whi7k6zG12xTYaU4cQ8oxQGckXNX8cRHK5yOZ/ppVHe0ZBXGzSV9jXdVbQ==}\n    engines: {node: ^10 || ^12 || >=14}\n    hasBin: true\n    peerDependencies:\n      postcss: ^8.1.0\n\n  balanced-match@1.0.2:\n    resolution: {integrity: sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==}\n\n  binary-extensions@2.3.0:\n    resolution: {integrity: sha512-Ceh+7ox5qe7LJuLHoY0feh3pHuUDHAcRUeyL2VYghZwfpkNIy/+8Ocg0a3UuSoYzavmylwuLWQOf3hl0jjMMIw==}\n    engines: {node: '>=8'}\n\n  body-parser@1.20.3:\n    resolution: {integrity: sha512-7rAxByjUMqQ3/bHJy7D6OGXvx/MMc4IqBn/X0fcM1QUcAItpZrBEYhWGem+tzXH90c+G01ypMcYJBO9Y30203g==}\n    engines: {node: '>= 0.8', npm: 1.2.8000 || >= 1.4.16}\n\n  brace-expansion@2.0.2:\n    resolution: {integrity: sha512-Jt0vHyM+jmUBqojB7E1NIYadt0vI0Qxjxd2TErW94wDz+E2LAm5vKMXXwg6ZZBTHPuUlDgQHKXvjGBdfcF1ZDQ==}\n\n  braces@3.0.3:\n    resolution: {integrity: sha512-yQbXgO/OSZVD2IsiLlro+7Hf6Q18EJrKSEsdoMzKePKXct3gvD8oLcOQdIzGupr5Fj+EDe8gO/lxc1BzfMpxvA==}\n    engines: {node: '>=8'}\n\n  browserslist@4.25.4:\n    resolution: {integrity: sha512-4jYpcjabC606xJ3kw2QwGEZKX0Aw7sgQdZCvIK9dhVSPh76BKo+C+btT1RRofH7B+8iNpEbgGNVWiLki5q93yg==}\n    engines: {node: ^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7}\n    hasBin: true\n\n  buffer-from@1.1.2:\n    resolution: {integrity: sha512-E+XQCRwSbaaiChtv6k6Dwgc+bx+Bs6vuKJHHl5kox/BaKbhiXzqQOwK4cO22yElGp2OCmjwVhT3HmxgyPGnJfQ==}\n\n  bufferutil@4.0.9:\n    resolution: {integrity: sha512-WDtdLmJvAuNNPzByAYpRo2rF1Mmradw6gvWsQKf63476DDXmomT9zUiGypLcG4ibIM67vhAj8jJRdbmEws2Aqw==}\n    engines: {node: '>=6.14.2'}\n\n  bytes@3.1.2:\n    resolution: {integrity: sha512-/Nf7TyzTx6S3yRJObOAV7956r8cr2+Oj8AC5dt8wSP3BQAoeX58NoHyCU8P8zGkNXStjTSi6fzO6F0pBdcYbEg==}\n    engines: {node: '>= 0.8'}\n\n  call-bind-apply-helpers@1.0.2:\n    resolution: {integrity: sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==}\n    engines: {node: '>= 0.4'}\n\n  call-bound@1.0.4:\n    resolution: {integrity: sha512-+ys997U96po4Kx/ABpBCqhA9EuxJaQWDQg7295H4hBphv3IZg0boBKuwYpt4YXp6MZ5AmZQnU/tyMTlRpaSejg==}\n    engines: {node: '>= 0.4'}\n\n  camelcase-css@2.0.1:\n    resolution: {integrity: sha512-QOSvevhslijgYwRx6Rv7zKdMF8lbRmx+uQGx2+vDc+KI/eBnsy9kit5aj23AgGu3pa4t9AgwbnXWqS+iOY+2aA==}\n    engines: {node: '>= 6'}\n\n  caniuse-lite@1.0.30001741:\n    resolution: {integrity: sha512-QGUGitqsc8ARjLdgAfxETDhRbJ0REsP6O3I96TAth/mVjh2cYzN2u+3AzPP3aVSm2FehEItaJw1xd+IGBXWeSw==}\n\n  chokidar@3.6.0:\n    resolution: {integrity: sha512-7VT13fmjotKpGipCW9JEQAusEPE+Ei8nl6/g4FBAmIm0GOOLMua9NDDo/DWp0ZAxCr3cPq5ZpBqmPAQgDda2Pw==}\n    engines: {node: '>= 8.10.0'}\n\n  chownr@3.0.0:\n    resolution: {integrity: sha512-+IxzY9BZOQd/XuYPRmrvEVjF/nqj5kgT4kEq7VofrDoM1MxoRjEWkrCC3EtLi59TVawxTAn+orJwFQcrqEN1+g==}\n    engines: {node: '>=18'}\n\n  class-variance-authority@0.7.1:\n    resolution: {integrity: sha512-Ka+9Trutv7G8M6WT6SeiRWz792K5qEqIGEGzXKhAE6xOWAY6pPH8U+9IY3oCMv6kqTmLsv7Xh/2w2RigkePMsg==}\n\n  clsx@2.1.1:\n    resolution: {integrity: sha512-eYm0QWBtUrBWZWG0d386OGAw16Z995PiOVo2B7bjWSbHedGl5e0ZWaq65kOGgUSNesEIDkB9ISbTg/JK9dhCZA==}\n    engines: {node: '>=6'}\n\n  cmdk@1.1.1:\n    resolution: {integrity: sha512-Vsv7kFaXm+ptHDMZ7izaRsP70GgrW9NBNGswt9OZaVBLlE0SNpDq8eu/VGXyF9r7M0azK3Wy7OlYXsuyYLFzHg==}\n    peerDependencies:\n      react: ^18 || ^19 || ^19.0.0-rc\n      react-dom: ^18 || ^19 || ^19.0.0-rc\n\n  color-convert@2.0.1:\n    resolution: {integrity: sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==}\n    engines: {node: '>=7.0.0'}\n\n  color-name@1.1.4:\n    resolution: {integrity: sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==}\n\n  combined-stream@1.0.8:\n    resolution: {integrity: sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==}\n    engines: {node: '>= 0.8'}\n\n  commander@4.1.1:\n    resolution: {integrity: sha512-NOKm8xhkzAjzFx8B2v5OAHT+u5pRQc2UCa2Vq9jYL/31o2wi9mxBA7LIFs3sV5VSC49z6pEhfbMULvShKj26WA==}\n    engines: {node: '>= 6'}\n\n  connect-pg-simple@10.0.0:\n    resolution: {integrity: sha512-pBGVazlqiMrackzCr0eKhn4LO5trJXsOX0nQoey9wCOayh80MYtThCbq8eoLsjpiWgiok/h+1/uti9/2/Una8A==}\n    engines: {node: ^18.18.0 || ^20.9.0 || >=22.0.0}\n\n  content-disposition@0.5.4:\n    resolution: {integrity: sha512-FveZTNuGw04cxlAiWbzi6zTAL/lhehaWbTtgluJh4/E95DqMwTmha3KZN1aAWA8cFIhHzMZUvLevkw5Rqk+tSQ==}\n    engines: {node: '>= 0.6'}\n\n  content-type@1.0.5:\n    resolution: {integrity: sha512-nTjqfcBFEipKdXCv4YDQWCfmcLZKm81ldF0pAopTvyrFGVbcR6P/VAAd5G7N+0tTr8QqiU0tFadD6FK4NtJwOA==}\n    engines: {node: '>= 0.6'}\n\n  convert-source-map@2.0.0:\n    resolution: {integrity: sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==}\n\n  cookie-signature@1.0.6:\n    resolution: {integrity: sha512-QADzlaHc8icV8I7vbaJXJwod9HWYp8uCqf1xa4OfNu1T7JVxQIrUgOWtHdNDtPiywmFbiS12VjotIXLrKM3orQ==}\n\n  cookie-signature@1.0.7:\n    resolution: {integrity: sha512-NXdYc3dLr47pBkpUCHtKSwIOQXLVn8dZEuywboCOJY/osA0wFSLlSawr3KN8qXJEyX66FcONTH8EIlVuK0yyFA==}\n\n  cookie@0.7.1:\n    resolution: {integrity: sha512-6DnInpx7SJ2AK3+CTUE/ZM0vWTUboZCegxhC2xiIydHR9jNuTAASBrfEpHhiGOZw/nX51bHt6YQl8jsGo4y/0w==}\n    engines: {node: '>= 0.6'}\n\n  cookie@0.7.2:\n    resolution: {integrity: sha512-yki5XnKuf750l50uGTllt6kKILY4nQ1eNIQatoXEByZ5dWgnKqbnqmTrBE5B4N7lrMJKQ2ytWMiTO2o0v6Ew/w==}\n    engines: {node: '>= 0.6'}\n\n  cors@2.8.5:\n    resolution: {integrity: sha512-KIHbLJqu73RGr/hnbrO9uBeixNGuvSQjul/jdFvS/KFSIH1hWVd1ng7zOHx+YrEfInLG7q4n6GHQ9cDtxv/P6g==}\n    engines: {node: '>= 0.10'}\n\n  cross-env@10.0.0:\n    resolution: {integrity: sha512-aU8qlEK/nHYtVuN4p7UQgAwVljzMg8hB4YK5ThRqD2l/ziSnryncPNn7bMLt5cFYsKVKBh8HqLqyCoTupEUu7Q==}\n    engines: {node: '>=20'}\n    hasBin: true\n\n  cross-spawn@7.0.6:\n    resolution: {integrity: sha512-uV2QOWP2nWzsy2aMp8aRibhi9dlzF5Hgh5SHaB9OiTGEyDTiJJyx0uy51QXdyWbtAHNua4XJzUKca3OzKUd3vA==}\n    engines: {node: '>= 8'}\n\n  cssesc@3.0.0:\n    resolution: {integrity: sha512-/Tb/JcjK111nNScGob5MNtsntNM1aCNUDipB/TkwZFhyDrrE47SOx/18wF2bbjgc3ZzCSKW1T5nt5EbFoAz/Vg==}\n    engines: {node: '>=4'}\n    hasBin: true\n\n  csstype@3.1.3:\n    resolution: {integrity: sha512-M1uQkMl8rQK/szD0LNhtqxIPLpimGm8sOBwU7lLnCpSbTyY3yeU1Vc7l4KT5zT4s/yOxHH5O7tIuuLOCnLADRw==}\n\n  d3-array@3.2.4:\n    resolution: {integrity: sha512-tdQAmyA18i4J7wprpYq8ClcxZy3SC31QMeByyCFyRt7BVHdREQZ5lpzoe5mFEYZUWe+oq8HBvk9JjpibyEV4Jg==}\n    engines: {node: '>=12'}\n\n  d3-color@3.1.0:\n    resolution: {integrity: sha512-zg/chbXyeBtMQ1LbD/WSoW2DpC3I0mpmPdW+ynRTj/x2DAWYrIY7qeZIHidozwV24m4iavr15lNwIwLxRmOxhA==}\n    engines: {node: '>=12'}\n\n  d3-ease@3.0.1:\n    resolution: {integrity: sha512-wR/XK3D3XcLIZwpbvQwQ5fK+8Ykds1ip7A2Txe0yxncXSdq1L9skcG7blcedkOX+ZcgxGAmLX1FrRGbADwzi0w==}\n    engines: {node: '>=12'}\n\n  d3-format@3.1.0:\n    resolution: {integrity: sha512-YyUI6AEuY/Wpt8KWLgZHsIU86atmikuoOmCfommt0LYHiQSPjvX2AcFc38PX0CBpr2RCyZhjex+NS/LPOv6YqA==}\n    engines: {node: '>=12'}\n\n  d3-interpolate@3.0.1:\n    resolution: {integrity: sha512-3bYs1rOD33uo8aqJfKP3JWPAibgw8Zm2+L9vBKEHJ2Rg+viTR7o5Mmv5mZcieN+FRYaAOWX5SJATX6k1PWz72g==}\n    engines: {node: '>=12'}\n\n  d3-path@3.1.0:\n    resolution: {integrity: sha512-p3KP5HCf/bvjBSSKuXid6Zqijx7wIfNW+J/maPs+iwR35at5JCbLUT0LzF1cnjbCHWhqzQTIN2Jpe8pRebIEFQ==}\n    engines: {node: '>=12'}\n\n  d3-scale@4.0.2:\n    resolution: {integrity: sha512-GZW464g1SH7ag3Y7hXjf8RoUuAFIqklOAq3MRl4OaWabTFJY9PN/E1YklhXLh+OQ3fM9yS2nOkCoS+WLZ6kvxQ==}\n    engines: {node: '>=12'}\n\n  d3-shape@3.2.0:\n    resolution: {integrity: sha512-SaLBuwGm3MOViRq2ABk3eLoxwZELpH6zhl3FbAoJ7Vm1gofKx6El1Ib5z23NUEhF9AsGl7y+dzLe5Cw2AArGTA==}\n    engines: {node: '>=12'}\n\n  d3-time-format@4.1.0:\n    resolution: {integrity: sha512-dJxPBlzC7NugB2PDLwo9Q8JiTR3M3e4/XANkreKSUxF8vvXKqm1Yfq4Q5dl8budlunRVlUUaDUgFt7eA8D6NLg==}\n    engines: {node: '>=12'}\n\n  d3-time@3.1.0:\n    resolution: {integrity: sha512-VqKjzBLejbSMT4IgbmVgDjpkYrNWUYJnbCGo874u7MMKIWsILRX+OpX/gTk8MqjpT1A/c6HY2dCA77ZN0lkQ2Q==}\n    engines: {node: '>=12'}\n\n  d3-timer@3.0.1:\n    resolution: {integrity: sha512-ndfJ/JxxMd3nw31uyKoY2naivF+r29V+Lc0svZxe1JvvIRmi8hUsrMvdOwgS1o6uBHmiz91geQ0ylPP0aj1VUA==}\n    engines: {node: '>=12'}\n\n  date-fns@3.6.0:\n    resolution: {integrity: sha512-fRHTG8g/Gif+kSh50gaGEdToemgfj74aRX3swtiouboip5JDLAyDE9F11nHMIcvOaXeOC6D7SpNhi7uFyB7Uww==}\n\n  debug@2.6.9:\n    resolution: {integrity: sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==}\n    peerDependencies:\n      supports-color: '*'\n    peerDependenciesMeta:\n      supports-color:\n        optional: true\n\n  debug@4.4.1:\n    resolution: {integrity: sha512-KcKCqiftBJcZr++7ykoDIEwSa3XWowTfNPo92BYxjXiyYEVrUQh2aLyhxBCwww+heortUFxEJYcRzosstTEBYQ==}\n    engines: {node: '>=6.0'}\n    peerDependencies:\n      supports-color: '*'\n    peerDependenciesMeta:\n      supports-color:\n        optional: true\n\n  decimal.js-light@2.5.1:\n    resolution: {integrity: sha512-qIMFpTMZmny+MMIitAB6D7iVPEorVw6YQRWkvarTkT4tBeSLLiHzcwj6q0MmYSFCiVpiqPJTJEYIrpcPzVEIvg==}\n\n  delayed-stream@1.0.0:\n    resolution: {integrity: sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==}\n    engines: {node: '>=0.4.0'}\n\n  depd@2.0.0:\n    resolution: {integrity: sha512-g7nH6P6dyDioJogAAGprGpCtVImJhpPk/roCzdb3fIh61/s/nPsfR6onyMwkCAR/OlC3yBC0lESvUoQEAssIrw==}\n    engines: {node: '>= 0.8'}\n\n  destroy@1.2.0:\n    resolution: {integrity: sha512-2sJGJTaXIIaR1w4iJSNoN0hnMY7Gpc/n8D4qSCJw8QqFWXf7cuAgnEHxBpweaVcPevC2l3KpjYCx3NypQQgaJg==}\n    engines: {node: '>= 0.8', npm: 1.2.8000 || >= 1.4.16}\n\n  detect-libc@2.0.4:\n    resolution: {integrity: sha512-3UDv+G9CsCKO1WKMGw9fwq/SWJYbI0c5Y7LU1AXYoDdbhE2AHQ6N6Nb34sG8Fj7T5APy8qXDCKuuIHd1BR0tVA==}\n    engines: {node: '>=8'}\n\n  detect-node-es@1.1.0:\n    resolution: {integrity: sha512-ypdmJU/TbBby2Dxibuv7ZLW3Bs1QEmM7nHjEANfohJLvE0XVujisn1qPJcZxg+qDucsr+bP6fLD1rPS3AhJ7EQ==}\n\n  didyoumean@1.2.2:\n    resolution: {integrity: sha512-gxtyfqMg7GKyhQmb056K7M3xszy/myH8w+B4RT+QXBQsvAOdc3XymqDDPHx1BgPgsdAA5SIifona89YtRATDzw==}\n\n  dlv@1.1.3:\n    resolution: {integrity: sha512-+HlytyjlPKnIG8XuRG8WvmBP8xs8P71y+SKKS6ZXWoEgLuePxtDoUEiH7WkdePWrQ5JBpE6aoVqfZfJUQkjXwA==}\n\n  dom-helpers@5.2.1:\n    resolution: {integrity: sha512-nRCa7CK3VTrM2NmGkIy4cbK7IZlgBE/PYMn55rrXefr5xXDP0LdtfPnblFDoVdcAfslJ7or6iqAUnx0CCGIWQA==}\n\n  dotenv@17.2.2:\n    resolution: {integrity: sha512-Sf2LSQP+bOlhKWWyhFsn0UsfdK/kCWRv1iuA2gXAwt3dyNabr6QSj00I2V10pidqz69soatm9ZwZvpQMTIOd5Q==}\n    engines: {node: '>=12'}\n\n  drizzle-kit@0.30.6:\n    resolution: {integrity: sha512-U4wWit0fyZuGuP7iNmRleQyK2V8wCuv57vf5l3MnG4z4fzNTjY/U13M8owyQ5RavqvqxBifWORaR3wIUzlN64g==}\n    hasBin: true\n\n  drizzle-orm@0.39.3:\n    resolution: {integrity: sha512-EZ8ZpYvDIvKU9C56JYLOmUskazhad+uXZCTCRN4OnRMsL+xAJ05dv1eCpAG5xzhsm1hqiuC5kAZUCS924u2DTw==}\n    peerDependencies:\n      '@aws-sdk/client-rds-data': '>=3'\n      '@cloudflare/workers-types': '>=4'\n      '@electric-sql/pglite': '>=0.2.0'\n      '@libsql/client': '>=0.10.0'\n      '@libsql/client-wasm': '>=0.10.0'\n      '@neondatabase/serverless': '>=0.10.0'\n      '@op-engineering/op-sqlite': '>=2'\n      '@opentelemetry/api': ^1.4.1\n      '@planetscale/database': '>=1'\n      '@prisma/client': '*'\n      '@tidbcloud/serverless': '*'\n      '@types/better-sqlite3': '*'\n      '@types/pg': '*'\n      '@types/sql.js': '*'\n      '@vercel/postgres': '>=0.8.0'\n      '@xata.io/client': '*'\n      better-sqlite3: '>=7'\n      bun-types: '*'\n      expo-sqlite: '>=14.0.0'\n      knex: '*'\n      kysely: '*'\n      mysql2: '>=2'\n      pg: '>=8'\n      postgres: '>=3'\n      prisma: '*'\n      sql.js: '>=1'\n      sqlite3: '>=5'\n    peerDependenciesMeta:\n      '@aws-sdk/client-rds-data':\n        optional: true\n      '@cloudflare/workers-types':\n        optional: true\n      '@electric-sql/pglite':\n        optional: true\n      '@libsql/client':\n        optional: true\n      '@libsql/client-wasm':\n        optional: true\n      '@neondatabase/serverless':\n        optional: true\n      '@op-engineering/op-sqlite':\n        optional: true\n      '@opentelemetry/api':\n        optional: true\n      '@planetscale/database':\n        optional: true\n      '@prisma/client':\n        optional: true\n      '@tidbcloud/serverless':\n        optional: true\n      '@types/better-sqlite3':\n        optional: true\n      '@types/pg':\n        optional: true\n      '@types/sql.js':\n        optional: true\n      '@vercel/postgres':\n        optional: true\n      '@xata.io/client':\n        optional: true\n      better-sqlite3:\n        optional: true\n      bun-types:\n        optional: true\n      expo-sqlite:\n        optional: true\n      knex:\n        optional: true\n      kysely:\n        optional: true\n      mysql2:\n        optional: true\n      pg:\n        optional: true\n      postgres:\n        optional: true\n      prisma:\n        optional: true\n      sql.js:\n        optional: true\n      sqlite3:\n        optional: true\n\n  drizzle-zod@0.7.1:\n    resolution: {integrity: sha512-nZzALOdz44/AL2U005UlmMqaQ1qe5JfanvLujiTHiiT8+vZJTBFhj3pY4Vk+L6UWyKFfNmLhk602Hn4kCTynKQ==}\n    peerDependencies:\n      drizzle-orm: '>=0.36.0'\n      zod: '>=3.0.0'\n\n  dunder-proto@1.0.1:\n    resolution: {integrity: sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==}\n    engines: {node: '>= 0.4'}\n\n  eastasianwidth@0.2.0:\n    resolution: {integrity: sha512-I88TYZWc9XiYHRQ4/3c5rjjfgkjhLyW2luGIheGERbNQ6OY7yTybanSpDXZa8y7VUP9YmDcYa+eyq4ca7iLqWA==}\n\n  ee-first@1.1.1:\n    resolution: {integrity: sha512-WMwm9LhRUo+WUaRN+vRuETqG89IgZphVSNkdFgeb6sS/E4OrDIN7t48CAewSHXc6C8lefD8KKfr5vY61brQlow==}\n\n  electron-to-chromium@1.5.215:\n    resolution: {integrity: sha512-TIvGp57UpeNetj/wV/xpFNpWGb0b/ROw372lHPx5Aafx02gjTBtWnEEcaSX3W2dLM3OSdGGyHX/cHl01JQsLaQ==}\n\n  embla-carousel-react@8.6.0:\n    resolution: {integrity: sha512-0/PjqU7geVmo6F734pmPqpyHqiM99olvyecY7zdweCw+6tKEXnrE90pBiBbMMU8s5tICemzpQ3hi5EpxzGW+JA==}\n    peerDependencies:\n      react: ^16.8.0 || ^17.0.1 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc\n\n  embla-carousel-reactive-utils@8.6.0:\n    resolution: {integrity: sha512-fMVUDUEx0/uIEDM0Mz3dHznDhfX+znCCDCeIophYb1QGVM7YThSWX+wz11zlYwWFOr74b4QLGg0hrGPJeG2s4A==}\n    peerDependencies:\n      embla-carousel: 8.6.0\n\n  embla-carousel@8.6.0:\n    resolution: {integrity: sha512-SjWyZBHJPbqxHOzckOfo8lHisEaJWmwd23XppYFYVh10bU66/Pn5tkVkbkCMZVdbUE5eTCI2nD8OyIP4Z+uwkA==}\n\n  emoji-regex@8.0.0:\n    resolution: {integrity: sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==}\n\n  emoji-regex@9.2.2:\n    resolution: {integrity: sha512-L18DaJsXSUk2+42pv8mLs5jJT2hqFkFE4j21wOmgbUqsZ2hL72NsUU785g9RXgo3s0ZNgVl42TiHp3ZtOv/Vyg==}\n\n  encodeurl@1.0.2:\n    resolution: {integrity: sha512-TPJXq8JqFaVYm2CWmPvnP2Iyo4ZSM7/QKcSmuMLDObfpH5fi7RUGmd/rTDf+rut/saiDiQEeVTNgAmJEdAOx0w==}\n    engines: {node: '>= 0.8'}\n\n  encodeurl@2.0.0:\n    resolution: {integrity: sha512-Q0n9HRi4m6JuGIV1eFlmvJB7ZEVxu93IrMyiMsGC0lrMJMWzRgx6WGquyfQgZVb31vhGgXnfmPNNXmxnOkRBrg==}\n    engines: {node: '>= 0.8'}\n\n  enhanced-resolve@5.18.3:\n    resolution: {integrity: sha512-d4lC8xfavMeBjzGr2vECC3fsGXziXZQyJxD868h2M/mBI3PwAuODxAkLkq5HYuvrPYcUtiLzsTo8U3PgX3Ocww==}\n    engines: {node: '>=10.13.0'}\n\n  env-paths@3.0.0:\n    resolution: {integrity: sha512-dtJUTepzMW3Lm/NPxRf3wP4642UWhjL2sQxc+ym2YMj1m/H2zDNQOlezafzkHwn6sMstjHTwG6iQQsctDW/b1A==}\n    engines: {node: ^12.20.0 || ^14.13.1 || >=16.0.0}\n\n  es-define-property@1.0.1:\n    resolution: {integrity: sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==}\n    engines: {node: '>= 0.4'}\n\n  es-errors@1.3.0:\n    resolution: {integrity: sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==}\n    engines: {node: '>= 0.4'}\n\n  es-object-atoms@1.1.1:\n    resolution: {integrity: sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==}\n    engines: {node: '>= 0.4'}\n\n  es-set-tostringtag@2.1.0:\n    resolution: {integrity: sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==}\n    engines: {node: '>= 0.4'}\n\n  esbuild-register@3.6.0:\n    resolution: {integrity: sha512-H2/S7Pm8a9CL1uhp9OvjwrBh5Pvx0H8qVOxNu8Wed9Y7qv56MPtq+GGM8RJpq6glYJn9Wspr8uw7l55uyinNeg==}\n    peerDependencies:\n      esbuild: '>=0.12 <1'\n\n  esbuild@0.18.20:\n    resolution: {integrity: sha512-ceqxoedUrcayh7Y7ZX6NdbbDzGROiyVBgC4PriJThBKSVPWnnFHZAkfI1lJT8QFkOwH4qOS2SJkS4wvpGl8BpA==}\n    engines: {node: '>=12'}\n    hasBin: true\n\n  esbuild@0.19.12:\n    resolution: {integrity: sha512-aARqgq8roFBj054KvQr5f1sFu0D65G+miZRCuJyJ0G13Zwx7vRar5Zhn2tkQNzIXcBrNVsv/8stehpj+GAjgbg==}\n    engines: {node: '>=12'}\n    hasBin: true\n\n  esbuild@0.21.5:\n    resolution: {integrity: sha512-mg3OPMV4hXywwpoDxu3Qda5xCKQi+vCTZq8S9J/EpkhB2HzKXq4SNFZE3+NK93JYxc8VMSep+lOUSC/RVKaBqw==}\n    engines: {node: '>=12'}\n    hasBin: true\n\n  esbuild@0.25.9:\n    resolution: {integrity: sha512-CRbODhYyQx3qp7ZEwzxOk4JBqmD/seJrzPa/cGjY1VtIn5E09Oi9/dB4JwctnfZ8Q8iT7rioVv5k/FNT/uf54g==}\n    engines: {node: '>=18'}\n    hasBin: true\n\n  escalade@3.2.0:\n    resolution: {integrity: sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==}\n    engines: {node: '>=6'}\n\n  escape-html@1.0.3:\n    resolution: {integrity: sha512-NiSupZ4OeuGwr68lGIeym/ksIZMJodUGOSCZ/FSnTxcrekbvqrgdUxlJOMpijaKZVjAJrWrGs/6Jy8OMuyj9ow==}\n\n  etag@1.8.1:\n    resolution: {integrity: sha512-aIL5Fx7mawVa300al2BnEE4iNvo1qETxLrPI/o05L7z6go7fCw1J6EQmbK4FmJ2AS7kgVF/KEZWufBfdClMcPg==}\n    engines: {node: '>= 0.6'}\n\n  event-target-shim@5.0.1:\n    resolution: {integrity: sha512-i/2XbnSz/uxRCU6+NdVJgKWDTM427+MqYbkQzD321DuCQJUqOuJKIA0IM2+W2xtYHdKOmZ4dR6fExsd4SXL+WQ==}\n    engines: {node: '>=6'}\n\n  eventemitter3@4.0.7:\n    resolution: {integrity: sha512-8guHBZCwKnFhYdHr2ysuRWErTwhoN2X8XELRlrRwpmfeY2jjuUN4taQMsULKUVo1K4DvZl+0pgfyoysHxvmvEw==}\n\n  express-session@1.18.2:\n    resolution: {integrity: sha512-SZjssGQC7TzTs9rpPDuUrR23GNZ9+2+IkA/+IJWmvQilTr5OSliEHGF+D9scbIpdC6yGtTI0/VhaHoVes2AN/A==}\n    engines: {node: '>= 0.8.0'}\n\n  express@4.21.2:\n    resolution: {integrity: sha512-28HqgMZAmih1Czt9ny7qr6ek2qddF4FclbMzwhCREB6OFfH+rXAnuNCwo1/wFvrtbgsQDb4kSbX9de9lFbrXnA==}\n    engines: {node: '>= 0.10.0'}\n\n  fast-equals@5.2.2:\n    resolution: {integrity: sha512-V7/RktU11J3I36Nwq2JnZEM7tNm17eBJz+u25qdxBZeCKiX6BkVSZQjwWIr+IobgnZy+ag73tTZgZi7tr0LrBw==}\n    engines: {node: '>=6.0.0'}\n\n  fast-glob@3.3.3:\n    resolution: {integrity: sha512-7MptL8U0cqcFdzIzwOTHoilX9x5BrNqye7Z/LuC7kCMRio1EMSyqRK3BEAUD7sXRq4iT4AzTVuZdhgQ2TCvYLg==}\n    engines: {node: '>=8.6.0'}\n\n  fastq@1.19.1:\n    resolution: {integrity: sha512-GwLTyxkCXjXbxqIhTsMI2Nui8huMPtnxg7krajPJAjnEG/iiOS7i+zCtWGZR9G0NBKbXKh6X9m9UIsYX/N6vvQ==}\n\n  fflate@0.8.2:\n    resolution: {integrity: sha512-cPJU47OaAoCbg0pBvzsgpTPhmhqI5eJjh/JIu8tPj5q+T7iLvW/JAYUqmE7KOB4R1ZyEhzBaIQpQpardBF5z8A==}\n\n  fill-range@7.1.1:\n    resolution: {integrity: sha512-YsGpe3WHLK8ZYi4tWDg2Jy3ebRz2rXowDxnld4bkQB00cc/1Zw9AWnC0i9ztDJitivtQvaI9KaLyKrc+hBW0yg==}\n    engines: {node: '>=8'}\n\n  finalhandler@1.3.1:\n    resolution: {integrity: sha512-6BN9trH7bp3qvnrRyzsBz+g3lZxTNZTbVO2EV1CS0WIcDbawYVdYvGflME/9QP0h0pYlCDBCTjYa9nZzMDpyxQ==}\n    engines: {node: '>= 0.8'}\n\n  foreground-child@3.3.1:\n    resolution: {integrity: sha512-gIXjKqtFuWEgzFRJA9WCQeSJLZDjgJUOMCMzxtvFq/37KojM1BFGufqsCy0r4qSQmYLsZYMeyRqzIWOMup03sw==}\n    engines: {node: '>=14'}\n\n  form-data-encoder@1.7.2:\n    resolution: {integrity: sha512-qfqtYan3rxrnCk1VYaA4H+Ms9xdpPqvLZa6xmMgFvhO32x7/3J/ExcTd6qpxM0vH2GdMI+poehyBZvqfMTto8A==}\n\n  form-data@4.0.4:\n    resolution: {integrity: sha512-KrGhL9Q4zjj0kiUt5OO4Mr/A/jlI2jDYs5eHBpYHPcBEVSiipAvn2Ko2HnPe20rmcuuvMHNdZFp+4IlGTMF0Ow==}\n    engines: {node: '>= 6'}\n\n  formdata-node@4.4.1:\n    resolution: {integrity: sha512-0iirZp3uVDjVGt9p49aTaqjk84TrglENEDuqfdlZQ1roC9CWlPk6Avf8EEnZNcAqPonwkG35x4n3ww/1THYAeQ==}\n    engines: {node: '>= 12.20'}\n\n  forwarded@0.2.0:\n    resolution: {integrity: sha512-buRG0fpBtRHSTCOASe6hD258tEubFoRLb4ZNA6NxMVHNw2gOcwHo9wyablzMzOA5z9xA9L1KNjk/Nt6MT9aYow==}\n    engines: {node: '>= 0.6'}\n\n  fraction.js@4.3.7:\n    resolution: {integrity: sha512-ZsDfxO51wGAXREY55a7la9LScWpwv9RxIrYABrlvOFBlH/ShPnrtsXeuUIfXKKOVicNxQ+o8JTbJvjS4M89yew==}\n\n  framer-motion@11.18.2:\n    resolution: {integrity: sha512-5F5Och7wrvtLVElIpclDT0CBzMVg3dL22B64aZwHtsIY8RB4mXICLrkajK4G9R+ieSAGcgrLeae2SeUTg2pr6w==}\n    peerDependencies:\n      '@emotion/is-prop-valid': '*'\n      react: ^18.0.0 || ^19.0.0\n      react-dom: ^18.0.0 || ^19.0.0\n    peerDependenciesMeta:\n      '@emotion/is-prop-valid':\n        optional: true\n      react:\n        optional: true\n      react-dom:\n        optional: true\n\n  fresh@0.5.2:\n    resolution: {integrity: sha512-zJ2mQYM18rEFOudeV4GShTGIQ7RbzA7ozbU9I/XBpm7kqgMywgmylMwXHxZJmkVoYkna9d2pVXVXPdYTP9ej8Q==}\n    engines: {node: '>= 0.6'}\n\n  fsevents@2.3.3:\n    resolution: {integrity: sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==}\n    engines: {node: ^8.16.0 || ^10.6.0 || >=11.0.0}\n    os: [darwin]\n\n  function-bind@1.1.2:\n    resolution: {integrity: sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==}\n\n  gel@2.1.1:\n    resolution: {integrity: sha512-Newg9X7mRYskoBjSw70l1YnJ/ZGbq64VPyR821H5WVkTGpHG2O0mQILxCeUhxdYERLFY9B4tUyKLyf3uMTjtKw==}\n    engines: {node: '>= 18.0.0'}\n    hasBin: true\n\n  gensync@1.0.0-beta.2:\n    resolution: {integrity: sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==}\n    engines: {node: '>=6.9.0'}\n\n  get-intrinsic@1.3.0:\n    resolution: {integrity: sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==}\n    engines: {node: '>= 0.4'}\n\n  get-nonce@1.0.1:\n    resolution: {integrity: sha512-FJhYRoDaiatfEkUK8HKlicmu/3SGFD51q3itKDGoSTysQJBnfOcxU5GxnhE1E6soB76MbT0MBtnKJuXyAx+96Q==}\n    engines: {node: '>=6'}\n\n  get-proto@1.0.1:\n    resolution: {integrity: sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==}\n    engines: {node: '>= 0.4'}\n\n  get-tsconfig@4.10.1:\n    resolution: {integrity: sha512-auHyJ4AgMz7vgS8Hp3N6HXSmlMdUyhSUrfBF16w153rxtLIEOE+HGqaBppczZvnHLqQJfiHotCYpNhl0lUROFQ==}\n\n  glob-parent@5.1.2:\n    resolution: {integrity: sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==}\n    engines: {node: '>= 6'}\n\n  glob-parent@6.0.2:\n    resolution: {integrity: sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==}\n    engines: {node: '>=10.13.0'}\n\n  glob@10.4.5:\n    resolution: {integrity: sha512-7Bv8RF0k6xjo7d4A/PxYLbUCfb6c+Vpd2/mB2yRDlew7Jb5hEXiCD9ibfO7wpk8i4sevK6DFny9h7EYbM3/sHg==}\n    hasBin: true\n\n  gopd@1.2.0:\n    resolution: {integrity: sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==}\n    engines: {node: '>= 0.4'}\n\n  graceful-fs@4.2.11:\n    resolution: {integrity: sha512-RbJ5/jmFcNNCcDV5o9eTnBLJ/HszWV0P73bc+Ff4nS/rJj+YaS6IGyiOL0VoBYX+l1Wrl3k63h/KrH+nhJ0XvQ==}\n\n  groq-sdk@0.30.0:\n    resolution: {integrity: sha512-9PowoybiGkq1GpvkC7ikvT+WIFu6zAkeXF8p4eqNEYgGnEcf70fBWuwWqU1KIPQgTMw5sfausvJWzzPbYdHfCQ==}\n\n  has-symbols@1.1.0:\n    resolution: {integrity: sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==}\n    engines: {node: '>= 0.4'}\n\n  has-tostringtag@1.0.2:\n    resolution: {integrity: sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==}\n    engines: {node: '>= 0.4'}\n\n  hasown@2.0.2:\n    resolution: {integrity: sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==}\n    engines: {node: '>= 0.4'}\n\n  http-errors@2.0.0:\n    resolution: {integrity: sha512-FtwrG/euBzaEjYeRqOgly7G0qviiXoJWnvEH2Z1plBdXgbyjv34pHTSb9zoeHMyDy33+DWy5Wt9Wo+TURtOYSQ==}\n    engines: {node: '>= 0.8'}\n\n  humanize-ms@1.2.1:\n    resolution: {integrity: sha512-Fl70vYtsAFb/C06PTS9dZBo7ihau+Tu/DNCk/OyHhea07S+aeMWpFFkUaXRa8fI+ScZbEI8dfSxwY7gxZ9SAVQ==}\n\n  iconv-lite@0.4.24:\n    resolution: {integrity: sha512-v3MXnZAcvnywkTUEZomIActle7RXXeedOR31wwl7VlyoXO4Qi9arvSenNQWne1TcRwhCL1HwLI21bEqdpj8/rA==}\n    engines: {node: '>=0.10.0'}\n\n  inherits@2.0.4:\n    resolution: {integrity: sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==}\n\n  input-otp@1.4.2:\n    resolution: {integrity: sha512-l3jWwYNvrEa6NTCt7BECfCm48GvwuZzkoeG3gBL2w4CHeOXW3eKFmf9UNYkNfYc3mxMrthMnxjIE07MT0zLBQA==}\n    peerDependencies:\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0.0 || ^19.0.0-rc\n\n  internmap@2.0.3:\n    resolution: {integrity: sha512-5Hh7Y1wQbvY5ooGgPbDaL5iYLAPzMTUrjMulskHLH6wnv/A+1q5rgEaiuqEjB+oxGXIVZs1FF+R/KPN3ZSQYYg==}\n    engines: {node: '>=12'}\n\n  ipaddr.js@1.9.1:\n    resolution: {integrity: sha512-0KI/607xoxSToH7GjN1FfSbLoU0+btTicjsQSWQlh/hZykN8KpmMf7uYwPW3R+akZ6R/w18ZlXSHBYXiYUPO3g==}\n    engines: {node: '>= 0.10'}\n\n  is-binary-path@2.1.0:\n    resolution: {integrity: sha512-ZMERYes6pDydyuGidse7OsHxtbI7WVeUEozgR/g7rd0xUimYNlvZRE/K2MgZTjWy725IfelLeVcEM97mmtRGXw==}\n    engines: {node: '>=8'}\n\n  is-core-module@2.16.1:\n    resolution: {integrity: sha512-UfoeMA6fIJ8wTYFEUjelnaGI67v6+N7qXJEvQuIGa99l4xsCruSYOVSQ0uPANn4dAzm8lkYPaKLrrijLq7x23w==}\n    engines: {node: '>= 0.4'}\n\n  is-extglob@2.1.1:\n    resolution: {integrity: sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==}\n    engines: {node: '>=0.10.0'}\n\n  is-fullwidth-code-point@3.0.0:\n    resolution: {integrity: sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==}\n    engines: {node: '>=8'}\n\n  is-glob@4.0.3:\n    resolution: {integrity: sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==}\n    engines: {node: '>=0.10.0'}\n\n  is-number@7.0.0:\n    resolution: {integrity: sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==}\n    engines: {node: '>=0.12.0'}\n\n  isexe@2.0.0:\n    resolution: {integrity: sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==}\n\n  isexe@3.1.1:\n    resolution: {integrity: sha512-LpB/54B+/2J5hqQ7imZHfdU31OlgQqx7ZicVlkm9kzg9/w8GKLEcFfJl/t7DCEDueOyBAD6zCCwTO6Fzs0NoEQ==}\n    engines: {node: '>=16'}\n\n  jackspeak@3.4.3:\n    resolution: {integrity: sha512-OGlZQpz2yfahA/Rd1Y8Cd9SIEsqvXkLVoSw/cgwhnhFMDbsQFeZYoJJ7bIZBS9BcamUW96asq/npPWugM+RQBw==}\n\n  jiti@1.21.7:\n    resolution: {integrity: sha512-/imKNG4EbWNrVjoNC/1H5/9GFy+tqjGBHCaSsN+P2RnPqjsLmv6UD3Ej+Kj8nBWaRAwyk7kK5ZUc+OEatnTR3A==}\n    hasBin: true\n\n  jiti@2.5.1:\n    resolution: {integrity: sha512-twQoecYPiVA5K/h6SxtORw/Bs3ar+mLUtoPSc7iMXzQzK8d7eJ/R09wmTwAjiamETn1cXYPGfNnu7DMoHgu12w==}\n    hasBin: true\n\n  js-tokens@4.0.0:\n    resolution: {integrity: sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==}\n\n  jsesc@3.1.0:\n    resolution: {integrity: sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==}\n    engines: {node: '>=6'}\n    hasBin: true\n\n  json5@2.2.3:\n    resolution: {integrity: sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==}\n    engines: {node: '>=6'}\n    hasBin: true\n\n  lightningcss-darwin-arm64@1.30.1:\n    resolution: {integrity: sha512-c8JK7hyE65X1MHMN+Viq9n11RRC7hgin3HhYKhrMyaXflk5GVplZ60IxyoVtzILeKr+xAJwg6zK6sjTBJ0FKYQ==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [arm64]\n    os: [darwin]\n\n  lightningcss-darwin-x64@1.30.1:\n    resolution: {integrity: sha512-k1EvjakfumAQoTfcXUcHQZhSpLlkAuEkdMBsI/ivWw9hL+7FtilQc0Cy3hrx0AAQrVtQAbMI7YjCgYgvn37PzA==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [x64]\n    os: [darwin]\n\n  lightningcss-freebsd-x64@1.30.1:\n    resolution: {integrity: sha512-kmW6UGCGg2PcyUE59K5r0kWfKPAVy4SltVeut+umLCFoJ53RdCUWxcRDzO1eTaxf/7Q2H7LTquFHPL5R+Gjyig==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [x64]\n    os: [freebsd]\n\n  lightningcss-linux-arm-gnueabihf@1.30.1:\n    resolution: {integrity: sha512-MjxUShl1v8pit+6D/zSPq9S9dQ2NPFSQwGvxBCYaBYLPlCWuPh9/t1MRS8iUaR8i+a6w7aps+B4N0S1TYP/R+Q==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [arm]\n    os: [linux]\n\n  lightningcss-linux-arm64-gnu@1.30.1:\n    resolution: {integrity: sha512-gB72maP8rmrKsnKYy8XUuXi/4OctJiuQjcuqWNlJQ6jZiWqtPvqFziskH3hnajfvKB27ynbVCucKSm2rkQp4Bw==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [arm64]\n    os: [linux]\n\n  lightningcss-linux-arm64-musl@1.30.1:\n    resolution: {integrity: sha512-jmUQVx4331m6LIX+0wUhBbmMX7TCfjF5FoOH6SD1CttzuYlGNVpA7QnrmLxrsub43ClTINfGSYyHe2HWeLl5CQ==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [arm64]\n    os: [linux]\n\n  lightningcss-linux-x64-gnu@1.30.1:\n    resolution: {integrity: sha512-piWx3z4wN8J8z3+O5kO74+yr6ze/dKmPnI7vLqfSqI8bccaTGY5xiSGVIJBDd5K5BHlvVLpUB3S2YCfelyJ1bw==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [x64]\n    os: [linux]\n\n  lightningcss-linux-x64-musl@1.30.1:\n    resolution: {integrity: sha512-rRomAK7eIkL+tHY0YPxbc5Dra2gXlI63HL+v1Pdi1a3sC+tJTcFrHX+E86sulgAXeI7rSzDYhPSeHHjqFhqfeQ==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [x64]\n    os: [linux]\n\n  lightningcss-win32-arm64-msvc@1.30.1:\n    resolution: {integrity: sha512-mSL4rqPi4iXq5YVqzSsJgMVFENoa4nGTT/GjO2c0Yl9OuQfPsIfncvLrEW6RbbB24WtZ3xP/2CCmI3tNkNV4oA==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [arm64]\n    os: [win32]\n\n  lightningcss-win32-x64-msvc@1.30.1:\n    resolution: {integrity: sha512-PVqXh48wh4T53F/1CCu8PIPCxLzWyCnn/9T5W1Jpmdy5h9Cwd+0YQS6/LwhHXSafuc61/xg9Lv5OrCby6a++jg==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [x64]\n    os: [win32]\n\n  lightningcss@1.30.1:\n    resolution: {integrity: sha512-xi6IyHML+c9+Q3W0S4fCQJOym42pyurFiJUHEcEyHS0CeKzia4yZDEsLlqOFykxOdHpNy0NmvVO31vcSqAxJCg==}\n    engines: {node: '>= 12.0.0'}\n\n  lilconfig@3.1.3:\n    resolution: {integrity: sha512-/vlFKAoH5Cgt3Ie+JLhRbwOsCQePABiU3tJ1egGvyQ+33R/vcwM2Zl2QR/LzjsBeItPt3oSVXapn+m4nQDvpzw==}\n    engines: {node: '>=14'}\n\n  lines-and-columns@1.2.4:\n    resolution: {integrity: sha512-7ylylesZQ/PV29jhEDl3Ufjo6ZX7gCqJr5F7PKrqc93v7fzSymt1BpwEU8nAUXs8qzzvqhbjhK5QZg6Mt/HkBg==}\n\n  lodash.castarray@4.4.0:\n    resolution: {integrity: sha512-aVx8ztPv7/2ULbArGJ2Y42bG1mEQ5mGjpdvrbJcJFU3TbYybe+QlLS4pst9zV52ymy2in1KpFPiZnAOATxD4+Q==}\n\n  lodash.isplainobject@4.0.6:\n    resolution: {integrity: sha512-oSXzaWypCMHkPC3NvBEaPHf0KsA5mvPrOPgQWDsbg8n7orZ290M0BmC/jgRZ4vcJ6DTAhjrsSYgdsW/F+MFOBA==}\n\n  lodash.merge@4.6.2:\n    resolution: {integrity: sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==}\n\n  lodash@4.17.21:\n    resolution: {integrity: sha512-v2kDEe57lecTulaDIuNTPy3Ry4gLGJ6Z1O3vE1krgXZNrsQ+LFTGHVxVjcXPs17LhbZVGedAJv8XZ1tvj5FvSg==}\n\n  loose-envify@1.4.0:\n    resolution: {integrity: sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==}\n    hasBin: true\n\n  lru-cache@10.4.3:\n    resolution: {integrity: sha512-JNAzZcXrCt42VGLuYz0zfAzDfAvJWW6AfYlDBQyDV5DClI2m5sAmK+OIO7s59XfsRsWHp02jAJrRadPRGTt6SQ==}\n\n  lru-cache@4.1.5:\n    resolution: {integrity: sha512-sWZlbEP2OsHNkXrMl5GYk/jKk70MBng6UU4YI/qGDYbgf6YbP4EvmqISbXCoJiRKs+1bSpFHVgQxvJ17F2li5g==}\n\n  lru-cache@5.1.1:\n    resolution: {integrity: sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==}\n\n  lucide-react@0.453.0:\n    resolution: {integrity: sha512-kL+RGZCcJi9BvJtzg2kshO192Ddy9hv3ij+cPrVPWSRzgCWCVazoQJxOjAwgK53NomL07HB7GPHW120FimjNhQ==}\n    peerDependencies:\n      react: ^16.5.1 || ^17.0.0 || ^18.0.0 || ^19.0.0-rc\n\n  magic-string@0.30.19:\n    resolution: {integrity: sha512-2N21sPY9Ws53PZvsEpVtNuSW+ScYbQdp4b9qUaL+9QkHUrGFKo56Lg9Emg5s9V/qrtNBmiR01sYhUOwu3H+VOw==}\n\n  math-intrinsics@1.1.0:\n    resolution: {integrity: sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==}\n    engines: {node: '>= 0.4'}\n\n  media-typer@0.3.0:\n    resolution: {integrity: sha512-dq+qelQ9akHpcOl/gUVRTxVIOkAJ1wR3QAvb4RsVjS8oVoFjDGTc679wJYmUmknUF5HwMLOgb5O+a3KxfWapPQ==}\n    engines: {node: '>= 0.6'}\n\n  memorystore@1.6.7:\n    resolution: {integrity: sha512-OZnmNY/NDrKohPQ+hxp0muBcBKrzKNtHr55DbqSx9hLsYVNnomSAMRAtI7R64t3gf3ID7tHQA7mG4oL3Hu9hdw==}\n    engines: {node: '>=0.10'}\n\n  merge-descriptors@1.0.3:\n    resolution: {integrity: sha512-gaNvAS7TZ897/rVaZ0nMtAyxNyi/pdbjbAwUpFQpN70GqnVfOiXpeUUMKRBmzXaSQ8DdTX4/0ms62r2K+hE6mQ==}\n\n  merge2@1.4.1:\n    resolution: {integrity: sha512-8q7VEgMJW4J8tcfVPy8g09NcQwZdbwFEqhe/WZkoIzjn/3TGDwtOCYtXGxA3O8tPzpczCCDgv+P2P5y00ZJOOg==}\n    engines: {node: '>= 8'}\n\n  meshoptimizer@0.22.0:\n    resolution: {integrity: sha512-IebiK79sqIy+E4EgOr+CAw+Ke8hAspXKzBd0JdgEmPHiAwmvEj2S4h1rfvo+o/BnfEYd/jAOg5IeeIjzlzSnDg==}\n\n  methods@1.1.2:\n    resolution: {integrity: sha512-iclAHeNqNm68zFtnZ0e+1L2yUIdvzNoauKU4WBA3VvH/vPFieF7qfRlwUZU+DA9P9bPXIS90ulxoUoCH23sV2w==}\n    engines: {node: '>= 0.6'}\n\n  micromatch@4.0.8:\n    resolution: {integrity: sha512-PXwfBhYu0hBCPw8Dn0E+WDYb7af3dSLVWKi3HGv84IdF4TyFoC0ysxFd0Goxw7nSv4T/PzEJQxsYsEiFCKo2BA==}\n    engines: {node: '>=8.6'}\n\n  mime-db@1.52.0:\n    resolution: {integrity: sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==}\n    engines: {node: '>= 0.6'}\n\n  mime-types@2.1.35:\n    resolution: {integrity: sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==}\n    engines: {node: '>= 0.6'}\n\n  mime@1.6.0:\n    resolution: {integrity: sha512-x0Vn8spI+wuJ1O6S7gnbaQg8Pxh4NNHb7KSINmEWKiPE4RKOplvijn+NkmYmmRgP68mc70j2EbeTFRsrswaQeg==}\n    engines: {node: '>=4'}\n    hasBin: true\n\n  minimatch@9.0.5:\n    resolution: {integrity: sha512-G6T0ZX48xgozx7587koeX9Ys2NYy6Gmv//P89sEte9V9whIapMNF4idKxnW2QtCcLiTWlb/wfCabAtAFWhhBow==}\n    engines: {node: '>=16 || 14 >=14.17'}\n\n  minipass@7.1.2:\n    resolution: {integrity: sha512-qOOzS1cBTWYF4BH8fVePDBOO9iptMnGUEZwNc/cMWnTV2nVLZ7VoNWEPHkYczZA0pdoA7dl6e7FL659nX9S2aw==}\n    engines: {node: '>=16 || 14 >=14.17'}\n\n  minizlib@3.0.2:\n    resolution: {integrity: sha512-oG62iEk+CYt5Xj2YqI5Xi9xWUeZhDI8jjQmC5oThVH5JGCTgIjr7ciJDzC7MBzYd//WvR1OTmP5Q38Q8ShQtVA==}\n    engines: {node: '>= 18'}\n\n  mitt@3.0.1:\n    resolution: {integrity: sha512-vKivATfr97l2/QBCYAkXYDbrIWPM2IIKEl7YPhjCvKlG3kE2gm+uBo6nEXK3M5/Ffh/FLpKExzOQ3JJoJGFKBw==}\n\n  mkdirp@3.0.1:\n    resolution: {integrity: sha512-+NsyUUAZDmo6YVHzL/stxSu3t9YS1iljliy3BSDrXJ/dkn1KYdmtZODGGjLcc9XLgVVpH4KshHB8XmZgMhaBXg==}\n    engines: {node: '>=10'}\n    hasBin: true\n\n  modern-screenshot@4.6.6:\n    resolution: {integrity: sha512-8tF0xEpe7yx37mK95UcIghSCWYeu628K2hLJl+ZNY2ANmRzYLlRLpquPHAQcL8keF6BoeEzTEw4GrgmUpGuZ8w==}\n\n  motion-dom@11.18.1:\n    resolution: {integrity: sha512-g76KvA001z+atjfxczdRtw/RXOM3OMSdd1f4DL77qCTF/+avrRJiawSG4yDibEQ215sr9kpinSlX2pCTJ9zbhw==}\n\n  motion-utils@11.18.1:\n    resolution: {integrity: sha512-49Kt+HKjtbJKLtgO/LKj9Ld+6vw9BjH5d9sc40R/kVyH8GLAXgT42M2NnuPcJNuA3s9ZfZBUcwIgpmZWGEE+hA==}\n\n  ms@2.0.0:\n    resolution: {integrity: sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==}\n\n  ms@2.1.3:\n    resolution: {integrity: sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==}\n\n  mz@2.7.0:\n    resolution: {integrity: sha512-z81GNO7nnYMEhrGh9LeymoE4+Yr0Wn5McHIZMK5cfQCl+NDX08sCZgUc9/6MHni9IWuFLm1Z3HTCXu2z9fN62Q==}\n\n  nanoid@3.3.11:\n    resolution: {integrity: sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==}\n    engines: {node: ^10 || ^12 || ^13.7 || ^14 || >=15.0.1}\n    hasBin: true\n\n  nanoid@5.1.5:\n    resolution: {integrity: sha512-Ir/+ZpE9fDsNH0hQ3C68uyThDXzYcim2EqcZ8zn8Chtt1iylPT9xXJB0kPCnqzgcEGikO9RxSrh63MsmVCU7Fw==}\n    engines: {node: ^18 || >=20}\n    hasBin: true\n\n  negotiator@0.6.3:\n    resolution: {integrity: sha512-+EUsqGPLsM+j/zdChZjsnX51g4XrHFOIXwfnCVPGlQk/k5giakcKsuxCObBRu6DSm9opw/O6slWbJdghQM4bBg==}\n    engines: {node: '>= 0.6'}\n\n  next-themes@0.4.6:\n    resolution: {integrity: sha512-pZvgD5L0IEvX5/9GWyHMf3m8BKiVQwsCMHfoFosXtXBMnaS0ZnIJ9ST4b4NqLVKDEm8QBxoNNGNaBv2JNF6XNA==}\n    peerDependencies:\n      react: ^16.8 || ^17 || ^18 || ^19 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17 || ^18 || ^19 || ^19.0.0-rc\n\n  node-domexception@1.0.0:\n    resolution: {integrity: sha512-/jKZoMpw0F8GRwl4/eLROPA3cfcXtLApP0QzLmUT/HuPCZWyB7IY9ZrMeKw2O/nFIqPQB3PVM9aYm0F312AXDQ==}\n    engines: {node: '>=10.5.0'}\n    deprecated: Use your platform's native DOMException instead\n\n  node-fetch@2.7.0:\n    resolution: {integrity: sha512-c4FRfUm/dbcWZ7U+1Wq0AwCyFL+3nt2bEw05wfxSz+DWpWsitgmSgYmy2dQdWyKC1694ELPqMs/YzUSNozLt8A==}\n    engines: {node: 4.x || >=6.0.0}\n    peerDependencies:\n      encoding: ^0.1.0\n    peerDependenciesMeta:\n      encoding:\n        optional: true\n\n  node-gyp-build@4.8.4:\n    resolution: {integrity: sha512-LA4ZjwlnUblHVgq0oBF3Jl/6h/Nvs5fzBLwdEF4nuxnFdsfajde4WfxtJr3CaiH+F6ewcIB/q4jQ4UzPyid+CQ==}\n    hasBin: true\n\n  node-releases@2.0.20:\n    resolution: {integrity: sha512-7gK6zSXEH6neM212JgfYFXe+GmZQM+fia5SsusuBIUgnPheLFBmIPhtFoAQRj8/7wASYQnbDlHPVwY0BefoFgA==}\n\n  normalize-path@3.0.0:\n    resolution: {integrity: sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==}\n    engines: {node: '>=0.10.0'}\n\n  normalize-range@0.1.2:\n    resolution: {integrity: sha512-bdok/XvKII3nUpklnV6P2hxtMNrCboOjAcyBuQnWEhO665FwrSNRxU+AqpsyvO6LgGYPspN+lu5CLtw4jPRKNA==}\n    engines: {node: '>=0.10.0'}\n\n  object-assign@4.1.1:\n    resolution: {integrity: sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==}\n    engines: {node: '>=0.10.0'}\n\n  object-hash@3.0.0:\n    resolution: {integrity: sha512-RSn9F68PjH9HqtltsSnqYC1XXoWe9Bju5+213R98cNGttag9q9yAOTzdbsqvIa7aNm5WffBZFpWYr2aWrklWAw==}\n    engines: {node: '>= 6'}\n\n  object-inspect@1.13.4:\n    resolution: {integrity: sha512-W67iLl4J2EXEGTbfeHCffrjDfitvLANg0UlX3wFUUSTx92KXRFegMHUVgSqE+wvhAbi4WqjGg9czysTV2Epbew==}\n    engines: {node: '>= 0.4'}\n\n  obuf@1.1.2:\n    resolution: {integrity: sha512-PX1wu0AmAdPqOL1mWhqmlOd8kOIZQwGZw6rh7uby9fTc5lhaOWFLX3I6R1hrF9k3zUY40e6igsLGkDXK92LJNg==}\n\n  on-finished@2.4.1:\n    resolution: {integrity: sha512-oVlzkg3ENAhCk2zdv7IJwd/QUD4z2RxRwpkcGY8psCVcCYZNq4wYnVWALHM+brtuJjePWiYF/ClmuDr8Ch5+kg==}\n    engines: {node: '>= 0.8'}\n\n  on-headers@1.1.0:\n    resolution: {integrity: sha512-737ZY3yNnXy37FHkQxPzt4UZ2UWPWiCZWLvFZ4fu5cueciegX0zGPnrlY6bwRg4FdQOe9YU8MkmJwGhoMybl8A==}\n    engines: {node: '>= 0.8'}\n\n  package-json-from-dist@1.0.1:\n    resolution: {integrity: sha512-UEZIS3/by4OC8vL3P2dTXRETpebLI2NiI5vIrjaD/5UtrkFX/tNbwjTSRAGC/+7CAo2pIcBaRgWmcBBHcsaCIw==}\n\n  parseurl@1.3.3:\n    resolution: {integrity: sha512-CiyeOxFT/JZyN5m0z9PfXw4SCBJ6Sygz1Dpl0wqjlhDEGGBP1GnsUVEL0p63hoG1fcj3fHynXi9NYO4nWOL+qQ==}\n    engines: {node: '>= 0.8'}\n\n  passport-local@1.0.0:\n    resolution: {integrity: sha512-9wCE6qKznvf9mQYYbgJ3sVOHmCWoUNMVFoZzNoznmISbhnNNPhN9xfY3sLmScHMetEJeoY7CXwfhCe7argfQow==}\n    engines: {node: '>= 0.4.0'}\n\n  passport-strategy@1.0.0:\n    resolution: {integrity: sha512-CB97UUvDKJde2V0KDWWB3lyf6PC3FaZP7YxZ2G8OAtn9p4HI9j9JLP9qjOGZFvyl8uwNT8qM+hGnz/n16NI7oA==}\n    engines: {node: '>= 0.4.0'}\n\n  passport@0.7.0:\n    resolution: {integrity: sha512-cPLl+qZpSc+ireUvt+IzqbED1cHHkDoVYMo30jbJIdOOjQ1MQYZBPiNvmi8UM6lJuOpTPXJGZQk0DtC4y61MYQ==}\n    engines: {node: '>= 0.4.0'}\n\n  path-key@3.1.1:\n    resolution: {integrity: sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==}\n    engines: {node: '>=8'}\n\n  path-parse@1.0.7:\n    resolution: {integrity: sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==}\n\n  path-scurry@1.11.1:\n    resolution: {integrity: sha512-Xa4Nw17FS9ApQFJ9umLiJS4orGjm7ZzwUrwamcGQuHSzDyth9boKDaycYdDcZDuqYATXw4HFXgaqWTctW/v1HA==}\n    engines: {node: '>=16 || 14 >=14.18'}\n\n  path-to-regexp@0.1.12:\n    resolution: {integrity: sha512-RA1GjUVMnvYFxuqovrEqZoxxW5NUZqbwKtYz/Tt7nXerk0LbLblQmrsgdeOxV5SFHf0UDggjS/bSeOZwt1pmEQ==}\n\n  pause@0.0.1:\n    resolution: {integrity: sha512-KG8UEiEVkR3wGEb4m5yZkVCzigAD+cVEJck2CzYZO37ZGJfctvVptVO192MwrtPhzONn6go8ylnOdMhKqi4nfg==}\n\n  pg-cloudflare@1.2.7:\n    resolution: {integrity: sha512-YgCtzMH0ptvZJslLM1ffsY4EuGaU0cx4XSdXLRFae8bPP4dS5xL1tNB3k2o/N64cHJpwU7dxKli/nZ2lUa5fLg==}\n\n  pg-connection-string@2.9.1:\n    resolution: {integrity: sha512-nkc6NpDcvPVpZXxrreI/FOtX3XemeLl8E0qFr6F2Lrm/I8WOnaWNhIPK2Z7OHpw7gh5XJThi6j6ppgNoaT1w4w==}\n\n  pg-int8@1.0.1:\n    resolution: {integrity: sha512-WCtabS6t3c8SkpDBUlb1kjOs7l66xsGdKpIPZsg4wR+B3+u9UAum2odSsF9tnvxg80h4ZxLWMy4pRjOsFIqQpw==}\n    engines: {node: '>=4.0.0'}\n\n  pg-numeric@1.0.2:\n    resolution: {integrity: sha512-BM/Thnrw5jm2kKLE5uJkXqqExRUY/toLHda65XgFTBTFYZyopbKjBe29Ii3RbkvlsMoFwD+tHeGaCjjv0gHlyw==}\n    engines: {node: '>=4'}\n\n  pg-pool@3.10.1:\n    resolution: {integrity: sha512-Tu8jMlcX+9d8+QVzKIvM/uJtp07PKr82IUOYEphaWcoBhIYkoHpLXN3qO59nAI11ripznDsEzEv8nUxBVWajGg==}\n    peerDependencies:\n      pg: '>=8.0'\n\n  pg-protocol@1.10.3:\n    resolution: {integrity: sha512-6DIBgBQaTKDJyxnXaLiLR8wBpQQcGWuAESkRBX/t6OwA8YsqP+iVSiond2EDy6Y/dsGk8rh/jtax3js5NeV7JQ==}\n\n  pg-types@2.2.0:\n    resolution: {integrity: sha512-qTAAlrEsl8s4OiEQY69wDvcMIdQN6wdz5ojQiOy6YRMuynxenON0O5oCpJI6lshc6scgAY8qvJ2On/p+CXY0GA==}\n    engines: {node: '>=4'}\n\n  pg-types@4.1.0:\n    resolution: {integrity: sha512-o2XFanIMy/3+mThw69O8d4n1E5zsLhdO+OPqswezu7Z5ekP4hYDqlDjlmOpYMbzY2Br0ufCwJLdDIXeNVwcWFg==}\n    engines: {node: '>=10'}\n\n  pg@8.16.3:\n    resolution: {integrity: sha512-enxc1h0jA/aq5oSDMvqyW3q89ra6XIIDZgCX9vkMrnz5DFTw/Ny3Li2lFQ+pt3L6MCgm/5o2o8HW9hiJji+xvw==}\n    engines: {node: '>= 16.0.0'}\n    peerDependencies:\n      pg-native: '>=3.0.1'\n    peerDependenciesMeta:\n      pg-native:\n        optional: true\n\n  pgpass@1.0.5:\n    resolution: {integrity: sha512-FdW9r/jQZhSeohs1Z3sI1yxFQNFvMcnmfuj4WBMUTxOrAyLMaTcE1aAMBiTlbMNaXvBCQuVi0R7hd8udDSP7ug==}\n\n  picocolors@1.1.1:\n    resolution: {integrity: sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==}\n\n  picomatch@2.3.1:\n    resolution: {integrity: sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==}\n    engines: {node: '>=8.6'}\n\n  pify@2.3.0:\n    resolution: {integrity: sha512-udgsAY+fTnvv7kI7aaxbqwWNb0AHiB0qBO89PZKPkoTmGOgdbrHDKD+0B2X4uTfJ/FT1R09r9gTsjUjNJotuog==}\n    engines: {node: '>=0.10.0'}\n\n  pirates@4.0.7:\n    resolution: {integrity: sha512-TfySrs/5nm8fQJDcBDuUng3VOUKsd7S+zqvbOTiGXHfxX4wK31ard+hoNuvkicM/2YFzlpDgABOevKSsB4G/FA==}\n    engines: {node: '>= 6'}\n\n  postcss-import@15.1.0:\n    resolution: {integrity: sha512-hpr+J05B2FVYUAXHeK1YyI267J/dDDhMU6B6civm8hSY1jYJnBXxzKDKDswzJmtLHryrjhnDjqqp/49t8FALew==}\n    engines: {node: '>=14.0.0'}\n    peerDependencies:\n      postcss: ^8.0.0\n\n  postcss-js@4.0.1:\n    resolution: {integrity: sha512-dDLF8pEO191hJMtlHFPRa8xsizHaM82MLfNkUHdUtVEV3tgTp5oj+8qbEqYM57SLfc74KSbw//4SeJma2LRVIw==}\n    engines: {node: ^12 || ^14 || >= 16}\n    peerDependencies:\n      postcss: ^8.4.21\n\n  postcss-load-config@4.0.2:\n    resolution: {integrity: sha512-bSVhyJGL00wMVoPUzAVAnbEoWyqRxkjv64tUl427SKnPrENtq6hJwUojroMz2VB+Q1edmi4IfrAPpami5VVgMQ==}\n    engines: {node: '>= 14'}\n    peerDependencies:\n      postcss: '>=8.0.9'\n      ts-node: '>=9.0.0'\n    peerDependenciesMeta:\n      postcss:\n        optional: true\n      ts-node:\n        optional: true\n\n  postcss-nested@6.2.0:\n    resolution: {integrity: sha512-HQbt28KulC5AJzG+cZtj9kvKB93CFCdLvog1WFLf1D+xmMvPGlBstkpTEZfK5+AN9hfJocyBFCNiqyS48bpgzQ==}\n    engines: {node: '>=12.0'}\n    peerDependencies:\n      postcss: ^8.2.14\n\n  postcss-selector-parser@6.0.10:\n    resolution: {integrity: sha512-IQ7TZdoaqbT+LCpShg46jnZVlhWD2w6iQYAcYXfHARZ7X1t/UGhhceQDs5X0cGqKvYlHNOuv7Oa1xmb0oQuA3w==}\n    engines: {node: '>=4'}\n\n  postcss-selector-parser@6.1.2:\n    resolution: {integrity: sha512-Q8qQfPiZ+THO/3ZrOrO0cJJKfpYCagtMUkXbnEfmgUjwXg6z/WBeOyS9APBBPCTSiDV+s4SwQGu8yFsiMRIudg==}\n    engines: {node: '>=4'}\n\n  postcss-value-parser@4.2.0:\n    resolution: {integrity: sha512-1NNCs6uurfkVbeXG4S8JFT9t19m45ICnif8zWLd5oPSZ50QnwMfK+H3jv408d4jw/7Bttv5axS5IiHoLaVNHeQ==}\n\n  postcss@8.5.6:\n    resolution: {integrity: sha512-3Ybi1tAuwAP9s0r1UQ2J4n5Y0G05bJkpUIO0/bI9MhwmD70S5aTWbXGBwxHrelT+XM1k6dM0pk+SwNkpTRN7Pg==}\n    engines: {node: ^10 || ^12 || >=14}\n\n  postgres-array@2.0.0:\n    resolution: {integrity: sha512-VpZrUqU5A69eQyW2c5CA1jtLecCsN2U/bD6VilrFDWq5+5UIEVO7nazS3TEcHf1zuPYO/sqGvUvW62g86RXZuA==}\n    engines: {node: '>=4'}\n\n  postgres-array@3.0.4:\n    resolution: {integrity: sha512-nAUSGfSDGOaOAEGwqsRY27GPOea7CNipJPOA7lPbdEpx5Kg3qzdP0AaWC5MlhTWV9s4hFX39nomVZ+C4tnGOJQ==}\n    engines: {node: '>=12'}\n\n  postgres-bytea@1.0.0:\n    resolution: {integrity: sha512-xy3pmLuQqRBZBXDULy7KbaitYqLcmxigw14Q5sj8QBVLqEwXfeybIKVWiqAXTlcvdvb0+xkOtDbfQMOf4lST1w==}\n    engines: {node: '>=0.10.0'}\n\n  postgres-bytea@3.0.0:\n    resolution: {integrity: sha512-CNd4jim9RFPkObHSjVHlVrxoVQXz7quwNFpz7RY1okNNme49+sVyiTvTRobiLV548Hx/hb1BG+iE7h9493WzFw==}\n    engines: {node: '>= 6'}\n\n  postgres-date@1.0.7:\n    resolution: {integrity: sha512-suDmjLVQg78nMK2UZ454hAG+OAW+HQPZ6n++TNDUX+L0+uUlLywnoxJKDou51Zm+zTCjrCl0Nq6J9C5hP9vK/Q==}\n    engines: {node: '>=0.10.0'}\n\n  postgres-date@2.1.0:\n    resolution: {integrity: sha512-K7Juri8gtgXVcDfZttFKVmhglp7epKb1K4pgrkLxehjqkrgPhfG6OO8LHLkfaqkbpjNRnra018XwAr1yQFWGcA==}\n    engines: {node: '>=12'}\n\n  postgres-interval@1.2.0:\n    resolution: {integrity: sha512-9ZhXKM/rw350N1ovuWHbGxnGh/SNJ4cnxHiM0rxE4VN41wsg8P8zWn9hv/buK00RP4WvlOyr/RBDiptyxVbkZQ==}\n    engines: {node: '>=0.10.0'}\n\n  postgres-interval@3.0.0:\n    resolution: {integrity: sha512-BSNDnbyZCXSxgA+1f5UU2GmwhoI0aU5yMxRGO8CdFEcY2BQF9xm/7MqKnYoM1nJDk8nONNWDk9WeSmePFhQdlw==}\n    engines: {node: '>=12'}\n\n  postgres-range@1.1.4:\n    resolution: {integrity: sha512-i/hbxIE9803Alj/6ytL7UHQxRvZkI9O4Sy+J3HGc4F4oo/2eQAjTSNJ0bfxyse3bH0nuVesCk+3IRLaMtG3H6w==}\n\n  prop-types@15.8.1:\n    resolution: {integrity: sha512-oj87CgZICdulUohogVAR7AjlC0327U4el4L6eAvOqCeudMDVU0NThNaV+b9Df4dXgSP1gXMTnPdhfe/2qDH5cg==}\n\n  proxy-addr@2.0.7:\n    resolution: {integrity: sha512-llQsMLSUDUPT44jdrU/O37qlnifitDP+ZwrmmZcoSKyLKvtZxpyV0n2/bD/N4tBAAZ/gJEdZU7KMraoK1+XYAg==}\n    engines: {node: '>= 0.10'}\n\n  pseudomap@1.0.2:\n    resolution: {integrity: sha512-b/YwNhb8lk1Zz2+bXXpS/LK9OisiZZ1SNsSLxN1x2OXVEhW2Ckr/7mWE5vrC1ZTiJlD9g19jWszTmJsB+oEpFQ==}\n\n  qs@6.13.0:\n    resolution: {integrity: sha512-+38qI9SOr8tfZ4QmJNplMUxqjbe7LKvvZgWdExBOmd+egZTtjLB67Gu0HRX3u/XOq7UU2Nx6nsjvS16Z9uwfpg==}\n    engines: {node: '>=0.6'}\n\n  queue-microtask@1.2.3:\n    resolution: {integrity: sha512-NuaNSa6flKT5JaSYQzJok04JzTL1CA6aGhv5rfLW3PgqA+M2ChpZQnAC8h8i4ZFkBS8X5RqkDBHA7r4hej3K9A==}\n\n  random-bytes@1.0.0:\n    resolution: {integrity: sha512-iv7LhNVO047HzYR3InF6pUcUsPQiHTM1Qal51DcGSuZFBil1aBBWG5eHPNek7bvILMaYJ/8RU1e8w1AMdHmLQQ==}\n    engines: {node: '>= 0.8'}\n\n  range-parser@1.2.1:\n    resolution: {integrity: sha512-Hrgsx+orqoygnmhFbKaHE6c296J+HTAQXoxEF6gNupROmmGJRoyzfG3ccAveqCBrwr/2yxQ5BVd/GTl5agOwSg==}\n    engines: {node: '>= 0.6'}\n\n  raw-body@2.5.2:\n    resolution: {integrity: sha512-8zGqypfENjCIqGhgXToC8aB2r7YrBX+AQAfIPs/Mlk+BtPTztOvTS01NRW/3Eh60J+a48lt8qsCzirQ6loCVfA==}\n    engines: {node: '>= 0.8'}\n\n  react-day-picker@8.10.1:\n    resolution: {integrity: sha512-TMx7fNbhLk15eqcMt+7Z7S2KF7mfTId/XJDjKE8f+IUcFn0l08/kI4FiYTL/0yuOLmEcbR4Fwe3GJf/NiiMnPA==}\n    peerDependencies:\n      date-fns: ^2.28.0 || ^3.0.0\n      react: ^16.8.0 || ^17.0.0 || ^18.0.0\n\n  react-dom@18.3.1:\n    resolution: {integrity: sha512-5m4nQKp+rZRb09LNH59GM4BxTh9251/ylbKIbpe7TpGxfJ+9kv6BLkLBXIjjspbgbnIBNqlI23tRnTWT0snUIw==}\n    peerDependencies:\n      react: ^18.3.1\n\n  react-hook-form@7.62.0:\n    resolution: {integrity: sha512-7KWFejc98xqG/F4bAxpL41NB3o1nnvQO1RWZT3TqRZYL8RryQETGfEdVnJN2fy1crCiBLLjkRBVK05j24FxJGA==}\n    engines: {node: '>=18.0.0'}\n    peerDependencies:\n      react: ^16.8.0 || ^17 || ^18 || ^19\n\n  react-icons@5.5.0:\n    resolution: {integrity: sha512-MEFcXdkP3dLo8uumGI5xN3lDFNsRtrjbOEKDLD7yv76v4wpnEq2Lt2qeHaQOr34I/wPN3s3+N08WkQ+CW37Xiw==}\n    peerDependencies:\n      react: '*'\n\n  react-is@16.13.1:\n    resolution: {integrity: sha512-24e6ynE2H+OKt4kqsOvNd8kBpV65zoxbA4BVsEOB3ARVWQki/DHzaUoC5KuON/BiccDaCCTZBuOcfZs70kR8bQ==}\n\n  react-is@18.3.1:\n    resolution: {integrity: sha512-/LLMVyas0ljjAtoYiPqYiL8VWXzUUdThrmU5+n20DZv+a+ClRoevUzw5JxU+Ieh5/c87ytoTBV9G1FiKfNJdmg==}\n\n  react-refresh@0.17.0:\n    resolution: {integrity: sha512-z6F7K9bV85EfseRCp2bzrpyQ0Gkw1uLoCel9XBVWPg/TjRj94SkJzUTGfOa4bs7iJvBWtQG0Wq7wnI0syw3EBQ==}\n    engines: {node: '>=0.10.0'}\n\n  react-remove-scroll-bar@2.3.8:\n    resolution: {integrity: sha512-9r+yi9+mgU33AKcj6IbT9oRCO78WriSj6t/cF8DWBZJ9aOGPOTEDvdUDz1FwKim7QXWwmHqtdHnRJfhAxEG46Q==}\n    engines: {node: '>=10'}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  react-remove-scroll@2.7.1:\n    resolution: {integrity: sha512-HpMh8+oahmIdOuS5aFKKY6Pyog+FNaZV/XyJOq7b4YFwsFHe5yYfdbIalI4k3vU2nSDql7YskmUseHsRrJqIPA==}\n    engines: {node: '>=10'}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  react-resizable-panels@2.1.9:\n    resolution: {integrity: sha512-z77+X08YDIrgAes4jl8xhnUu1LNIRp4+E7cv4xHmLOxxUPO/ML7PSrE813b90vj7xvQ1lcf7g2uA9GeMZonjhQ==}\n    peerDependencies:\n      react: ^16.14.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc\n      react-dom: ^16.14.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc\n\n  react-smooth@4.0.4:\n    resolution: {integrity: sha512-gnGKTpYwqL0Iii09gHobNolvX4Kiq4PKx6eWBCYYix+8cdw+cGo3do906l1NBPKkSWx1DghC1dlWG9L2uGd61Q==}\n    peerDependencies:\n      react: ^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0\n      react-dom: ^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0\n\n  react-style-singleton@2.2.3:\n    resolution: {integrity: sha512-b6jSvxvVnyptAiLjbkWLE/lOnR4lfTtDAl+eUC7RZy+QQWc6wRzIV2CE6xBuMmDxc2qIihtDCZD5NPOFl7fRBQ==}\n    engines: {node: '>=10'}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  react-transition-group@4.4.5:\n    resolution: {integrity: sha512-pZcd1MCJoiKiBR2NRxeCRg13uCXbydPnmB4EOeRrY7480qNWO8IIgQG6zlDkm6uRMsURXPuKq0GWtiM59a5Q6g==}\n    peerDependencies:\n      react: '>=16.6.0'\n      react-dom: '>=16.6.0'\n\n  react@18.3.1:\n    resolution: {integrity: sha512-wS+hAgJShR0KhEvPJArfuPVN1+Hz1t0Y6n5jLrGQbkb4urgPE/0Rve+1kMB1v/oWgHgm4WIcV+i7F2pTVj+2iQ==}\n    engines: {node: '>=0.10.0'}\n\n  read-cache@1.0.0:\n    resolution: {integrity: sha512-Owdv/Ft7IjOgm/i0xvNDZ1LrRANRfew4b2prF3OWMQLxLfu3bS8FVhCsrSCMK4lR56Y9ya+AThoTpDCTxCmpRA==}\n\n  readdirp@3.6.0:\n    resolution: {integrity: sha512-hOS089on8RduqdbhvQ5Z37A0ESjsqz6qnRcffsMU3495FuTdqSm+7bhJ29JvIOsBDEEnan5DPu9t3To9VRlMzA==}\n    engines: {node: '>=8.10.0'}\n\n  recharts-scale@0.4.5:\n    resolution: {integrity: sha512-kivNFO+0OcUNu7jQquLXAxz1FIwZj8nrj+YkOKc5694NbjCvcT6aSZiIzNzd2Kul4o4rTto8QVR9lMNtxD4G1w==}\n\n  recharts@2.15.4:\n    resolution: {integrity: sha512-UT/q6fwS3c1dHbXv2uFgYJ9BMFHu3fwnd7AYZaEQhXuYQ4hgsxLvsUXzGdKeZrW5xopzDCvuA2N41WJ88I7zIw==}\n    engines: {node: '>=14'}\n    peerDependencies:\n      react: ^16.0.0 || ^17.0.0 || ^18.0.0 || ^19.0.0\n      react-dom: ^16.0.0 || ^17.0.0 || ^18.0.0 || ^19.0.0\n\n  regexparam@3.0.0:\n    resolution: {integrity: sha512-RSYAtP31mvYLkAHrOlh25pCNQ5hWnT106VukGaaFfuJrZFkGRX5GhUAdPqpSDXxOhA2c4akmRuplv1mRqnBn6Q==}\n    engines: {node: '>=8'}\n\n  resolve-pkg-maps@1.0.0:\n    resolution: {integrity: sha512-seS2Tj26TBVOC2NIc2rOe2y2ZO7efxITtLZcGSOnHHNOQ7CkiUBfw0Iw2ck6xkIhPwLhKNLS8BO+hEpngQlqzw==}\n\n  resolve@1.22.10:\n    resolution: {integrity: sha512-NPRy+/ncIMeDlTAsuqwKIiferiawhefFJtkNSW0qZJEqMEb+qBt/77B/jGeeek+F0uOeN05CDa6HXbbIgtVX4w==}\n    engines: {node: '>= 0.4'}\n    hasBin: true\n\n  reusify@1.1.0:\n    resolution: {integrity: sha512-g6QUff04oZpHs0eG5p83rFLhHeV00ug/Yf9nZM6fLeUrPguBTkTQOdpAWWspMh55TZfVQDPaN3NQJfbVRAxdIw==}\n    engines: {iojs: '>=1.0.0', node: '>=0.10.0'}\n\n  rollup@4.50.1:\n    resolution: {integrity: sha512-78E9voJHwnXQMiQdiqswVLZwJIzdBKJ1GdI5Zx6XwoFKUIk09/sSrr+05QFzvYb8q6Y9pPV45zzDuYa3907TZA==}\n    engines: {node: '>=18.0.0', npm: '>=8.0.0'}\n    hasBin: true\n\n  run-parallel@1.2.0:\n    resolution: {integrity: sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==}\n\n  safe-buffer@5.2.1:\n    resolution: {integrity: sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==}\n\n  safer-buffer@2.1.2:\n    resolution: {integrity: sha512-YZo3K82SD7Riyi0E1EQPojLz7kpepnSQI9IyPbHHg1XXXevb5dJI7tpyN2ADxGcQbHG7vcyRHk0cbwqcQriUtg==}\n\n  scheduler@0.23.2:\n    resolution: {integrity: sha512-UOShsPwz7NrMUqhR6t0hWjFduvOzbtv7toDH1/hIrfRNIDBnnBWd0CwJTGvTpngVlmwGCdP9/Zl/tVrDqcuYzQ==}\n\n  semver@6.3.1:\n    resolution: {integrity: sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==}\n    hasBin: true\n\n  semver@7.7.2:\n    resolution: {integrity: sha512-RF0Fw+rO5AMf9MAyaRXI4AV0Ulj5lMHqVxxdSgiVbixSCXoEmmX/jk0CuJw4+3SqroYO9VoUh+HcuJivvtJemA==}\n    engines: {node: '>=10'}\n    hasBin: true\n\n  send@0.19.0:\n    resolution: {integrity: sha512-dW41u5VfLXu8SJh5bwRmyYUbAoSB3c9uQh6L8h/KtsFREPWpbX1lrljJo186Jc4nmci/sGUZ9a0a0J2zgfq2hw==}\n    engines: {node: '>= 0.8.0'}\n\n  serve-static@1.16.2:\n    resolution: {integrity: sha512-VqpjJZKadQB/PEbEwvFdO43Ax5dFBZ2UECszz8bQ7pi7wt//PWe1P6MN7eCnjsatYtBT6EuiClbjSWP2WrIoTw==}\n    engines: {node: '>= 0.8.0'}\n\n  setprototypeof@1.2.0:\n    resolution: {integrity: sha512-E5LDX7Wrp85Kil5bhZv46j8jOeboKq5JMmYM3gVGdGH8xFpPWXUMsNrlODCrkoxMEeNi/XZIwuRvY4XNwYMJpw==}\n\n  shebang-command@2.0.0:\n    resolution: {integrity: sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==}\n    engines: {node: '>=8'}\n\n  shebang-regex@3.0.0:\n    resolution: {integrity: sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==}\n    engines: {node: '>=8'}\n\n  shell-quote@1.8.3:\n    resolution: {integrity: sha512-ObmnIF4hXNg1BqhnHmgbDETF8dLPCggZWBjkQfhZpbszZnYur5DUljTcCHii5LC3J5E0yeO/1LIMyH+UvHQgyw==}\n    engines: {node: '>= 0.4'}\n\n  side-channel-list@1.0.0:\n    resolution: {integrity: sha512-FCLHtRD/gnpCiCHEiJLOwdmFP+wzCmDEkc9y7NsYxeF4u7Btsn1ZuwgwJGxImImHicJArLP4R0yX4c2KCrMrTA==}\n    engines: {node: '>= 0.4'}\n\n  side-channel-map@1.0.1:\n    resolution: {integrity: sha512-VCjCNfgMsby3tTdo02nbjtM/ewra6jPHmpThenkTYh8pG9ucZ/1P8So4u4FGBek/BjpOVsDCMoLA/iuBKIFXRA==}\n    engines: {node: '>= 0.4'}\n\n  side-channel-weakmap@1.0.2:\n    resolution: {integrity: sha512-WPS/HvHQTYnHisLo9McqBHOJk2FkHO/tlpvldyrnem4aeQp4hai3gythswg6p01oSoTl58rcpiFAjF2br2Ak2A==}\n    engines: {node: '>= 0.4'}\n\n  side-channel@1.1.0:\n    resolution: {integrity: sha512-ZX99e6tRweoUXqR+VBrslhda51Nh5MTQwou5tnUDgbtyM0dBgmhEDtWGP/xbKn6hqfPRHujUNwz5fy/wbbhnpw==}\n    engines: {node: '>= 0.4'}\n\n  signal-exit@4.1.0:\n    resolution: {integrity: sha512-bzyZ1e88w9O1iNJbKnOlvYTrWPDl46O1bG0D3XInv+9tkPrxrN8jUUTiFlDkkmKWgn1M6CfIA13SuGqOa9Korw==}\n    engines: {node: '>=14'}\n\n  simplex-noise@4.0.3:\n    resolution: {integrity: sha512-qSE2I4AngLQG7BXqoZj51jokT4WUXe8mOBrvfOXpci8+6Yu44+/dD5zqDpOx3Ux792eamTd2lLcI8jqFntk/lg==}\n\n  source-map-js@1.2.1:\n    resolution: {integrity: sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==}\n    engines: {node: '>=0.10.0'}\n\n  source-map-support@0.5.21:\n    resolution: {integrity: sha512-uBHU3L3czsIyYXKX88fdrGovxdSCoTGDRZ6SYXtSRxLZUzHg5P/66Ht6uoUlHu9EZod+inXhKo3qQgwXUT/y1w==}\n\n  source-map@0.6.1:\n    resolution: {integrity: sha512-UjgapumWlbMhkBgzT7Ykc5YXUT46F0iKu8SGXq0bcwP5dz/h0Plj6enJqjz1Zbq2l5WaqYnrVbwWOWMyF3F47g==}\n    engines: {node: '>=0.10.0'}\n\n  split2@4.2.0:\n    resolution: {integrity: sha512-UcjcJOWknrNkF6PLX83qcHM6KHgVKNkV62Y8a5uYDVv9ydGQVwAHMKqHdJje1VTWpljG0WYpCDhrCdAOYH4TWg==}\n    engines: {node: '>= 10.x'}\n\n  statuses@2.0.1:\n    resolution: {integrity: sha512-RwNA9Z/7PrK06rYLIzFMlaF+l73iwpzsqRIFgbMLbTcLD6cOao82TaWefPXQvB2fOC4AjuYSEndS7N/mTCbkdQ==}\n    engines: {node: '>= 0.8'}\n\n  string-width@4.2.3:\n    resolution: {integrity: sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==}\n    engines: {node: '>=8'}\n\n  string-width@5.1.2:\n    resolution: {integrity: sha512-HnLOCR3vjcY8beoNLtcjZ5/nxn2afmME6lhrDrebokqMap+XbeW8n9TXpPDOqdGK5qcI3oT0GKTW6wC7EMiVqA==}\n    engines: {node: '>=12'}\n\n  strip-ansi@6.0.1:\n    resolution: {integrity: sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==}\n    engines: {node: '>=8'}\n\n  strip-ansi@7.1.2:\n    resolution: {integrity: sha512-gmBGslpoQJtgnMAvOVqGZpEz9dyoKTCzy2nfz/n8aIFhN/jCE/rCmcxabB6jOOHV+0WNnylOxaxBQPSvcWklhA==}\n    engines: {node: '>=12'}\n\n  sucrase@3.35.0:\n    resolution: {integrity: sha512-8EbVDiu9iN/nESwxeSxDKe0dunta1GOlHufmSSXxMD2z2/tMZpDMpvXQGsc+ajGo8y2uYUmixaSRUc/QPoQ0GA==}\n    engines: {node: '>=16 || 14 >=14.17'}\n    hasBin: true\n\n  supports-preserve-symlinks-flag@1.0.0:\n    resolution: {integrity: sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==}\n    engines: {node: '>= 0.4'}\n\n  tailwind-merge@2.6.0:\n    resolution: {integrity: sha512-P+Vu1qXfzediirmHOC3xKGAYeZtPcV9g76X+xg2FD4tYgR71ewMA35Y3sCz3zhiN/dwefRpJX0yBcgwi1fXNQA==}\n\n  tailwindcss-animate@1.0.7:\n    resolution: {integrity: sha512-bl6mpH3T7I3UFxuvDEXLxy/VuFxBk5bbzplh7tXI68mwMokNYd1t9qPBHlnyTwfa4JGC4zP516I1hYYtQ/vspA==}\n    peerDependencies:\n      tailwindcss: '>=3.0.0 || insiders'\n\n  tailwindcss@3.4.17:\n    resolution: {integrity: sha512-w33E2aCvSDP0tW9RZuNXadXlkHXqFzSkQew/aIa2i/Sj8fThxwovwlXHSPXTbAHwEIhBFXAedUhP2tueAKP8Og==}\n    engines: {node: '>=14.0.0'}\n    hasBin: true\n\n  tailwindcss@4.1.13:\n    resolution: {integrity: sha512-i+zidfmTqtwquj4hMEwdjshYYgMbOrPzb9a0M3ZgNa0JMoZeFC6bxZvO8yr8ozS6ix2SDz0+mvryPeBs2TFE+w==}\n\n  tapable@2.2.3:\n    resolution: {integrity: sha512-ZL6DDuAlRlLGghwcfmSn9sK3Hr6ArtyudlSAiCqQ6IfE+b+HHbydbYDIG15IfS5do+7XQQBdBiubF/cV2dnDzg==}\n    engines: {node: '>=6'}\n\n  tar@7.4.3:\n    resolution: {integrity: sha512-5S7Va8hKfV7W5U6g3aYxXmlPoZVAwUMy9AOKyF2fVuZa2UD3qZjg578OrLRt8PcNN1PleVaL/5/yYATNL0ICUw==}\n    engines: {node: '>=18'}\n\n  thenify-all@1.6.0:\n    resolution: {integrity: sha512-RNxQH/qI8/t3thXJDwcstUO4zeqo64+Uy/+sNVRBx4Xn2OX+OZ9oP+iJnNFqplFra2ZUVeKCSa2oVWi3T4uVmA==}\n    engines: {node: '>=0.8'}\n\n  thenify@3.3.1:\n    resolution: {integrity: sha512-RVZSIV5IG10Hk3enotrhvz0T9em6cyHBLkH/YAZuKqd8hRkKhSfCGIcP2KUY0EPxndzANBmNllzWPwak+bheSw==}\n\n  three@0.179.1:\n    resolution: {integrity: sha512-5y/elSIQbrvKOISxpwXCR4sQqHtGiOI+MKLc3SsBdDXA2hz3Mdp3X59aUp8DyybMa34aeBwbFTpdoLJaUDEWSw==}\n\n  tiny-invariant@1.3.3:\n    resolution: {integrity: sha512-+FbBPE1o9QAYvviau/qC5SE3caw21q3xkvWKBtja5vgqOWIHHJ3ioaq1VPfn/Szqctz2bU/oYeKd9/z5BL+PVg==}\n\n  to-regex-range@5.0.1:\n    resolution: {integrity: sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==}\n    engines: {node: '>=8.0'}\n\n  toidentifier@1.0.1:\n    resolution: {integrity: sha512-o5sSPKEkg/DIQNmH43V0/uerLrpzVedkUh8tGNvaeXpfpuwjKenlSox/2O/BTlZUtEe+JG7s5YhEz608PlAHRA==}\n    engines: {node: '>=0.6'}\n\n  tr46@0.0.3:\n    resolution: {integrity: sha512-N3WMsuqV66lT30CrXNbEjx4GEwlow3v6rr4mCcv6prnfwhS01rkgyFdjPNBYd9br7LpXV1+Emh01fHnq2Gdgrw==}\n\n  ts-interface-checker@0.1.13:\n    resolution: {integrity: sha512-Y/arvbn+rrz3JCKl9C4kVNfTfSm2/mEp5FSz5EsZSANGPSlQrpRI5M4PKF+mJnE52jOO90PnPSc3Ur3bTQw0gA==}\n\n  tslib@2.8.1:\n    resolution: {integrity: sha512-oJFu94HQb+KVduSUQL7wnpmqnfmLsOA/nAh6b6EH0wCEoK0/mPeXU6c3wKDV83MkOuHPRHtSXKKU99IBazS/2w==}\n\n  tsx@4.20.5:\n    resolution: {integrity: sha512-+wKjMNU9w/EaQayHXb7WA7ZaHY6hN8WgfvHNQ3t1PnU91/7O8TcTnIhCDYTZwnt8JsO9IBqZ30Ln1r7pPF52Aw==}\n    engines: {node: '>=18.0.0'}\n    hasBin: true\n\n  tw-animate-css@1.3.8:\n    resolution: {integrity: sha512-Qrk3PZ7l7wUcGYhwZloqfkWCmaXZAoqjkdbIDvzfGshwGtexa/DAs9koXxIkrpEasyevandomzCBAV1Yyop5rw==}\n\n  type-is@1.6.18:\n    resolution: {integrity: sha512-TkRKr9sUTxEH8MdfuCSP7VizJyzRNMjj2J2do2Jr3Kym598JVdEksuzPQCnlFPW4ky9Q+iA+ma9BGm06XQBy8g==}\n    engines: {node: '>= 0.6'}\n\n  typescript@5.6.3:\n    resolution: {integrity: sha512-hjcS1mhfuyi4WW8IWtjP7brDrG2cuDZukyrYrSauoXGNgx0S7zceP07adYkJycEr56BOUTNPzbInooiN3fn1qw==}\n    engines: {node: '>=14.17'}\n    hasBin: true\n\n  uid-safe@2.1.5:\n    resolution: {integrity: sha512-KPHm4VL5dDXKz01UuEd88Df+KzynaohSL9fBh096KWAxSKZQDI2uBrVqtvRM4rwrIrRRKsdLNML/lnaaVSRioA==}\n    engines: {node: '>= 0.8'}\n\n  undici-types@5.26.5:\n    resolution: {integrity: sha512-JlCMO+ehdEIKqlFxk6IfVoAUVmgz7cU7zD/h9XZ0qzeosSHmUJVOzSQvvYSYWXkFXC+IfLKSIffhv0sVZup6pA==}\n\n  undici-types@6.21.0:\n    resolution: {integrity: sha512-iwDZqg0QAGrg9Rav5H4n0M64c3mkR59cJ6wQp+7C4nI0gsmExaedaYLNO44eT4AtBBwjbTiGPMlt2Md0T9H9JQ==}\n\n  unpipe@1.0.0:\n    resolution: {integrity: sha512-pjy2bYhSsufwWlKwPc+l3cN7+wuJlK6uz0YdJEOlQDbl6jo/YlPi4mb8agUkVC8BF7V8NuzeyPNqRksA3hztKQ==}\n    engines: {node: '>= 0.8'}\n\n  update-browserslist-db@1.1.3:\n    resolution: {integrity: sha512-UxhIZQ+QInVdunkDAaiazvvT/+fXL5Osr0JZlJulepYu6Jd7qJtDZjlur0emRlT71EN3ScPoE7gvsuIKKNavKw==}\n    hasBin: true\n    peerDependencies:\n      browserslist: '>= 4.21.0'\n\n  use-callback-ref@1.3.3:\n    resolution: {integrity: sha512-jQL3lRnocaFtu3V00JToYz/4QkNWswxijDaCVNZRiRTO3HQDLsdu1ZtmIUvV4yPp+rvWm5j0y0TG/S61cuijTg==}\n    engines: {node: '>=10'}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  use-sidecar@1.1.3:\n    resolution: {integrity: sha512-Fedw0aZvkhynoPYlA5WXrMCAMm+nSWdZt6lzJQ7Ok8S6Q+VsHmHpRWndVRJ8Be0ZbkfPc5LRYH+5XrzXcEeLRQ==}\n    engines: {node: '>=10'}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  use-sync-external-store@1.5.0:\n    resolution: {integrity: sha512-Rb46I4cGGVBmjamjphe8L/UnvJD+uPPtTkNvX5mZgqdbavhI4EbgIWJiIHXJ8bc/i9EQGPRh4DwEURJ552Do0A==}\n    peerDependencies:\n      react: ^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0\n\n  util-deprecate@1.0.2:\n    resolution: {integrity: sha512-EPD5q1uXyFxJpCrLnCc1nHnq3gOa6DZBocAIiI2TaSCA7VCJ1UJDMagCzIkXNsUYfD1daK//LTEQ8xiIbrHtcw==}\n\n  utils-merge@1.0.1:\n    resolution: {integrity: sha512-pMZTvIkT1d+TFGvDOqodOclx0QWkkgi6Tdoa8gC8ffGAAqz9pzPTZWAybbsHHoED/ztMtkv/VoYTYyShUn81hA==}\n    engines: {node: '>= 0.4.0'}\n\n  vary@1.1.2:\n    resolution: {integrity: sha512-BNGbWLfd0eUPabhkXUVm0j8uuvREyTh5ovRa/dyow/BqAbZJyC+5fU+IzQOzmAKzYqYRAISoRhdQr3eIZ/PXqg==}\n    engines: {node: '>= 0.8'}\n\n  vaul@1.1.2:\n    resolution: {integrity: sha512-ZFkClGpWyI2WUQjdLJ/BaGuV6AVQiJ3uELGk3OYtP+B6yCO7Cmn9vPFXVJkRaGkOJu3m8bQMgtyzNHixULceQA==}\n    peerDependencies:\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0.0 || ^19.0.0-rc\n\n  victory-vendor@36.9.2:\n    resolution: {integrity: sha512-PnpQQMuxlwYdocC8fIJqVXvkeViHYzotI+NJrCuav0ZYFoq912ZHBk3mCeuj+5/VpodOjPe1z0Fk2ihgzlXqjQ==}\n\n  vite@5.4.20:\n    resolution: {integrity: sha512-j3lYzGC3P+B5Yfy/pfKNgVEg4+UtcIJcVRt2cDjIOmhLourAqPqf8P7acgxeiSgUB7E3p2P8/3gNIgDLpwzs4g==}\n    engines: {node: ^18.0.0 || >=20.0.0}\n    hasBin: true\n    peerDependencies:\n      '@types/node': ^18.0.0 || >=20.0.0\n      less: '*'\n      lightningcss: ^1.21.0\n      sass: '*'\n      sass-embedded: '*'\n      stylus: '*'\n      sugarss: '*'\n      terser: ^5.4.0\n    peerDependenciesMeta:\n      '@types/node':\n        optional: true\n      less:\n        optional: true\n      lightningcss:\n        optional: true\n      sass:\n        optional: true\n      sass-embedded:\n        optional: true\n      stylus:\n        optional: true\n      sugarss:\n        optional: true\n      terser:\n        optional: true\n\n  web-streams-polyfill@4.0.0-beta.3:\n    resolution: {integrity: sha512-QW95TCTaHmsYfHDybGMwO5IJIM93I/6vTRk+daHTWFPhwh+C8Cg7j7XyKrwrj8Ib6vYXe0ocYNrmzY4xAAN6ug==}\n    engines: {node: '>= 14'}\n\n  webidl-conversions@3.0.1:\n    resolution: {integrity: sha512-2JAn3z8AR6rjK8Sm8orRC0h/bcl/DqL7tRPdGZ4I1CjdF+EaMLmYxBHyXuKL849eucPFhvBoxMsflfOb8kxaeQ==}\n\n  whatwg-url@5.0.0:\n    resolution: {integrity: sha512-saE57nupxk6v3HY35+jzBwYa0rKSy0XR8JSxZPwgLr7ys0IBzhGviA1/TUGJLmSVqs8pb9AnvICXEuOHLprYTw==}\n\n  which@2.0.2:\n    resolution: {integrity: sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==}\n    engines: {node: '>= 8'}\n    hasBin: true\n\n  which@4.0.0:\n    resolution: {integrity: sha512-GlaYyEb07DPxYCKhKzplCWBJtvxZcZMrL+4UkrTSJHHPyZU4mYYTv3qaOe77H7EODLSSopAUFAc6W8U4yqvscg==}\n    engines: {node: ^16.13.0 || >=18.0.0}\n    hasBin: true\n\n  wouter@3.7.1:\n    resolution: {integrity: sha512-od5LGmndSUzntZkE2R5CHhoiJ7YMuTIbiXsa0Anytc2RATekgv4sfWRAxLEULBrp7ADzinWQw8g470lkT8+fOw==}\n    peerDependencies:\n      react: '>=16.8.0'\n\n  wrap-ansi@7.0.0:\n    resolution: {integrity: sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==}\n    engines: {node: '>=10'}\n\n  wrap-ansi@8.1.0:\n    resolution: {integrity: sha512-si7QWI6zUMq56bESFvagtmzMdGOtoxfR+Sez11Mobfc7tm+VkUckk9bW2UeffTGVUbOksxmSw0AA2gs8g71NCQ==}\n    engines: {node: '>=12'}\n\n  ws@8.18.3:\n    resolution: {integrity: sha512-PEIGCY5tSlUt50cqyMXfCzX+oOPqN0vuGqWzbcJ2xvnkzkq46oOpz7dQaTDBdfICb4N14+GARUDw2XV2N4tvzg==}\n    engines: {node: '>=10.0.0'}\n    peerDependencies:\n      bufferutil: ^4.0.1\n      utf-8-validate: '>=5.0.2'\n    peerDependenciesMeta:\n      bufferutil:\n        optional: true\n      utf-8-validate:\n        optional: true\n\n  xtend@4.0.2:\n    resolution: {integrity: sha512-LKYU1iAXJXUgAXn9URjiu+MWhyUXHsvfp7mcuYm9dSUKK0/CjtrUwFAxD82/mCWbtLsGjFIad0wIsod4zrTAEQ==}\n    engines: {node: '>=0.4'}\n\n  yallist@2.1.2:\n    resolution: {integrity: sha512-ncTzHV7NvsQZkYe1DW7cbDLm0YpzHmZF5r/iyP3ZnQtMiJ+pjzisCiMNI+Sj+xQF5pXhSHxSB3uDbsBTzY/c2A==}\n\n  yallist@3.1.1:\n    resolution: {integrity: sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==}\n\n  yallist@5.0.0:\n    resolution: {integrity: sha512-YgvUTfwqyc7UXVMrB+SImsVYSmTS8X/tSrtdNZMImM+n7+QTriRXyXim0mBrTXNeqzVF0KWGgHPeiyViFFrNDw==}\n    engines: {node: '>=18'}\n\n  yaml@2.8.1:\n    resolution: {integrity: sha512-lcYcMxX2PO9XMGvAJkJ3OsNMw+/7FKes7/hgerGUYWIoWu5j/+YQqcZr5JnPZWzOsEBgMbSbiSTn/dv/69Mkpw==}\n    engines: {node: '>= 14.6'}\n    hasBin: true\n\n  zod-validation-error@3.5.3:\n    resolution: {integrity: sha512-OT5Y8lbUadqVZCsnyFaTQ4/O2mys4tj7PqhdbBCp7McPwvIEKfPtdA6QfPeFQK2/Rz5LgwmAXRJTugBNBi0btw==}\n    engines: {node: '>=18.0.0'}\n    peerDependencies:\n      zod: ^3.25.0 || ^4.0.0\n\n  zod@3.25.76:\n    resolution: {integrity: sha512-gzUt/qt81nXsFGKIFcC3YnfEAx5NkunCfnDlvuBSSFS02bcXu4Lmea0AFIUwbLWxWPx3d9p8S5QoaujKcNQxcQ==}\n\nsnapshots:\n\n  '@alloc/quick-lru@5.2.0': {}\n\n  '@babel/code-frame@7.27.1':\n    dependencies:\n      '@babel/helper-validator-identifier': 7.27.1\n      js-tokens: 4.0.0\n      picocolors: 1.1.1\n\n  '@babel/compat-data@7.28.4': {}\n\n  '@babel/core@7.28.4':\n    dependencies:\n      '@babel/code-frame': 7.27.1\n      '@babel/generator': 7.28.3\n      '@babel/helper-compilation-targets': 7.27.2\n      '@babel/helper-module-transforms': 7.28.3(@babel/core@7.28.4)\n      '@babel/helpers': 7.28.4\n      '@babel/parser': 7.28.4\n      '@babel/template': 7.27.2\n      '@babel/traverse': 7.28.4\n      '@babel/types': 7.28.4\n      '@jridgewell/remapping': 2.3.5\n      convert-source-map: 2.0.0\n      debug: 4.4.1\n      gensync: 1.0.0-beta.2\n      json5: 2.2.3\n      semver: 6.3.1\n    transitivePeerDependencies:\n      - supports-color\n\n  '@babel/generator@7.28.3':\n    dependencies:\n      '@babel/parser': 7.28.4\n      '@babel/types': 7.28.4\n      '@jridgewell/gen-mapping': 0.3.13\n      '@jridgewell/trace-mapping': 0.3.30\n      jsesc: 3.1.0\n\n  '@babel/helper-compilation-targets@7.27.2':\n    dependencies:\n      '@babel/compat-data': 7.28.4\n      '@babel/helper-validator-option': 7.27.1\n      browserslist: 4.25.4\n      lru-cache: 5.1.1\n      semver: 6.3.1\n\n  '@babel/helper-globals@7.28.0': {}\n\n  '@babel/helper-module-imports@7.27.1':\n    dependencies:\n      '@babel/traverse': 7.28.4\n      '@babel/types': 7.28.4\n    transitivePeerDependencies:\n      - supports-color\n\n  '@babel/helper-module-transforms@7.28.3(@babel/core@7.28.4)':\n    dependencies:\n      '@babel/core': 7.28.4\n      '@babel/helper-module-imports': 7.27.1\n      '@babel/helper-validator-identifier': 7.27.1\n      '@babel/traverse': 7.28.4\n    transitivePeerDependencies:\n      - supports-color\n\n  '@babel/helper-plugin-utils@7.27.1': {}\n\n  '@babel/helper-string-parser@7.27.1': {}\n\n  '@babel/helper-validator-identifier@7.27.1': {}\n\n  '@babel/helper-validator-option@7.27.1': {}\n\n  '@babel/helpers@7.28.4':\n    dependencies:\n      '@babel/template': 7.27.2\n      '@babel/types': 7.28.4\n\n  '@babel/parser@7.28.4':\n    dependencies:\n      '@babel/types': 7.28.4\n\n  '@babel/plugin-transform-react-jsx-self@7.27.1(@babel/core@7.28.4)':\n    dependencies:\n      '@babel/core': 7.28.4\n      '@babel/helper-plugin-utils': 7.27.1\n\n  '@babel/plugin-transform-react-jsx-source@7.27.1(@babel/core@7.28.4)':\n    dependencies:\n      '@babel/core': 7.28.4\n      '@babel/helper-plugin-utils': 7.27.1\n\n  '@babel/runtime@7.28.4': {}\n\n  '@babel/template@7.27.2':\n    dependencies:\n      '@babel/code-frame': 7.27.1\n      '@babel/parser': 7.28.4\n      '@babel/types': 7.28.4\n\n  '@babel/traverse@7.28.4':\n    dependencies:\n      '@babel/code-frame': 7.27.1\n      '@babel/generator': 7.28.3\n      '@babel/helper-globals': 7.28.0\n      '@babel/parser': 7.28.4\n      '@babel/template': 7.27.2\n      '@babel/types': 7.28.4\n      debug: 4.4.1\n    transitivePeerDependencies:\n      - supports-color\n\n  '@babel/types@7.28.4':\n    dependencies:\n      '@babel/helper-string-parser': 7.27.1\n      '@babel/helper-validator-identifier': 7.27.1\n\n  '@dimforge/rapier3d-compat@0.12.0': {}\n\n  '@drizzle-team/brocli@0.10.2': {}\n\n  '@epic-web/invariant@1.0.0': {}\n\n  '@esbuild-kit/core-utils@3.3.2':\n    dependencies:\n      esbuild: 0.18.20\n      source-map-support: 0.5.21\n\n  '@esbuild-kit/esm-loader@2.6.5':\n    dependencies:\n      '@esbuild-kit/core-utils': 3.3.2\n      get-tsconfig: 4.10.1\n\n  '@esbuild/aix-ppc64@0.19.12':\n    optional: true\n\n  '@esbuild/aix-ppc64@0.21.5':\n    optional: true\n\n  '@esbuild/aix-ppc64@0.25.9':\n    optional: true\n\n  '@esbuild/android-arm64@0.18.20':\n    optional: true\n\n  '@esbuild/android-arm64@0.19.12':\n    optional: true\n\n  '@esbuild/android-arm64@0.21.5':\n    optional: true\n\n  '@esbuild/android-arm64@0.25.9':\n    optional: true\n\n  '@esbuild/android-arm@0.18.20':\n    optional: true\n\n  '@esbuild/android-arm@0.19.12':\n    optional: true\n\n  '@esbuild/android-arm@0.21.5':\n    optional: true\n\n  '@esbuild/android-arm@0.25.9':\n    optional: true\n\n  '@esbuild/android-x64@0.18.20':\n    optional: true\n\n  '@esbuild/android-x64@0.19.12':\n    optional: true\n\n  '@esbuild/android-x64@0.21.5':\n    optional: true\n\n  '@esbuild/android-x64@0.25.9':\n    optional: true\n\n  '@esbuild/darwin-arm64@0.18.20':\n    optional: true\n\n  '@esbuild/darwin-arm64@0.19.12':\n    optional: true\n\n  '@esbuild/darwin-arm64@0.21.5':\n    optional: true\n\n  '@esbuild/darwin-arm64@0.25.9':\n    optional: true\n\n  '@esbuild/darwin-x64@0.18.20':\n    optional: true\n\n  '@esbuild/darwin-x64@0.19.12':\n    optional: true\n\n  '@esbuild/darwin-x64@0.21.5':\n    optional: true\n\n  '@esbuild/darwin-x64@0.25.9':\n    optional: true\n\n  '@esbuild/freebsd-arm64@0.18.20':\n    optional: true\n\n  '@esbuild/freebsd-arm64@0.19.12':\n    optional: true\n\n  '@esbuild/freebsd-arm64@0.21.5':\n    optional: true\n\n  '@esbuild/freebsd-arm64@0.25.9':\n    optional: true\n\n  '@esbuild/freebsd-x64@0.18.20':\n    optional: true\n\n  '@esbuild/freebsd-x64@0.19.12':\n    optional: true\n\n  '@esbuild/freebsd-x64@0.21.5':\n    optional: true\n\n  '@esbuild/freebsd-x64@0.25.9':\n    optional: true\n\n  '@esbuild/linux-arm64@0.18.20':\n    optional: true\n\n  '@esbuild/linux-arm64@0.19.12':\n    optional: true\n\n  '@esbuild/linux-arm64@0.21.5':\n    optional: true\n\n  '@esbuild/linux-arm64@0.25.9':\n    optional: true\n\n  '@esbuild/linux-arm@0.18.20':\n    optional: true\n\n  '@esbuild/linux-arm@0.19.12':\n    optional: true\n\n  '@esbuild/linux-arm@0.21.5':\n    optional: true\n\n  '@esbuild/linux-arm@0.25.9':\n    optional: true\n\n  '@esbuild/linux-ia32@0.18.20':\n    optional: true\n\n  '@esbuild/linux-ia32@0.19.12':\n    optional: true\n\n  '@esbuild/linux-ia32@0.21.5':\n    optional: true\n\n  '@esbuild/linux-ia32@0.25.9':\n    optional: true\n\n  '@esbuild/linux-loong64@0.18.20':\n    optional: true\n\n  '@esbuild/linux-loong64@0.19.12':\n    optional: true\n\n  '@esbuild/linux-loong64@0.21.5':\n    optional: true\n\n  '@esbuild/linux-loong64@0.25.9':\n    optional: true\n\n  '@esbuild/linux-mips64el@0.18.20':\n    optional: true\n\n  '@esbuild/linux-mips64el@0.19.12':\n    optional: true\n\n  '@esbuild/linux-mips64el@0.21.5':\n    optional: true\n\n  '@esbuild/linux-mips64el@0.25.9':\n    optional: true\n\n  '@esbuild/linux-ppc64@0.18.20':\n    optional: true\n\n  '@esbuild/linux-ppc64@0.19.12':\n    optional: true\n\n  '@esbuild/linux-ppc64@0.21.5':\n    optional: true\n\n  '@esbuild/linux-ppc64@0.25.9':\n    optional: true\n\n  '@esbuild/linux-riscv64@0.18.20':\n    optional: true\n\n  '@esbuild/linux-riscv64@0.19.12':\n    optional: true\n\n  '@esbuild/linux-riscv64@0.21.5':\n    optional: true\n\n  '@esbuild/linux-riscv64@0.25.9':\n    optional: true\n\n  '@esbuild/linux-s390x@0.18.20':\n    optional: true\n\n  '@esbuild/linux-s390x@0.19.12':\n    optional: true\n\n  '@esbuild/linux-s390x@0.21.5':\n    optional: true\n\n  '@esbuild/linux-s390x@0.25.9':\n    optional: true\n\n  '@esbuild/linux-x64@0.18.20':\n    optional: true\n\n  '@esbuild/linux-x64@0.19.12':\n    optional: true\n\n  '@esbuild/linux-x64@0.21.5':\n    optional: true\n\n  '@esbuild/linux-x64@0.25.9':\n    optional: true\n\n  '@esbuild/netbsd-arm64@0.25.9':\n    optional: true\n\n  '@esbuild/netbsd-x64@0.18.20':\n    optional: true\n\n  '@esbuild/netbsd-x64@0.19.12':\n    optional: true\n\n  '@esbuild/netbsd-x64@0.21.5':\n    optional: true\n\n  '@esbuild/netbsd-x64@0.25.9':\n    optional: true\n\n  '@esbuild/openbsd-arm64@0.25.9':\n    optional: true\n\n  '@esbuild/openbsd-x64@0.18.20':\n    optional: true\n\n  '@esbuild/openbsd-x64@0.19.12':\n    optional: true\n\n  '@esbuild/openbsd-x64@0.21.5':\n    optional: true\n\n  '@esbuild/openbsd-x64@0.25.9':\n    optional: true\n\n  '@esbuild/openharmony-arm64@0.25.9':\n    optional: true\n\n  '@esbuild/sunos-x64@0.18.20':\n    optional: true\n\n  '@esbuild/sunos-x64@0.19.12':\n    optional: true\n\n  '@esbuild/sunos-x64@0.21.5':\n    optional: true\n\n  '@esbuild/sunos-x64@0.25.9':\n    optional: true\n\n  '@esbuild/win32-arm64@0.18.20':\n    optional: true\n\n  '@esbuild/win32-arm64@0.19.12':\n    optional: true\n\n  '@esbuild/win32-arm64@0.21.5':\n    optional: true\n\n  '@esbuild/win32-arm64@0.25.9':\n    optional: true\n\n  '@esbuild/win32-ia32@0.18.20':\n    optional: true\n\n  '@esbuild/win32-ia32@0.19.12':\n    optional: true\n\n  '@esbuild/win32-ia32@0.21.5':\n    optional: true\n\n  '@esbuild/win32-ia32@0.25.9':\n    optional: true\n\n  '@esbuild/win32-x64@0.18.20':\n    optional: true\n\n  '@esbuild/win32-x64@0.19.12':\n    optional: true\n\n  '@esbuild/win32-x64@0.21.5':\n    optional: true\n\n  '@esbuild/win32-x64@0.25.9':\n    optional: true\n\n  '@floating-ui/core@1.7.3':\n    dependencies:\n      '@floating-ui/utils': 0.2.10\n\n  '@floating-ui/dom@1.7.4':\n    dependencies:\n      '@floating-ui/core': 1.7.3\n      '@floating-ui/utils': 0.2.10\n\n  '@floating-ui/react-dom@2.1.6(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@floating-ui/dom': 1.7.4\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n\n  '@floating-ui/utils@0.2.10': {}\n\n  '@hookform/resolvers@3.10.0(react-hook-form@7.62.0(react@18.3.1))':\n    dependencies:\n      react-hook-form: 7.62.0(react@18.3.1)\n\n  '@isaacs/cliui@8.0.2':\n    dependencies:\n      string-width: 5.1.2\n      string-width-cjs: string-width@4.2.3\n      strip-ansi: 7.1.2\n      strip-ansi-cjs: strip-ansi@6.0.1\n      wrap-ansi: 8.1.0\n      wrap-ansi-cjs: wrap-ansi@7.0.0\n\n  '@isaacs/fs-minipass@4.0.1':\n    dependencies:\n      minipass: 7.1.2\n\n  '@jridgewell/gen-mapping@0.3.13':\n    dependencies:\n      '@jridgewell/sourcemap-codec': 1.5.5\n      '@jridgewell/trace-mapping': 0.3.30\n\n  '@jridgewell/remapping@2.3.5':\n    dependencies:\n      '@jridgewell/gen-mapping': 0.3.13\n      '@jridgewell/trace-mapping': 0.3.30\n\n  '@jridgewell/resolve-uri@3.1.2': {}\n\n  '@jridgewell/sourcemap-codec@1.5.5': {}\n\n  '@jridgewell/trace-mapping@0.3.30':\n    dependencies:\n      '@jridgewell/resolve-uri': 3.1.2\n      '@jridgewell/sourcemap-codec': 1.5.5\n\n  '@neondatabase/serverless@0.10.4':\n    dependencies:\n      '@types/pg': 8.11.6\n\n  '@nodelib/fs.scandir@2.1.5':\n    dependencies:\n      '@nodelib/fs.stat': 2.0.5\n      run-parallel: 1.2.0\n\n  '@nodelib/fs.stat@2.0.5': {}\n\n  '@nodelib/fs.walk@1.2.8':\n    dependencies:\n      '@nodelib/fs.scandir': 2.1.5\n      fastq: 1.19.1\n\n  '@petamoriken/float16@3.9.2': {}\n\n  '@pkgjs/parseargs@0.11.0':\n    optional: true\n\n  '@radix-ui/number@1.1.1': {}\n\n  '@radix-ui/primitive@1.1.3': {}\n\n  '@radix-ui/react-accordion@1.2.12(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-collapsible': 1.1.12(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-collection': 1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-direction': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-id': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-alert-dialog@1.1.15(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-dialog': 1.1.15(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-slot': 1.2.3(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-arrow@1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-aspect-ratio@1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-avatar@1.1.10(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-callback-ref': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-is-hydrated': 0.1.0(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-layout-effect': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-checkbox@1.3.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-presence': 1.1.5(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-previous': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-size': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-collapsible@1.1.12(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-id': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-presence': 1.1.5(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-layout-effect': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-collection@1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-slot': 1.2.3(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-compose-refs@1.1.2(@types/react@18.3.24)(react@18.3.1)':\n    dependencies:\n      react: 18.3.1\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  '@radix-ui/react-context-menu@2.2.16(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-menu': 2.1.16(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-callback-ref': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-context@1.1.2(@types/react@18.3.24)(react@18.3.1)':\n    dependencies:\n      react: 18.3.1\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  '@radix-ui/react-dialog@1.1.15(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-dismissable-layer': 1.1.11(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-focus-guards': 1.1.3(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-focus-scope': 1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-id': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-portal': 1.1.9(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-presence': 1.1.5(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-slot': 1.2.3(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      aria-hidden: 1.2.6\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n      react-remove-scroll: 2.7.1(@types/react@18.3.24)(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-direction@1.1.1(@types/react@18.3.24)(react@18.3.1)':\n    dependencies:\n      react: 18.3.1\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  '@radix-ui/react-dismissable-layer@1.1.11(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-callback-ref': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-escape-keydown': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-dropdown-menu@2.1.16(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-id': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-menu': 2.1.16(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-focus-guards@1.1.3(@types/react@18.3.24)(react@18.3.1)':\n    dependencies:\n      react: 18.3.1\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  '@radix-ui/react-focus-scope@1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-callback-ref': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-hover-card@1.1.15(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-dismissable-layer': 1.1.11(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-popper': 1.2.8(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-portal': 1.1.9(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-presence': 1.1.5(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-id@1.1.1(@types/react@18.3.24)(react@18.3.1)':\n    dependencies:\n      '@radix-ui/react-use-layout-effect': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  '@radix-ui/react-label@2.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-menu@2.1.16(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-collection': 1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-direction': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-dismissable-layer': 1.1.11(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-focus-guards': 1.1.3(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-focus-scope': 1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-id': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-popper': 1.2.8(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-portal': 1.1.9(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-presence': 1.1.5(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-roving-focus': 1.1.11(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-slot': 1.2.3(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-callback-ref': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      aria-hidden: 1.2.6\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n      react-remove-scroll: 2.7.1(@types/react@18.3.24)(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-menubar@1.1.16(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-collection': 1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-direction': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-id': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-menu': 2.1.16(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-roving-focus': 1.1.11(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-navigation-menu@1.2.14(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-collection': 1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-direction': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-dismissable-layer': 1.1.11(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-id': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-presence': 1.1.5(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-callback-ref': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-layout-effect': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-previous': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-visually-hidden': 1.2.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-popover@1.1.15(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-dismissable-layer': 1.1.11(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-focus-guards': 1.1.3(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-focus-scope': 1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-id': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-popper': 1.2.8(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-portal': 1.1.9(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-presence': 1.1.5(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-slot': 1.2.3(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      aria-hidden: 1.2.6\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n      react-remove-scroll: 2.7.1(@types/react@18.3.24)(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-popper@1.2.8(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@floating-ui/react-dom': 2.1.6(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-arrow': 1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-callback-ref': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-layout-effect': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-rect': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-size': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/rect': 1.1.1\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-portal@1.1.9(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-layout-effect': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-presence@1.1.5(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-layout-effect': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-primitive@2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/react-slot': 1.2.3(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-progress@1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-radio-group@1.3.8(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-direction': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-presence': 1.1.5(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-roving-focus': 1.1.11(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-previous': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-size': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-roving-focus@1.1.11(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-collection': 1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-direction': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-id': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-callback-ref': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-scroll-area@1.2.10(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/number': 1.1.1\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-direction': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-presence': 1.1.5(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-callback-ref': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-layout-effect': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-select@2.2.6(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/number': 1.1.1\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-collection': 1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-direction': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-dismissable-layer': 1.1.11(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-focus-guards': 1.1.3(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-focus-scope': 1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-id': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-popper': 1.2.8(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-portal': 1.1.9(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-slot': 1.2.3(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-callback-ref': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-layout-effect': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-previous': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-visually-hidden': 1.2.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      aria-hidden: 1.2.6\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n      react-remove-scroll: 2.7.1(@types/react@18.3.24)(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-separator@1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-slider@1.3.6(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/number': 1.1.1\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-collection': 1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-direction': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-layout-effect': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-previous': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-size': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-slot@1.2.3(@types/react@18.3.24)(react@18.3.1)':\n    dependencies:\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  '@radix-ui/react-switch@1.2.6(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-previous': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-size': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-tabs@1.1.13(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-direction': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-id': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-presence': 1.1.5(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-roving-focus': 1.1.11(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-toast@1.2.15(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-collection': 1.1.7(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-dismissable-layer': 1.1.11(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-portal': 1.1.9(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-presence': 1.1.5(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-callback-ref': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-layout-effect': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-visually-hidden': 1.2.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-toggle-group@1.1.11(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-direction': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-roving-focus': 1.1.11(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-toggle': 1.1.10(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-toggle@1.1.10(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-tooltip@1.2.8(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.3\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-context': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-dismissable-layer': 1.1.11(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-id': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-popper': 1.2.8(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-portal': 1.1.9(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-presence': 1.1.5(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-slot': 1.2.3(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-controllable-state': 1.2.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-visually-hidden': 1.2.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/react-use-callback-ref@1.1.1(@types/react@18.3.24)(react@18.3.1)':\n    dependencies:\n      react: 18.3.1\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  '@radix-ui/react-use-controllable-state@1.2.2(@types/react@18.3.24)(react@18.3.1)':\n    dependencies:\n      '@radix-ui/react-use-effect-event': 0.0.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-use-layout-effect': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  '@radix-ui/react-use-effect-event@0.0.2(@types/react@18.3.24)(react@18.3.1)':\n    dependencies:\n      '@radix-ui/react-use-layout-effect': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  '@radix-ui/react-use-escape-keydown@1.1.1(@types/react@18.3.24)(react@18.3.1)':\n    dependencies:\n      '@radix-ui/react-use-callback-ref': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  '@radix-ui/react-use-is-hydrated@0.1.0(@types/react@18.3.24)(react@18.3.1)':\n    dependencies:\n      react: 18.3.1\n      use-sync-external-store: 1.5.0(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  '@radix-ui/react-use-layout-effect@1.1.1(@types/react@18.3.24)(react@18.3.1)':\n    dependencies:\n      react: 18.3.1\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  '@radix-ui/react-use-previous@1.1.1(@types/react@18.3.24)(react@18.3.1)':\n    dependencies:\n      react: 18.3.1\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  '@radix-ui/react-use-rect@1.1.1(@types/react@18.3.24)(react@18.3.1)':\n    dependencies:\n      '@radix-ui/rect': 1.1.1\n      react: 18.3.1\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  '@radix-ui/react-use-size@1.1.1(@types/react@18.3.24)(react@18.3.1)':\n    dependencies:\n      '@radix-ui/react-use-layout-effect': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      react: 18.3.1\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  '@radix-ui/react-visually-hidden@1.2.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)':\n    dependencies:\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n      '@types/react-dom': 18.3.7(@types/react@18.3.24)\n\n  '@radix-ui/rect@1.1.1': {}\n\n  '@replit/vite-plugin-cartographer@0.3.0':\n    dependencies:\n      '@babel/parser': 7.28.4\n      '@babel/traverse': 7.28.4\n      '@babel/types': 7.28.4\n      magic-string: 0.30.19\n      modern-screenshot: 4.6.6\n    transitivePeerDependencies:\n      - supports-color\n\n  '@replit/vite-plugin-runtime-error-modal@0.0.3':\n    dependencies:\n      '@jridgewell/trace-mapping': 0.3.30\n\n  '@rolldown/pluginutils@1.0.0-beta.27': {}\n\n  '@rollup/rollup-android-arm-eabi@4.50.1':\n    optional: true\n\n  '@rollup/rollup-android-arm64@4.50.1':\n    optional: true\n\n  '@rollup/rollup-darwin-arm64@4.50.1':\n    optional: true\n\n  '@rollup/rollup-darwin-x64@4.50.1':\n    optional: true\n\n  '@rollup/rollup-freebsd-arm64@4.50.1':\n    optional: true\n\n  '@rollup/rollup-freebsd-x64@4.50.1':\n    optional: true\n\n  '@rollup/rollup-linux-arm-gnueabihf@4.50.1':\n    optional: true\n\n  '@rollup/rollup-linux-arm-musleabihf@4.50.1':\n    optional: true\n\n  '@rollup/rollup-linux-arm64-gnu@4.50.1':\n    optional: true\n\n  '@rollup/rollup-linux-arm64-musl@4.50.1':\n    optional: true\n\n  '@rollup/rollup-linux-loongarch64-gnu@4.50.1':\n    optional: true\n\n  '@rollup/rollup-linux-ppc64-gnu@4.50.1':\n    optional: true\n\n  '@rollup/rollup-linux-riscv64-gnu@4.50.1':\n    optional: true\n\n  '@rollup/rollup-linux-riscv64-musl@4.50.1':\n    optional: true\n\n  '@rollup/rollup-linux-s390x-gnu@4.50.1':\n    optional: true\n\n  '@rollup/rollup-linux-x64-gnu@4.50.1':\n    optional: true\n\n  '@rollup/rollup-linux-x64-musl@4.50.1':\n    optional: true\n\n  '@rollup/rollup-openharmony-arm64@4.50.1':\n    optional: true\n\n  '@rollup/rollup-win32-arm64-msvc@4.50.1':\n    optional: true\n\n  '@rollup/rollup-win32-ia32-msvc@4.50.1':\n    optional: true\n\n  '@rollup/rollup-win32-x64-msvc@4.50.1':\n    optional: true\n\n  '@tailwindcss/node@4.1.13':\n    dependencies:\n      '@jridgewell/remapping': 2.3.5\n      enhanced-resolve: 5.18.3\n      jiti: 2.5.1\n      lightningcss: 1.30.1\n      magic-string: 0.30.19\n      source-map-js: 1.2.1\n      tailwindcss: 4.1.13\n\n  '@tailwindcss/oxide-android-arm64@4.1.13':\n    optional: true\n\n  '@tailwindcss/oxide-darwin-arm64@4.1.13':\n    optional: true\n\n  '@tailwindcss/oxide-darwin-x64@4.1.13':\n    optional: true\n\n  '@tailwindcss/oxide-freebsd-x64@4.1.13':\n    optional: true\n\n  '@tailwindcss/oxide-linux-arm-gnueabihf@4.1.13':\n    optional: true\n\n  '@tailwindcss/oxide-linux-arm64-gnu@4.1.13':\n    optional: true\n\n  '@tailwindcss/oxide-linux-arm64-musl@4.1.13':\n    optional: true\n\n  '@tailwindcss/oxide-linux-x64-gnu@4.1.13':\n    optional: true\n\n  '@tailwindcss/oxide-linux-x64-musl@4.1.13':\n    optional: true\n\n  '@tailwindcss/oxide-wasm32-wasi@4.1.13':\n    optional: true\n\n  '@tailwindcss/oxide-win32-arm64-msvc@4.1.13':\n    optional: true\n\n  '@tailwindcss/oxide-win32-x64-msvc@4.1.13':\n    optional: true\n\n  '@tailwindcss/oxide@4.1.13':\n    dependencies:\n      detect-libc: 2.0.4\n      tar: 7.4.3\n    optionalDependencies:\n      '@tailwindcss/oxide-android-arm64': 4.1.13\n      '@tailwindcss/oxide-darwin-arm64': 4.1.13\n      '@tailwindcss/oxide-darwin-x64': 4.1.13\n      '@tailwindcss/oxide-freebsd-x64': 4.1.13\n      '@tailwindcss/oxide-linux-arm-gnueabihf': 4.1.13\n      '@tailwindcss/oxide-linux-arm64-gnu': 4.1.13\n      '@tailwindcss/oxide-linux-arm64-musl': 4.1.13\n      '@tailwindcss/oxide-linux-x64-gnu': 4.1.13\n      '@tailwindcss/oxide-linux-x64-musl': 4.1.13\n      '@tailwindcss/oxide-wasm32-wasi': 4.1.13\n      '@tailwindcss/oxide-win32-arm64-msvc': 4.1.13\n      '@tailwindcss/oxide-win32-x64-msvc': 4.1.13\n\n  '@tailwindcss/typography@0.5.16(tailwindcss@3.4.17)':\n    dependencies:\n      lodash.castarray: 4.4.0\n      lodash.isplainobject: 4.0.6\n      lodash.merge: 4.6.2\n      postcss-selector-parser: 6.0.10\n      tailwindcss: 3.4.17\n\n  '@tailwindcss/vite@4.1.13(vite@5.4.20(@types/node@20.19.13)(lightningcss@1.30.1))':\n    dependencies:\n      '@tailwindcss/node': 4.1.13\n      '@tailwindcss/oxide': 4.1.13\n      tailwindcss: 4.1.13\n      vite: 5.4.20(@types/node@20.19.13)(lightningcss@1.30.1)\n\n  '@tanstack/query-core@5.87.1': {}\n\n  '@tanstack/react-query@5.87.1(react@18.3.1)':\n    dependencies:\n      '@tanstack/query-core': 5.87.1\n      react: 18.3.1\n\n  '@tweenjs/tween.js@23.1.3': {}\n\n  '@types/babel__core@7.20.5':\n    dependencies:\n      '@babel/parser': 7.28.4\n      '@babel/types': 7.28.4\n      '@types/babel__generator': 7.27.0\n      '@types/babel__template': 7.4.4\n      '@types/babel__traverse': 7.28.0\n\n  '@types/babel__generator@7.27.0':\n    dependencies:\n      '@babel/types': 7.28.4\n\n  '@types/babel__template@7.4.4':\n    dependencies:\n      '@babel/parser': 7.28.4\n      '@babel/types': 7.28.4\n\n  '@types/babel__traverse@7.28.0':\n    dependencies:\n      '@babel/types': 7.28.4\n\n  '@types/body-parser@1.19.6':\n    dependencies:\n      '@types/connect': 3.4.38\n      '@types/node': 20.19.13\n\n  '@types/connect-pg-simple@7.0.3':\n    dependencies:\n      '@types/express': 4.17.21\n      '@types/express-session': 1.18.2\n      '@types/pg': 8.15.5\n\n  '@types/connect@3.4.38':\n    dependencies:\n      '@types/node': 20.19.13\n\n  '@types/cors@2.8.19':\n    dependencies:\n      '@types/node': 20.19.13\n\n  '@types/d3-array@3.2.1': {}\n\n  '@types/d3-color@3.1.3': {}\n\n  '@types/d3-ease@3.0.2': {}\n\n  '@types/d3-interpolate@3.0.4':\n    dependencies:\n      '@types/d3-color': 3.1.3\n\n  '@types/d3-path@3.1.1': {}\n\n  '@types/d3-scale@4.0.9':\n    dependencies:\n      '@types/d3-time': 3.0.4\n\n  '@types/d3-shape@3.1.7':\n    dependencies:\n      '@types/d3-path': 3.1.1\n\n  '@types/d3-time@3.0.4': {}\n\n  '@types/d3-timer@3.0.2': {}\n\n  '@types/estree@1.0.8': {}\n\n  '@types/express-serve-static-core@4.19.6':\n    dependencies:\n      '@types/node': 20.19.13\n      '@types/qs': 6.14.0\n      '@types/range-parser': 1.2.7\n      '@types/send': 0.17.5\n\n  '@types/express-session@1.18.2':\n    dependencies:\n      '@types/express': 4.17.21\n\n  '@types/express@4.17.21':\n    dependencies:\n      '@types/body-parser': 1.19.6\n      '@types/express-serve-static-core': 4.19.6\n      '@types/qs': 6.14.0\n      '@types/serve-static': 1.15.8\n\n  '@types/http-errors@2.0.5': {}\n\n  '@types/mime@1.3.5': {}\n\n  '@types/node-fetch@2.6.13':\n    dependencies:\n      '@types/node': 20.19.13\n      form-data: 4.0.4\n\n  '@types/node@18.19.124':\n    dependencies:\n      undici-types: 5.26.5\n\n  '@types/node@20.19.13':\n    dependencies:\n      undici-types: 6.21.0\n\n  '@types/passport-local@1.0.38':\n    dependencies:\n      '@types/express': 4.17.21\n      '@types/passport': 1.0.17\n      '@types/passport-strategy': 0.2.38\n\n  '@types/passport-strategy@0.2.38':\n    dependencies:\n      '@types/express': 4.17.21\n      '@types/passport': 1.0.17\n\n  '@types/passport@1.0.17':\n    dependencies:\n      '@types/express': 4.17.21\n\n  '@types/pg@8.11.6':\n    dependencies:\n      '@types/node': 20.19.13\n      pg-protocol: 1.10.3\n      pg-types: 4.1.0\n\n  '@types/pg@8.15.5':\n    dependencies:\n      '@types/node': 20.19.13\n      pg-protocol: 1.10.3\n      pg-types: 2.2.0\n\n  '@types/prop-types@15.7.15': {}\n\n  '@types/qs@6.14.0': {}\n\n  '@types/range-parser@1.2.7': {}\n\n  '@types/react-dom@18.3.7(@types/react@18.3.24)':\n    dependencies:\n      '@types/react': 18.3.24\n\n  '@types/react@18.3.24':\n    dependencies:\n      '@types/prop-types': 15.7.15\n      csstype: 3.1.3\n\n  '@types/send@0.17.5':\n    dependencies:\n      '@types/mime': 1.3.5\n      '@types/node': 20.19.13\n\n  '@types/serve-static@1.15.8':\n    dependencies:\n      '@types/http-errors': 2.0.5\n      '@types/node': 20.19.13\n      '@types/send': 0.17.5\n\n  '@types/stats.js@0.17.4': {}\n\n  '@types/three@0.179.0':\n    dependencies:\n      '@dimforge/rapier3d-compat': 0.12.0\n      '@tweenjs/tween.js': 23.1.3\n      '@types/stats.js': 0.17.4\n      '@types/webxr': 0.5.23\n      '@webgpu/types': 0.1.64\n      fflate: 0.8.2\n      meshoptimizer: 0.22.0\n\n  '@types/webxr@0.5.23': {}\n\n  '@types/ws@8.18.1':\n    dependencies:\n      '@types/node': 20.19.13\n\n  '@vitejs/plugin-react@4.7.0(vite@5.4.20(@types/node@20.19.13)(lightningcss@1.30.1))':\n    dependencies:\n      '@babel/core': 7.28.4\n      '@babel/plugin-transform-react-jsx-self': 7.27.1(@babel/core@7.28.4)\n      '@babel/plugin-transform-react-jsx-source': 7.27.1(@babel/core@7.28.4)\n      '@rolldown/pluginutils': 1.0.0-beta.27\n      '@types/babel__core': 7.20.5\n      react-refresh: 0.17.0\n      vite: 5.4.20(@types/node@20.19.13)(lightningcss@1.30.1)\n    transitivePeerDependencies:\n      - supports-color\n\n  '@webgpu/types@0.1.64': {}\n\n  abort-controller@3.0.0:\n    dependencies:\n      event-target-shim: 5.0.1\n\n  accepts@1.3.8:\n    dependencies:\n      mime-types: 2.1.35\n      negotiator: 0.6.3\n\n  agentkeepalive@4.6.0:\n    dependencies:\n      humanize-ms: 1.2.1\n\n  ansi-regex@5.0.1: {}\n\n  ansi-regex@6.2.2: {}\n\n  ansi-styles@4.3.0:\n    dependencies:\n      color-convert: 2.0.1\n\n  ansi-styles@6.2.3: {}\n\n  any-promise@1.3.0: {}\n\n  anymatch@3.1.3:\n    dependencies:\n      normalize-path: 3.0.0\n      picomatch: 2.3.1\n\n  arg@5.0.2: {}\n\n  aria-hidden@1.2.6:\n    dependencies:\n      tslib: 2.8.1\n\n  array-flatten@1.1.1: {}\n\n  asynckit@0.4.0: {}\n\n  autoprefixer@10.4.21(postcss@8.5.6):\n    dependencies:\n      browserslist: 4.25.4\n      caniuse-lite: 1.0.30001741\n      fraction.js: 4.3.7\n      normalize-range: 0.1.2\n      picocolors: 1.1.1\n      postcss: 8.5.6\n      postcss-value-parser: 4.2.0\n\n  balanced-match@1.0.2: {}\n\n  binary-extensions@2.3.0: {}\n\n  body-parser@1.20.3:\n    dependencies:\n      bytes: 3.1.2\n      content-type: 1.0.5\n      debug: 2.6.9\n      depd: 2.0.0\n      destroy: 1.2.0\n      http-errors: 2.0.0\n      iconv-lite: 0.4.24\n      on-finished: 2.4.1\n      qs: 6.13.0\n      raw-body: 2.5.2\n      type-is: 1.6.18\n      unpipe: 1.0.0\n    transitivePeerDependencies:\n      - supports-color\n\n  brace-expansion@2.0.2:\n    dependencies:\n      balanced-match: 1.0.2\n\n  braces@3.0.3:\n    dependencies:\n      fill-range: 7.1.1\n\n  browserslist@4.25.4:\n    dependencies:\n      caniuse-lite: 1.0.30001741\n      electron-to-chromium: 1.5.215\n      node-releases: 2.0.20\n      update-browserslist-db: 1.1.3(browserslist@4.25.4)\n\n  buffer-from@1.1.2: {}\n\n  bufferutil@4.0.9:\n    dependencies:\n      node-gyp-build: 4.8.4\n    optional: true\n\n  bytes@3.1.2: {}\n\n  call-bind-apply-helpers@1.0.2:\n    dependencies:\n      es-errors: 1.3.0\n      function-bind: 1.1.2\n\n  call-bound@1.0.4:\n    dependencies:\n      call-bind-apply-helpers: 1.0.2\n      get-intrinsic: 1.3.0\n\n  camelcase-css@2.0.1: {}\n\n  caniuse-lite@1.0.30001741: {}\n\n  chokidar@3.6.0:\n    dependencies:\n      anymatch: 3.1.3\n      braces: 3.0.3\n      glob-parent: 5.1.2\n      is-binary-path: 2.1.0\n      is-glob: 4.0.3\n      normalize-path: 3.0.0\n      readdirp: 3.6.0\n    optionalDependencies:\n      fsevents: 2.3.3\n\n  chownr@3.0.0: {}\n\n  class-variance-authority@0.7.1:\n    dependencies:\n      clsx: 2.1.1\n\n  clsx@2.1.1: {}\n\n  cmdk@1.1.1(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1):\n    dependencies:\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-dialog': 1.1.15(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      '@radix-ui/react-id': 1.1.1(@types/react@18.3.24)(react@18.3.1)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    transitivePeerDependencies:\n      - '@types/react'\n      - '@types/react-dom'\n\n  color-convert@2.0.1:\n    dependencies:\n      color-name: 1.1.4\n\n  color-name@1.1.4: {}\n\n  combined-stream@1.0.8:\n    dependencies:\n      delayed-stream: 1.0.0\n\n  commander@4.1.1: {}\n\n  connect-pg-simple@10.0.0:\n    dependencies:\n      pg: 8.16.3\n    transitivePeerDependencies:\n      - pg-native\n\n  content-disposition@0.5.4:\n    dependencies:\n      safe-buffer: 5.2.1\n\n  content-type@1.0.5: {}\n\n  convert-source-map@2.0.0: {}\n\n  cookie-signature@1.0.6: {}\n\n  cookie-signature@1.0.7: {}\n\n  cookie@0.7.1: {}\n\n  cookie@0.7.2: {}\n\n  cors@2.8.5:\n    dependencies:\n      object-assign: 4.1.1\n      vary: 1.1.2\n\n  cross-env@10.0.0:\n    dependencies:\n      '@epic-web/invariant': 1.0.0\n      cross-spawn: 7.0.6\n\n  cross-spawn@7.0.6:\n    dependencies:\n      path-key: 3.1.1\n      shebang-command: 2.0.0\n      which: 2.0.2\n\n  cssesc@3.0.0: {}\n\n  csstype@3.1.3: {}\n\n  d3-array@3.2.4:\n    dependencies:\n      internmap: 2.0.3\n\n  d3-color@3.1.0: {}\n\n  d3-ease@3.0.1: {}\n\n  d3-format@3.1.0: {}\n\n  d3-interpolate@3.0.1:\n    dependencies:\n      d3-color: 3.1.0\n\n  d3-path@3.1.0: {}\n\n  d3-scale@4.0.2:\n    dependencies:\n      d3-array: 3.2.4\n      d3-format: 3.1.0\n      d3-interpolate: 3.0.1\n      d3-time: 3.1.0\n      d3-time-format: 4.1.0\n\n  d3-shape@3.2.0:\n    dependencies:\n      d3-path: 3.1.0\n\n  d3-time-format@4.1.0:\n    dependencies:\n      d3-time: 3.1.0\n\n  d3-time@3.1.0:\n    dependencies:\n      d3-array: 3.2.4\n\n  d3-timer@3.0.1: {}\n\n  date-fns@3.6.0: {}\n\n  debug@2.6.9:\n    dependencies:\n      ms: 2.0.0\n\n  debug@4.4.1:\n    dependencies:\n      ms: 2.1.3\n\n  decimal.js-light@2.5.1: {}\n\n  delayed-stream@1.0.0: {}\n\n  depd@2.0.0: {}\n\n  destroy@1.2.0: {}\n\n  detect-libc@2.0.4: {}\n\n  detect-node-es@1.1.0: {}\n\n  didyoumean@1.2.2: {}\n\n  dlv@1.1.3: {}\n\n  dom-helpers@5.2.1:\n    dependencies:\n      '@babel/runtime': 7.28.4\n      csstype: 3.1.3\n\n  dotenv@17.2.2: {}\n\n  drizzle-kit@0.30.6:\n    dependencies:\n      '@drizzle-team/brocli': 0.10.2\n      '@esbuild-kit/esm-loader': 2.6.5\n      esbuild: 0.19.12\n      esbuild-register: 3.6.0(esbuild@0.19.12)\n      gel: 2.1.1\n    transitivePeerDependencies:\n      - supports-color\n\n  drizzle-orm@0.39.3(@neondatabase/serverless@0.10.4)(@types/pg@8.15.5)(pg@8.16.3):\n    optionalDependencies:\n      '@neondatabase/serverless': 0.10.4\n      '@types/pg': 8.15.5\n      pg: 8.16.3\n\n  drizzle-zod@0.7.1(drizzle-orm@0.39.3(@neondatabase/serverless@0.10.4)(@types/pg@8.15.5)(pg@8.16.3))(zod@3.25.76):\n    dependencies:\n      drizzle-orm: 0.39.3(@neondatabase/serverless@0.10.4)(@types/pg@8.15.5)(pg@8.16.3)\n      zod: 3.25.76\n\n  dunder-proto@1.0.1:\n    dependencies:\n      call-bind-apply-helpers: 1.0.2\n      es-errors: 1.3.0\n      gopd: 1.2.0\n\n  eastasianwidth@0.2.0: {}\n\n  ee-first@1.1.1: {}\n\n  electron-to-chromium@1.5.215: {}\n\n  embla-carousel-react@8.6.0(react@18.3.1):\n    dependencies:\n      embla-carousel: 8.6.0\n      embla-carousel-reactive-utils: 8.6.0(embla-carousel@8.6.0)\n      react: 18.3.1\n\n  embla-carousel-reactive-utils@8.6.0(embla-carousel@8.6.0):\n    dependencies:\n      embla-carousel: 8.6.0\n\n  embla-carousel@8.6.0: {}\n\n  emoji-regex@8.0.0: {}\n\n  emoji-regex@9.2.2: {}\n\n  encodeurl@1.0.2: {}\n\n  encodeurl@2.0.0: {}\n\n  enhanced-resolve@5.18.3:\n    dependencies:\n      graceful-fs: 4.2.11\n      tapable: 2.2.3\n\n  env-paths@3.0.0: {}\n\n  es-define-property@1.0.1: {}\n\n  es-errors@1.3.0: {}\n\n  es-object-atoms@1.1.1:\n    dependencies:\n      es-errors: 1.3.0\n\n  es-set-tostringtag@2.1.0:\n    dependencies:\n      es-errors: 1.3.0\n      get-intrinsic: 1.3.0\n      has-tostringtag: 1.0.2\n      hasown: 2.0.2\n\n  esbuild-register@3.6.0(esbuild@0.19.12):\n    dependencies:\n      debug: 4.4.1\n      esbuild: 0.19.12\n    transitivePeerDependencies:\n      - supports-color\n\n  esbuild@0.18.20:\n    optionalDependencies:\n      '@esbuild/android-arm': 0.18.20\n      '@esbuild/android-arm64': 0.18.20\n      '@esbuild/android-x64': 0.18.20\n      '@esbuild/darwin-arm64': 0.18.20\n      '@esbuild/darwin-x64': 0.18.20\n      '@esbuild/freebsd-arm64': 0.18.20\n      '@esbuild/freebsd-x64': 0.18.20\n      '@esbuild/linux-arm': 0.18.20\n      '@esbuild/linux-arm64': 0.18.20\n      '@esbuild/linux-ia32': 0.18.20\n      '@esbuild/linux-loong64': 0.18.20\n      '@esbuild/linux-mips64el': 0.18.20\n      '@esbuild/linux-ppc64': 0.18.20\n      '@esbuild/linux-riscv64': 0.18.20\n      '@esbuild/linux-s390x': 0.18.20\n      '@esbuild/linux-x64': 0.18.20\n      '@esbuild/netbsd-x64': 0.18.20\n      '@esbuild/openbsd-x64': 0.18.20\n      '@esbuild/sunos-x64': 0.18.20\n      '@esbuild/win32-arm64': 0.18.20\n      '@esbuild/win32-ia32': 0.18.20\n      '@esbuild/win32-x64': 0.18.20\n\n  esbuild@0.19.12:\n    optionalDependencies:\n      '@esbuild/aix-ppc64': 0.19.12\n      '@esbuild/android-arm': 0.19.12\n      '@esbuild/android-arm64': 0.19.12\n      '@esbuild/android-x64': 0.19.12\n      '@esbuild/darwin-arm64': 0.19.12\n      '@esbuild/darwin-x64': 0.19.12\n      '@esbuild/freebsd-arm64': 0.19.12\n      '@esbuild/freebsd-x64': 0.19.12\n      '@esbuild/linux-arm': 0.19.12\n      '@esbuild/linux-arm64': 0.19.12\n      '@esbuild/linux-ia32': 0.19.12\n      '@esbuild/linux-loong64': 0.19.12\n      '@esbuild/linux-mips64el': 0.19.12\n      '@esbuild/linux-ppc64': 0.19.12\n      '@esbuild/linux-riscv64': 0.19.12\n      '@esbuild/linux-s390x': 0.19.12\n      '@esbuild/linux-x64': 0.19.12\n      '@esbuild/netbsd-x64': 0.19.12\n      '@esbuild/openbsd-x64': 0.19.12\n      '@esbuild/sunos-x64': 0.19.12\n      '@esbuild/win32-arm64': 0.19.12\n      '@esbuild/win32-ia32': 0.19.12\n      '@esbuild/win32-x64': 0.19.12\n\n  esbuild@0.21.5:\n    optionalDependencies:\n      '@esbuild/aix-ppc64': 0.21.5\n      '@esbuild/android-arm': 0.21.5\n      '@esbuild/android-arm64': 0.21.5\n      '@esbuild/android-x64': 0.21.5\n      '@esbuild/darwin-arm64': 0.21.5\n      '@esbuild/darwin-x64': 0.21.5\n      '@esbuild/freebsd-arm64': 0.21.5\n      '@esbuild/freebsd-x64': 0.21.5\n      '@esbuild/linux-arm': 0.21.5\n      '@esbuild/linux-arm64': 0.21.5\n      '@esbuild/linux-ia32': 0.21.5\n      '@esbuild/linux-loong64': 0.21.5\n      '@esbuild/linux-mips64el': 0.21.5\n      '@esbuild/linux-ppc64': 0.21.5\n      '@esbuild/linux-riscv64': 0.21.5\n      '@esbuild/linux-s390x': 0.21.5\n      '@esbuild/linux-x64': 0.21.5\n      '@esbuild/netbsd-x64': 0.21.5\n      '@esbuild/openbsd-x64': 0.21.5\n      '@esbuild/sunos-x64': 0.21.5\n      '@esbuild/win32-arm64': 0.21.5\n      '@esbuild/win32-ia32': 0.21.5\n      '@esbuild/win32-x64': 0.21.5\n\n  esbuild@0.25.9:\n    optionalDependencies:\n      '@esbuild/aix-ppc64': 0.25.9\n      '@esbuild/android-arm': 0.25.9\n      '@esbuild/android-arm64': 0.25.9\n      '@esbuild/android-x64': 0.25.9\n      '@esbuild/darwin-arm64': 0.25.9\n      '@esbuild/darwin-x64': 0.25.9\n      '@esbuild/freebsd-arm64': 0.25.9\n      '@esbuild/freebsd-x64': 0.25.9\n      '@esbuild/linux-arm': 0.25.9\n      '@esbuild/linux-arm64': 0.25.9\n      '@esbuild/linux-ia32': 0.25.9\n      '@esbuild/linux-loong64': 0.25.9\n      '@esbuild/linux-mips64el': 0.25.9\n      '@esbuild/linux-ppc64': 0.25.9\n      '@esbuild/linux-riscv64': 0.25.9\n      '@esbuild/linux-s390x': 0.25.9\n      '@esbuild/linux-x64': 0.25.9\n      '@esbuild/netbsd-arm64': 0.25.9\n      '@esbuild/netbsd-x64': 0.25.9\n      '@esbuild/openbsd-arm64': 0.25.9\n      '@esbuild/openbsd-x64': 0.25.9\n      '@esbuild/openharmony-arm64': 0.25.9\n      '@esbuild/sunos-x64': 0.25.9\n      '@esbuild/win32-arm64': 0.25.9\n      '@esbuild/win32-ia32': 0.25.9\n      '@esbuild/win32-x64': 0.25.9\n\n  escalade@3.2.0: {}\n\n  escape-html@1.0.3: {}\n\n  etag@1.8.1: {}\n\n  event-target-shim@5.0.1: {}\n\n  eventemitter3@4.0.7: {}\n\n  express-session@1.18.2:\n    dependencies:\n      cookie: 0.7.2\n      cookie-signature: 1.0.7\n      debug: 2.6.9\n      depd: 2.0.0\n      on-headers: 1.1.0\n      parseurl: 1.3.3\n      safe-buffer: 5.2.1\n      uid-safe: 2.1.5\n    transitivePeerDependencies:\n      - supports-color\n\n  express@4.21.2:\n    dependencies:\n      accepts: 1.3.8\n      array-flatten: 1.1.1\n      body-parser: 1.20.3\n      content-disposition: 0.5.4\n      content-type: 1.0.5\n      cookie: 0.7.1\n      cookie-signature: 1.0.6\n      debug: 2.6.9\n      depd: 2.0.0\n      encodeurl: 2.0.0\n      escape-html: 1.0.3\n      etag: 1.8.1\n      finalhandler: 1.3.1\n      fresh: 0.5.2\n      http-errors: 2.0.0\n      merge-descriptors: 1.0.3\n      methods: 1.1.2\n      on-finished: 2.4.1\n      parseurl: 1.3.3\n      path-to-regexp: 0.1.12\n      proxy-addr: 2.0.7\n      qs: 6.13.0\n      range-parser: 1.2.1\n      safe-buffer: 5.2.1\n      send: 0.19.0\n      serve-static: 1.16.2\n      setprototypeof: 1.2.0\n      statuses: 2.0.1\n      type-is: 1.6.18\n      utils-merge: 1.0.1\n      vary: 1.1.2\n    transitivePeerDependencies:\n      - supports-color\n\n  fast-equals@5.2.2: {}\n\n  fast-glob@3.3.3:\n    dependencies:\n      '@nodelib/fs.stat': 2.0.5\n      '@nodelib/fs.walk': 1.2.8\n      glob-parent: 5.1.2\n      merge2: 1.4.1\n      micromatch: 4.0.8\n\n  fastq@1.19.1:\n    dependencies:\n      reusify: 1.1.0\n\n  fflate@0.8.2: {}\n\n  fill-range@7.1.1:\n    dependencies:\n      to-regex-range: 5.0.1\n\n  finalhandler@1.3.1:\n    dependencies:\n      debug: 2.6.9\n      encodeurl: 2.0.0\n      escape-html: 1.0.3\n      on-finished: 2.4.1\n      parseurl: 1.3.3\n      statuses: 2.0.1\n      unpipe: 1.0.0\n    transitivePeerDependencies:\n      - supports-color\n\n  foreground-child@3.3.1:\n    dependencies:\n      cross-spawn: 7.0.6\n      signal-exit: 4.1.0\n\n  form-data-encoder@1.7.2: {}\n\n  form-data@4.0.4:\n    dependencies:\n      asynckit: 0.4.0\n      combined-stream: 1.0.8\n      es-set-tostringtag: 2.1.0\n      hasown: 2.0.2\n      mime-types: 2.1.35\n\n  formdata-node@4.4.1:\n    dependencies:\n      node-domexception: 1.0.0\n      web-streams-polyfill: 4.0.0-beta.3\n\n  forwarded@0.2.0: {}\n\n  fraction.js@4.3.7: {}\n\n  framer-motion@11.18.2(react-dom@18.3.1(react@18.3.1))(react@18.3.1):\n    dependencies:\n      motion-dom: 11.18.1\n      motion-utils: 11.18.1\n      tslib: 2.8.1\n    optionalDependencies:\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n\n  fresh@0.5.2: {}\n\n  fsevents@2.3.3:\n    optional: true\n\n  function-bind@1.1.2: {}\n\n  gel@2.1.1:\n    dependencies:\n      '@petamoriken/float16': 3.9.2\n      debug: 4.4.1\n      env-paths: 3.0.0\n      semver: 7.7.2\n      shell-quote: 1.8.3\n      which: 4.0.0\n    transitivePeerDependencies:\n      - supports-color\n\n  gensync@1.0.0-beta.2: {}\n\n  get-intrinsic@1.3.0:\n    dependencies:\n      call-bind-apply-helpers: 1.0.2\n      es-define-property: 1.0.1\n      es-errors: 1.3.0\n      es-object-atoms: 1.1.1\n      function-bind: 1.1.2\n      get-proto: 1.0.1\n      gopd: 1.2.0\n      has-symbols: 1.1.0\n      hasown: 2.0.2\n      math-intrinsics: 1.1.0\n\n  get-nonce@1.0.1: {}\n\n  get-proto@1.0.1:\n    dependencies:\n      dunder-proto: 1.0.1\n      es-object-atoms: 1.1.1\n\n  get-tsconfig@4.10.1:\n    dependencies:\n      resolve-pkg-maps: 1.0.0\n\n  glob-parent@5.1.2:\n    dependencies:\n      is-glob: 4.0.3\n\n  glob-parent@6.0.2:\n    dependencies:\n      is-glob: 4.0.3\n\n  glob@10.4.5:\n    dependencies:\n      foreground-child: 3.3.1\n      jackspeak: 3.4.3\n      minimatch: 9.0.5\n      minipass: 7.1.2\n      package-json-from-dist: 1.0.1\n      path-scurry: 1.11.1\n\n  gopd@1.2.0: {}\n\n  graceful-fs@4.2.11: {}\n\n  groq-sdk@0.30.0:\n    dependencies:\n      '@types/node': 18.19.124\n      '@types/node-fetch': 2.6.13\n      abort-controller: 3.0.0\n      agentkeepalive: 4.6.0\n      form-data-encoder: 1.7.2\n      formdata-node: 4.4.1\n      node-fetch: 2.7.0\n    transitivePeerDependencies:\n      - encoding\n\n  has-symbols@1.1.0: {}\n\n  has-tostringtag@1.0.2:\n    dependencies:\n      has-symbols: 1.1.0\n\n  hasown@2.0.2:\n    dependencies:\n      function-bind: 1.1.2\n\n  http-errors@2.0.0:\n    dependencies:\n      depd: 2.0.0\n      inherits: 2.0.4\n      setprototypeof: 1.2.0\n      statuses: 2.0.1\n      toidentifier: 1.0.1\n\n  humanize-ms@1.2.1:\n    dependencies:\n      ms: 2.1.3\n\n  iconv-lite@0.4.24:\n    dependencies:\n      safer-buffer: 2.1.2\n\n  inherits@2.0.4: {}\n\n  input-otp@1.4.2(react-dom@18.3.1(react@18.3.1))(react@18.3.1):\n    dependencies:\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n\n  internmap@2.0.3: {}\n\n  ipaddr.js@1.9.1: {}\n\n  is-binary-path@2.1.0:\n    dependencies:\n      binary-extensions: 2.3.0\n\n  is-core-module@2.16.1:\n    dependencies:\n      hasown: 2.0.2\n\n  is-extglob@2.1.1: {}\n\n  is-fullwidth-code-point@3.0.0: {}\n\n  is-glob@4.0.3:\n    dependencies:\n      is-extglob: 2.1.1\n\n  is-number@7.0.0: {}\n\n  isexe@2.0.0: {}\n\n  isexe@3.1.1: {}\n\n  jackspeak@3.4.3:\n    dependencies:\n      '@isaacs/cliui': 8.0.2\n    optionalDependencies:\n      '@pkgjs/parseargs': 0.11.0\n\n  jiti@1.21.7: {}\n\n  jiti@2.5.1: {}\n\n  js-tokens@4.0.0: {}\n\n  jsesc@3.1.0: {}\n\n  json5@2.2.3: {}\n\n  lightningcss-darwin-arm64@1.30.1:\n    optional: true\n\n  lightningcss-darwin-x64@1.30.1:\n    optional: true\n\n  lightningcss-freebsd-x64@1.30.1:\n    optional: true\n\n  lightningcss-linux-arm-gnueabihf@1.30.1:\n    optional: true\n\n  lightningcss-linux-arm64-gnu@1.30.1:\n    optional: true\n\n  lightningcss-linux-arm64-musl@1.30.1:\n    optional: true\n\n  lightningcss-linux-x64-gnu@1.30.1:\n    optional: true\n\n  lightningcss-linux-x64-musl@1.30.1:\n    optional: true\n\n  lightningcss-win32-arm64-msvc@1.30.1:\n    optional: true\n\n  lightningcss-win32-x64-msvc@1.30.1:\n    optional: true\n\n  lightningcss@1.30.1:\n    dependencies:\n      detect-libc: 2.0.4\n    optionalDependencies:\n      lightningcss-darwin-arm64: 1.30.1\n      lightningcss-darwin-x64: 1.30.1\n      lightningcss-freebsd-x64: 1.30.1\n      lightningcss-linux-arm-gnueabihf: 1.30.1\n      lightningcss-linux-arm64-gnu: 1.30.1\n      lightningcss-linux-arm64-musl: 1.30.1\n      lightningcss-linux-x64-gnu: 1.30.1\n      lightningcss-linux-x64-musl: 1.30.1\n      lightningcss-win32-arm64-msvc: 1.30.1\n      lightningcss-win32-x64-msvc: 1.30.1\n\n  lilconfig@3.1.3: {}\n\n  lines-and-columns@1.2.4: {}\n\n  lodash.castarray@4.4.0: {}\n\n  lodash.isplainobject@4.0.6: {}\n\n  lodash.merge@4.6.2: {}\n\n  lodash@4.17.21: {}\n\n  loose-envify@1.4.0:\n    dependencies:\n      js-tokens: 4.0.0\n\n  lru-cache@10.4.3: {}\n\n  lru-cache@4.1.5:\n    dependencies:\n      pseudomap: 1.0.2\n      yallist: 2.1.2\n\n  lru-cache@5.1.1:\n    dependencies:\n      yallist: 3.1.1\n\n  lucide-react@0.453.0(react@18.3.1):\n    dependencies:\n      react: 18.3.1\n\n  magic-string@0.30.19:\n    dependencies:\n      '@jridgewell/sourcemap-codec': 1.5.5\n\n  math-intrinsics@1.1.0: {}\n\n  media-typer@0.3.0: {}\n\n  memorystore@1.6.7:\n    dependencies:\n      debug: 4.4.1\n      lru-cache: 4.1.5\n    transitivePeerDependencies:\n      - supports-color\n\n  merge-descriptors@1.0.3: {}\n\n  merge2@1.4.1: {}\n\n  meshoptimizer@0.22.0: {}\n\n  methods@1.1.2: {}\n\n  micromatch@4.0.8:\n    dependencies:\n      braces: 3.0.3\n      picomatch: 2.3.1\n\n  mime-db@1.52.0: {}\n\n  mime-types@2.1.35:\n    dependencies:\n      mime-db: 1.52.0\n\n  mime@1.6.0: {}\n\n  minimatch@9.0.5:\n    dependencies:\n      brace-expansion: 2.0.2\n\n  minipass@7.1.2: {}\n\n  minizlib@3.0.2:\n    dependencies:\n      minipass: 7.1.2\n\n  mitt@3.0.1: {}\n\n  mkdirp@3.0.1: {}\n\n  modern-screenshot@4.6.6: {}\n\n  motion-dom@11.18.1:\n    dependencies:\n      motion-utils: 11.18.1\n\n  motion-utils@11.18.1: {}\n\n  ms@2.0.0: {}\n\n  ms@2.1.3: {}\n\n  mz@2.7.0:\n    dependencies:\n      any-promise: 1.3.0\n      object-assign: 4.1.1\n      thenify-all: 1.6.0\n\n  nanoid@3.3.11: {}\n\n  nanoid@5.1.5: {}\n\n  negotiator@0.6.3: {}\n\n  next-themes@0.4.6(react-dom@18.3.1(react@18.3.1))(react@18.3.1):\n    dependencies:\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n\n  node-domexception@1.0.0: {}\n\n  node-fetch@2.7.0:\n    dependencies:\n      whatwg-url: 5.0.0\n\n  node-gyp-build@4.8.4:\n    optional: true\n\n  node-releases@2.0.20: {}\n\n  normalize-path@3.0.0: {}\n\n  normalize-range@0.1.2: {}\n\n  object-assign@4.1.1: {}\n\n  object-hash@3.0.0: {}\n\n  object-inspect@1.13.4: {}\n\n  obuf@1.1.2: {}\n\n  on-finished@2.4.1:\n    dependencies:\n      ee-first: 1.1.1\n\n  on-headers@1.1.0: {}\n\n  package-json-from-dist@1.0.1: {}\n\n  parseurl@1.3.3: {}\n\n  passport-local@1.0.0:\n    dependencies:\n      passport-strategy: 1.0.0\n\n  passport-strategy@1.0.0: {}\n\n  passport@0.7.0:\n    dependencies:\n      passport-strategy: 1.0.0\n      pause: 0.0.1\n      utils-merge: 1.0.1\n\n  path-key@3.1.1: {}\n\n  path-parse@1.0.7: {}\n\n  path-scurry@1.11.1:\n    dependencies:\n      lru-cache: 10.4.3\n      minipass: 7.1.2\n\n  path-to-regexp@0.1.12: {}\n\n  pause@0.0.1: {}\n\n  pg-cloudflare@1.2.7:\n    optional: true\n\n  pg-connection-string@2.9.1: {}\n\n  pg-int8@1.0.1: {}\n\n  pg-numeric@1.0.2: {}\n\n  pg-pool@3.10.1(pg@8.16.3):\n    dependencies:\n      pg: 8.16.3\n\n  pg-protocol@1.10.3: {}\n\n  pg-types@2.2.0:\n    dependencies:\n      pg-int8: 1.0.1\n      postgres-array: 2.0.0\n      postgres-bytea: 1.0.0\n      postgres-date: 1.0.7\n      postgres-interval: 1.2.0\n\n  pg-types@4.1.0:\n    dependencies:\n      pg-int8: 1.0.1\n      pg-numeric: 1.0.2\n      postgres-array: 3.0.4\n      postgres-bytea: 3.0.0\n      postgres-date: 2.1.0\n      postgres-interval: 3.0.0\n      postgres-range: 1.1.4\n\n  pg@8.16.3:\n    dependencies:\n      pg-connection-string: 2.9.1\n      pg-pool: 3.10.1(pg@8.16.3)\n      pg-protocol: 1.10.3\n      pg-types: 2.2.0\n      pgpass: 1.0.5\n    optionalDependencies:\n      pg-cloudflare: 1.2.7\n\n  pgpass@1.0.5:\n    dependencies:\n      split2: 4.2.0\n\n  picocolors@1.1.1: {}\n\n  picomatch@2.3.1: {}\n\n  pify@2.3.0: {}\n\n  pirates@4.0.7: {}\n\n  postcss-import@15.1.0(postcss@8.5.6):\n    dependencies:\n      postcss: 8.5.6\n      postcss-value-parser: 4.2.0\n      read-cache: 1.0.0\n      resolve: 1.22.10\n\n  postcss-js@4.0.1(postcss@8.5.6):\n    dependencies:\n      camelcase-css: 2.0.1\n      postcss: 8.5.6\n\n  postcss-load-config@4.0.2(postcss@8.5.6):\n    dependencies:\n      lilconfig: 3.1.3\n      yaml: 2.8.1\n    optionalDependencies:\n      postcss: 8.5.6\n\n  postcss-nested@6.2.0(postcss@8.5.6):\n    dependencies:\n      postcss: 8.5.6\n      postcss-selector-parser: 6.1.2\n\n  postcss-selector-parser@6.0.10:\n    dependencies:\n      cssesc: 3.0.0\n      util-deprecate: 1.0.2\n\n  postcss-selector-parser@6.1.2:\n    dependencies:\n      cssesc: 3.0.0\n      util-deprecate: 1.0.2\n\n  postcss-value-parser@4.2.0: {}\n\n  postcss@8.5.6:\n    dependencies:\n      nanoid: 3.3.11\n      picocolors: 1.1.1\n      source-map-js: 1.2.1\n\n  postgres-array@2.0.0: {}\n\n  postgres-array@3.0.4: {}\n\n  postgres-bytea@1.0.0: {}\n\n  postgres-bytea@3.0.0:\n    dependencies:\n      obuf: 1.1.2\n\n  postgres-date@1.0.7: {}\n\n  postgres-date@2.1.0: {}\n\n  postgres-interval@1.2.0:\n    dependencies:\n      xtend: 4.0.2\n\n  postgres-interval@3.0.0: {}\n\n  postgres-range@1.1.4: {}\n\n  prop-types@15.8.1:\n    dependencies:\n      loose-envify: 1.4.0\n      object-assign: 4.1.1\n      react-is: 16.13.1\n\n  proxy-addr@2.0.7:\n    dependencies:\n      forwarded: 0.2.0\n      ipaddr.js: 1.9.1\n\n  pseudomap@1.0.2: {}\n\n  qs@6.13.0:\n    dependencies:\n      side-channel: 1.1.0\n\n  queue-microtask@1.2.3: {}\n\n  random-bytes@1.0.0: {}\n\n  range-parser@1.2.1: {}\n\n  raw-body@2.5.2:\n    dependencies:\n      bytes: 3.1.2\n      http-errors: 2.0.0\n      iconv-lite: 0.4.24\n      unpipe: 1.0.0\n\n  react-day-picker@8.10.1(date-fns@3.6.0)(react@18.3.1):\n    dependencies:\n      date-fns: 3.6.0\n      react: 18.3.1\n\n  react-dom@18.3.1(react@18.3.1):\n    dependencies:\n      loose-envify: 1.4.0\n      react: 18.3.1\n      scheduler: 0.23.2\n\n  react-hook-form@7.62.0(react@18.3.1):\n    dependencies:\n      react: 18.3.1\n\n  react-icons@5.5.0(react@18.3.1):\n    dependencies:\n      react: 18.3.1\n\n  react-is@16.13.1: {}\n\n  react-is@18.3.1: {}\n\n  react-refresh@0.17.0: {}\n\n  react-remove-scroll-bar@2.3.8(@types/react@18.3.24)(react@18.3.1):\n    dependencies:\n      react: 18.3.1\n      react-style-singleton: 2.2.3(@types/react@18.3.24)(react@18.3.1)\n      tslib: 2.8.1\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  react-remove-scroll@2.7.1(@types/react@18.3.24)(react@18.3.1):\n    dependencies:\n      react: 18.3.1\n      react-remove-scroll-bar: 2.3.8(@types/react@18.3.24)(react@18.3.1)\n      react-style-singleton: 2.2.3(@types/react@18.3.24)(react@18.3.1)\n      tslib: 2.8.1\n      use-callback-ref: 1.3.3(@types/react@18.3.24)(react@18.3.1)\n      use-sidecar: 1.1.3(@types/react@18.3.24)(react@18.3.1)\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  react-resizable-panels@2.1.9(react-dom@18.3.1(react@18.3.1))(react@18.3.1):\n    dependencies:\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n\n  react-smooth@4.0.4(react-dom@18.3.1(react@18.3.1))(react@18.3.1):\n    dependencies:\n      fast-equals: 5.2.2\n      prop-types: 15.8.1\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n      react-transition-group: 4.4.5(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n\n  react-style-singleton@2.2.3(@types/react@18.3.24)(react@18.3.1):\n    dependencies:\n      get-nonce: 1.0.1\n      react: 18.3.1\n      tslib: 2.8.1\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  react-transition-group@4.4.5(react-dom@18.3.1(react@18.3.1))(react@18.3.1):\n    dependencies:\n      '@babel/runtime': 7.28.4\n      dom-helpers: 5.2.1\n      loose-envify: 1.4.0\n      prop-types: 15.8.1\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n\n  react@18.3.1:\n    dependencies:\n      loose-envify: 1.4.0\n\n  read-cache@1.0.0:\n    dependencies:\n      pify: 2.3.0\n\n  readdirp@3.6.0:\n    dependencies:\n      picomatch: 2.3.1\n\n  recharts-scale@0.4.5:\n    dependencies:\n      decimal.js-light: 2.5.1\n\n  recharts@2.15.4(react-dom@18.3.1(react@18.3.1))(react@18.3.1):\n    dependencies:\n      clsx: 2.1.1\n      eventemitter3: 4.0.7\n      lodash: 4.17.21\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n      react-is: 18.3.1\n      react-smooth: 4.0.4(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      recharts-scale: 0.4.5\n      tiny-invariant: 1.3.3\n      victory-vendor: 36.9.2\n\n  regexparam@3.0.0: {}\n\n  resolve-pkg-maps@1.0.0: {}\n\n  resolve@1.22.10:\n    dependencies:\n      is-core-module: 2.16.1\n      path-parse: 1.0.7\n      supports-preserve-symlinks-flag: 1.0.0\n\n  reusify@1.1.0: {}\n\n  rollup@4.50.1:\n    dependencies:\n      '@types/estree': 1.0.8\n    optionalDependencies:\n      '@rollup/rollup-android-arm-eabi': 4.50.1\n      '@rollup/rollup-android-arm64': 4.50.1\n      '@rollup/rollup-darwin-arm64': 4.50.1\n      '@rollup/rollup-darwin-x64': 4.50.1\n      '@rollup/rollup-freebsd-arm64': 4.50.1\n      '@rollup/rollup-freebsd-x64': 4.50.1\n      '@rollup/rollup-linux-arm-gnueabihf': 4.50.1\n      '@rollup/rollup-linux-arm-musleabihf': 4.50.1\n      '@rollup/rollup-linux-arm64-gnu': 4.50.1\n      '@rollup/rollup-linux-arm64-musl': 4.50.1\n      '@rollup/rollup-linux-loongarch64-gnu': 4.50.1\n      '@rollup/rollup-linux-ppc64-gnu': 4.50.1\n      '@rollup/rollup-linux-riscv64-gnu': 4.50.1\n      '@rollup/rollup-linux-riscv64-musl': 4.50.1\n      '@rollup/rollup-linux-s390x-gnu': 4.50.1\n      '@rollup/rollup-linux-x64-gnu': 4.50.1\n      '@rollup/rollup-linux-x64-musl': 4.50.1\n      '@rollup/rollup-openharmony-arm64': 4.50.1\n      '@rollup/rollup-win32-arm64-msvc': 4.50.1\n      '@rollup/rollup-win32-ia32-msvc': 4.50.1\n      '@rollup/rollup-win32-x64-msvc': 4.50.1\n      fsevents: 2.3.3\n\n  run-parallel@1.2.0:\n    dependencies:\n      queue-microtask: 1.2.3\n\n  safe-buffer@5.2.1: {}\n\n  safer-buffer@2.1.2: {}\n\n  scheduler@0.23.2:\n    dependencies:\n      loose-envify: 1.4.0\n\n  semver@6.3.1: {}\n\n  semver@7.7.2: {}\n\n  send@0.19.0:\n    dependencies:\n      debug: 2.6.9\n      depd: 2.0.0\n      destroy: 1.2.0\n      encodeurl: 1.0.2\n      escape-html: 1.0.3\n      etag: 1.8.1\n      fresh: 0.5.2\n      http-errors: 2.0.0\n      mime: 1.6.0\n      ms: 2.1.3\n      on-finished: 2.4.1\n      range-parser: 1.2.1\n      statuses: 2.0.1\n    transitivePeerDependencies:\n      - supports-color\n\n  serve-static@1.16.2:\n    dependencies:\n      encodeurl: 2.0.0\n      escape-html: 1.0.3\n      parseurl: 1.3.3\n      send: 0.19.0\n    transitivePeerDependencies:\n      - supports-color\n\n  setprototypeof@1.2.0: {}\n\n  shebang-command@2.0.0:\n    dependencies:\n      shebang-regex: 3.0.0\n\n  shebang-regex@3.0.0: {}\n\n  shell-quote@1.8.3: {}\n\n  side-channel-list@1.0.0:\n    dependencies:\n      es-errors: 1.3.0\n      object-inspect: 1.13.4\n\n  side-channel-map@1.0.1:\n    dependencies:\n      call-bound: 1.0.4\n      es-errors: 1.3.0\n      get-intrinsic: 1.3.0\n      object-inspect: 1.13.4\n\n  side-channel-weakmap@1.0.2:\n    dependencies:\n      call-bound: 1.0.4\n      es-errors: 1.3.0\n      get-intrinsic: 1.3.0\n      object-inspect: 1.13.4\n      side-channel-map: 1.0.1\n\n  side-channel@1.1.0:\n    dependencies:\n      es-errors: 1.3.0\n      object-inspect: 1.13.4\n      side-channel-list: 1.0.0\n      side-channel-map: 1.0.1\n      side-channel-weakmap: 1.0.2\n\n  signal-exit@4.1.0: {}\n\n  simplex-noise@4.0.3: {}\n\n  source-map-js@1.2.1: {}\n\n  source-map-support@0.5.21:\n    dependencies:\n      buffer-from: 1.1.2\n      source-map: 0.6.1\n\n  source-map@0.6.1: {}\n\n  split2@4.2.0: {}\n\n  statuses@2.0.1: {}\n\n  string-width@4.2.3:\n    dependencies:\n      emoji-regex: 8.0.0\n      is-fullwidth-code-point: 3.0.0\n      strip-ansi: 6.0.1\n\n  string-width@5.1.2:\n    dependencies:\n      eastasianwidth: 0.2.0\n      emoji-regex: 9.2.2\n      strip-ansi: 7.1.2\n\n  strip-ansi@6.0.1:\n    dependencies:\n      ansi-regex: 5.0.1\n\n  strip-ansi@7.1.2:\n    dependencies:\n      ansi-regex: 6.2.2\n\n  sucrase@3.35.0:\n    dependencies:\n      '@jridgewell/gen-mapping': 0.3.13\n      commander: 4.1.1\n      glob: 10.4.5\n      lines-and-columns: 1.2.4\n      mz: 2.7.0\n      pirates: 4.0.7\n      ts-interface-checker: 0.1.13\n\n  supports-preserve-symlinks-flag@1.0.0: {}\n\n  tailwind-merge@2.6.0: {}\n\n  tailwindcss-animate@1.0.7(tailwindcss@3.4.17):\n    dependencies:\n      tailwindcss: 3.4.17\n\n  tailwindcss@3.4.17:\n    dependencies:\n      '@alloc/quick-lru': 5.2.0\n      arg: 5.0.2\n      chokidar: 3.6.0\n      didyoumean: 1.2.2\n      dlv: 1.1.3\n      fast-glob: 3.3.3\n      glob-parent: 6.0.2\n      is-glob: 4.0.3\n      jiti: 1.21.7\n      lilconfig: 3.1.3\n      micromatch: 4.0.8\n      normalize-path: 3.0.0\n      object-hash: 3.0.0\n      picocolors: 1.1.1\n      postcss: 8.5.6\n      postcss-import: 15.1.0(postcss@8.5.6)\n      postcss-js: 4.0.1(postcss@8.5.6)\n      postcss-load-config: 4.0.2(postcss@8.5.6)\n      postcss-nested: 6.2.0(postcss@8.5.6)\n      postcss-selector-parser: 6.1.2\n      resolve: 1.22.10\n      sucrase: 3.35.0\n    transitivePeerDependencies:\n      - ts-node\n\n  tailwindcss@4.1.13: {}\n\n  tapable@2.2.3: {}\n\n  tar@7.4.3:\n    dependencies:\n      '@isaacs/fs-minipass': 4.0.1\n      chownr: 3.0.0\n      minipass: 7.1.2\n      minizlib: 3.0.2\n      mkdirp: 3.0.1\n      yallist: 5.0.0\n\n  thenify-all@1.6.0:\n    dependencies:\n      thenify: 3.3.1\n\n  thenify@3.3.1:\n    dependencies:\n      any-promise: 1.3.0\n\n  three@0.179.1: {}\n\n  tiny-invariant@1.3.3: {}\n\n  to-regex-range@5.0.1:\n    dependencies:\n      is-number: 7.0.0\n\n  toidentifier@1.0.1: {}\n\n  tr46@0.0.3: {}\n\n  ts-interface-checker@0.1.13: {}\n\n  tslib@2.8.1: {}\n\n  tsx@4.20.5:\n    dependencies:\n      esbuild: 0.25.9\n      get-tsconfig: 4.10.1\n    optionalDependencies:\n      fsevents: 2.3.3\n\n  tw-animate-css@1.3.8: {}\n\n  type-is@1.6.18:\n    dependencies:\n      media-typer: 0.3.0\n      mime-types: 2.1.35\n\n  typescript@5.6.3: {}\n\n  uid-safe@2.1.5:\n    dependencies:\n      random-bytes: 1.0.0\n\n  undici-types@5.26.5: {}\n\n  undici-types@6.21.0: {}\n\n  unpipe@1.0.0: {}\n\n  update-browserslist-db@1.1.3(browserslist@4.25.4):\n    dependencies:\n      browserslist: 4.25.4\n      escalade: 3.2.0\n      picocolors: 1.1.1\n\n  use-callback-ref@1.3.3(@types/react@18.3.24)(react@18.3.1):\n    dependencies:\n      react: 18.3.1\n      tslib: 2.8.1\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  use-sidecar@1.1.3(@types/react@18.3.24)(react@18.3.1):\n    dependencies:\n      detect-node-es: 1.1.0\n      react: 18.3.1\n      tslib: 2.8.1\n    optionalDependencies:\n      '@types/react': 18.3.24\n\n  use-sync-external-store@1.5.0(react@18.3.1):\n    dependencies:\n      react: 18.3.1\n\n  util-deprecate@1.0.2: {}\n\n  utils-merge@1.0.1: {}\n\n  vary@1.1.2: {}\n\n  vaul@1.1.2(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1):\n    dependencies:\n      '@radix-ui/react-dialog': 1.1.15(@types/react-dom@18.3.7(@types/react@18.3.24))(@types/react@18.3.24)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)\n      react: 18.3.1\n      react-dom: 18.3.1(react@18.3.1)\n    transitivePeerDependencies:\n      - '@types/react'\n      - '@types/react-dom'\n\n  victory-vendor@36.9.2:\n    dependencies:\n      '@types/d3-array': 3.2.1\n      '@types/d3-ease': 3.0.2\n      '@types/d3-interpolate': 3.0.4\n      '@types/d3-scale': 4.0.9\n      '@types/d3-shape': 3.1.7\n      '@types/d3-time': 3.0.4\n      '@types/d3-timer': 3.0.2\n      d3-array: 3.2.4\n      d3-ease: 3.0.1\n      d3-interpolate: 3.0.1\n      d3-scale: 4.0.2\n      d3-shape: 3.2.0\n      d3-time: 3.1.0\n      d3-timer: 3.0.1\n\n  vite@5.4.20(@types/node@20.19.13)(lightningcss@1.30.1):\n    dependencies:\n      esbuild: 0.21.5\n      postcss: 8.5.6\n      rollup: 4.50.1\n    optionalDependencies:\n      '@types/node': 20.19.13\n      fsevents: 2.3.3\n      lightningcss: 1.30.1\n\n  web-streams-polyfill@4.0.0-beta.3: {}\n\n  webidl-conversions@3.0.1: {}\n\n  whatwg-url@5.0.0:\n    dependencies:\n      tr46: 0.0.3\n      webidl-conversions: 3.0.1\n\n  which@2.0.2:\n    dependencies:\n      isexe: 2.0.0\n\n  which@4.0.0:\n    dependencies:\n      isexe: 3.1.1\n\n  wouter@3.7.1(react@18.3.1):\n    dependencies:\n      mitt: 3.0.1\n      react: 18.3.1\n      regexparam: 3.0.0\n      use-sync-external-store: 1.5.0(react@18.3.1)\n\n  wrap-ansi@7.0.0:\n    dependencies:\n      ansi-styles: 4.3.0\n      string-width: 4.2.3\n      strip-ansi: 6.0.1\n\n  wrap-ansi@8.1.0:\n    dependencies:\n      ansi-styles: 6.2.3\n      string-width: 5.1.2\n      strip-ansi: 7.1.2\n\n  ws@8.18.3(bufferutil@4.0.9):\n    optionalDependencies:\n      bufferutil: 4.0.9\n\n  xtend@4.0.2: {}\n\n  yallist@2.1.2: {}\n\n  yallist@3.1.1: {}\n\n  yallist@5.0.0: {}\n\n  yaml@2.8.1: {}\n\n  zod-validation-error@3.5.3(zod@3.25.76):\n    dependencies:\n      zod: 3.25.76\n\n  zod@3.25.76: {}\n","size_bytes":244374},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nconst API_BASE_URL = import.meta.env.VITE_API_BASE_URL || '';\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  // Add base URL if the url is relative\n  const fullUrl = url.startsWith('http') ? url : `${API_BASE_URL}${url}`;\n\n  const res = await fetch(fullUrl, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    // Build the full URL\n    const urlPath = queryKey.join(\"/\") as string;\n    const fullUrl = urlPath.startsWith('http') ? urlPath : `${API_BASE_URL}${urlPath}`;\n\n    const res = await fetch(fullUrl, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});","size_bytes":1709},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/input-area.tsx":{"content":"import { useState } from \"react\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { \n  Mic, \n  MicOff, \n  Send, \n  Clock, \n  Phone, \n  Calendar, \n  Building \n} from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface InputAreaProps {\n  onSendMessage: (message: string) => void;\n  onToggleVoice: () => void;\n  onQuickQuery: (query: string) => void;\n  isListening: boolean;\n  transcript: string;\n  isProcessing: boolean;\n  voiceSupported: boolean;\n}\n\nexport function InputArea({\n  onSendMessage,\n  onToggleVoice,\n  onQuickQuery,\n  isListening,\n  transcript,\n  isProcessing,\n  voiceSupported\n}: InputAreaProps) {\n  const [textInput, setTextInput] = useState(\"\");\n\n  const handleSendText = () => {\n    const message = textInput.trim() || transcript.trim();\n    if (message) {\n      onSendMessage(message);\n      setTextInput(\"\");\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendText();\n    }\n  };\n\n  const quickQueries = [\n    { icon: Clock, text: \"College Timings\", query: \"College ka timing kya hai?\" },\n    { icon: Phone, text: \"Contact Info\", query: \"College ka contact number kya hai?\" },\n    { icon: Calendar, text: \"Events\", query: \"Upcoming events kya hai college me?\" },\n    { icon: Building, text: \"Departments\", query: \"College me kya departments hai?\" },\n  ];\n\n  return (\n    <Card className=\"p-4\">\n      <div className=\"space-y-4\">\n        {/* Voice Input Section */}\n        <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 bg-gradient-to-r from-[var(--rksd-blue)] to-[var(--rksd-light)] rounded-full flex items-center justify-center relative\">\n              <Mic className=\"text-white\" size={20} />\n              {isListening && (\n                <div className=\"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full border-2 border-white\"></div>\n              )}\n            </div>\n            <div>\n              <p className=\"text-sm font-medium text-gray-900\">\n                {isListening ? \"Listening...\" : transcript ? \"Voice detected\" : \"Ready to listen\"}\n              </p>\n              <p className=\"text-xs text-gray-500\">\n                {voiceSupported \n                  ? \"Click microphone and speak your question\"\n                  : \"Voice input not supported in this browser\"\n                }\n              </p>\n            </div>\n          </div>\n          <Button\n            onClick={onToggleVoice}\n            disabled={!voiceSupported}\n            className={cn(\n              \"inline-flex items-center px-4 py-2 rounded-lg transition-colors duration-200 font-medium text-sm\",\n              isListening\n                ? \"bg-red-500 hover:bg-red-600 text-white\"\n                : \"bg-gradient-to-r from-[var(--rksd-blue)] to-[var(--rksd-light)] hover:from-[var(--rksd-light)] hover:to-[var(--rksd-blue)] text-white\"\n            )}\n          >\n            {isListening ? (\n              <>\n                <MicOff className=\"mr-2\" size={16} />\n                <span>Stop Listening</span>\n              </>\n            ) : (\n              <>\n                <Mic className=\"mr-2\" size={16} />\n                <span>Start Listening</span>\n              </>\n            )}\n          </Button>\n        </div>\n\n        {/* Show transcript if available */}\n        {transcript && (\n          <div className=\"p-3 bg-blue-50 rounded-lg border border-blue-200\">\n            <p className=\"text-sm text-blue-800\">\n              <strong>Voice input:</strong> {transcript}\n            </p>\n          </div>\n        )}\n\n        {/* Text Input Section */}\n        <div className=\"relative\">\n          <Textarea\n            value={textInput}\n            onChange={(e) => setTextInput(e.target.value)}\n            onKeyPress={handleKeyPress}\n            className=\"w-full resize-none border border-gray-300 rounded-lg px-4 py-3 pr-12 focus:ring-2 focus:ring-rksd-blue focus:border-rksd-blue transition-colors text-sm\"\n            placeholder=\"Type your question here... (Hindi à¤”à¤° English both supported)\"\n            rows={3}\n            disabled={isProcessing}\n          />\n          <Button\n            onClick={handleSendText}\n            disabled={isProcessing || (!textInput.trim() && !transcript.trim())}\n            className=\"absolute bottom-3 right-3 w-8 h-8 bg-rksd-blue hover:bg-blue-700 text-white rounded-lg transition-colors duration-200 p-0\"\n          >\n            <Send size={16} />\n          </Button>\n        </div>\n\n        {/* Quick Actions */}\n        <div className=\"flex flex-wrap gap-2\">\n          {quickQueries.map(({ icon: Icon, text, query }) => (\n            <Button\n              key={text}\n              variant=\"secondary\"\n              size=\"sm\"\n              onClick={() => onQuickQuery(query)}\n              disabled={isProcessing}\n              className=\"inline-flex items-center px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors text-sm\"\n            >\n              <Icon className=\"mr-1.5\" size={12} />\n              {text}\n            </Button>\n          ))}\n        </div>\n      </div>\n    </Card>\n  );\n}\n","size_bytes":5353},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/animated-face.tsx":{"content":"import { useState, useEffect } from \"react\";\n\ninterface AnimatedFaceProps {\n  state: 'idle' | 'listening' | 'speaking' | 'typing';\n  size?: number;\n  emotion?: 'neutral' | 'happy' | 'worried' | 'thinking';\n}\n\nexport function AnimatedFace({ state, size = 120, emotion = 'neutral' }: AnimatedFaceProps) {\n  const [expression, setExpression] = useState(emotion);\n  const [eyeBlink, setEyeBlink] = useState(false);\n  const [mouthAnimation, setMouthAnimation] = useState(false);\n\n  // Update expression when emotion prop changes\n  useEffect(() => {\n    setExpression(emotion);\n  }, [emotion]);\n\n  // Blinking animation\n  useEffect(() => {\n    const blinkInterval = setInterval(() => {\n      setEyeBlink(true);\n      setTimeout(() => setEyeBlink(false), 150);\n    }, 3000 + Math.random() * 2000);\n\n    return () => clearInterval(blinkInterval);\n  }, []);\n\n  // State-based animations\n  useEffect(() => {\n    let interval: NodeJS.Timeout;\n    \n    if (state === 'listening') {\n      setExpression('thinking');\n    } else if (state === 'speaking') {\n      setExpression('happy');\n      interval = setInterval(() => {\n        setMouthAnimation(prev => !prev);\n      }, 200);\n    } else if (state === 'typing') {\n      setExpression('thinking');\n    } else {\n      setExpression(emotion);\n    }\n\n    return () => {\n      if (interval) clearInterval(interval);\n      setMouthAnimation(false);\n    };\n  }, [state, emotion]);\n\n  // Expression-based features\n  const getEyeShape = () => {\n    if (eyeBlink) return { scaleY: 0.1 };\n    \n    switch (expression) {\n      case 'happy':\n        return { scaleY: 0.8, transform: 'rotate(-10deg)' };\n      case 'worried':\n        return { scaleY: 1.2, transform: 'rotate(15deg)' };\n      case 'thinking':\n        return { scaleY: 0.9, transform: 'rotate(5deg)' };\n      default:\n        return { scaleY: 1 };\n    }\n  };\n\n  const getMouthShape = () => {\n    if (state === 'speaking' && mouthAnimation) {\n      return {\n        width: '14px',\n        height: '10px',\n        borderRadius: '50%',\n        backgroundColor: '#2d1b69'\n      };\n    }\n\n    switch (expression) {\n      case 'happy':\n        return {\n          width: '16px',\n          height: '8px',\n          borderRadius: '0 0 16px 16px',\n          backgroundColor: '#2d1b69'\n        };\n      case 'worried':\n        return {\n          width: '12px',\n          height: '6px',\n          borderRadius: '12px 12px 0 0',\n          backgroundColor: '#2d1b69'\n        };\n      case 'thinking':\n        return {\n          width: '8px',\n          height: '4px',\n          borderRadius: '4px',\n          backgroundColor: '#2d1b69'\n        };\n      default:\n        return {\n          width: '10px',\n          height: '4px',\n          borderRadius: '2px',\n          backgroundColor: '#2d1b69'\n        };\n    }\n  };\n\n  const getEyebrowPosition = () => {\n    switch (expression) {\n      case 'worried':\n        return { transform: 'rotate(10deg) translateY(2px)' };\n      case 'thinking':\n        return { transform: 'rotate(-5deg) translateY(-1px)' };\n      default:\n        return {};\n    }\n  };\n\n  const getFaceAnimation = () => {\n    switch (state) {\n      case 'listening':\n        return 'pulse 2s infinite';\n      case 'speaking':\n        return 'speak 0.5s infinite';\n      case 'typing':\n        return 'bounce 1s infinite';\n      default:\n        return expression === 'happy' ? 'breathe 3s infinite' : 'breathe 4s infinite';\n    }\n  };\n\n  const getFaceColor = () => {\n    switch (expression) {\n      case 'happy':\n        return '#fef3c7'; // Light yellow\n      case 'worried':\n        return '#fecaca'; // Light red\n      case 'thinking':\n        return '#ddd6fe'; // Light purple\n      default:\n        return '#f3f4f6'; // Light gray\n    }\n  };\n\n  return (\n    <div \n      className=\"relative flex items-center justify-center\"\n      style={{ width: size, height: size }}\n    >\n      {/* Outer glow effect based on state */}\n      <div \n        className=\"absolute inset-0 rounded-full\"\n        style={{\n          background: state === 'listening' ? \n            'radial-gradient(circle, rgba(147, 51, 234, 0.3) 0%, transparent 70%)' :\n            state === 'speaking' ?\n            'radial-gradient(circle, rgba(34, 197, 94, 0.3) 0%, transparent 70%)' :\n            'transparent',\n          animation: state === 'listening' ? 'pulse 1.5s infinite' : 'none'\n        }}\n      />\n      \n      {/* Face */}\n      <div\n        className=\"relative rounded-full border-4 border-white shadow-lg transition-all duration-300\"\n        style={{\n          width: size * 0.8,\n          height: size * 0.8,\n          backgroundColor: getFaceColor(),\n          animation: getFaceAnimation(),\n          borderColor: state === 'listening' ? '#8b5cf6' : \n                      state === 'speaking' ? '#22c55e' : '#e5e7eb'\n        }}\n      >\n        {/* Eyes */}\n        <div className=\"absolute top-1/3 left-1/4 transform -translate-x-1/2 -translate-y-1/2\">\n          <div\n            className=\"bg-gray-800 rounded-full transition-all duration-200\"\n            style={{\n              width: '8px',\n              height: '8px',\n              ...getEyeShape()\n            }}\n          />\n        </div>\n        <div className=\"absolute top-1/3 right-1/4 transform translate-x-1/2 -translate-y-1/2\">\n          <div\n            className=\"bg-gray-800 rounded-full transition-all duration-200\"\n            style={{\n              width: '8px',\n              height: '8px',\n              ...getEyeShape()\n            }}\n          />\n        </div>\n\n        {/* Eyebrows */}\n        <div \n          className=\"absolute top-1/4 left-1/4 transform -translate-x-1/2 -translate-y-1/2 transition-all duration-300\"\n          style={getEyebrowPosition()}\n        >\n          <div\n            className=\"bg-gray-700 rounded\"\n            style={{ width: '12px', height: '2px' }}\n          />\n        </div>\n        <div \n          className=\"absolute top-1/4 right-1/4 transform translate-x-1/2 -translate-y-1/2 transition-all duration-300\"\n          style={getEyebrowPosition()}\n        >\n          <div\n            className=\"bg-gray-700 rounded\"\n            style={{ width: '12px', height: '2px' }}\n          />\n        </div>\n\n        {/* Nose */}\n        <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\">\n          <div\n            className=\"bg-gray-400 rounded\"\n            style={{ width: '3px', height: '4px' }}\n          />\n        </div>\n\n        {/* Mouth */}\n        <div className=\"absolute bottom-1/3 left-1/2 transform -translate-x-1/2 translate-y-1/2\">\n          <div\n            className=\"transition-all duration-200\"\n            style={getMouthShape()}\n          />\n        </div>\n\n        {/* Cheeks for happy expression */}\n        {expression === 'happy' && (\n          <>\n            <div \n              className=\"absolute top-1/2 left-3 transform -translate-y-1/2 bg-pink-300 rounded-full opacity-60\"\n              style={{ width: '12px', height: '8px' }}\n            />\n            <div \n              className=\"absolute top-1/2 right-3 transform -translate-y-1/2 bg-pink-300 rounded-full opacity-60\"\n              style={{ width: '12px', height: '8px' }}\n            />\n          </>\n        )}\n      </div>\n\n      {/* State indicator */}\n      <div className=\"absolute -bottom-2 left-1/2 transform -translate-x-1/2\">\n        <div \n          className={`w-2 h-2 rounded-full ${\n            state === 'listening' ? 'bg-purple-500 animate-pulse' :\n            state === 'speaking' ? 'bg-green-500 animate-bounce' :\n            state === 'typing' ? 'bg-blue-500 animate-ping' :\n            'bg-gray-400'\n          }`}\n        />\n      </div>\n    </div>\n  );\n}","size_bytes":7679},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"server/pronunciation-corrections.ts":{"content":"/**\n * Pronunciation Corrections for Hindi Words in TTS\n * This file contains word replacements to fix pronunciation issues in Cartesia TTS\n * Optimized by AJ to read courses and common words naturally.\n */\n\nexport const pronunciationCorrections: Record<string, string> = {\n  // Add custom word-by-word corrections here if needed\n  // Example:\n  // \"NeuraXon\": \"Nyu Raak Son\"\n};\n\n/**\n * Apply pronunciation corrections to text before sending to TTS\n * @param text - The original text\n * @returns text with pronunciation corrections applied\n */\nexport function applyPronunciationCorrections(text: string): string {\n  let correctedText = text;\n\n  /**\n   * ðŸŽ“ Fix degree/course abbreviations\n   */\n  // Degree/course abbreviations - TTS-friendly phonetics\n  correctedText = correctedText.replace(/\\bB\\.?A\\b/gi, \"Bee A\");\n  correctedText = correctedText.replace(/\\bM\\.?A\\b/gi, \"Em A\");\n  correctedText = correctedText.replace(/\\bBCA\\b/gi, \"Bee See A\");\n  correctedText = correctedText.replace(/\\bPGDCA\\b/gi, \"Pee Jee Dee See A\");\n  correctedText = correctedText.replace(/\\bB\\.?Sc\\b/gi, \"Bee Ess See\");\n  correctedText = correctedText.replace(/\\bM\\.?Sc\\b/gi, \"Em Ess See\");\n  correctedText = correctedText.replace(/\\bPh\\.?D\\b/gi, \"Pee Aych Dee\");\n  correctedText = correctedText.replace(/\\bB\\.?Com\\b/gi, \"Bee Kom\");\n  correctedText = correctedText.replace(/\\bM\\.?Com\\b/gi, \"Em Kom\");\n\n  /**\n   * ðŸ‘¤ Title/Honorific abbreviations (Western)\n   */\n  correctedText = correctedText.replace(/\\bMr\\.?\\s/gi, \"Mister \");\n  correctedText = correctedText.replace(/\\bMrs\\.?\\s/gi, \"Misses \");\n  correctedText = correctedText.replace(/\\bMs\\.?\\s/gi, \"Miss \");\n  correctedText = correctedText.replace(/\\bDr\\.?\\s/gi, \"Doctor \");\n  correctedText = correctedText.replace(/\\bProf\\.?\\s/gi, \"Professor \");\n  correctedText = correctedText.replace(/\\bSr\\.?\\s/gi, \"Senior \");\n  correctedText = correctedText.replace(/\\bJr\\.?\\s/gi, \"Junior \");\n  correctedText = correctedText.replace(/\\bSt\\.?\\s/gi, \"Saint \");\n  \n  /**\n   * ðŸ™ Indian Honorific abbreviations\n   */\n  correctedText = correctedText.replace(/\\bSh\\.?\\s/gi, \"Shri \");\n  correctedText = correctedText.replace(/\\bShri\\.?\\s/gi, \"Shri \");\n  correctedText = correctedText.replace(/\\bSmt\\.?\\s/gi, \"Shrimati \");\n  correctedText = correctedText.replace(/\\bKm\\.?\\s/gi, \"Kumari \");\n  correctedText = correctedText.replace(/\\bKu\\.?\\s/gi, \"Kumari \");\n  correctedText = correctedText.replace(/\\bCh\\.?\\s/gi, \"Chaudhary \");\n  correctedText = correctedText.replace(/\\bPt\\.?\\s/gi, \"Pandit \");\n  correctedText = correctedText.replace(/\\bSwami\\.?\\s/gi, \"Swami \");\n  \n  /**\n   * ðŸ”¤ Single letter initials (expand for better pronunciation)\n   * Matches patterns like \"P.\" or \"P \" when followed by a capital letter or end of sentence\n   */\n  correctedText = correctedText.replace(/\\b([A-Z])\\.?\\s+(?=[A-Z][a-z])/g, \"$1. \");\n  \n  /**\n   * ðŸ“› Common name initials in Indian context\n   * Patterns like \"Sh. P.\" or \"Dr. A.\" - expand the single letter\n   */\n  correctedText = correctedText.replace(/\\b(Shri|Doctor|Professor|Mister|Misses|Miss)\\s+([A-Z])\\.?\\s/gi, \n    (match, title, initial) => `${title} ${initial}. `);\n\n  /**\n   * ðŸ”¤ Technical abbreviation cleanup\n   */\n  correctedText = correctedText.replace(/AI\\/ML/gi, \"AI ML\");\n  correctedText = correctedText.replace(/\\bA\\.I\\./gi, \"AI\");\n  correctedText = correctedText.replace(/\\bM\\.L\\./gi, \"ML\");\n  \n  /**\n   * ðŸ« Common college/academic abbreviations\n   */\n  correctedText = correctedText.replace(/\\bHOD\\b/gi, \"Head of Department\");\n  correctedText = correctedText.replace(/\\bH\\.O\\.D\\./gi, \"Head of Department\");\n  correctedText = correctedText.replace(/\\bVice[\\s-]?Principal\\b/gi, \"Vice Principal\");\n  correctedText = correctedText.replace(/\\bV\\.P\\./gi, \"Vice Principal\");\n  correctedText = correctedText.replace(/\\bAsst\\.?\\s/gi, \"Assistant \");\n  correctedText = correctedText.replace(/\\bAsstt\\.?\\s/gi, \"Assistant \");\n  correctedText = correctedText.replace(/\\bAssociate\\s+Prof\\.?\\s/gi, \"Associate Professor \");\n  correctedText = correctedText.replace(/\\bAsso\\.?\\s+Prof\\.?\\s/gi, \"Associate Professor \");\n  correctedText = correctedText.replace(/\\bDept\\.?\\s/gi, \"Department \");\n  correctedText = correctedText.replace(/\\bUniv\\.?\\s/gi, \"University \");\n  correctedText = correctedText.replace(/\\bColl\\.?\\s/gi, \"College \");\n  correctedText = correctedText.replace(/\\bEst\\.?\\s/gi, \"Established \");\n  correctedText = correctedText.replace(/\\bEstd\\.?\\s/gi, \"Established \");\n  \n  /**\n   * ðŸ“… Date and time abbreviations\n   */\n  correctedText = correctedText.replace(/\\bJan\\.?\\s/gi, \"January \");\n  correctedText = correctedText.replace(/\\bFeb\\.?\\s/gi, \"February \");\n  correctedText = correctedText.replace(/\\bMar\\.?\\s/gi, \"March \");\n  correctedText = correctedText.replace(/\\bApr\\.?\\s/gi, \"April \");\n  correctedText = correctedText.replace(/\\bJun\\.?\\s/gi, \"June \");\n  correctedText = correctedText.replace(/\\bJul\\.?\\s/gi, \"July \");\n  correctedText = correctedText.replace(/\\bAug\\.?\\s/gi, \"August \");\n  correctedText = correctedText.replace(/\\bSep\\.?\\s/gi, \"September \");\n  correctedText = correctedText.replace(/\\bSept\\.?\\s/gi, \"September \");\n  correctedText = correctedText.replace(/\\bOct\\.?\\s/gi, \"October \");\n  correctedText = correctedText.replace(/\\bNov\\.?\\s/gi, \"November \");\n  correctedText = correctedText.replace(/\\bDec\\.?\\s/gi, \"December \");\n  \n  /**\n   * ðŸ“ Location abbreviations\n   */\n  correctedText = correctedText.replace(/\\bHry\\.?\\s/gi, \"Haryana \");\n  correctedText = correctedText.replace(/\\bKKR\\b/gi, \"Kurukshetra\");\n  correctedText = correctedText.replace(/\\bKaithal\\b/gi, \"Kaithal\");\n\n  /**\n   * ðŸ“– Apply dictionary-based pronunciation corrections\n   */\n  Object.entries(pronunciationCorrections).forEach(([original, corrected]) => {\n    const regex = new RegExp(`\\\\b${original}\\\\b`, \"gi\");\n    correctedText = correctedText.replace(regex, corrected);\n  });\n\n  return correctedText;\n}\n\n/**\n * Add a new pronunciation correction dynamically\n * @param original - The original word that needs correction\n * @param corrected - The corrected pronunciation\n */\nexport function addPronunciationCorrection(\n  original: string,\n  corrected: string\n): void {\n  pronunciationCorrections[original.toLowerCase()] = corrected;\n}\n\n/**\n * Get all current pronunciation corrections\n * @returns Object containing all corrections\n */\nexport function getPronunciationCorrections(): Record<string, string> {\n  return { ...pronunciationCorrections };\n}\n","size_bytes":6427},"client/src/hooks/use-three-tier-tts.tsx":{"content":"import { useState, useCallback } from \"react\";\n\ninterface TTSOptions {\n  onStart?: () => void;\n  onEnd?: () => void;\n  onError?: (error: string) => void;\n  // ElevenLabs parameters\n  voiceId?: string;\n  modelId?: string;\n  stability?: number;\n  similarityBoost?: number;\n  // Cartesia parameters\n  cartesiaModelId?: string;\n  speed?: \"slowest\" | \"slow\" | \"normal\" | \"fast\" | \"fastest\" | number;\n  emotions?: string[];\n  language?: \"en\" | \"fr\" | \"de\" | \"es\" | \"pt\" | \"zh\" | \"ja\" | \"hi\" | \"it\" | \"ko\" | \"nl\" | \"pl\" | \"ru\" | \"sv\" | \"tr\";\n}\n\ninterface UseThreeTierTTSReturn {\n  speak: (text: string, options?: TTSOptions) => Promise<void>;\n  stop: () => void;\n  isSpeaking: boolean;\n  isLoading: boolean;\n}\n\nexport function useThreeTierTTS(): UseThreeTierTTSReturn {\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [currentAudio, setCurrentAudio] = useState<HTMLAudioElement | null>(null);\n\n  // Female voices for consistency - using user specified voice\n  const VOICES = {\n    hindi: \"iWNf11sz1GrUE4ppxTOL\", // User specified female voice for Hindi\n    english: \"iWNf11sz1GrUE4ppxTOL\", // User specified female voice for English\n  };\n\n  const speak = useCallback(async (text: string, options: TTSOptions = {}) => {\n    console.log('TTS: Starting three-tier speech for:', text.substring(0, 50));\n\n    // Three-tier system: Cartesia -> ElevenLabs -> Browser Speech API\n    try {\n      setIsLoading(true);\n\n      // Stop any current audio\n      if (currentAudio) {\n        currentAudio.pause();\n        currentAudio.currentTime = 0;\n      }\n\n      // Try API providers (Cartesia first, then ElevenLabs)\n      try {\n        const voiceId = options.voiceId || VOICES.english;\n\n        const response = await fetch(`${import.meta.env.VITE_API_BASE_URL || ''}/api/tts`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            text: text,\n            voiceId: voiceId,\n            // ElevenLabs parameters\n            modelId: options.modelId || \"eleven_multilingual_v2\",\n            stability: options.stability || 0.6,\n            similarityBoost: options.similarityBoost || 0.8,\n            // Cartesia parameters\n            cartesiaModelId: options.cartesiaModelId || \"sonic-2\",\n            speed: options.speed || \"slow\", // Slower speed for better clarity and pauses\n            emotions: options.emotions,\n            language: options.language || \"en\"\n          })\n        });\n\n        if (response.ok) {\n          const audioBlob = await response.blob();\n          const audioUrl = URL.createObjectURL(audioBlob);\n          const audio = new Audio(audioUrl);\n\n          const provider = response.headers.get('X-TTS-Provider') || 'unknown';\n\n          setCurrentAudio(audio);\n          setIsLoading(false);\n          setIsSpeaking(true);\n\n          console.log(`TTS: ${provider} audio ready, playing...`);\n\n          audio.onplay = () => {\n            console.log(`TTS: ${provider} audio started playing`);\n            options.onStart?.();\n          };\n\n          audio.onended = () => {\n            setIsSpeaking(false);\n            setCurrentAudio(null);\n            URL.revokeObjectURL(audioUrl);\n            console.log(`TTS: ${provider} audio finished`);\n            options.onEnd?.();\n          };\n\n          audio.onerror = () => {\n            setIsSpeaking(false);\n            setIsLoading(false);\n            setCurrentAudio(null);\n            URL.revokeObjectURL(audioUrl);\n            console.error('TTS: Audio playback failed');\n            options.onError?.(\"Audio playback failed\");\n          };\n\n          await audio.play();\n          return; // Success with API provider\n        } else {\n          const errorData = await response.json().catch(() => ({ message: 'Unknown error' }));\n\n          // Check if we should fallback to browser\n          if (errorData.fallbackToBrowser) {\n            console.log('TTS: API providers unavailable, using browser fallback');\n          } else {\n            throw new Error(errorData.message || `HTTP ${response.status}`);\n          }\n        }\n      } catch (apiError) {\n        console.warn('TTS: API providers failed, falling back to Web Speech API:', apiError instanceof Error ? apiError.message : 'Unknown error');\n      }\n\n      // Fallback to Web Speech API with female voice\n      if ('speechSynthesis' in window) {\n        window.speechSynthesis.cancel();\n\n        const utterance = new SpeechSynthesisUtterance(text);\n        utterance.rate = 0.9;\n        utterance.pitch = 1.2; // Higher pitch for more feminine sound\n        utterance.volume = 1.0;\n        utterance.lang = 'en-US';\n\n        // Try to get a female voice\n        const voices = speechSynthesis.getVoices();\n        const femaleVoice = voices.find(voice => \n          voice.name.toLowerCase().includes('female') ||\n          voice.name.toLowerCase().includes('woman') ||\n          voice.name.toLowerCase().includes('google us english female') ||\n          voice.name.toLowerCase().includes('samantha') ||\n          voice.name.toLowerCase().includes('karen')\n        );\n\n        if (femaleVoice) {\n          utterance.voice = femaleVoice;\n        }\n\n        setIsLoading(false);\n        setIsSpeaking(true);\n\n        utterance.onstart = () => {\n          console.log('TTS: Web Speech API started speaking');\n          options.onStart?.();\n        };\n\n        utterance.onend = () => {\n          setIsSpeaking(false);\n          options.onEnd?.();\n        };\n\n        utterance.onerror = (event) => {\n          setIsSpeaking(false);\n          setIsLoading(false);\n          options.onError?.(`Speech failed: ${event.error}`);\n        };\n\n        speechSynthesis.speak(utterance);\n        return;\n      }\n\n      throw new Error('No speech synthesis available');\n\n    } catch (error) {\n      setIsSpeaking(false);\n      setIsLoading(false);\n      setCurrentAudio(null);\n      console.error('All TTS methods failed:', error);\n      options.onError?.(error instanceof Error ? error.message : \"Speech synthesis failed\");\n    }\n  }, [currentAudio]);\n\n  const stop = useCallback(() => {\n    if (currentAudio) {\n      currentAudio.pause();\n      currentAudio.currentTime = 0;\n      setCurrentAudio(null);\n    }\n    // Stop Web Speech API as well\n    if ('speechSynthesis' in window) {\n      window.speechSynthesis.cancel();\n    }\n    setIsSpeaking(false);\n    setIsLoading(false);\n  }, [currentAudio]);\n\n  return {\n    speak,\n    stop,\n    isSpeaking,\n    isLoading,\n  };\n}","size_bytes":6558},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"server/index.ts":{"content":"import { config } from 'dotenv';\nimport path from 'path';\nimport express, { type Request, Response, NextFunction } from \"express\";\nimport cors from \"cors\";\nimport { registerRoutes } from \"./routes\";\nimport { registerCourtRoutes } from \"./routes-court\";\nimport { registerCourtAdminRoutes } from \"./routes-court-admin\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\n// Load environment variables\nconfig({ path: path.resolve(process.cwd(), '.env'), override: true });\n\nconst app = express();\n\n/**\n * âœ… CORS CONFIGURATION\n * Hostinger frontend + Render backend safe\n */\nconst allowedOrigins = [\n  'http://silver-coyote-528857.hostingersite.com',\n  'https://silver-coyote-528857.hostingersite.com',\n  'http://localhost:5000',\n  'http://localhost:3000',\n  'http://127.0.0.1:5000',\n  'https://college-voice-assistance.onrender.com',\n  ...(process.env.ALLOWED_ORIGINS ? process.env.ALLOWED_ORIGINS.split(',') : [])\n];\n\n// Regex patterns to match dynamic origins (subdomains, ports)\nconst allowedOriginPatterns = [\n  /^https?:\\/\\/(.*\\.)?hostingersite\\.com(:\\d+)?\\/?$/,\n  /^https?:\\/\\/localhost(:\\d+)?$/,\n  /^https?:\\/\\/127\\.0\\.0\\.1(:\\d+)?$/\n];\n\napp.use(cors({\n  origin: (origin, callback) => {\n    // allow requests with no origin (mobile apps, curl, same-origin)\n    if (!origin) return callback(null, true);\n\n    if (allowedOrigins.includes(origin)) return callback(null, true);\n\n    const isPatternMatch = allowedOriginPatterns.some(pattern => pattern.test(origin));\n    if (isPatternMatch) return callback(null, true);\n\n    // allow all origins in development\n    if (process.env.NODE_ENV === 'development') return callback(null, true);\n\n    console.warn('CORS: Rejected origin:', origin);\n    return callback(new Error('Not allowed by CORS'));\n  },\n  credentials: true,\n  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],\n  allowedHeaders: ['Content-Type', 'Authorization', 'X-Requested-With'],\n  optionsSuccessStatus: 200\n}));\n\n// Parse JSON and URL-encoded data\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\n/**\n * âœ… REQUEST LOGGING MIDDLEWARE\n */\napp.use((req, res, next) => {\n  const start = Date.now();\n  const reqPath = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (reqPath.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${reqPath} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      if (logLine.length > 120) logLine = logLine.slice(0, 119) + \"â€¦\";\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n/**\n * ðŸ”¹ MAIN ASYNC SETUP\n */\n(async () => {\n  const server = await registerRoutes(app);\n  \n  // Register Court AI routes\n  await registerCourtRoutes(app);\n  \n  // Register Court Admin routes\n  registerCourtAdminRoutes(app);\n\n  /**\n   * âœ… ERROR HANDLING MIDDLEWARE\n   * Crash-free in production\n   */\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    console.error('Error:', err); // log for debugging\n    res.status(status).json({ message });\n  });\n\n  // Vite dev mode setup\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // START SERVER\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, async () => {\n    log(`ðŸš€ Server running on port ${port}`);\n  });\n})();\n","size_bytes":3791},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport Landing from \"@/pages/landing\";\nimport Home from \"@/pages/home\";\nimport CourtAssistant from \"@/pages/court-assistant\";\nimport CourtAdminMain from \"@/pages/court-admin-main\";\nimport CourtAdminLogin from \"@/pages/court-admin-login\";\nimport MainAdminPanel from \"@/pages/main-admin\";\nimport AdminLogin from \"@/pages/admin-login\";\nimport DepartmentPanel from \"@/pages/department-panel\";\nimport NoticeBoard from \"@/pages/notice-board\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Landing} />\n      <Route path=\"/assistant\" component={Home} />\n      <Route path=\"/court-assistant\" component={CourtAssistant} />\n      <Route path=\"/court-admin-login\" component={CourtAdminLogin} />\n      <Route path=\"/court-admin\" component={CourtAdminMain} />\n      <Route path=\"/admin/login\" component={AdminLogin} />\n      <Route path=\"/admin\" component={MainAdminPanel} />\n      <Route path=\"/head-admin\" component={MainAdminPanel} />\n      <Route path=\"/department/:slug\" component={DepartmentPanel} />\n      <Route path=\"/notice-board\" component={NoticeBoard} />\n      <Route>\n        <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n          <div className=\"text-center\">\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">404 - Page Not Found</h1>\n            <p className=\"text-gray-600\">The page you're looking for doesn't exist.</p>\n          </div>\n        </div>\n      </Route>\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <Router />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":1957},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"client/src/components/chat-container.tsx":{"content":"import { ChatMessage } from \"@shared/schema\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Bot, User, Play, Volume2 } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface ChatContainerProps {\n  messages: ChatMessage[];\n  isLoading: boolean;\n  onPlayMessage: (text: string) => void;\n  currentlySpeaking: boolean;\n}\n\nexport function ChatContainer({ messages, isLoading, onPlayMessage, currentlySpeaking }: ChatContainerProps) {\n  const formatTime = (timestamp: Date | string | null) => {\n    if (!timestamp) return \"\";\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  };\n\n  const formatMessage = (message: string) => {\n    const lines = message.split('\\n');\n    \n    return lines.map((line, index) => {\n      // Handle horizontal rules\n      if (line.trim() === '---') {\n        return <hr key={index} className=\"my-3 border-gray-200\" />;\n      }\n      \n      // Regular lines with emojis preserved\n      if (line.trim()) {\n        return (\n          <div key={index} className=\"my-1\">\n            {line}\n          </div>\n        );\n      }\n      \n      return <br key={index} />;\n    });\n  };\n\n  return (\n    <Card className=\"mb-6\">\n      <div className=\"p-4 border-b border-gray-100\">\n        <h2 className=\"text-lg font-semibold text-gray-900\">Chat History</h2>\n        <p className=\"text-sm text-gray-600\">Ask me about college information, events, contacts, and more</p>\n      </div>\n      \n      <div className=\"h-[500px] overflow-y-auto p-4 space-y-0\">\n        {/* Welcome Message */}\n        {messages.length === 0 && !isLoading && (\n          <div className=\"flex items-start space-x-3 mb-6 animate-slide-in-message\">\n            <div className=\"w-8 h-8 bg-rksd-blue rounded-full flex items-center justify-center flex-shrink-0 mt-1 animate-bounce-in\">\n              <Bot className=\"text-white\" size={16} />\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"bg-white/50 backdrop-blur-sm rounded-2xl border border-white/20 shadow-lg px-4 py-3 animate-fade-in-up\">\n                <div className=\"text-sm text-gray-900 leading-relaxed animate-typewriter\">\n                  Hello! I'm your RKSD College assistant. Ask me about admissions, departments, events, \n                  hostel timings, or any other college information. You can speak or type your questions.\n                </div>\n              </div>\n              <div className=\"flex items-center mt-3 space-x-3\">\n                <span className=\"text-xs text-gray-500\">Just now</span>\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"text-gray-400 hover:text-rksd-blue transition-colors p-1 h-auto\"\n                  onClick={() => onPlayMessage(\"Hello! I'm your RKSD College assistant. Ask me about admissions, departments, events, hostel timings, or any other college information. You can speak or type your questions.\")}\n                >\n                  <Play size={12} />\n                </Button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Chat Messages */}\n        {messages.map((message) => (\n          <div key={message.id} className=\"mb-6\">\n            {message.role === \"user\" ? (\n              /* User message - small bubble aligned right */\n              <div className=\"flex justify-end\">\n                <div className=\"flex items-end space-x-2 max-w-xs\">\n                  <div className=\"bg-rksd-blue rounded-2xl rounded-br-md px-4 py-2\">\n                    <p className=\"text-sm text-white\">{message.content}</p>\n                  </div>\n                  <div className=\"w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center flex-shrink-0\">\n                    <User className=\"text-gray-600\" size={12} />\n                  </div>\n                </div>\n              </div>\n            ) : (\n              /* Assistant message - full-width, left-aligned */\n              <div className=\"flex items-start space-x-3 animate-slide-in-message\">\n                <div className=\"w-8 h-8 bg-rksd-blue rounded-full flex items-center justify-center flex-shrink-0 mt-1 animate-bounce-in\">\n                  <Bot className=\"text-white\" size={16} />\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"bg-white/50 backdrop-blur-sm rounded-2xl border border-white/20 shadow-lg px-4 py-3 animate-fade-in-up\">\n                    <div className=\"text-sm text-gray-900 leading-relaxed whitespace-pre-wrap animate-typewriter\">\n                      {formatMessage(message.content)}\n                    </div>\n                  </div>\n                  <div className=\"flex items-center mt-3 space-x-3\">\n                    <span className=\"text-xs text-gray-500\">\n                      {formatTime(message.timestamp)}\n                    </span>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      className=\"text-gray-400 hover:text-rksd-blue transition-colors p-1 h-auto\"\n                      onClick={() => onPlayMessage(message.content)}\n                    >\n                      <Play size={12} />\n                    </Button>\n                    {currentlySpeaking && (\n                      <span className=\"text-xs text-green-600 flex items-center\">\n                        <Volume2 className=\"mr-1\" size={12} />\n                        Playing\n                      </span>\n                    )}\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        ))}\n\n        {/* Loading indicator */}\n        {isLoading && (\n          <div className=\"flex items-start space-x-3 mb-6\">\n            <div className=\"w-8 h-8 bg-rksd-blue rounded-full flex items-center justify-center flex-shrink-0 mt-1\">\n              <Bot className=\"text-white\" size={16} />\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"bg-transparent px-0 py-2\">\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"w-2 h-2 bg-rksd-blue rounded-full animate-bounce\"></div>\n                  <div className=\"w-2 h-2 bg-rksd-blue rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\n                  <div className=\"w-2 h-2 bg-rksd-blue rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </Card>\n  );\n}\n","size_bytes":6658},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ThreeDOrb.tsx":{"content":"import React, { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\nimport { createNoise3D } from \"simplex-noise\";\nimport useWebRTCAudioSession from \"@/hooks/use-webrtc\";\n\ninterface ThreeDOrbProps {\n  intensity?: number;\n  isListening?: boolean;\n  isSpeaking?: boolean;\n}\n\nconst ThreeDOrb: React.FC<ThreeDOrbProps> = ({ \n  intensity = 3, \n  isListening = false,\n  isSpeaking = false \n}) => {\n  const { currentVolume, isSessionActive, handleStartStopClick } = useWebRTCAudioSession('alloy');\n  const rendererRef = useRef<THREE.WebGLRenderer | null>(null);\n  const sceneRef = useRef<THREE.Scene | null>(null);\n  const groupRef = useRef<THREE.Group | null>(null);\n  const cameraRef = useRef<THREE.PerspectiveCamera | null>(null);\n  const ballRef = useRef<THREE.Mesh | null>(null);\n  const originalPositionsRef = useRef<any | null>(null);\n  const noise = createNoise3D();\n\n  useEffect(() => {\n    initViz();\n    window.addEventListener(\"resize\", onWindowResize);\n    return () => {\n      window.removeEventListener(\"resize\", onWindowResize);\n      cleanup();\n    };\n  }, []);\n\n  useEffect(() => {\n    if ((isListening || isSpeaking || isSessionActive) && ballRef.current) {\n      const audioVolume = isListening || isSpeaking ? 0.8 : currentVolume;\n      updateBallMorph(ballRef.current, audioVolume);\n    } else if (ballRef.current && originalPositionsRef.current) {\n      resetBallMorph(ballRef.current, originalPositionsRef.current);\n    }\n  }, [currentVolume, isSessionActive, isListening, isSpeaking]);\n\n  const cleanup = () => {\n    if (rendererRef.current) {\n      const outElement = document.getElementById(\"rksd-orb\");\n      if (outElement && rendererRef.current.domElement) {\n        outElement.removeChild(rendererRef.current.domElement);\n      }\n      rendererRef.current.dispose();\n    }\n  };\n\n  const initViz = () => {\n    const scene = new THREE.Scene();\n    const group = new THREE.Group();\n    const camera = new THREE.PerspectiveCamera(20, 1, 1, 100);\n    camera.position.set(0, 0, 100);\n    camera.lookAt(scene.position);\n\n    scene.add(camera);\n    sceneRef.current = scene;\n    groupRef.current = group;\n    cameraRef.current = camera;\n\n    const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\n    const outElement = document.getElementById(\"rksd-orb\");\n    if (outElement) {\n      outElement.innerHTML = \"\";\n      outElement.appendChild(renderer.domElement);\n      \n      const width = outElement.clientWidth;\n      renderer.setSize(width, width);\n      \n      renderer.domElement.style.width = '100%';\n      renderer.domElement.style.height = '100%';\n      renderer.domElement.style.objectFit = 'contain';\n    }\n\n    rendererRef.current = renderer;\n\n    const icosahedronGeometry = new THREE.IcosahedronGeometry(10, 8);\n    \n    // RKSD Colors - Pink to Purple gradient material\n    const lambertMaterial = new THREE.MeshLambertMaterial({\n      color: 0xff69b4, // Hot pink\n      wireframe: true,\n      transparent: true,\n      opacity: 0.8,\n    });\n\n    const ball = new THREE.Mesh(icosahedronGeometry, lambertMaterial);\n    ball.position.set(0, 0, 0);\n    ballRef.current = ball;\n\n    // Store the original positions of the vertices\n    originalPositionsRef.current = ball.geometry.attributes.position.array.slice();\n\n    group.add(ball);\n\n    // RKSD theme lighting\n    const ambientLight = new THREE.AmbientLight(0xff69b4, 0.3); // Pink ambient\n    scene.add(ambientLight);\n\n    const spotLight = new THREE.SpotLight(0x9f7aea); // Purple spotlight\n    spotLight.intensity = 1.2;\n    spotLight.position.set(-10, 40, 20);\n    spotLight.lookAt(ball.position);\n    spotLight.castShadow = true;\n    scene.add(spotLight);\n\n    // Additional purple light for gradient effect\n    const purpleLight = new THREE.PointLight(0x8b5cf6, 0.6);\n    purpleLight.position.set(10, -20, 30);\n    scene.add(purpleLight);\n\n    scene.add(group);\n    render();\n  };\n\n  const render = () => {\n    if (\n      !groupRef.current ||\n      !ballRef.current ||\n      !cameraRef.current ||\n      !rendererRef.current ||\n      !sceneRef.current\n    ) {\n      return;\n    }\n\n    // Slower rotation for more elegant look\n    groupRef.current.rotation.y += 0.003;\n    groupRef.current.rotation.x += 0.001;\n    \n    // Color animation based on state\n    const material = ballRef.current.material as THREE.MeshLambertMaterial;\n    const time = Date.now() * 0.001;\n    \n    if (isListening) {\n      // Pulsing pink when listening\n      const pulse = Math.sin(time * 4) * 0.3 + 0.7;\n      material.color.setHex(0xff1493 * pulse + 0xff69b4 * (1 - pulse));\n    } else if (isSpeaking) {\n      // Purple when speaking\n      material.color.setHex(0x9f7aea);\n    } else {\n      // Gradient animation between pink and purple\n      const colorShift = Math.sin(time * 0.8) * 0.5 + 0.5;\n      material.color.lerpColors(\n        new THREE.Color(0xff69b4), // Pink\n        new THREE.Color(0x9f7aea),  // Purple\n        colorShift\n      );\n    }\n\n    rendererRef.current.render(sceneRef.current, cameraRef.current);\n    requestAnimationFrame(render);\n  };\n\n  const onWindowResize = () => {\n    if (!cameraRef.current || !rendererRef.current) return;\n\n    const outElement = document.getElementById(\"rksd-orb\");\n    if (outElement) {\n      const width = outElement.clientWidth;\n      rendererRef.current.setSize(width, width);\n      \n      cameraRef.current.aspect = 1;\n      cameraRef.current.updateProjectionMatrix();\n    }\n  };\n\n  const updateBallMorph = (mesh: THREE.Mesh, volume: number) => {\n    const geometry = mesh.geometry as THREE.BufferGeometry;\n    const positionAttribute = geometry.getAttribute(\"position\");\n\n    for (let i = 0; i < positionAttribute.count; i++) {\n      const vertex = new THREE.Vector3(\n        positionAttribute.getX(i),\n        positionAttribute.getY(i),\n        positionAttribute.getZ(i),\n      );\n\n      const offset = 10;\n      const amp = 2.5;\n      const time = window.performance.now();\n      vertex.normalize();\n      const rf = 0.00001;\n      const distance =\n        offset +\n        volume * 4 * intensity +\n        noise(\n          vertex.x + time * rf * 7,\n          vertex.y + time * rf * 8,\n          vertex.z + time * rf * 9,\n        ) *\n          amp *\n          volume * intensity;\n      vertex.multiplyScalar(distance);\n\n      positionAttribute.setXYZ(i, vertex.x, vertex.y, vertex.z);\n    }\n\n    positionAttribute.needsUpdate = true;\n    geometry.computeVertexNormals();\n  };\n\n  const resetBallMorph = (\n    mesh: THREE.Mesh,\n    originalPositions: Float32Array,\n  ) => {\n    const geometry = mesh.geometry as THREE.BufferGeometry;\n    const positionAttribute = geometry.getAttribute(\"position\");\n\n    for (let i = 0; i < positionAttribute.count; i++) {\n      positionAttribute.setXYZ(\n        i,\n        originalPositions[i * 3],\n        originalPositions[i * 3 + 1],\n        originalPositions[i * 3 + 2],\n      );\n    }\n\n    positionAttribute.needsUpdate = true;\n    geometry.computeVertexNormals();\n  };\n\n  return (\n    <div className=\"w-48 h-48 relative\">\n      <div\n        id=\"rksd-orb\"\n        className=\"w-full h-full aspect-square\"\n        style={{ cursor: 'pointer' }}\n        onClick={handleStartStopClick}\n      />\n      {/* Glow effect overlay */}\n      <div className=\"absolute inset-0 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-600/20 animate-pulse pointer-events-none\" />\n      <div className=\"absolute inset-4 rounded-full bg-gradient-to-br from-pink-500/10 to-purple-600/10 animate-ping pointer-events-none\" />\n    </div>\n  );\n};\n\nexport default ThreeDOrb;","size_bytes":7549},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/pages/home.tsx":{"content":"import { useState, useCallback, useEffect, useRef } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useVoice } from \"@/hooks/use-voice\";\nimport { useThreeTierTTS } from \"@/hooks/use-three-tier-tts\";\nimport { WaveformAnimation } from \"@/components/WaveformAnimation\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  ChevronLeft, \n  Mic, \n  Play, \n  GraduationCap, \n  Clock, \n  DollarSign, \n  Users, \n  Send\n} from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\n// Format message to render emojis and basic markdown\nconst formatMessage = (message: string) => {\n  const lines = message.split('\\n');\n\n  return lines.map((line, index) => {\n    // Handle table headers and rows\n    if (line.includes('|') && line.includes('-')) {\n      return (\n        <div key={index} className=\"my-2 overflow-x-auto\">\n          <table className=\"w-full text-xs border-collapse\">\n            <tbody>\n              <tr className=\"border-b\">\n                {line.split('|').filter(cell => cell.trim()).map((cell, cellIndex) => (\n                  <td key={cellIndex} className=\"p-1 border-r last:border-r-0 font-medium\">\n                    {cell.trim()}\n                  </td>\n                ))}\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      );\n    }\n\n    // Handle regular table rows\n    if (line.includes('|') && !line.includes('-')) {\n      return (\n        <div key={index} className=\"my-1 overflow-x-auto\">\n          <table className=\"w-full text-xs border-collapse\">\n            <tbody>\n              <tr>\n                {line.split('|').filter(cell => cell.trim()).map((cell, cellIndex) => (\n                  <td key={cellIndex} className=\"p-1 border-r last:border-r-0\">\n                    {cell.trim()}\n                  </td>\n                ))}\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      );\n    }\n\n    // Handle section headers with emojis\n    if (line.includes('ðŸŽ“') || line.includes('ðŸ“Œ') || line.includes('â°') || line.includes('ðŸ“ž')) {\n      return (\n        <div key={index} className=\"font-semibold text-[var(--slate-text)] my-2\">\n          {line}\n        </div>\n      );\n    }\n\n    // Handle horizontal rules\n    if (line.trim() === '---') {\n      return <hr key={index} className=\"my-2 border-gray-200\" />;\n    }\n\n    // Regular lines with emojis preserved\n    if (line.trim()) {\n      return (\n        <div key={index} className=\"my-1\">\n          {line}\n        </div>\n      );\n    }\n\n    return <br key={index} />;\n  });\n};\n\nexport default function Home() {\n  const [showListening, setShowListening] = useState(false);\n  const [currentResponse, setCurrentResponse] = useState(\"\");\n  const [showResponse, setShowResponse] = useState(false);\n  const [liveTranscript, setLiveTranscript] = useState(\"\");\n  const [textInput, setTextInput] = useState(\"\");\n  const [chatStarted, setChatStarted] = useState(false);\n  const [chatHistory, setChatHistory] = useState<Array<{type: 'user' | 'assistant', message: string, id: string}>>([]);\n  const [isTyping, setIsTyping] = useState(false);\n  const [isPreparingSpeech, setIsPreparingSpeech] = useState(false);\n  const [pendingAssistantMessage, setPendingAssistantMessage] = useState<{id: string, text: string} | null>(null);\n  const [sessionId, setSessionId] = useState<string | undefined>(undefined);\n  const requestIdRef = useRef(0);\n  const chatAreaRef = useRef<HTMLDivElement>(null);\n  const { toast } = useToast();\n\n  // Voice input\n  const {\n    isListening,\n    startListening,\n    stopListening,\n    transcript,\n    browserSupported,\n    resetTranscript,\n  } = useVoice();\n\n  // Three-tier TTS (Cartesia -> ElevenLabs -> Browser)\n  const { speak, stop: stopSpeaking, isSpeaking, isLoading: isTTSLoading } = useThreeTierTTS();\n\n  // Send message mutation\n  const sendMessageMutation = useMutation({\n    mutationFn: async (data: { message: string; language?: string; sessionId?: string }) => {\n      setIsTyping(true);\n      const response = await apiRequest(\"POST\", \"/api/ask\", data);\n      return response.json();\n    },\n    onSuccess: async (data) => {\n      setShowListening(false);\n      setIsTyping(false);\n      \n      // Save sessionId from response\n      if (data.sessionId) {\n        setSessionId(data.sessionId);\n      }\n      \n      if (data.response) {\n        const assistantMessageId = `assistant-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n\n        const currentRequestId = ++requestIdRef.current;\n\n        // Keep typing animation and prepare speech first\n        setIsPreparingSpeech(true);\n        setPendingAssistantMessage({id: assistantMessageId, text: data.response});\n\n        // Start preparing speech with onStart callback for precise sync\n        speak(data.response, {\n          onStart: () => {\n            // Check if this is still the latest request\n            if (currentRequestId === requestIdRef.current) {\n              // Voice started, now show text synchronized with audio\n              setChatHistory(prev => [...prev, {type: 'assistant', message: data.response, id: assistantMessageId}]);\n              setIsPreparingSpeech(false);\n              setPendingAssistantMessage(null);\n            }\n          },\n          onEnd: () => {\n            console.log('Speech completed');\n          },\n          onError: (error) => {\n            console.error('Speech failed:', error);\n            // Check if this is still the latest request\n            if (currentRequestId === requestIdRef.current) {\n              // On error, show text immediately\n              setChatHistory(prev => [...prev, {type: 'assistant', message: data.response, id: assistantMessageId}]);\n              setIsPreparingSpeech(false);\n              setPendingAssistantMessage(null);\n              toast({\n                title: \"Voice playback failed\",\n                description: \"Text shown without voice due to audio error\",\n                variant: \"default\",\n              });\n            }\n          }\n        });\n      }\n    },\n    onError: (error: any) => {\n      console.error(\"Send message error:\", error);\n      setShowListening(false);\n      setIsTyping(false);\n      toast({\n        title: \"Connection Error\",\n        description: error?.message || \"Failed to send message. Please try again later.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const sendMessage = useCallback((message: string) => {\n    if (!message.trim() || sendMessageMutation.isPending) return;\n\n    // Cancel any pending assistant message\n    if (pendingAssistantMessage) {\n      setPendingAssistantMessage(null);\n      setIsPreparingSpeech(false);\n      stopSpeaking();\n    }\n\n    setChatStarted(true);\n    const userMessageId = `user-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n    setChatHistory(prev => [...prev, {type: 'user', message: message.trim(), id: userMessageId}]);\n\n    sendMessageMutation.mutate({\n      message: message.trim(),\n      language: \"en\",\n      sessionId: sessionId\n    });\n\n    setTextInput(\"\");\n    resetTranscript();\n  }, [sendMessageMutation, resetTranscript, pendingAssistantMessage, stopSpeaking, sessionId]);\n\n  const handleSpeak = useCallback((text: string) => {\n    if (isSpeaking) {\n      stopSpeaking();\n    } else {\n      speak(text);\n    }\n  }, [isSpeaking, speak, stopSpeaking]);\n\n  const handleMicClick = useCallback(() => {\n    if (!browserSupported) {\n      toast({\n        title: \"Voice input not supported\",\n        description: \"Your browser doesn't support voice input.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Stop any ongoing speech first\n    if (isSpeaking) {\n      stopSpeaking();\n    }\n\n    if (isListening) {\n      stopListening();\n      setShowListening(false);\n    } else {\n      setChatStarted(true);\n      setShowListening(true);\n      setShowResponse(false);\n      resetTranscript();\n      startListening();\n    }\n  }, [browserSupported, isListening, isSpeaking, startListening, stopListening, stopSpeaking, resetTranscript, toast]);\n\n  const handleQuickAction = useCallback((query: string) => {\n    sendMessage(query);\n  }, [sendMessage]);\n\n  const handleCancelListening = useCallback(() => {\n    stopListening();\n    setShowListening(false);\n    resetTranscript();\n  }, [stopListening, resetTranscript]);\n\n  const handleSendText = useCallback(() => {\n    const message = textInput.trim();\n    if (message) {\n      sendMessage(message);\n    }\n  }, [textInput, sendMessage]);\n\n  const handleKeyDown = useCallback((e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendText();\n    }\n  }, [handleSendText]);\n\n  // Process voice transcript\n  useEffect(() => {\n    if (transcript && !isListening) {\n      sendMessage(transcript);\n    }\n  }, [transcript, isListening, sendMessage]);\n\n  // Update live transcript while listening\n  useEffect(() => {\n    if (isListening) {\n      setLiveTranscript(transcript);\n    }\n  }, [transcript, isListening]);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    if (chatAreaRef.current) {\n      chatAreaRef.current.scrollTop = chatAreaRef.current.scrollHeight;\n    }\n  }, [chatHistory, isTyping, isPreparingSpeech]);\n\n  // Removed duplicate useEffect - text is now added via onStart callback in speak function\n\n  // Removed safety timeout useEffect to prevent duplicate messages\n\n  const quickActions = [\n    {\n      id: \"admissions\",\n      icon: GraduationCap,\n      title: \"Admissions\",\n      subtitle: \"Apply, eligibility, docs\",\n      query: \"Tell me about RKSD college admissions process and eligibility criteria\"\n    },\n    {\n      id: \"timetable\",\n      icon: Clock,\n      title: \"Timetable\",\n      subtitle: \"Today's schedule\",\n      query: \"Show me college timings and today's schedule\"\n    },\n    {\n      id: \"fees\",\n      icon: DollarSign,\n      title: \"Fees & Scholarships\",\n      subtitle: \"Cost & financial aid\",\n      query: \"What are the fee structure and available scholarships at RKSD?\"\n    },\n    {\n      id: \"faculty\",\n      icon: Users,\n      title: \"Faculty\",\n      subtitle: \"Departments & staff\",\n      query: \"Tell me about the faculty and departments at RKSD college\"\n    }\n  ];\n\n\n  return (\n    <div className=\"w-full bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 text-[var(--slate-text)] flex flex-col relative overflow-hidden\"\n         style={{ \n           maxWidth: '100vw', \n           height: '100vh',\n           minHeight: '100vh',\n           maxHeight: '100vh'\n         }}>\n      {/* Background decoration */}\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute top-20 left-10 w-32 h-32 bg-gradient-to-br from-[var(--rksd-blue)]/10 to-[var(--rksd-light)]/10 rounded-full blur-3xl\"></div>\n        <div className=\"absolute top-40 right-16 w-24 h-24 bg-gradient-to-br from-purple-400/10 to-pink-400/10 rounded-full blur-2xl\"></div>\n        <div className=\"absolute bottom-32 left-20 w-40 h-40 bg-gradient-to-br from-teal-400/10 to-cyan-400/10 rounded-full blur-3xl\"></div>\n        <div className=\"absolute bottom-20 right-10 w-28 h-28 bg-gradient-to-br from-[var(--rksd-light)]/10 to-blue-400/10 rounded-full blur-2xl\"></div>\n      </div>\n      {/* Voice Assistant Welcome */}\n\n\n      {/* Enhanced Header with Professional Branding */}\n      <header className=\"flex items-center justify-between px-4 pt-[env(safe-area-inset-top)] h-16 bg-white/20 backdrop-blur-md border-b border-white/10\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"relative\">\n            <div className=\"w-10 h-10 bg-gradient-to-br from-[var(--rksd-blue)] to-[var(--rksd-light)] rounded-xl flex items-center justify-center shadow-lg\">\n              <span className=\"text-white font-bold text-lg\">ðŸŽ“</span>\n            </div>\n            <div className=\"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full border-2 border-white animate-pulse\"></div>\n          </div>\n          <div>\n            <h1 className=\"font-bold text-xl text-[var(--slate-text)]\">RKSD College</h1>\n            <p className=\"text-xs text-[var(--slate-muted)] font-medium\">Voice Assistant</p>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"px-3 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded-full border border-green-200\">\n            â— Online\n          </div>\n        </div>\n      </header>\n\n      {/* Chat Interface - Full Screen Layout */}\n      <div className=\"flex-1 flex flex-col min-h-0 px-4 sm:px-5 md:px-8 lg:px-10 relative z-10\">\n\n        {/* Chat Interface */}\n        <AnimatePresence>\n          {chatStarted ? (\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.4, ease: \"easeOut\" }}\n              className=\"flex-1 flex flex-col min-h-0\"\n            >\n              {/* Voice Assistant Animation - Always Visible */}\n              <div \n                className=\"flex justify-center py-4 h-[100px] items-center overflow-hidden\" \n                style={{ \n                  contain: 'layout style',\n                  willChange: 'auto',\n                  transform: 'translateZ(0)'\n                }}\n              >\n                <div style={{ contain: 'layout', transform: 'translateZ(0)' }}>\n                  <WaveformAnimation \n                    isListening={isListening} \n                    isSpeaking={isSpeaking} \n                    isActive={isListening || sendMessageMutation.isPending || isTyping || isSpeaking}\n                  />\n                </div>\n              </div>\n\n              {/* Chat Messages Area - Scrollable - Centered like ChatGPT */}\n              <div\n                ref={chatAreaRef}\n                className=\"flex-1 overflow-y-auto pb-20 px-2 sm:px-4 md:px-6 lg:px-8\"\n              >\n                <div className=\"max-w-3xl mx-auto space-y-4\">\n                  {chatHistory.map((chat, index) => (\n                    <motion.div\n                      key={chat.id}\n                      initial={{ opacity: 0, y: 30 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      transition={{ duration: 0.35, ease: \"easeOut\" }}\n                      className=\"w-full\"\n                    >\n                      <div\n                        className={`inline-block px-4 md:px-5 py-3 rounded-2xl max-w-full shadow-md\n                        ${chat.type === 'user'\n                          ? 'bg-[var(--teal-primary)] text-white rounded-tr-sm float-right clear-both'\n                          : 'bg-white text-[var(--slate-text)] rounded-tl-sm border border-gray-200 float-left clear-both'\n                        }`}\n                        style={{ maxWidth: window.innerWidth < 768 ? '85%' : '75%' }}\n                      >\n                        <div className=\"text-[15px] leading-relaxed\" style={{ fontFamily: \"'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif\" }}>\n                          {formatMessage(chat.message)}\n                        </div>\n\n                        {/* Replay button for assistant */}\n                        {chat.type === 'assistant' && (\n                          <button\n                            onClick={() => handleSpeak(chat.message)}\n                            className=\"mt-2 inline-flex items-center gap-1 text-[var(--teal-primary)] hover:text-[var(--teal-secondary)] transition-colors\"\n                            data-testid=\"button-replay\"\n                          >\n                            <Play size={12} />\n                            <span className=\"text-xs font-medium\">Replay</span>\n                          </button>\n                        )}\n                      </div>\n                      <div className=\"clear-both\"></div>\n                    </motion.div>\n                  ))}\n\n                  {/* Typing Indicator */}\n                  {(isTyping || isPreparingSpeech) && (\n                    <motion.div\n                      initial={{ opacity: 0 }}\n                      animate={{ opacity: 1 }}\n                      exit={{ opacity: 0 }}\n                      transition={{ duration: 0.2 }}\n                      className=\"w-full\"\n                    >\n                      <div className=\"inline-flex items-center gap-2 px-4 py-2 rounded-2xl bg-white border border-gray-200 shadow-md float-left clear-both\">\n                        <span className=\"text-sm text-[var(--slate-muted)]\">\n                          {isTyping ? \"Assistant soch raha hai...\" : \"Jawaab tayyar ho raha hai...\"}\n                        </span>\n                        <div className=\"flex gap-1\" style={{ transform: 'translateZ(0)', willChange: 'auto' }}>\n                          <span className=\"w-2 h-2 bg-[var(--teal-primary)] rounded-full animate-bounce\" style={{ transform: 'translateZ(0)' }}></span>\n                          <span className=\"w-2 h-2 bg-[var(--teal-primary)] rounded-full animate-bounce delay-150\" style={{ transform: 'translateZ(0)' }}></span>\n                          <span className=\"w-2 h-2 bg-[var(--teal-primary)] rounded-full animate-bounce delay-300\" style={{ transform: 'translateZ(0)' }}></span>\n                        </div>\n                      </div>\n                      <div className=\"clear-both\"></div>\n                    </motion.div>\n                  )}\n\n                  {/* Live transcript during listening */}\n                  {liveTranscript && showListening && (\n                    <motion.div\n                      initial={{ opacity: 0, scale: 0.9 }}\n                      animate={{ opacity: 1, scale: 1 }}\n                      transition={{ duration: 0.2 }}\n                      className=\"w-full\"\n                    >\n                      <div className=\"va-response-card p-3 text-center max-w-[80%] sm:max-w-xs mx-auto\">\n                        <p className=\"text-sm text-[var(--slate-muted)]\">\n                          \"{liveTranscript}\"\n                        </p>\n                      </div>\n                    </motion.div>\n                  )}\n                </div>\n              </div>\n            </motion.div>\n          ) : (\n            <motion.div\n              initial={{ opacity: 1, y: 0 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.4, ease: \"easeInOut\" }}\n              className=\"flex-1 flex flex-col\"\n            >\n              {/* Voice Assistant Animation - Always Visible */}\n              <div \n                className=\"flex justify-center py-4 h-[100px] items-center overflow-hidden\" \n                style={{ \n                  contain: 'layout style',\n                  willChange: 'auto',\n                  transform: 'translateZ(0)'\n                }}\n              >\n                <div style={{ contain: 'layout', transform: 'translateZ(0)' }}>\n                  <WaveformAnimation \n                    isListening={isListening} \n                    isSpeaking={isSpeaking} \n                    isActive={isListening || sendMessageMutation.isPending || isTyping || isSpeaking}\n                  />\n                </div>\n              </div>\n\n              {/* Enhanced Welcome Section */}\n              <div className=\"py-6 text-center\">\n                <div className=\"mb-4\">\n                  <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-white/40 backdrop-blur-sm rounded-full border border-white/20 shadow-sm\">\n                    <div className=\"w-2 h-2 bg-green-400 rounded-full animate-pulse\"></div>\n                    <span className=\"text-sm font-medium text-[var(--slate-text)]\">AI Assistant Ready</span>\n                  </div>\n                </div>\n                <h1 className=\"text-2xl sm:text-3xl font-bold mb-2\">\n                  <span className=\"bg-gradient-to-r from-[var(--rksd-blue)] to-[var(--rksd-light)] bg-clip-text text-transparent\">\n                    Hello Students!\n                  </span>\n                  <span className=\"ml-2\">ðŸ‘‹</span>\n                </h1>\n                <p className=\"text-[var(--slate-muted)] text-lg font-medium\">\n                  How can I assist you today?\n                </p>\n                <p className=\"text-sm text-[var(--slate-muted)] mt-2 opacity-80\">\n                  Ask me anything about RKSD College in Hindi or English\n                </p>\n              </div>\n\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n\n      {/* Response Card - Only show when chat hasn't started */}\n      <AnimatePresence>\n        {showResponse && currentResponse && !chatStarted && (\n          <motion.section \n            initial={{ opacity: 0, y: 20, scale: 0.95 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: -20, scale: 0.95 }}\n            transition={{ duration: 0.2, ease: \"easeOut\" }}\n            className=\"px-5 mt-6\"\n          >\n            <div className=\"va-response-card p-4\">\n              <p className=\"text-[var(--slate-text)] leading-relaxed text-sm\">\n                {currentResponse}\n              </p>\n              <button\n                onClick={() => handleSpeak(currentResponse)}\n                className=\"mt-3 inline-flex items-center gap-2 text-[var(--teal-primary)] hover:text-[var(--teal-secondary)] transition-colors\"\n                data-testid=\"button-replay\"\n              >\n                <Play size={14} />\n                <span className=\"text-sm font-medium\">Replay</span>\n              </button>\n            </div>\n          </motion.section>\n        )}\n      </AnimatePresence>\n\n      {/* Fixed Bottom Input - Like WhatsApp/ChatGPT */}\n      <div\n        className=\"fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-sm border-t border-gray-200 px-3 py-2 z-20\"\n        style={{ paddingBottom: 'calc(8px + env(safe-area-inset-bottom, 8px))' }}\n      >\n        <div className=\"flex items-center gap-2 bg-white shadow-sm rounded-full p-2 border border-gray-200\">\n          <input\n            type=\"text\"\n            value={textInput}\n            onChange={(e) => setTextInput(e.target.value)}\n            onKeyDown={handleKeyDown}\n            placeholder=\"Type your message...\"\n            disabled={sendMessageMutation.isPending}\n            className=\"flex-1 bg-transparent px-3 py-2 outline-none placeholder-gray-500 text-gray-800 text-sm disabled:opacity-50\"\n            data-testid=\"input-message\"\n          />\n\n          {/* Send Button - Shows when there's text */}\n          {textInput.trim() ? (\n            <button\n              onClick={handleSendText}\n              disabled={sendMessageMutation.isPending}\n              className=\"h-10 w-10 sm:h-12 sm:w-12 rounded-full flex items-center justify-center transition-all bg-[var(--teal-primary)] hover:bg-[var(--teal-secondary)] disabled:opacity-50\"\n              data-testid=\"button-send\"\n            >\n              <Send size={18} className=\"text-white\" />\n            </button>\n          ) : (\n            <button\n              onClick={handleMicClick}\n              disabled={!browserSupported || sendMessageMutation.isPending}\n              className={`h-10 w-10 sm:h-12 sm:w-12 rounded-full flex items-center justify-center transition-all ${\n                isListening\n                  ? \"bg-red-500 hover:bg-red-600\"\n                  : \"bg-gradient-to-r from-[var(--rksd-blue)] to-[var(--rksd-light)] hover:from-[var(--rksd-light)] hover:to-[var(--rksd-blue)]\"\n              } disabled:opacity-50`}\n              style={isListening ? { transform: 'translateZ(0)', animation: 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite' } : { transform: 'translateZ(0)' }}\n              data-testid=\"button-microphone\"\n            >\n              <Mic size={18} className=\"text-white\" />\n            </button>\n          )}\n        </div>\n      </div>\n\n    </div>\n  );\n}\n","size_bytes":24015},"client/src/hooks/use-speech.tsx":{"content":"import { useState, useCallback, useRef } from \"react\";\n\ninterface SpeechOptions {\n  onEnd?: () => void;\n  onError?: (error: string) => void;\n  voice?: SpeechSynthesisVoice;\n  rate?: number;\n  pitch?: number;\n  volume?: number;\n}\n\ninterface UseSpeechReturn {\n  speak: (text: string, options?: SpeechOptions) => void;\n  stop: () => void;\n  isSpeaking: boolean;\n  supported: boolean;\n  voices: SpeechSynthesisVoice[];\n}\n\nexport function useSpeech(): UseSpeechReturn {\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [voices, setVoices] = useState<SpeechSynthesisVoice[]>([]);\n  const utteranceRef = useRef<SpeechSynthesisUtterance | null>(null);\n\n  const supported = typeof window !== 'undefined' && 'speechSynthesis' in window;\n\n  // Load available voices\n  const loadVoices = useCallback(() => {\n    if (!supported) return;\n    \n    const availableVoices = speechSynthesis.getVoices();\n    setVoices(availableVoices);\n  }, [supported]);\n\n  // Initialize voices on component mount\n  useState(() => {\n    if (supported) {\n      loadVoices();\n      speechSynthesis.addEventListener('voiceschanged', loadVoices);\n      return () => {\n        speechSynthesis.removeEventListener('voiceschanged', loadVoices);\n      };\n    }\n  });\n\n  const speak = useCallback((text: string, options: SpeechOptions = {}) => {\n    if (!supported || !text.trim()) return;\n\n    // Stop any current speech\n    speechSynthesis.cancel();\n\n    const utterance = new SpeechSynthesisUtterance(text);\n    utteranceRef.current = utterance;\n\n    // Detect language and set appropriate voice\n    const isHindi = /[\\u0900-\\u097F]/.test(text);\n    const preferredVoices = voices.filter(voice => \n      isHindi \n        ? voice.lang.includes('hi') || voice.lang.includes('Hindi')\n        : voice.lang.includes('en')\n    );\n\n    if (preferredVoices.length > 0) {\n      utterance.voice = options.voice || preferredVoices[0];\n    }\n\n    // Set speech parameters\n    utterance.rate = options.rate || 0.9;\n    utterance.pitch = options.pitch || 1;\n    utterance.volume = options.volume || 1;\n    utterance.lang = isHindi ? 'hi-IN' : 'en-US';\n\n    // Event handlers\n    utterance.onstart = () => {\n      setIsSpeaking(true);\n    };\n\n    utterance.onend = () => {\n      setIsSpeaking(false);\n      options.onEnd?.();\n    };\n\n    utterance.onerror = (event) => {\n      setIsSpeaking(false);\n      options.onError?.(event.error);\n    };\n\n    // Speak\n    speechSynthesis.speak(utterance);\n  }, [supported, voices]);\n\n  const stop = useCallback(() => {\n    if (!supported) return;\n    \n    speechSynthesis.cancel();\n    setIsSpeaking(false);\n  }, [supported]);\n\n  return {\n    speak,\n    stop,\n    isSpeaking,\n    supported,\n    voices,\n  };\n}\n","size_bytes":2709},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"server/storage.ts":{"content":"import { type User, type InsertUser, type ChatMessage, type InsertChatMessage, type CollegeInfo, type InsertCollegeInfo } from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\nimport * as fs from \"fs\";\nimport * as path from \"path\";\n\nexport interface IStorage {\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  \n  // Chat messages\n  getChatMessages(limit?: number): Promise<ChatMessage[]>;\n  createChatMessage(message: InsertChatMessage): Promise<ChatMessage>;\n  \n  // College information\n  getCollegeInfo(): Promise<CollegeInfo[]>;\n  getCollegeInfoByCategory(category: string): Promise<CollegeInfo[]>;\n  createCollegeInfo(info: InsertCollegeInfo): Promise<CollegeInfo>;\n  searchCollegeInfo(query: string): Promise<CollegeInfo[]>;\n  \n  // Admin methods\n  getCollegeDataJSON(): Promise<any>;\n  updateCollegeDataJSON(data: any): Promise<void>;\n  getClassesDataJSON(): Promise<any>;\n  updateClassesDataJSON(data: any): Promise<void>;\n}\n\nexport class MemStorage implements IStorage {\n  private users: Map<string, User>;\n  private chatMessages: ChatMessage[];\n  private collegeInfo: CollegeInfo[];\n\n  constructor() {\n    this.users = new Map();\n    this.chatMessages = [];\n    this.collegeInfo = [];\n    this.initializeCollegeData();\n  }\n\n  private initializeCollegeData() {\n    console.log('Initializing college data - all data now comes from Supabase and website scraping');\n    \n    const basicData: Omit<CollegeInfo, 'id'>[] = [\n      {\n        category: 'college',\n        title: 'College Information',\n        content: 'R.K.S.D. (PG) College, Kaithal - Data is dynamically loaded from Supabase database and RKSD College website.',\n        metadata: JSON.stringify({ \n          note: 'All college data is now managed through admin panel and automatically imported from website.',\n          website: 'https://rksdcollege.ac.in'\n        })\n      }\n    ];\n    \n    basicData.forEach(data => {\n      const id = randomUUID();\n      this.collegeInfo.push({ ...data, id });\n    });\n\n    console.log('Basic college info initialized - use Import from Website feature in admin panel to populate data');\n  }\n\n  async getUser(id: string): Promise<User | undefined> {\n    return this.users.get(id);\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    return Array.from(this.users.values()).find(\n      (user) => user.username === username,\n    );\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const id = randomUUID();\n    const user: User = { ...insertUser, id };\n    this.users.set(id, user);\n    return user;\n  }\n\n  async getChatMessages(limit = 50): Promise<ChatMessage[]> {\n    return this.chatMessages\n      .sort((a, b) => new Date(b.timestamp!).getTime() - new Date(a.timestamp!).getTime())\n      .slice(0, limit)\n      .reverse();\n  }\n\n  async createChatMessage(message: InsertChatMessage): Promise<ChatMessage> {\n    const id = randomUUID();\n    const chatMessage: ChatMessage = {\n      ...message,\n      id,\n      timestamp: new Date(),\n      language: message.language ?? null,\n    };\n    this.chatMessages.push(chatMessage);\n    return chatMessage;\n  }\n\n  async getCollegeInfo(): Promise<CollegeInfo[]> {\n    return this.collegeInfo;\n  }\n\n  async getCollegeInfoByCategory(category: string): Promise<CollegeInfo[]> {\n    return this.collegeInfo.filter(info => info.category === category);\n  }\n\n  async createCollegeInfo(info: InsertCollegeInfo): Promise<CollegeInfo> {\n    const id = randomUUID();\n    const collegeInfo: CollegeInfo = { \n      ...info, \n      id,\n      metadata: info.metadata ?? null \n    };\n    this.collegeInfo.push(collegeInfo);\n    return collegeInfo;\n  }\n\n  async searchCollegeInfo(query: string): Promise<CollegeInfo[]> {\n    const searchTerm = query.toLowerCase();\n    return this.collegeInfo.filter(info => \n      info.title.toLowerCase().includes(searchTerm) ||\n      info.content.toLowerCase().includes(searchTerm) ||\n      info.category.toLowerCase().includes(searchTerm)\n    );\n  }\n\n  async getCollegeDataJSON(): Promise<any> {\n    return {\n      message: 'College data is now managed through Supabase database and imported from website.',\n      note: 'Use the admin panel Import from Website feature to populate data.',\n      website: 'https://rksdcollege.ac.in'\n    };\n  }\n\n  async updateCollegeDataJSON(data: any): Promise<void> {\n    console.log('College data is now managed through Supabase database');\n  }\n\n  async getClassesDataJSON(): Promise<any> {\n    return {\n      message: 'Class schedule data is now managed through Supabase database.',\n      note: 'Use the admin panel to manage class schedules.'\n    };\n  }\n\n  async updateClassesDataJSON(data: any): Promise<void> {\n    console.log('Class data is now managed through Supabase database');\n  }\n}\n\nexport const storage = new MemStorage();\n","size_bytes":4904},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    host: '0.0.0.0',\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n  define: {\n    'import.meta.env.VITE_SUPABASE_URL': JSON.stringify(process.env.SUPABASE_URL),\n    'import.meta.env.VITE_SUPABASE_ANON_KEY': JSON.stringify(process.env.SUPABASE_ANON_KEY),\n  },\n});\n","size_bytes":1185},"server/text-chunker.ts":{"content":"/**\n * Text Chunking Utility for ElevenLabs TTS\n * Splits text into safe chunks for TTS processing\n */\n\n/**\n * Split text into safe chunks for ElevenLabs TTS - IMPROVED VERSION\n * Uses larger chunks (700-1200 chars) and prefers paragraph/sentence boundaries\n * @param text - The text to split\n * @param maxChunkSize - Maximum characters per chunk (default: 900)\n * @returns Array of text chunks\n */\nexport function splitTextIntoChunks(text: string, maxChunkSize: number = 900): string[] {\n  if (!text || text.trim().length === 0) {\n    return [];\n  }\n\n  // 1) Normalize whitespace\n  text = text.replace(/\\s+/g, ' ').trim();\n  \n  // 2) Split by paragraph if any \\n\\n exist\n  const paragraphs = text.split(/\\n{2,}/).map(p => p.trim()).filter(Boolean);\n  const chunks: string[] = [];\n\n  for (const para of paragraphs) {\n    if (para.length <= maxChunkSize) {\n      // Check if we can merge with previous chunk\n      if (chunks.length && (chunks[chunks.length - 1].length + para.length + 1) <= maxChunkSize) {\n        chunks[chunks.length - 1] += ' ' + para;\n      } else {\n        chunks.push(para);\n      }\n    } else {\n      // Paragraph too large - split by sentences\n      const sentences = para.match(/[^.!?]+[.!?]*/g) || [para];\n      let current = '';\n      \n      for (const sentence of sentences) {\n        const trimmedSentence = sentence.trim();\n        const combined = (current + ' ' + trimmedSentence).trim();\n        \n        if (combined.length > maxChunkSize) {\n          // Current chunk is full, save it and start new\n          if (current) {\n            chunks.push(current.trim());\n            current = trimmedSentence;\n          } else {\n            // Single sentence exceeds max - force split at word boundaries\n            let start = 0;\n            while (start < trimmedSentence.length) {\n              let end = Math.min(start + maxChunkSize, trimmedSentence.length);\n              \n              // Find last space within limit to avoid breaking words\n              if (end < trimmedSentence.length) {\n                const lastSpace = trimmedSentence.lastIndexOf(' ', end);\n                if (lastSpace > start) {\n                  end = lastSpace;\n                }\n              }\n              \n              const chunk = trimmedSentence.slice(start, end).trim();\n              if (chunk.length > 0) {\n                chunks.push(chunk);\n              }\n              start = end;\n              \n              // Skip leading whitespace for next chunk\n              while (start < trimmedSentence.length && trimmedSentence[start] === ' ') {\n                start++;\n              }\n            }\n            current = '';\n          }\n        } else {\n          current = combined;\n        }\n      }\n      \n      // Add remaining content\n      if (current.trim()) {\n        chunks.push(current.trim());\n      }\n    }\n  }\n\n  return chunks.filter(chunk => chunk.length > 0);\n}\n\n/**\n * Example usage and testing\n */\nexport function testTextChunker() {\n  const testText = \"India got freedom in 1947. The country grew rapidly after independence. Today it is a major economy.\";\n  const chunks = splitTextIntoChunks(testText);\n  console.log('Text chunks:', chunks);\n  return chunks;\n}\n","size_bytes":3210},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/voice-controls.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Volume2, VolumeX, Play, Square } from \"lucide-react\";\n\ninterface VoiceControlsProps {\n  isSpeaking: boolean;\n  onToggleSpeak: () => void;\n  ttsSupported: boolean;\n}\n\nexport function VoiceControls({ isSpeaking, onToggleSpeak, ttsSupported }: VoiceControlsProps) {\n  return (\n    <div className=\"mb-6\">\n      <Card className=\"p-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-8 h-8 bg-rksd-light rounded-full flex items-center justify-center\">\n              <Volume2 className=\"text-white\" size={16} />\n            </div>\n            <div>\n              <p className=\"text-sm font-medium text-gray-900\">\n                {isSpeaking ? \"Speaking Response\" : \"Voice Assistant Ready\"}\n              </p>\n              <p className=\"text-xs text-gray-500\">\n                {ttsSupported ? \"Hindi & English supported\" : \"Text-to-speech not supported\"}\n              </p>\n            </div>\n          </div>\n          <Button\n            onClick={onToggleSpeak}\n            disabled={!ttsSupported}\n            className={`inline-flex items-center px-4 py-2 rounded-lg transition-colors duration-200 font-medium text-sm ${\n              isSpeaking\n                ? \"bg-red-500 hover:bg-red-600 text-white\"\n                : \"bg-rksd-blue hover:bg-blue-700 text-white\"\n            }`}\n          >\n            {isSpeaking ? (\n              <>\n                <Square className=\"mr-2\" size={16} />\n                <span>Stop</span>\n              </>\n            ) : (\n              <>\n                <Play className=\"mr-2\" size={16} />\n                <span>Speak</span>\n              </>\n            )}\n          </Button>\n        </div>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":1866},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { insertChatMessageSchema } from \"@shared/schema\";\nimport { z } from \"zod\";\nimport { applyPronunciationCorrections } from \"./pronunciation-corrections\";\nimport { sessionManager } from \"./session-manager\";\nimport { requireAdminAuth, loginAdmin } from \"./admin-auth\";\nimport { registerHeadAdminRoutes } from \"./routes-head-admin\";\nimport { registerDepartmentRoutes } from \"./routes-department\";\nimport { registerAdminRoutes } from \"./routes-admin\";\nimport { checkSupabaseConnection } from \"./supabase-init\";\nimport { supabase } from \"./supabase\";\nimport OpenAI from \"openai\";\nimport Groq from \"groq-sdk\";\nimport { analyzeQueryTopics, getDataFetchStrategy } from \"./query-analyzer\";\n\nconst askSchema = z.object({\n  message: z.string().min(1),\n  language: z.string().optional(),\n  sessionId: z.string().optional(),\n});\n\nconst ttsSchema = z.object({\n  text: z.string().min(1),\n  voiceId: z.string(),\n  // ElevenLabs parameters\n  modelId: z.string().optional(),\n  stability: z.number().optional(),\n  similarityBoost: z.number().optional(),\n  // Cartesia parameters\n  cartesiaModelId: z.string().optional(),\n  speed: z\n    .union([\n      z.enum([\"slowest\", \"slow\", \"normal\", \"fast\", \"fastest\"]),\n      z.number().min(-1).max(1),\n    ])\n    .optional(),\n  emotions: z.array(z.string()).optional(),\n  language: z\n    .enum([\n      \"en\",\n      \"fr\",\n      \"de\",\n      \"es\",\n      \"pt\",\n      \"zh\",\n      \"ja\",\n      \"hi\",\n      \"it\",\n      \"ko\",\n      \"nl\",\n      \"pl\",\n      \"ru\",\n      \"sv\",\n      \"tr\",\n    ])\n    .optional(),\n});\n\n// ðŸŸ¢ Track server start time for uptime measurement\nconst serverStartTime = new Date();\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // âœ… Updated health route with uptime\n  app.get(\"/api/health\", (req, res) => {\n    const uptimeSeconds = Math.floor(\n      (Date.now() - serverStartTime.getTime()) / 1000,\n    );\n    console.log(`Health ping - server uptime: ${uptimeSeconds}s`);\n    res.status(200).json({\n      status: \"ok\",\n      uptimeSeconds,\n    });\n  });\n\n  // Get chat messages\n  app.get(\"/api/messages\", async (req, res) => {\n    try {\n      const messages = await storage.getChatMessages();\n      res.json(messages);\n    } catch (error) {\n      console.error(\"Error fetching messages:\", error);\n      res.status(500).json({ message: \"Failed to fetch messages\" });\n    }\n  });\n\n  // ðŸŽ“ COLLEGE RELEVANCE CHECKER - Rejects non-college questions\n  function isCollegeRelevantQuery(query: string): boolean {\n    const lowerQuery = query.toLowerCase();\n\n    // College-related keywords that indicate relevance\n    const collegeKeywords = [\n      \"college\",\n      \"rksd\",\n      \"kaithal\",\n      \"admission\",\n      \"course\",\n      \"degree\",\n      \"department\",\n      \"principal\",\n      \"faculty\",\n      \"staff\",\n      \"teacher\",\n      \"professor\",\n      \"lecturer\",\n      \"hostel\",\n      \"campus\",\n      \"library\",\n      \"lab\",\n      \"sports\",\n      \"fest\",\n      \"event\",\n      \"notice\",\n      \"announcement\",\n      \"exam\",\n      \"semester\",\n      \"year\",\n      \"class\",\n      \"timetable\",\n      \"fee\",\n      \"scholarship\",\n      \"placement\",\n      \"naac\",\n      \"ugc\",\n      \"university\",\n      \"affiliation\",\n      \"accreditation\",\n      \"student\",\n      \"eligibility\",\n      \"à¤µà¤¿à¤¶à¥à¤µà¤µà¤¿à¤¦à¥à¤¯à¤¾à¤²à¤¯\",\n      \"à¤›à¤¾à¤¤à¥à¤°\",\n      \"à¤ªà¤°à¥€à¤•à¥à¤·à¤¾\",\n      \"à¤•à¥‰à¤²à¥‡à¤œ\",\n      \"à¤ªà¥à¤°à¤µà¥‡à¤¶\",\n    ];\n\n    // Non-college topics that should be rejected\n    const nonCollegeKeywords = [\n      \"prime minister\",\n      \"pm \",\n      \"president\",\n      \"minister\",\n      \"parliament\",\n      \"modi\",\n      \"rahul\",\n      \"cricket score\",\n      \"match\",\n      \"football\",\n      \"ipl\",\n      \"world cup\",\n      \"player\",\n      \"stock market\",\n      \"sensex\",\n      \"nifty\",\n      \"share price\",\n      \"crypto\",\n      \"bitcoin\",\n      \"weather\",\n      \"temperature\",\n      \"rain\",\n      \"forecast\",\n      \"movie\",\n      \"film\",\n      \"actor\",\n      \"actress\",\n      \"bollywood\",\n      \"recipe\",\n      \"cooking\",\n      \"food recipe\",\n      \"news today\",\n      \"latest news\",\n      \"breaking news\",\n      \"train timing\",\n      \"flight\",\n      \"ticket booking\",\n      \"pm kaun\",\n      \"pradhan mantri\",\n      \"à¤®à¥à¤–à¥à¤¯à¤®à¤‚à¤¤à¥à¤°à¥€\",\n      \"prime minister kon\",\n    ];\n\n    // Greeting patterns are always allowed\n    const greetingPatterns = [\n      \"hello\",\n      \"hi\",\n      \"hey\",\n      \"namaste\",\n      \"namaskar\",\n      \"good morning\",\n      \"good afternoon\",\n      \"good evening\",\n      \"thank\",\n      \"thanks\",\n      \"bye\",\n      \"goodbye\",\n      \"kaise ho\",\n      \"how are you\",\n      \"what is your name\",\n      \"aapka naam\",\n      \"kaun ho\",\n      \"tum kaun\",\n    ];\n\n    const isGreeting = greetingPatterns.some((p) => lowerQuery.includes(p));\n    if (isGreeting) return true;\n\n    // Check if query contains non-college keywords\n    const hasNonCollegeKeyword = nonCollegeKeywords.some((k) =>\n      lowerQuery.includes(k),\n    );\n    if (hasNonCollegeKeyword) return false;\n\n    // Check if query contains college keywords\n    const hasCollegeKeyword = collegeKeywords.some((k) =>\n      lowerQuery.includes(k),\n    );\n    if (hasCollegeKeyword) return true;\n\n    // For ambiguous queries, allow them (to be safe and not reject valid college questions)\n    return true;\n  }\n\n  // ðŸ›¡ï¸ FALLBACK HEURISTIC CLASSIFIER (when AI fails)\n  function fallbackHeuristicClassifier(\n    query: string,\n  ): \"public_info\" | \"admin_info\" | \"mixed\" | \"greeting\" {\n    const lowerQuery = query.toLowerCase();\n\n    // Greeting patterns\n    const greetingPatterns = [\n      \"hello\",\n      \"hi\",\n      \"hey\",\n      \"namaste\",\n      \"namaskar\",\n      \"good morning\",\n      \"good afternoon\",\n      \"good evening\",\n      \"thank\",\n      \"thanks\",\n      \"dhanyawad\",\n      \"shukriya\",\n      \"bye\",\n      \"goodbye\",\n      \"kaise ho\",\n      \"how are you\",\n      \"what is your name\",\n      \"aapka naam\",\n      \"kaun ho\",\n    ];\n\n    // Public info patterns (stable data)\n    const publicInfoPatterns = [\n      \"history\",\n      \"itihas\",\n      \"established\",\n      \"founded\",\n      \"kab bana\",\n      \"à¤¸à¥à¤¥à¤¾à¤ªà¤¨à¤¾\",\n      \"affiliation\",\n      \"affiliated\",\n      \"university\",\n      \"vishwavidyalaya\",\n      \"location\",\n      \"address\",\n      \"kahan hai\",\n      \"kaha hai\",\n      \"address\",\n      \"naac\",\n      \"ugc\",\n      \"ranking\",\n      \"accreditation\",\n      \"recognition\",\n      \"courses\",\n      \"degree\",\n      \"konse courses\",\n      \"kya courses\",\n      \"hostel\",\n      \"sports\",\n      \"facilities\",\n      \"infrastructure\",\n      \"campus\",\n      \"admission process\",\n      \"kaise admission\",\n      \"eligibility\",\n      \"contact number\",\n      \"phone\",\n      \"email\",\n    ];\n\n    // Admin info patterns (dynamic data)\n    const adminInfoPatterns = [\n      \"principal\",\n      \"prinsipal\",\n      \"head\",\n      \"director\",\n      \"staff\",\n      \"teacher\",\n      \"faculty\",\n      \"professor\",\n      \"lecturer\",\n      \"event\",\n      \"fest\",\n      \"program\",\n      \"celebration\",\n      \"function\",\n      \"notice\",\n      \"announcement\",\n      \"à¤¸à¥‚à¤šà¤¨à¤¾\",\n      \"à¤˜à¥‹à¤·à¤£à¤¾\",\n      \"timetable\",\n      \"time table\",\n      \"schedule\",\n      \"class timing\",\n      \"holiday\",\n      \"à¤›à¥à¤Ÿà¥à¤Ÿà¥€\",\n      \"chutti\",\n      \"leave\",\n      \"exam\",\n      \"à¤ªà¤°à¥€à¤•à¥à¤·à¤¾\",\n      \"deadline\",\n      \"last date\",\n      \"hod\",\n      \"department head\",\n      \"dean\",\n      \"today\",\n      \"tomorrow\",\n      \"aaj\",\n      \"kal\",\n      \"upcoming\",\n      \"current\",\n    ];\n\n    const greetingMatch = greetingPatterns.some((p) => lowerQuery.includes(p));\n    const publicMatch = publicInfoPatterns.some((p) => lowerQuery.includes(p));\n    const adminMatch = adminInfoPatterns.some((p) => lowerQuery.includes(p));\n\n    if (greetingMatch) return \"greeting\";\n    if (publicMatch && adminMatch) return \"mixed\";\n    if (publicMatch) return \"public_info\";\n    if (adminMatch) return \"admin_info\";\n\n    // Default to admin_info for unknown queries (safer - checks DB first)\n    return \"admin_info\";\n  }\n\n  // ðŸ¤– OPTIMIZED INTENT CLASSIFIER - Uses fast heuristics for better performance\n  async function classifyQueryIntent(\n    query: string,\n    groqApiKey: string,\n  ): Promise<\"public_info\" | \"admin_info\" | \"mixed\" | \"greeting\"> {\n    // OPTIMIZATION: Use fast heuristic classifier by default for speed (0ms vs 200-500ms API call)\n    // Only use AI classifier for truly ambiguous cases\n    console.log(\"âš¡ Using fast heuristic classifier for optimal speed\");\n    return fallbackHeuristicClassifier(query);\n\n    // AI classifier kept here for future use if needed\n    // Uncomment below to enable AI-based classification (adds 200-500ms latency)\n    /*\n    if (!groqApiKey || groqApiKey.trim() === \"\") {\n      console.warn(\"âš ï¸ No Groq API key, using fallback heuristic classifier\");\n      return fallbackHeuristicClassifier(query);\n    }\n\n    try {\n      const classificationPrompt = `You are an intelligent query classifier for RKSD College chatbot.\n\nAnalyze this user query and classify it into ONE of these categories:\n\n1. \"public_info\" - Queries about stable/publicly available college information:\n   - College history, establishment year, founder\n   - Affiliation, university, accreditation, NAAC, UGC\n   - Location, address, contact details\n   - Available courses list, degree programs\n   - Hostel facilities, sports facilities, infrastructure\n   - General admission process, eligibility criteria\n   - Campus facilities overview\n   \n2. \"admin_info\" - Queries about dynamic/frequently changing administrative data:\n   - Current principal, staff members, faculty names\n   - Current events, upcoming programs, festivals\n   - Recent notices, announcements\n   - Class timings, timetable, schedules\n   - Exam dates, deadlines, admission dates\n   - Department heads, current office bearers\n   - Today's classes, tomorrow's schedule\n   \n3. \"mixed\" - Queries that need BOTH public AND admin information:\n   - \"Principal ka naam aur college history batao\"\n   - \"Events kab hain aur college kahan hai?\"\n   - \"Staff list aur courses konse available hain?\"\n   \n4. \"greeting\" - Greetings, casual conversation, thanks:\n   - \"Hello\", \"Hi\", \"Namaste\", \"Thank you\"\n   - \"How are you\", \"Kaise ho\", \"What's your name\"\n   - \"Thanks\", \"Bye\", \"Goodbye\"\n\nUser Query: \"${query}\"\n\nRespond with ONLY ONE WORD: public_info, admin_info, mixed, or greeting\nNo explanation needed.`;\n\n      const response = await fetch(\n        \"https://api.groq.com/openai/v1/chat/completions\",\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${groqApiKey}`,\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            messages: [\n              {\n                role: \"system\",\n                content:\n                  \"You are a query classifier. Respond with only one word.\",\n              },\n              { role: \"user\", content: classificationPrompt },\n            ],\n            model: \"llama-3.3-70b-versatile\",\n            max_tokens: 10,\n            temperature: 0.3,\n          }),\n        },\n      );\n\n      if (response.ok) {\n        const data = await response.json();\n        const classification = (data.choices[0]?.message?.content || \"\")\n          .toLowerCase()\n          .trim();\n\n        // Validate and return\n        if (\n          [\"public_info\", \"admin_info\", \"mixed\", \"greeting\"].includes(\n            classification,\n          )\n        ) {\n          console.log(`âœ… AI classifier success: ${classification}`);\n          return classification as\n            | \"public_info\"\n            | \"admin_info\"\n            | \"mixed\"\n            | \"greeting\";\n        }\n      }\n\n      console.warn(\"âš ï¸ AI classification failed, using fallback heuristic\");\n      return fallbackHeuristicClassifier(query);\n    } catch (error) {\n      console.error(\n        \"âŒ Error in AI intent classification, using fallback heuristic:\",\n        error,\n      );\n      return fallbackHeuristicClassifier(query);\n    }\n    */\n  }\n\n  // Ask AI assistant\n  app.post(\"/api/ask\", async (req, res) => {\n    try {\n      const { message, language, sessionId } = askSchema.parse(req.body);\n\n      // Get or create session\n      const { sessionId: currentSessionId, session } =\n        sessionManager.getOrCreateSession(sessionId);\n\n      // Add user message to session\n      sessionManager.addMessage(currentSessionId, \"user\", message);\n\n      // Store user message in database\n      await storage.createChatMessage({\n        content: message,\n        role: \"user\",\n        language: language || \"en\",\n      });\n\n      const groqApiKey = process.env.GROQ_API_KEY;\n      if (!groqApiKey) {\n        console.warn(\"GROQ_API_KEY not found in environment variables\");\n      }\n\n      // ðŸŽ“ CHECK IF QUERY IS COLLEGE-RELEVANT\n      console.log(`\\nðŸŽ“ ===== CHECKING COLLEGE RELEVANCE =====`);\n      console.log(`ðŸ“ User Query: \"${message}\"`);\n\n      const isRelevant = isCollegeRelevantQuery(message);\n      console.log(`âœ… College Relevant: ${isRelevant}`);\n      console.log(`=========================================\\n`);\n\n      if (!isRelevant) {\n        console.log(\n          `âŒ Query is not college-related, sending polite rejection`,\n        );\n        const rejectionResponse =\n          \"Sorry, main sirf RKSD College ke baare mein information provide kar sakta hoon ðŸŽ“. Aap mujhse college, courses, admission, facilities, events, ya staff ke baare mein kuch bhi pooch sakte hain. Kripya college se related sawaal puchein!\";\n\n        // Add rejection response to session\n        sessionManager.addMessage(\n          currentSessionId,\n          \"assistant\",\n          rejectionResponse,\n        );\n\n        // Apply pronunciation corrections\n        const correctedResponse =\n          applyPronunciationCorrections(rejectionResponse);\n\n        // Store assistant response\n        await storage.createChatMessage({\n          content: rejectionResponse,\n          role: \"assistant\",\n          language: \"hi\",\n        });\n\n        return res.json({\n          response: correctedResponse,\n          sessionId: currentSessionId,\n          serpApiUsed: false,\n        });\n      }\n\n      // ðŸ§  HYBRID LAYER MODEL - STEP 1: AI INTENT CLASSIFICATION\n      console.log(`\\nðŸ¤– ===== AI-POWERED INTENT CLASSIFICATION =====`);\n      console.log(`ðŸ“ User Query: \"${message}\"`);\n\n      const queryCategory = await classifyQueryIntent(\n        message,\n        groqApiKey || \"\",\n      );\n\n      console.log(`ðŸŽ¯ AI Classification Result: ${queryCategory}`);\n      console.log(`==============================================\\n`);\n\n      // Get college context from static data\n      const collegeData = await storage.getCollegeInfo();\n      let context = collegeData\n        .map((info) => `${info.title}: ${info.content}`)\n        .join(\"\\n\");\n\n      // ðŸ§  SMART QUERY ANALYSIS - Detect what topics user is asking about\n      console.log(`\\nðŸ§  ===== SMART QUERY ANALYSIS =====`);\n      const queryAnalysis = analyzeQueryTopics(message);\n      console.log(`ðŸ“ Query: \"${message}\"`);\n      console.log(\n        `ðŸŽ¯ Detected Topics:`,\n        JSON.stringify(queryAnalysis.topics, null, 2),\n      );\n      console.log(`ðŸ“Š Needs Detailed Info: ${queryAnalysis.needsDetailedInfo}`);\n\n      // Get data fetch strategy based on query analysis\n      const fetchStrategy = getDataFetchStrategy(queryAnalysis);\n      console.log(\n        `\\nðŸ“¦ Data Fetch Strategy:`,\n        JSON.stringify(fetchStrategy, null, 2),\n      );\n      console.log(`===================================\\n`);\n\n      // For backward compatibility with verification logic\n      const shouldFetchFromDB = Object.values(fetchStrategy).some(\n        (v) => v === true,\n      );\n      const shouldPrioritizeSerpAPI = false; // We always try DB first now\n      const primarySource = shouldFetchFromDB\n        ? \"Smart Database Filtering\"\n        : \"AI Response\";\n\n      // ðŸŽ¯ SMART DATA FETCHING - Only fetch relevant data based on query analysis\n      const supabaseData: string[] = [];\n\n      try {\n        // Build array of fetch promises based on strategy\n        const fetchPromises: Promise<any>[] = [];\n        const fetchTypes: string[] = [];\n\n        if (fetchStrategy.fetchDepartments) {\n          fetchPromises.push(\n            fetch(`http://localhost:5000/api/head-admin/departments`),\n          );\n          fetchTypes.push(\"departments\");\n        }\n\n        if (fetchStrategy.fetchNotices) {\n          fetchPromises.push(fetch(`http://localhost:5000/api/public/notices`));\n          fetchTypes.push(\"notices\");\n        }\n\n        if (fetchStrategy.fetchEvents) {\n          fetchPromises.push(fetch(`http://localhost:5000/api/public/events`));\n          fetchTypes.push(\"events\");\n        }\n\n        if (fetchStrategy.fetchDepartmentData) {\n          fetchPromises.push(\n            fetch(`http://localhost:5000/api/head-admin/department-data`),\n          );\n          fetchTypes.push(\"departmentData\");\n        }\n\n        if (fetchStrategy.fetchStaff) {\n          const staffLimit = fetchStrategy.staffLimit || 20;\n          fetchPromises.push(\n            Promise.resolve(\n              supabase\n                .from(\"staff_members\")\n                .select(\n                  \"full_name, employee_id, designation, role, email, phone\",\n                )\n                .limit(staffLimit)\n                .order(\"created_at\", { ascending: false }),\n            ),\n          );\n          fetchTypes.push(\"staff\");\n        }\n\n        if (fetchStrategy.fetchCourses) {\n          const coursesLimit = fetchStrategy.coursesLimit || 100;\n          fetchPromises.push(\n            Promise.resolve(\n              supabase\n                .from(\"courses\")\n                .select(\n                  \"course_name, course_code, course_type, duration, fees_per_year, description, eligibility, total_seats, is_active\",\n                )\n                .eq(\"is_active\", true) // Only fetch active courses\n                .limit(coursesLimit)\n                .order(\"course_type\", { ascending: true }), // Order by type for better categorization\n            ),\n          );\n          fetchTypes.push(\"courses\");\n        }\n\n        if (fetchStrategy.fetchSettings) {\n          fetchPromises.push(\n            Promise.resolve(\n              supabase\n                .from(\"college_settings\")\n                .select(\"key, value\")\n                .limit(30)\n                .order(\"updated_at\", { ascending: false }),\n            ),\n          );\n          fetchTypes.push(\"settings\");\n        }\n\n        console.log(`ðŸ”„ Fetching data for: ${fetchTypes.join(\", \")}`);\n\n        // Execute all fetch promises in parallel\n        const results = await Promise.all(fetchPromises);\n\n        // Process results based on fetch types\n        let resultIndex = 0;\n\n        for (const fetchType of fetchTypes) {\n          const result = results[resultIndex++];\n\n          if (fetchType === \"departments\") {\n            if (result.ok) {\n              const { departments } = await result.json();\n              if (departments?.length) {\n                supabaseData.push(\"\\n\\n=== ACTIVE DEPARTMENTS ===\");\n                departments.forEach((dept: any) => {\n                  supabaseData.push(\n                    `${dept.name}: ${dept.description || \"No description\"}`,\n                  );\n                  if (dept.head_name)\n                    supabaseData.push(`  Head: ${dept.head_name}`);\n                });\n              }\n            }\n          } else if (fetchType === \"notices\") {\n            if (result.ok) {\n              const { notices } = await result.json();\n              if (notices?.length) {\n                supabaseData.push(\"\\n\\n=== LATEST NOTICES ===\");\n                const noticeLimit = fetchStrategy.noticesLimit || 10;\n                notices.slice(0, noticeLimit).forEach((notice: any) => {\n                  supabaseData.push(\n                    `[${notice.priority.toUpperCase()}] ${notice.title}: ${notice.content}`,\n                  );\n                });\n              }\n            }\n          } else if (fetchType === \"events\") {\n            if (result.ok) {\n              const { events } = await result.json();\n              if (events?.length) {\n                supabaseData.push(\"\\n\\n=== UPCOMING EVENTS ===\");\n                const eventLimit = fetchStrategy.eventsLimit || 10;\n                events.slice(0, eventLimit).forEach((event: any) => {\n                  const eventDate = event.event_date\n                    ? new Date(event.event_date).toLocaleDateString()\n                    : \"TBD\";\n                  supabaseData.push(\n                    `${event.title} - ${eventDate}: ${event.description || \"No description\"}`,\n                  );\n                });\n              }\n            }\n          } else if (fetchType === \"departmentData\") {\n            if (result.ok) {\n              const { data: deptData } = await result.json();\n              if (deptData?.length) {\n                supabaseData.push(\n                  \"\\n\\n=== DEPARTMENT-SPECIFIC INFORMATION ===\",\n                );\n                deptData.slice(0, 20).forEach((item: any) => {\n                  supabaseData.push(\n                    `[${item.data_type}] ${item.title}: ${item.content}`,\n                  );\n                });\n              }\n            }\n          } else if (fetchType === \"staff\") {\n            if (!result.error && result.data?.length) {\n              supabaseData.push(\"\\n\\n=== STAFF MEMBERS ===\");\n              result.data.forEach((member: any) => {\n                supabaseData.push(\n                  `${member.full_name} (${member.employee_id}): ${member.designation} - ${member.role}`,\n                );\n                if (member.email) supabaseData.push(`  Email: ${member.email}`);\n                if (member.phone) supabaseData.push(`  Phone: ${member.phone}`);\n              });\n            }\n          } else if (fetchType === \"courses\") {\n            if (!result.error && result.data?.length) {\n              // Add intelligent summarization with counts and categories\n              const courses = result.data;\n              const totalCourses = courses.length;\n\n              // Group by course type for better organization\n              const coursesByType: Record<string, any[]> = {};\n              courses.forEach((course: any) => {\n                const type = course.course_type || \"Other\";\n                if (!coursesByType[type]) {\n                  coursesByType[type] = [];\n                }\n                coursesByType[type].push(course);\n              });\n\n              supabaseData.push(\n                `\\n\\n=== AVAILABLE COURSES (Total: ${totalCourses}) ===`,\n              );\n\n              // Display courses organized by category\n              Object.keys(coursesByType)\n                .sort()\n                .forEach((type) => {\n                  const typeCourses = coursesByType[type];\n                  supabaseData.push(\n                    `\\n[${type} Courses - ${typeCourses.length} available]:`,\n                  );\n\n                  typeCourses.forEach((course: any) => {\n                    const feeInfo = course.fees_per_year\n                      ? ` - â‚¹${course.fees_per_year}/year`\n                      : \"\";\n                    const seatsInfo = course.total_seats\n                      ? ` - ${course.total_seats} seats`\n                      : \"\";\n                    supabaseData.push(\n                      `${course.course_name} (${course.course_code}): ${course.duration}${feeInfo}${seatsInfo}`,\n                    );\n                    if (course.description) {\n                      supabaseData.push(`  Description: ${course.description}`);\n                    }\n                    if (course.eligibility) {\n                      supabaseData.push(`  Eligibility: ${course.eligibility}`);\n                    }\n                  });\n                });\n            }\n          } else if (fetchType === \"settings\") {\n            if (!result.error && result.data?.length) {\n              supabaseData.push(\"\\n\\n=== COLLEGE INFORMATION ===\");\n              result.data.forEach((setting: any) => {\n                const value = setting.value;\n                if (typeof value === \"object\") {\n                  if (value.title && value.content) {\n                    supabaseData.push(`${value.title}: ${value.content}`);\n                  } else if (value.content) {\n                    supabaseData.push(`${setting.key}: ${value.content}`);\n                  } else if (value.list && Array.isArray(value.list)) {\n                    supabaseData.push(\n                      `${setting.key}: ${value.list.join(\", \")}`,\n                    );\n                  }\n                } else {\n                  supabaseData.push(`${setting.key}: ${value}`);\n                }\n              });\n            }\n          }\n        }\n\n        console.log(`âœ… Fetched ${supabaseData.length} lines of relevant data`);\n\n        if (supabaseData.length > 0) {\n          context += \"\\n\" + supabaseData.join(\"\\n\");\n        }\n      } catch (supabaseError) {\n        console.error(\"Error fetching Supabase data:\", supabaseError);\n      }\n\n      // Get current date and time in India timezone\n      const now = new Date();\n      const indiaTime = new Intl.DateTimeFormat(\"en-IN\", {\n        timeZone: \"Asia/Kolkata\",\n        dateStyle: \"full\",\n        timeStyle: \"long\",\n      }).format(now);\n      const todayDate = new Intl.DateTimeFormat(\"en-IN\", {\n        timeZone: \"Asia/Kolkata\",\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n        weekday: \"long\",\n      }).format(now);\n\n      // Prepare professional system prompt for quality Hinglish responses\n      const systemPrompt = `\nYou said:\nYou are Ram, the official AI Voice Assistant of RKSD College, Kaithal! ðŸŽ“\nYour role is to be a warm, helpful, and professional college representative who assists students, parents, staff, and visitors with accurate information and genuine care.\n\nCURRENT DATE AND TIME:\nToday's Date: ${todayDate}\nCurrent Time: ${indiaTime}\n(Use this to answer questions about \"today\", \"tomorrow\", \"this month\", etc.)\n\nCollege Information (PRIMARY SOURCE - Use this FIRST):\n${context}\n\nIMPORTANT - Year to Semester Mapping:\nWhen user asks about year-based information, convert to semester:\n- \"1st year\" = 1st Semester OR 2nd Semester\n- \"2nd year\" = 3rd Semester OR 4th Semester  \n- \"3rd year\" = 5th Semester OR 6th Semester\nExample: \"meri 2nd year ki classes kahan hain?\" â†’ Look for \"3rd Semester\" or \"4th Semester\" information.\n\nCRITICAL RULE - NEVER MAKE UP INFORMATION:\n- If you don't find specific factual information (like names, dates, specific people) in the College Information above, you MUST say \"Mujhe is baare mein pata nahi hai\" or \"I don't have this information\".\n- NEVER guess or make up names of principals, founders, staff members, or historical facts.\n- NEVER invent dates, years, or specific details that are not in the College Information.\n- If asked about specific people and their name is not in College Information, clearly say you don't know.\n- Only answer confidently when the exact information is present above.\n\nRESPONSE STYLE - Professional Hinglish (Hindi + English Mix):\n- Always reply in NATURAL HINGLISH - a real conversational mix of Hindi and English, the way students actually speak.\n- NOT pure Hindi, NOT pure English - use both languages naturally in one sentence.\n- Examples of good Hinglish: \"College mein admission ka process bahut simple hai\", \"Aap office mein jaake form submit kar sakte ho\"\n- Speak politely and confidently, like a real staff member of RKSD College.\n- Responses should be complete, detailed, and informative - like a professional voice assistant.\n- NEVER use bullet points (*), asterisks, numbered lists (1,2,3), or heavy formatting. Keep answers simple and conversational.\n- Use emojis very sparingly where they add warmth (ðŸ‘‹, ðŸŽ“, ðŸ“š, ðŸšŒ, ðŸ“ž, â°).\n- Always use natural correct Hinglish words (âœ… \"mera\", \"aapka\", \"tumhara\"; âŒ \"mujhka\", \"tumhka\").\n- If the user's question is unclear, ask a smart follow-up question.\n- Directly answer what was asked - don't give generic or vague responses.\n\nCRITICAL RESPONSE QUALITY RULES:\n- ALWAYS provide COMPLETE, COMPREHENSIVE information - never give partial or vague answers\n- When asked about courses/staff/events, ALWAYS mention the TOTAL COUNT first (e.g., \"Hamare college mein total 29 courses available hain\")\n- Then organize information by CATEGORIES (e.g., UG courses, PG courses, Diploma courses)\n- Provide ALL relevant details like fees, duration, eligibility, seats available\n- Be SPECIFIC and PROFESSIONAL - avoid generic responses like \"bahut courses hain\" without details\n- If the data shows total count, ALWAYS mention it in your response\n\nStyle Examples:  \n- User: Namaste  \n- Ram: Namaste! ðŸ‘‹ Main Ram hoon, RKSD College ka assistant. Aap kaise hain? Main aapki kya madad kar sakta hoon?\n\n- User: College me bus pass kaha se milega?  \n- Ram: Bus pass ke liye aapko transport cell jaana hoga ðŸšŒ. Wahan aapko ek form milega, usme apna ID proof aur admit card submit karna hoga. Form submit karne ke baad aapko bus pass mil jayega. Yeh process zyada time nahi leta.\n\n- User: Courses konse available hain?\n- Ram: Hamare college mein total 29 courses available hain! ðŸŽ“ Inhe categories mein organize karke batati hoon. UG courses mein BA, BSc, BCom milte hain with different specializations. PG courses mein MA, MSc, MCom available hain. Har course ki duration 2-3 saal hai aur fees bhi reasonable hai. Kaunse category mein aapko detailed information chahiye? Main sabhi courses ke bare mein fees, eligibility, aur seats ki complete details de sakti hoon.`;\n\n      let assistantResponse =\n        \"Hello! I'm your RKSD Assistant. How can I help you today?\";\n      let serpApiUsed = false;\n\n      try {\n        // Get conversation history with context\n        const conversationMessages = sessionManager.getConversationHistory(\n          currentSessionId,\n          systemPrompt,\n        );\n\n        console.log(\n          `Session ${currentSessionId}: Sending ${conversationMessages.length} messages to LLM (OpenAI GPT-4o â†’ Groq fallback)`,\n        );\n\n        // PRIMARY: Try OpenAI GPT-4o first\n        try {\n          console.log('ðŸ¤– Campus Assistant: Trying OpenAI GPT-4o...');\n          const openai = new OpenAI({\n            apiKey: process.env.OPENAI_API_KEY,\n          });\n\n          const completion = await openai.chat.completions.create({\n            model: \"gpt-4o\",\n            messages: conversationMessages as any[],\n            temperature: 0.7,\n            max_completion_tokens: 500,\n          });\n\n          assistantResponse = completion.choices[0]?.message?.content || assistantResponse;\n          console.log('âœ… OpenAI GPT-4o Success');\n\n        } catch (openaiError: any) {\n          // FALLBACK: Use Groq if OpenAI fails\n          console.warn('âš ï¸ OpenAI GPT-4o failed, falling back to Groq...', openaiError.message);\n\n          const groqResponse = await fetch(\n            \"https://api.groq.com/openai/v1/chat/completions\",\n            {\n              method: \"POST\",\n              headers: {\n                Authorization: `Bearer ${groqApiKey}`,\n                \"Content-Type\": \"application/json\",\n              },\n              body: JSON.stringify({\n                messages: conversationMessages,\n                model: \"llama-3.3-70b-versatile\",\n                max_tokens: 500,\n                temperature: 0.7,\n              }),\n            },\n          );\n\n          if (groqResponse.ok) {\n            const groqData = await groqResponse.json();\n            assistantResponse =\n              groqData.choices[0]?.message?.content || assistantResponse;\n            console.log('âœ… Groq Llama Success (Fallback)');\n          } else {\n            console.error('âŒ Both OpenAI and Groq failed');\n            assistantResponse = \"Khed hai, main abhi technical difficulties ka samna kar raha hoon. Kripya thodi der baad try karein!\";\n          }\n        }\n\n        if (true) { // Keep existing logic structure\n\n          const lowercaseResponse = assistantResponse.toLowerCase();\n          const indicatesNoInfo =\n            lowercaseResponse.includes(\"mujhe nahi pata\") ||\n            lowercaseResponse.includes(\"mujhe iska pata nahi\") ||\n            lowercaseResponse.includes(\"mere paas\") ||\n            lowercaseResponse.includes(\"jaankari nahin\") ||\n            lowercaseResponse.includes(\"jankari nahi\") ||\n            lowercaseResponse.includes(\"information nahi\") ||\n            lowercaseResponse.includes(\"i don't know\") ||\n            lowercaseResponse.includes(\"i don't have\") ||\n            lowercaseResponse.includes(\"i'm not sure\") ||\n            lowercaseResponse.includes(\"i am not sure\") ||\n            lowercaseResponse.includes(\"khed hai\") ||\n            lowercaseResponse.includes(\"sorry\") ||\n            lowercaseResponse.includes(\"maaf kijiye\") ||\n            lowercaseResponse.includes(\"mujhe samajh nahi\") ||\n            lowercaseResponse.includes(\"pata nahi hai\") ||\n            lowercaseResponse.includes(\"jaankari nahi hai\");\n\n          // ðŸŒ NEW WEB SEARCH MODEL: DATABASE FIRST, SERPAPI ONLY AS BACKUP\n          // For ALL queries (public_info, admin_info, mixed):\n          // - Database is ALWAYS checked first (already done above)\n          // - SerpAPI is ONLY used if AI indicates it doesn't have info from database\n          let shouldSearchWeb = false;\n\n          if (queryCategory === \"greeting\") {\n            // Greetings: Never search web\n            shouldSearchWeb = false;\n            console.log(`ðŸ‘‹ Greeting - No web search needed`);\n          } else {\n            // For all other queries: Use SerpAPI ONLY if database doesn't have info\n            shouldSearchWeb = indicatesNoInfo;\n            if (indicatesNoInfo) {\n              console.log(\n                `ðŸ“Š Database doesn't have info - Using Google SerpAPI as backup`,\n              );\n            } else {\n              console.log(`âœ… Database has info - No need for Google search`);\n            }\n          }\n\n          console.log(`\\nðŸ” ===== WEB SEARCH DECISION =====`);\n          console.log(\n            `ðŸ“ AI Response: \"${assistantResponse.substring(0, 100)}...\"`,\n          );\n          console.log(`â“ AI indicates no info: ${indicatesNoInfo}`);\n          console.log(`ðŸ“Š Query Category: ${queryCategory}`);\n          console.log(`ðŸŒ Should search web: ${shouldSearchWeb}`);\n          console.log(`==================================\\n`);\n\n          if (shouldSearchWeb) {\n            try {\n              console.log(`\\nðŸ” ===== STARTING SERPAPI SEARCH =====`);\n              console.log(`â“ Original question: \"${message}\"`);\n              console.log(\n                `ðŸ¤– AI said it doesn't know, initiating web search...`,\n              );\n\n              const serpApiKey = process.env.SERPAPI_API_KEY;\n\n              if (serpApiKey) {\n                const searchQuery = `${message} RKSD College Kaithal`;\n                const serpApiUrl = `https://serpapi.com/search?engine=google&q=${encodeURIComponent(searchQuery)}&api_key=${serpApiKey}&hl=en`;\n\n                console.log(`ðŸ”Ž Search query: \"${searchQuery}\"`);\n                console.log(`ðŸ“¡ Calling SerpApi...`);\n                const searchResponse = await fetch(serpApiUrl);\n\n                if (searchResponse.ok) {\n                  const searchData = await searchResponse.json();\n                  let searchInfo = \"\";\n\n                  if (searchData.ai_overview) {\n                    console.log(\"âœ… AI Overview found!\");\n                    let aiOverview = searchData.ai_overview;\n\n                    if (aiOverview.page_token) {\n                      console.log(\n                        \"ðŸ”„ AI Overview requires page_token follow-up, making additional request...\",\n                      );\n                      const followUpUrl = `https://serpapi.com/search.json?engine=google_ai_overview&page_token=${aiOverview.page_token}&api_key=${serpApiKey}`;\n\n                      try {\n                        const followUpResponse = await fetch(followUpUrl);\n                        if (followUpResponse.ok) {\n                          const followUpData = await followUpResponse.json();\n                          if (followUpData.ai_overview) {\n                            aiOverview = followUpData.ai_overview;\n                            console.log(\n                              \"âœ… Successfully retrieved AI Overview from follow-up request\",\n                            );\n                          } else {\n                            console.log(\n                              \"âš ï¸ Follow-up request did not contain ai_overview\",\n                            );\n                          }\n                        } else {\n                          console.log(\n                            \"âš ï¸ Follow-up request failed:\",\n                            followUpResponse.status,\n                          );\n                        }\n                      } catch (followUpError) {\n                        console.error(\n                          \"âŒ Error in follow-up request:\",\n                          followUpError,\n                        );\n                      }\n                    }\n\n                    if (\n                      aiOverview.text_blocks &&\n                      Array.isArray(aiOverview.text_blocks)\n                    ) {\n                      const textParts: string[] = [];\n\n                      const processListItems = (\n                        items: any[],\n                        depth: number = 0,\n                      ) => {\n                        items.forEach((item: any) => {\n                          const indent = \"  \".repeat(depth);\n                          const listItem = [];\n\n                          if (item.title) listItem.push(item.title);\n                          if (item.snippet) listItem.push(item.snippet);\n\n                          if (listItem.length > 0) {\n                            textParts.push(indent + \"â€¢ \" + listItem.join(\": \"));\n                          }\n\n                          if (item.list && Array.isArray(item.list)) {\n                            processListItems(item.list, depth + 1);\n                          }\n                        });\n                      };\n\n                      aiOverview.text_blocks.forEach((block: any) => {\n                        if (\n                          block.type === \"paragraph\" ||\n                          block.type === \"heading\"\n                        ) {\n                          if (block.snippet) {\n                            textParts.push(block.snippet);\n                          }\n                        } else if (\n                          block.type === \"list\" &&\n                          block.list &&\n                          Array.isArray(block.list)\n                        ) {\n                          processListItems(block.list);\n                        } else if (\n                          block.type === \"table\" &&\n                          block.table &&\n                          Array.isArray(block.table)\n                        ) {\n                          textParts.push(\"\\nTable:\");\n                          block.table.forEach((row: any[], idx: number) => {\n                            if (Array.isArray(row)) {\n                              textParts.push(row.join(\" | \"));\n                            }\n                          });\n                        } else if (block.snippet) {\n                          textParts.push(block.snippet);\n                        }\n                      });\n\n                      searchInfo = textParts.filter(Boolean).join(\"\\n\");\n                      console.log(\n                        \"âœ… AI Overview text extracted:\",\n                        searchInfo.substring(0, 200) + \"...\",\n                      );\n                    }\n\n                    if (\n                      aiOverview.references &&\n                      Array.isArray(aiOverview.references)\n                    ) {\n                      const sources = aiOverview.references\n                        .slice(0, 3)\n                        .map(\n                          (ref: any) => `${ref.title || \"Source\"}: ${ref.link}`,\n                        )\n                        .filter(Boolean)\n                        .join(\"\\n\");\n                      if (sources) {\n                        searchInfo += `\\n\\nReferences:\\n${sources}`;\n                      }\n                    }\n                  }\n\n                  // If no AI Overview in English, try Hindi search for detailed results\n                  if (\n                    !searchInfo &&\n                    searchData.organic_results &&\n                    searchData.organic_results.length > 0\n                  ) {\n                    console.log(\n                      \"âš ï¸ No AI Overview in English, trying Hindi search for better results...\",\n                    );\n\n                    // Try searching in Hindi to get Hindi AI Overview which often has more details\n                    const hindiSearchQuery = `${message} RKSD College Kaithal`;\n                    const hindiSerpApiUrl = `https://serpapi.com/search?engine=google&q=${encodeURIComponent(hindiSearchQuery)}&api_key=${serpApiKey}&hl=hi&gl=in`;\n\n                    try {\n                      console.log(\n                        `ðŸ”Ž Trying Hindi search: \"${hindiSearchQuery}\"`,\n                      );\n                      const hindiSearchResponse = await fetch(hindiSerpApiUrl);\n\n                      if (hindiSearchResponse.ok) {\n                        const hindiSearchData =\n                          await hindiSearchResponse.json();\n\n                        if (hindiSearchData.ai_overview) {\n                          console.log(\"âœ… Hindi AI Overview found!\");\n                          let hindiAiOverview = hindiSearchData.ai_overview;\n\n                          // Handle page_token if needed\n                          if (hindiAiOverview.page_token) {\n                            console.log(\n                              \"ðŸ”„ Hindi AI Overview requires page_token follow-up...\",\n                            );\n                            const followUpUrl = `https://serpapi.com/search.json?engine=google_ai_overview&page_token=${hindiAiOverview.page_token}&api_key=${serpApiKey}`;\n\n                            try {\n                              const followUpResponse = await fetch(followUpUrl);\n                              if (followUpResponse.ok) {\n                                const followUpData =\n                                  await followUpResponse.json();\n                                if (followUpData.ai_overview) {\n                                  hindiAiOverview = followUpData.ai_overview;\n                                  console.log(\n                                    \"âœ… Successfully retrieved Hindi AI Overview\",\n                                  );\n                                }\n                              }\n                            } catch (err) {\n                              console.error(\"âŒ Hindi follow-up error:\", err);\n                            }\n                          }\n\n                          // Extract Hindi AI Overview text\n                          if (\n                            hindiAiOverview.text_blocks &&\n                            Array.isArray(hindiAiOverview.text_blocks)\n                          ) {\n                            const textParts: string[] = [];\n\n                            const processListItems = (\n                              items: any[],\n                              depth: number = 0,\n                            ) => {\n                              items.forEach((item: any) => {\n                                const indent = \"  \".repeat(depth);\n                                const listItem = [];\n\n                                if (item.title) listItem.push(item.title);\n                                if (item.snippet) listItem.push(item.snippet);\n\n                                if (listItem.length > 0) {\n                                  textParts.push(\n                                    indent + \"â€¢ \" + listItem.join(\": \"),\n                                  );\n                                }\n\n                                if (item.list && Array.isArray(item.list)) {\n                                  processListItems(item.list, depth + 1);\n                                }\n                              });\n                            };\n\n                            hindiAiOverview.text_blocks.forEach(\n                              (block: any) => {\n                                if (\n                                  block.type === \"paragraph\" ||\n                                  block.type === \"heading\"\n                                ) {\n                                  if (block.snippet) {\n                                    textParts.push(block.snippet);\n                                  }\n                                } else if (\n                                  block.type === \"list\" &&\n                                  block.list &&\n                                  Array.isArray(block.list)\n                                ) {\n                                  processListItems(block.list);\n                                } else if (\n                                  block.type === \"table\" &&\n                                  block.table &&\n                                  Array.isArray(block.table)\n                                ) {\n                                  textParts.push(\"\\nTable:\");\n                                  block.table.forEach((row: any[]) => {\n                                    if (Array.isArray(row)) {\n                                      textParts.push(row.join(\" | \"));\n                                    }\n                                  });\n                                } else if (block.snippet) {\n                                  textParts.push(block.snippet);\n                                }\n                              },\n                            );\n\n                            searchInfo = textParts.filter(Boolean).join(\"\\n\");\n                            console.log(\n                              \"âœ… Hindi AI Overview text extracted:\",\n                              searchInfo.substring(0, 300) + \"...\",\n                            );\n                          }\n                        }\n                      } else {\n                        console.log(\n                          \"âš ï¸ Hindi search response not OK:\",\n                          hindiSearchResponse.status,\n                        );\n                      }\n                    } catch (hindiSearchError) {\n                      console.error(\n                        \"âŒ Hindi search failed:\",\n                        hindiSearchError,\n                      );\n                    }\n                  }\n\n                  // FINAL FALLBACK: If still no searchInfo after trying both English and Hindi AI Overview, use English organic results\n                  if (\n                    !searchInfo &&\n                    searchData.organic_results &&\n                    searchData.organic_results.length > 0\n                  ) {\n                    console.log(\n                      \"âš ï¸ No AI Overview in English or Hindi, falling back to English organic results as last resort\",\n                    );\n                    searchInfo = searchData.organic_results\n                      .slice(0, 3)\n                      .map((item: any) => `${item.title}: ${item.snippet}`)\n                      .join(\"\\n\");\n                    console.log(\n                      \"ðŸ“Š Using organic results:\",\n                      searchInfo.substring(0, 200) + \"...\",\n                    );\n                  }\n\n                  if (searchInfo) {\n                    console.log(\n                      \"Found information, regenerating response with search data\",\n                    );\n                    console.log(\n                      \"ðŸ“Š Google AI Overview data:\",\n                      searchInfo.substring(0, 300) + \"...\",\n                    );\n\n                    // ðŸŽ¯ CRITICAL FIX: Put Google AI Overview data FIRST, then database context as secondary reference only\n                    const enhancedContext = `=== ðŸ” GOOGLE AI OVERVIEW (PRIMARY SOURCE - USE THIS FIRST) ===\n${searchInfo}\n\n=== ðŸ“š Database Information (Secondary Reference Only - Use only if Google data is incomplete) ===\n${context}`;\n\n                    const enhancedSystemPrompt = `You are Ram, the official AI Assistant of RKSD College - a professional, knowledgeable staff member.\n\nðŸš¨ CRITICAL PRIORITY INSTRUCTION - MUST FOLLOW:\nI just searched Google for \"${message}\" and received VERIFIED data.\n\nSTRICT RULES FOR ACCURATE, DETAILED RESPONSES:\n1. The \"GOOGLE AI OVERVIEW\" section is your PRIMARY and MOST ACCURATE source\n2. Use ONLY the information present in the data - NEVER invent or guess details\n3. Present ALL information that IS available comprehensively and professionally\n4. If specific numbers/measurements are in the data, state them exactly\n5. If specific lists are provided, include ALL items mentioned\n6. Organize information logically with proper categories when data supports it\n7. If data is limited/incomplete, present what's available clearly without making up details\n8. Use professional, conversational Hinglish - clear and informative\n9. Present information in structured, flowing paragraphs - NO bullet points or asterisks\n10. DO NOT say \"mujhe pata nahi\" if Google data has the answer\n\nâš ï¸ CRITICAL: DO NOT MAKE UP DETAILS\n- If the data says \"sports facilities are available\" but doesn't list specific dimensions â†’ don't invent dimensions\n- If the data lists \"basketball, badminton\" â†’ don't add other sports not mentioned\n- Only state facts that are explicitly present in the GOOGLE AI OVERVIEW section\n- If data is incomplete, you can say \"college website par complete details available hain\"\n\nFORMATTING STYLE (PROFESSIONAL):\n- Use paragraph headings naturally: \"Sports facilities ki baat karein toh...\"\n- Separate categories with clear transitions: \"Indoor facilities mein...\"\n- List all items from data in flowing sentences: \"yahan cricket, football, volleyball facilities hain\"\n- Include all specific details present in data: dimensions, quantities when mentioned\n- Keep language professional but conversational and natural\n\nCURRENT DATE AND TIME:\nToday's Date: ${todayDate}\nCurrent Time: ${indiaTime}\n\nCollege Information:\n${enhancedContext}\n\nResponse Guidelines:\n- Reply in natural, professional Hinglish (real mix of Hindi + English)\n- Be comprehensive with information that EXISTS in the data\n- Organize information clearly and professionally\n- Use conversational but authoritative tone\n- Include specific details when they're in the data - be accurate\n- NEVER use bullet points (*), asterisks, numbered lists - use natural paragraphs\n- Use emojis very sparingly (ðŸ‘‹, ðŸŽ“, ðŸŸï¸)\n- Never repeat same info in Hindi and English\n- Always use correct words (âœ… \"mera\", \"aapka\"; âŒ \"mujhka\", \"tumhka\")\n- If full details aren't in data, guide user to official website or office`;\n\n                    const enhancedMessages = [\n                      { role: \"system\", content: enhancedSystemPrompt },\n                      ...session.messages.map((m) => ({\n                        role: m.role,\n                        content: m.content,\n                      })),\n                    ];\n\n                    const retryResponse = await fetch(\n                      \"https://api.groq.com/openai/v1/chat/completions\",\n                      {\n                        method: \"POST\",\n                        headers: {\n                          Authorization: `Bearer ${groqApiKey}`,\n                          \"Content-Type\": \"application/json\",\n                        },\n                        body: JSON.stringify({\n                          messages: enhancedMessages,\n                          model: \"llama-3.3-70b-versatile\",\n                          max_tokens: 1500,\n                          temperature: 0.3,\n                        }),\n                      },\n                    );\n\n                    if (retryResponse.ok) {\n                      const retryData = await retryResponse.json();\n                      assistantResponse =\n                        retryData.choices[0]?.message?.content ||\n                        assistantResponse;\n                      serpApiUsed = true;\n                      console.log(\n                        \"âœ… Successfully generated response with SerpApi data\",\n                      );\n                      console.log(\n                        \"ðŸ“ Response using Google data:\",\n                        assistantResponse.substring(0, 150) + \"...\",\n                      );\n                    }\n                  } else {\n                    console.log(\"No relevant information found via SerpApi\");\n                    assistantResponse =\n                      \"Sorry, mujhe is baare mein accurate information nahi mili. Kripya college office se contact karein ya official website rksdcollege.ac.in check karein.\";\n                  }\n                } else {\n                  const errorText = await searchResponse.text();\n                  console.log(\n                    \"SerpApi error:\",\n                    searchResponse.status,\n                    errorText,\n                  );\n                  assistantResponse =\n                    \"Sorry, mujhe is baare mein accurate information nahi mili. Kripya college office se contact karein ya official website rksdcollege.ac.in check karein.\";\n                }\n              } else {\n                console.log(\"SerpApi key not configured\");\n                assistantResponse =\n                  \"Sorry, mujhe is baare mein accurate information nahi mili. Kripya college office se contact karein ya official website rksdcollege.ac.in check karein.\";\n              }\n            } catch (searchError) {\n              console.error(\"Error searching with SerpApi:\", searchError);\n              assistantResponse =\n                \"Sorry, mujhe is baare mein accurate information nahi mili. Kripya college office se contact karein ya official website rksdcollege.ac.in check karein.\";\n            }\n          }\n        }\n        // LLM fallback system handles errors above (GPT-5 â†’ Groq)\n      } catch (apiError) {\n        console.warn(\"Groq API error, using fallback:\", apiError);\n      }\n\n      // ðŸ” HYBRID LAYER MODEL - STEP 3: CROSS VERIFICATION WITH REGENERATION\n      // Verify response consistency and accuracy, regenerate if needed\n      try {\n        console.log(`\\nðŸ” ===== CROSS VERIFICATION LAYER =====`);\n        console.log(\n          `ðŸ“ Original Response: \"${assistantResponse.substring(0, 100)}...\"`,\n        );\n\n        let needsRegeneration = false;\n        let regenerationReason = \"\";\n\n        // Check 1: Response is not empty or too short\n        if (!assistantResponse || assistantResponse.trim().length < 10) {\n          needsRegeneration = true;\n          regenerationReason = \"Response too short or empty\";\n        }\n\n        // Check 2: For non-greeting queries, verify we have substantial content\n        // SKIP VERIFICATION IF SERPAPI WAS ALREADY USED (to avoid overwriting good responses)\n        if (\n          !needsRegeneration &&\n          queryCategory !== \"greeting\" &&\n          !serpApiUsed\n        ) {\n          const uncertainPhrases = [\n            \"mujhe nahi pata\",\n            \"i don't know\",\n            \"pata nahi\",\n            \"information unavailable\",\n            \"currently unavailable\",\n            \"mujhe iska pata nahi\",\n            \"jaankari nahin\",\n          ];\n\n          const seemsUncertain = uncertainPhrases.some((phrase) =>\n            assistantResponse.toLowerCase().includes(phrase),\n          );\n\n          // Check 3: For public_info, uncertainty is a red flag if we prioritized SerpAPI\n          if (\n            seemsUncertain &&\n            queryCategory === \"public_info\" &&\n            shouldPrioritizeSerpAPI\n          ) {\n            needsRegeneration = true;\n            regenerationReason =\n              \"Public info query uncertain despite SerpAPI priority\";\n            console.log(`âš ï¸ ${regenerationReason}`);\n          }\n\n          // Check 4: For admin_info, verify DB was actually checked\n          else if (seemsUncertain && queryCategory === \"admin_info\") {\n            if (!shouldFetchFromDB) {\n              needsRegeneration = true;\n              regenerationReason =\n                \"Admin info uncertain but DB was not checked\";\n              console.log(`âš ï¸ ${regenerationReason}`);\n            } else {\n              console.log(\n                `âœ… Admin info uncertain but DB was properly checked - acceptable`,\n              );\n            }\n          }\n        } else if (serpApiUsed) {\n          console.log(\n            `âœ… SerpAPI was used - skipping verification to preserve Google AI Overview response`,\n          );\n        }\n\n        // ðŸ”„ REGENERATION: If verification failed, actually regenerate with Groq\n        if (needsRegeneration && groqApiKey) {\n          console.log(`\\nðŸ”„ ===== REGENERATING RESPONSE WITH GROQ =====`);\n          console.log(`âŒ Reason: ${regenerationReason}`);\n          console.log(`ðŸ”„ Attempting to regenerate with stricter prompt...`);\n\n          try {\n            // Create stricter prompt that demands specific information\n            const stricterPrompt =\n              systemPrompt +\n              `\\n\\nIMPORTANT: The previous response was too vague or uncertain. Please provide a more specific and confident answer using the College Information provided above. If you truly don't have the specific information, clearly state what you DO know about related topics.`;\n\n            const retryMessages = [\n              { role: \"system\", content: stricterPrompt },\n              ...session.messages\n                .slice(-3)\n                .map((m) => ({ role: m.role, content: m.content })), // Use last 3 messages for context\n            ];\n\n            const regenerateResponse = await fetch(\n              \"https://api.groq.com/openai/v1/chat/completions\",\n              {\n                method: \"POST\",\n                headers: {\n                  Authorization: `Bearer ${groqApiKey}`,\n                  \"Content-Type\": \"application/json\",\n                },\n                body: JSON.stringify({\n                  messages: retryMessages,\n                  model: \"llama-3.3-70b-versatile\",\n                  max_tokens: 500,\n                  temperature: 0.5, // Lower temperature for more focused responses\n                }),\n              },\n            );\n\n            if (regenerateResponse.ok) {\n              const regenerateData = await regenerateResponse.json();\n              const newResponse = regenerateData.choices[0]?.message?.content;\n\n              if (newResponse && newResponse.trim().length > 10) {\n                assistantResponse = newResponse;\n                console.log(`âœ… Successfully regenerated response via Groq`);\n                console.log(\n                  `ðŸ“ New response: \"${assistantResponse.substring(0, 100)}...\"`,\n                );\n              } else {\n                console.log(`âš ï¸ Regeneration failed, using fallback`);\n                assistantResponse =\n                  \"Sorry, mujhe is baare mein accurate information nahi mili. Kripya college office se contact karein ya official website rksdcollege.ac.in check karein.\";\n              }\n            } else {\n              console.log(`âš ï¸ Groq regeneration failed, using fallback`);\n              assistantResponse =\n                \"Sorry, mujhe is baare mein accurate information nahi mili. Kripya college office se contact karein ya official website rksdcollege.ac.in check karein.\";\n            }\n          } catch (regenerateError) {\n            console.error(\n              \"Error during response regeneration:\",\n              regenerateError,\n            );\n            assistantResponse =\n              \"Sorry, mujhe is baare mein accurate information nahi mili. Kripya college office se contact karein ya official website rksdcollege.ac.in check karein.\";\n          }\n        } else if (needsRegeneration) {\n          // No Groq API key, use static fallback\n          console.log(\n            `âš ï¸ Regeneration needed but no Groq API key, using fallback`,\n          );\n          assistantResponse =\n            \"Sorry, mujhe is baare mein accurate information nahi mili. Kripya college office se contact karein ya official website rksdcollege.ac.in check karein.\";\n        }\n\n        // Final verification check\n        console.log(`\\nâœ… ===== VERIFICATION COMPLETE =====`);\n        console.log(`ðŸ“Š Query Category: ${queryCategory}`);\n        console.log(`ðŸŽ¯ Primary Source: ${primarySource}`);\n        console.log(\n          `ðŸ”„ Regenerated: ${needsRegeneration ? \"Yes - \" + regenerationReason : \"No\"}`,\n        );\n        console.log(\n          `ðŸ“ Final Response Length: ${assistantResponse.length} chars`,\n        );\n        console.log(`====================================\\n`);\n      } catch (verificationError) {\n        console.error(\"âŒ Error in cross-verification:\", verificationError);\n        // Continue with original response if verification fails\n      }\n\n      // Add assistant response to session memory\n      sessionManager.addMessage(\n        currentSessionId,\n        \"assistant\",\n        assistantResponse,\n      );\n\n      const savedResponse = await storage.createChatMessage({\n        content: assistantResponse,\n        role: \"assistant\",\n        language: language || \"en\",\n      });\n\n      res.json({\n        response: assistantResponse,\n        messageId: savedResponse.id,\n        sessionId: currentSessionId,\n      });\n    } catch (error) {\n      console.error(\"Error in ask endpoint:\", error);\n      try {\n        const fallbackResponse = await storage.createChatMessage({\n          content:\n            \"I'm experiencing some technical difficulties, but I'm here to help! Please try asking your question again, or contact RKSD College directly for urgent inquiries.\",\n          role: \"assistant\",\n          language: \"en\",\n        });\n        res.json({\n          response: fallbackResponse.content,\n          messageId: fallbackResponse.id,\n        });\n      } catch (fallbackError) {\n        console.error(\"Fallback also failed:\", fallbackError);\n        res.status(500).json({\n          message: \"Service temporarily unavailable. Please try again later.\",\n        });\n      }\n    }\n  });\n\n  // Text-to-Speech with three-tier fallback system\n  app.post(\"/api/tts\", async (req, res) => {\n    try {\n      const {\n        text,\n        voiceId,\n        modelId,\n        stability,\n        similarityBoost,\n        cartesiaModelId,\n        speed,\n        emotions,\n        language,\n      } = ttsSchema.parse(req.body);\n      if (!text || text.trim().length === 0) {\n        return res.status(400).json({\n          message: \"Text cannot be empty\",\n          error: \"EMPTY_TEXT\",\n        });\n      }\n\n      const cleanTextForSpeech = (text: string) => {\n        return text\n          .replace(/\\|/g, \" \")\n          .replace(/---+/g, \" \")\n          .replace(/#{1,6}\\s+/g, \"\")\n          .replace(/\\*\\*(.*?)\\*\\*/g, \"$1\")\n          .replace(/\\*(.*?)\\*/g, \"$1\")\n          .replace(/`(.*?)`/g, \"$1\")\n          .replace(/\\[(.*?)\\]\\(.*?\\)/g, \"$1\")\n          .replace(/ðŸ“Š|ðŸ“Œ|ðŸŽ“|â°|ðŸ“ž/g, \"\")\n          .replace(/\\s+/g, \" \")\n          .trim();\n      };\n\n      const detectLanguage = (text: string): \"hi\" | \"en\" => {\n        const hindiWords = [\n          \"aap\",\n          \"hai\",\n          \"hain\",\n          \"kya\",\n          \"kaise\",\n          \"kahan\",\n          \"namaste\",\n          \"dhanyawad\",\n          \"main\",\n          \"hum\",\n          \"kar\",\n          \"karo\",\n          \"karna\",\n          \"kiya\",\n          \"ghar\",\n          \"paani\",\n          \"khana\",\n          \"college\",\n          \"student\",\n          \"teacher\",\n          \"library\",\n          \"hostel\",\n          \"fees\",\n          \"exam\",\n          \"result\",\n          \"madad\",\n          \"help\",\n          \"problem\",\n          \"achha\",\n          \"bura\",\n          \"naya\",\n          \"purana\",\n          \"bada\",\n          \"chota\",\n          \"se\",\n          \"ko\",\n          \"ke\",\n          \"ki\",\n          \"ka\",\n          \"me\",\n          \"mein\",\n          \"par\",\n          \"pe\",\n          \"tak\",\n          \"aur\",\n          \"ya\",\n          \"lekin\",\n          \"agar\",\n          \"to\",\n          \"phir\",\n          \"fir\",\n          \"kyun\",\n          \"kyon\",\n          \"kab\",\n          \"kon\",\n          \"kaun\",\n          \"kitna\",\n          \"kitni\",\n          \"kitne\",\n        ];\n        const lowerText = text.toLowerCase();\n        const hindiWordCount = hindiWords.filter((word) =>\n          lowerText.includes(word),\n        ).length;\n        const totalWords = text.split(/\\s+/).length;\n        return hindiWordCount / totalWords > 0.2 ? \"hi\" : \"en\";\n      };\n\n      const cleanedText = cleanTextForSpeech(text);\n      const detectedLanguage = detectLanguage(cleanedText);\n      console.log(\n        \"âš¡ TTS: Optimized parallel synthesis for text:\",\n        cleanedText.substring(0, 50) + \"...\",\n      );\n      console.log(\"TTS: Text length:\", cleanedText.length);\n      console.log(\"TTS: Detected language:\", detectedLanguage);\n\n      // RKSD College TTS Fallback Chain: Cartesia (primary) â†’ ElevenLabs (fallback) â†’ OpenAI TTS (3rd fallback)\n      const elevenlabsApiKey = process.env.ELEVENLABS_API_KEY;\n      const cartesiaApiKey = process.env.CARTESIA_API_KEY;\n      const openaiApiKey = process.env.OPENAI_API_KEY;\n\n      // TIER 1: Try Cartesia TTS first (Primary provider for RKSD College)\n      if (cartesiaApiKey && cartesiaApiKey !== \"your_cartesia_api_key_here\") {\n        try {\n          console.log(\"âš¡ RKSD TTS: Trying Cartesia TTS (Tier 1 - Primary)...\");\n          const correctedText = applyPronunciationCorrections(cleanedText);\n          const cartesiaVoiceMapping = {\n            iWNf11sz1GrUE4ppxTOL: \"fd2ada67-c2d9-4afe-b474-6386b87d8fc3\",\n          };\n          const cartesiaVoiceId =\n            cartesiaVoiceMapping[\n              voiceId as keyof typeof cartesiaVoiceMapping\n            ] || \"fd2ada67-c2d9-4afe-b474-6386b87d8fc3\";\n          const defaultEmotions =\n            emotions && emotions.length > 0 ? emotions : [\"positivity\"];\n\n          const cartesiaRequestBody = {\n            model_id: cartesiaModelId || \"sonic-2.0\",\n            transcript: correctedText,\n            voice: {\n              mode: \"id\",\n              id: cartesiaVoiceId,\n              __experimental_controls: {\n                speed: speed || \"normal\",\n                emotion: defaultEmotions,\n              },\n            },\n            output_format: {\n              container: \"wav\",\n              encoding: \"pcm_s16le\",\n              sample_rate: 44100,\n            },\n            language: detectedLanguage,\n          };\n\n          const cartesiaResponse = await fetch(\n            \"https://api.cartesia.ai/tts/bytes\",\n            {\n              method: \"POST\",\n              headers: {\n                Authorization: `Bearer ${cartesiaApiKey}`,\n                \"Cartesia-Version\": \"2025-04-16\",\n                \"Content-Type\": \"application/json\",\n              },\n              body: JSON.stringify(cartesiaRequestBody),\n            },\n          );\n\n          if (cartesiaResponse.ok) {\n            const audioBuffer = await cartesiaResponse.arrayBuffer();\n            console.log(\n              \"âœ… RKSD TTS: Cartesia success! Audio size:\",\n              audioBuffer.byteLength,\n              \"bytes\",\n            );\n\n            res.set({\n              \"Content-Type\": \"audio/wav\",\n              \"Content-Length\": audioBuffer.byteLength.toString(),\n              \"X-TTS-Provider\": \"cartesia\",\n            });\n            return res.send(Buffer.from(audioBuffer));\n          } else {\n            throw new Error(`Cartesia failed: ${cartesiaResponse.status}`);\n          }\n        } catch (cartesiaError) {\n          console.warn(\n            \"âš ï¸ RKSD TTS: Cartesia failed, trying ElevenLabs (Tier 2)...\",\n            cartesiaError,\n          );\n\n          // TIER 2: Try ElevenLabs as fallback\n          if (elevenlabsApiKey && elevenlabsApiKey !== \"your_elevenlabs_api_key_here\") {\n            try {\n              console.log(\"âš¡ RKSD TTS: Trying ElevenLabs TTS (Tier 2 - Fallback)...\");\n              \n              const requestBody = {\n                text: cleanedText,\n                model_id: modelId || \"eleven_multilingual_v2\",\n                voice_settings: {\n                  stability: stability || 0.6,\n                  similarity_boost: similarityBoost || 0.8,\n                  style: 0.3,\n                  use_speaker_boost: true\n                }\n              };\n\n              const elevenlabsResponse = await fetch(\n                `https://api.elevenlabs.io/v1/text-to-speech/${voiceId}`,\n                {\n                  method: 'POST',\n                  headers: {\n                    'Accept': 'audio/mpeg',\n                    'Content-Type': 'application/json',\n                    'xi-api-key': elevenlabsApiKey\n                  },\n                  body: JSON.stringify(requestBody)\n                }\n              );\n\n              if (elevenlabsResponse.ok) {\n                const audioBuffer = await elevenlabsResponse.arrayBuffer();\n                console.log(\n                  \"âœ… RKSD TTS: ElevenLabs fallback success! Audio size:\",\n                  audioBuffer.byteLength,\n                  \"bytes\",\n                );\n\n                res.set({\n                  \"Content-Type\": \"audio/mpeg\",\n                  \"Content-Length\": audioBuffer.byteLength.toString(),\n                  \"X-TTS-Provider\": \"elevenlabs\",\n                });\n                return res.send(Buffer.from(audioBuffer));\n              } else {\n                throw new Error(`ElevenLabs failed: ${elevenlabsResponse.status}`);\n              }\n            } catch (elevenlabsError) {\n              console.warn(\n                \"âš ï¸ RKSD TTS: ElevenLabs failed, trying OpenAI TTS (Tier 3)...\",\n                elevenlabsError,\n              );\n\n              // TIER 3: Try OpenAI TTS as final fallback\n              if (openaiApiKey && openaiApiKey !== \"your_openai_api_key_here\") {\n                try {\n                  console.log(\"âš¡ RKSD TTS: Trying OpenAI TTS (Tier 3 - Final Fallback)...\");\n                  const openai = new OpenAI({ apiKey: openaiApiKey });\n                  const mp3Response = await openai.audio.speech.create({\n                    model: \"tts-1\",\n                    voice: \"nova\",\n                    input: cleanedText,\n                    speed: 1.0,\n                  });\n                  const audioBuffer = Buffer.from(await mp3Response.arrayBuffer());\n                  console.log(\n                    \"âœ… RKSD TTS: OpenAI final fallback success! Audio size:\",\n                    audioBuffer.byteLength,\n                    \"bytes\",\n                  );\n\n                  res.set({\n                    \"Content-Type\": \"audio/mpeg\",\n                    \"Content-Length\": audioBuffer.byteLength.toString(),\n                    \"X-TTS-Provider\": \"openai\",\n                  });\n                  return res.send(audioBuffer);\n                } catch (openaiError) {\n                  console.error(\n                    \"âŒ RKSD TTS: All 3 providers failed (Cartesia, ElevenLabs, OpenAI):\",\n                    openaiError,\n                  );\n                  return res.status(503).json({\n                    message: \"Speech synthesis unavailable - all providers failed\",\n                    error: \"ALL_TTS_PROVIDERS_FAILED\",\n                  });\n                }\n              } else {\n                console.error(\"âŒ RKSD TTS: OpenAI not configured for final fallback\");\n                return res.status(503).json({\n                  message:\n                    \"Speech synthesis unavailable - Cartesia and ElevenLabs failed, OpenAI not configured\",\n                  error: \"TWO_PROVIDERS_FAILED_NO_FINAL_FALLBACK\",\n                });\n              }\n            }\n          } else {\n            console.warn(\"âš ï¸ RKSD TTS: ElevenLabs not configured, trying OpenAI TTS (Tier 3)...\");\n            \n            // TIER 3: Try OpenAI TTS if ElevenLabs not available\n            if (openaiApiKey && openaiApiKey !== \"your_openai_api_key_here\") {\n              try {\n                console.log(\"âš¡ RKSD TTS: Trying OpenAI TTS (Tier 3)...\");\n                const openai = new OpenAI({ apiKey: openaiApiKey });\n                const mp3Response = await openai.audio.speech.create({\n                  model: \"tts-1\",\n                  voice: \"nova\",\n                  input: cleanedText,\n                  speed: 1.0,\n                });\n                const audioBuffer = Buffer.from(await mp3Response.arrayBuffer());\n                console.log(\n                  \"âœ… RKSD TTS: OpenAI fallback success! Audio size:\",\n                  audioBuffer.byteLength,\n                  \"bytes\",\n                );\n\n                res.set({\n                  \"Content-Type\": \"audio/mpeg\",\n                  \"Content-Length\": audioBuffer.byteLength.toString(),\n                  \"X-TTS-Provider\": \"openai\",\n                });\n                return res.send(audioBuffer);\n              } catch (openaiError) {\n                console.error(\n                  \"âŒ RKSD TTS: Cartesia and OpenAI failed, ElevenLabs not configured:\",\n                  openaiError,\n                );\n                return res.status(503).json({\n                  message: \"Speech synthesis unavailable - Cartesia and OpenAI failed\",\n                  error: \"CARTESIA_OPENAI_FAILED\",\n                });\n              }\n            } else {\n              console.error(\"âŒ RKSD TTS: Cartesia failed, no fallback configured\");\n              return res.status(503).json({\n                message:\n                  \"Speech synthesis unavailable - Cartesia failed and no fallback configured\",\n                error: \"CARTESIA_FAILED_NO_FALLBACK\",\n              });\n            }\n          }\n        }\n      } else {\n        console.log(\"âš ï¸ RKSD TTS: Cartesia not configured, trying fallback providers...\");\n        \n        // If Cartesia not configured, try ElevenLabs\n        if (elevenlabsApiKey && elevenlabsApiKey !== \"your_elevenlabs_api_key_here\") {\n          try {\n            console.log(\"âš¡ RKSD TTS: Trying ElevenLabs TTS (Cartesia not available)...\");\n            \n            const requestBody = {\n              text: cleanedText,\n              model_id: modelId || \"eleven_multilingual_v2\",\n              voice_settings: {\n                stability: stability || 0.6,\n                similarity_boost: similarityBoost || 0.8,\n                style: 0.3,\n                use_speaker_boost: true\n              }\n            };\n\n            const elevenlabsResponse = await fetch(\n              `https://api.elevenlabs.io/v1/text-to-speech/${voiceId}`,\n              {\n                method: 'POST',\n                headers: {\n                  'Accept': 'audio/mpeg',\n                  'Content-Type': 'application/json',\n                  'xi-api-key': elevenlabsApiKey\n                },\n                body: JSON.stringify(requestBody)\n              }\n            );\n\n            if (elevenlabsResponse.ok) {\n              const audioBuffer = await elevenlabsResponse.arrayBuffer();\n              console.log(\n                \"âœ… RKSD TTS: ElevenLabs success! Audio size:\",\n                audioBuffer.byteLength,\n                \"bytes\",\n              );\n\n              res.set({\n                \"Content-Type\": \"audio/mpeg\",\n                \"Content-Length\": audioBuffer.byteLength.toString(),\n                \"X-TTS-Provider\": \"elevenlabs\",\n              });\n              return res.send(Buffer.from(audioBuffer));\n            } else {\n              throw new Error(`ElevenLabs failed: ${elevenlabsResponse.status}`);\n            }\n          } catch (elevenlabsError) {\n            console.warn(\n              \"âš ï¸ RKSD TTS: ElevenLabs failed, trying OpenAI TTS...\",\n              elevenlabsError,\n            );\n\n            // Try OpenAI as final fallback\n            if (openaiApiKey && openaiApiKey !== \"your_openai_api_key_here\") {\n              try {\n                console.log(\"âš¡ RKSD TTS: Trying OpenAI TTS (final fallback)...\");\n                const openai = new OpenAI({ apiKey: openaiApiKey });\n                const mp3Response = await openai.audio.speech.create({\n                  model: \"tts-1\",\n                  voice: \"nova\",\n                  input: cleanedText,\n                  speed: 1.0,\n                });\n                const audioBuffer = Buffer.from(await mp3Response.arrayBuffer());\n                console.log(\n                  \"âœ… RKSD TTS: OpenAI final fallback success! Audio size:\",\n                  audioBuffer.byteLength,\n                  \"bytes\",\n                );\n\n                res.set({\n                  \"Content-Type\": \"audio/mpeg\",\n                  \"Content-Length\": audioBuffer.byteLength.toString(),\n                  \"X-TTS-Provider\": \"openai\",\n                });\n                return res.send(audioBuffer);\n              } catch (openaiError) {\n                console.error(\n                  \"âŒ RKSD TTS: All providers failed:\",\n                  openaiError,\n                );\n                return res.status(503).json({\n                  message: \"Speech synthesis unavailable - all providers failed\",\n                  error: \"ALL_TTS_PROVIDERS_FAILED\",\n                });\n              }\n            }\n          }\n        }\n        \n        console.error(\"âŒ RKSD TTS: No TTS providers configured\");\n        return res.status(503).json({\n          message: \"Speech synthesis unavailable - no providers configured\",\n          error: \"NO_TTS_PROVIDERS_CONFIGURED\",\n        });\n      }\n\n      // This should never be reached due to returns above\n      console.error(\"âŒ RKSD TTS: Unexpected code path\");\n      return res.status(503).json({\n        message: \"Speech synthesis failed unexpectedly\",\n        error: \"UNEXPECTED_ERROR\",\n      });\n    } catch (error) {\n      console.error(\"Error in TTS endpoint:\", error);\n      res.status(500).json({\n        message: \"Internal server error during speech generation\",\n        error: \"SERVER_ERROR\",\n        details: error instanceof Error ? error.message : \"Unknown error\",\n      });\n    }\n  });\n\n  // Keep the old code structure to avoid breaking changes - Remove this later\n  app.post(\"/api/tts-old\", async (req, res) => {\n    try {\n      const {\n        text,\n        voiceId,\n        modelId,\n        stability,\n        similarityBoost,\n        cartesiaModelId,\n        speed,\n        emotions,\n        language,\n      } = ttsSchema.parse(req.body);\n      if (!text || text.trim().length === 0) {\n        return res.status(400).json({\n          message: \"Text cannot be empty\",\n          error: \"EMPTY_TEXT\",\n        });\n      }\n\n      const cleanTextForSpeech = (text: string) => {\n        return text\n          .replace(/\\|/g, \" \")\n          .replace(/---+/g, \" \")\n          .replace(/#{1,6}\\s+/g, \"\")\n          .replace(/\\*\\*(.*?)\\*\\*/g, \"$1\")\n          .replace(/\\*(.*?)\\*/g, \"$1\")\n          .replace(/`(.*?)`/g, \"$1\")\n          .replace(/\\[(.*?)\\]\\(.*?\\)/g, \"$1\")\n          .replace(/ðŸ“Š|ðŸ“Œ|ðŸŽ“|â°|ðŸ“ž/g, \"\")\n          .replace(/\\s+/g, \" \")\n          .trim();\n      };\n\n      const detectLanguage = (text: string): \"hi\" | \"en\" => {\n        const hindiWords = [\n          \"aap\",\n          \"hai\",\n          \"hain\",\n          \"kya\",\n          \"kaise\",\n          \"kahan\",\n          \"namaste\",\n          \"dhanyawad\",\n          \"main\",\n          \"hum\",\n          \"kar\",\n          \"karo\",\n          \"karna\",\n          \"kiya\",\n          \"ghar\",\n          \"paani\",\n          \"khana\",\n          \"college\",\n          \"student\",\n          \"teacher\",\n          \"library\",\n          \"hostel\",\n          \"fees\",\n          \"exam\",\n          \"result\",\n          \"madad\",\n          \"help\",\n          \"problem\",\n          \"achha\",\n          \"bura\",\n          \"naya\",\n          \"purana\",\n          \"bada\",\n          \"chota\",\n          \"se\",\n          \"ko\",\n          \"ke\",\n          \"ki\",\n          \"ka\",\n          \"me\",\n          \"mein\",\n          \"par\",\n          \"pe\",\n          \"tak\",\n          \"aur\",\n          \"ya\",\n          \"lekin\",\n          \"agar\",\n          \"to\",\n          \"phir\",\n          \"fir\",\n          \"kyun\",\n          \"kyon\",\n          \"kab\",\n          \"kon\",\n          \"kaun\",\n          \"kitna\",\n          \"kitni\",\n          \"kitne\",\n        ];\n        const lowerText = text.toLowerCase();\n        const hindiWordCount = hindiWords.filter((word) =>\n          lowerText.includes(word),\n        ).length;\n        const totalWords = text.split(/\\s+/).length;\n        return hindiWordCount / totalWords > 0.2 ? \"hi\" : \"en\";\n      };\n\n      const cleanedText = cleanTextForSpeech(text);\n      const detectedLanguage = detectLanguage(cleanedText);\n\n      const openaiApiKey = process.env.OPENAI_API_KEY;\n      const cartesiaApiKey = process.env.CARTESIA_API_KEY;\n\n      // Try OpenAI first, then Cartesia fallback (old logic)\n      if (openaiApiKey && openaiApiKey !== \"your_openai_api_key_here\") {\n        try {\n          const openai = new OpenAI({ apiKey: openaiApiKey });\n          const mp3Response = await openai.audio.speech.create({\n            model: \"tts-1\",\n            voice: \"ash\",\n            input: cleanedText,\n            speed: 1.0,\n          });\n          const audioBuffer = Buffer.from(await mp3Response.arrayBuffer());\n\n          res.set({\n            \"Content-Type\": \"audio/mpeg\",\n            \"Content-Length\": audioBuffer.byteLength.toString(),\n            \"X-TTS-Provider\": \"openai\",\n          });\n          return res.send(audioBuffer);\n        } catch (openaiError) {\n          console.warn(\"OpenAI failed, trying Cartesia...\", openaiError);\n\n          if (\n            cartesiaApiKey &&\n            cartesiaApiKey !== \"your_cartesia_api_key_here\"\n          ) {\n            try {\n              const correctedText = applyPronunciationCorrections(cleanedText);\n              const cartesiaVoiceMapping = {\n                iWNf11sz1GrUE4ppxTOL: \"fd2ada67-c2d9-4afe-b474-6386b87d8fc3\",\n              };\n              const cartesiaVoiceId =\n                cartesiaVoiceMapping[\n                  voiceId as keyof typeof cartesiaVoiceMapping\n                ] || \"fd2ada67-c2d9-4afe-b474-6386b87d8fc3\";\n              const defaultEmotions =\n                emotions && emotions.length > 0 ? emotions : [\"positivity\"];\n\n              const cartesiaRequestBody = {\n                model_id: cartesiaModelId || \"sonic-2.0\",\n                transcript: correctedText,\n                voice: {\n                  mode: \"id\",\n                  id: cartesiaVoiceId,\n                  __experimental_controls: {\n                    speed: speed || \"fast\",\n                    emotion: defaultEmotions,\n                  },\n                },\n                output_format: {\n                  container: \"wav\",\n                  encoding: \"pcm_s16le\",\n                  sample_rate: 44100,\n                },\n                language: detectedLanguage,\n              };\n\n              const cartesiaResponse = await fetch(\n                \"https://api.cartesia.ai/tts/bytes\",\n                {\n                  method: \"POST\",\n                  headers: {\n                    Authorization: `Bearer ${cartesiaApiKey}`,\n                    \"Cartesia-Version\": \"2025-04-16\",\n                    \"Content-Type\": \"application/json\",\n                  },\n                  body: JSON.stringify(cartesiaRequestBody),\n                },\n              );\n\n              if (!cartesiaResponse.ok) {\n                throw new Error(`Cartesia failed: ${cartesiaResponse.status}`);\n              }\n\n              const audioBuffer = await cartesiaResponse.arrayBuffer();\n\n              res.set({\n                \"Content-Type\": \"audio/wav\",\n                \"Content-Length\": audioBuffer.byteLength.toString(),\n                \"X-TTS-Provider\": \"cartesia\",\n              });\n              return res.send(Buffer.from(audioBuffer));\n            } catch (cartesiaError) {\n              return res.status(503).json({\n                message: \"Speech synthesis unavailable - both providers failed\",\n                error: \"ALL_TTS_PROVIDERS_FAILED\",\n              });\n            }\n          }\n        }\n      } else if (\n        cartesiaApiKey &&\n        cartesiaApiKey !== \"your_cartesia_api_key_here\"\n      ) {\n        try {\n          const correctedText = applyPronunciationCorrections(cleanedText);\n          const cartesiaVoiceMapping = {\n            iWNf11sz1GrUE4ppxTOL: \"fd2ada67-c2d9-4afe-b474-6386b87d8fc3\",\n          };\n          const cartesiaVoiceId =\n            cartesiaVoiceMapping[\n              voiceId as keyof typeof cartesiaVoiceMapping\n            ] || \"fd2ada67-c2d9-4afe-b474-6386b87d8fc3\";\n          const defaultEmotions =\n            emotions && emotions.length > 0 ? emotions : [\"positivity\"];\n\n          const cartesiaRequestBody = {\n            model_id: cartesiaModelId || \"sonic-2.0\",\n            transcript: correctedText,\n            voice: {\n              mode: \"id\",\n              id: cartesiaVoiceId,\n              __experimental_controls: {\n                speed: speed || \"fast\",\n                emotion: defaultEmotions,\n              },\n            },\n            output_format: {\n              container: \"wav\",\n              encoding: \"pcm_s16le\",\n              sample_rate: 44100,\n            },\n            language: detectedLanguage,\n          };\n\n          const cartesiaResponse = await fetch(\n            \"https://api.cartesia.ai/tts/bytes\",\n            {\n              method: \"POST\",\n              headers: {\n                Authorization: `Bearer ${cartesiaApiKey}`,\n                \"Cartesia-Version\": \"2025-04-16\",\n                \"Content-Type\": \"application/json\",\n              },\n              body: JSON.stringify(cartesiaRequestBody),\n            },\n          );\n\n          if (!cartesiaResponse.ok) {\n            throw new Error(`Cartesia failed: ${cartesiaResponse.status}`);\n          }\n\n          const audioBuffer = await cartesiaResponse.arrayBuffer();\n\n          res.set({\n            \"Content-Type\": \"audio/wav\",\n            \"Content-Length\": audioBuffer.byteLength.toString(),\n            \"X-TTS-Provider\": \"cartesia\",\n          });\n          return res.send(Buffer.from(audioBuffer));\n        } catch (error) {\n          console.error(\"âŒ TTS: Cartesia failed:\", error);\n          return res.status(503).json({\n            message: \"Speech synthesis unavailable - Cartesia failed\",\n            error: \"CARTESIA_FAILED\",\n          });\n        }\n      } else {\n        console.error(\"TTS: No TTS providers configured\");\n        return res.status(503).json({\n          message: \"Speech synthesis unavailable - no API keys configured\",\n          error: \"NO_TTS_PROVIDERS\",\n        });\n      }\n    } catch (error) {\n      console.error(\"Error in TTS endpoint:\", error);\n      res.status(500).json({\n        message: \"Internal server error during speech generation\",\n        error: \"SERVER_ERROR\",\n        details: error instanceof Error ? error.message : \"Unknown error\",\n      });\n    }\n  });\n\n  // Get college information\n  app.get(\"/api/college-info\", async (req, res) => {\n    try {\n      const { category, search } = req.query;\n      let collegeInfo;\n      if (search) {\n        collegeInfo = await storage.searchCollegeInfo(search as string);\n      } else if (category) {\n        collegeInfo = await storage.getCollegeInfoByCategory(\n          category as string,\n        );\n      } else {\n        collegeInfo = await storage.getCollegeInfo();\n      }\n      res.json(collegeInfo);\n    } catch (error) {\n      console.error(\"Error fetching college info:\", error);\n      res.status(500).json({ message: \"Failed to fetch college information\" });\n    }\n  });\n\n  // Admin: Login\n  app.post(\"/api/admin/login\", loginAdmin);\n\n  // Admin: Get college basic info from Supabase\n  app.get(\"/api/admin/college-info\", requireAdminAuth, async (req, res) => {\n    try {\n      const { data, error } = await supabase\n        .from(\"college_settings\")\n        .select(\"*\")\n        .eq(\"key\", \"college_basic_info\")\n        .single();\n\n      if (error && error.code !== \"PGRST116\") throw error;\n\n      const collegeInfo = data?.value || {};\n      res.json({ college: collegeInfo });\n    } catch (error: any) {\n      console.error(\"Error fetching college data:\", error);\n      res.status(500).json({ message: \"Failed to fetch college data\" });\n    }\n  });\n\n  // Admin: Update college basic info in Supabase\n  app.post(\"/api/admin/college-info\", requireAdminAuth, async (req, res) => {\n    try {\n      const collegeInfo = {\n        name: req.body.name,\n        established_year: req.body.established_year\n          ? parseInt(req.body.established_year)\n          : null,\n        motto: req.body.motto,\n        principal: req.body.principal,\n        vice_principal: req.body.vice_principal,\n        registrar: req.body.registrar,\n        address: req.body.address,\n        phone: req.body.phone,\n        email: {\n          college_email: req.body.email,\n        },\n        website: req.body.website,\n        affiliation: req.body.affiliation,\n        student_strength_approx: req.body.student_strength\n          ? parseInt(req.body.student_strength)\n          : null,\n        faculty_strength_approx: req.body.faculty_strength\n          ? parseInt(req.body.faculty_strength)\n          : null,\n      };\n\n      const { error } = await supabase.from(\"college_settings\").upsert(\n        {\n          key: \"college_basic_info\",\n          value: collegeInfo,\n        },\n        {\n          onConflict: \"key\",\n        },\n      );\n\n      if (error) throw error;\n      res.json({\n        success: true,\n        message: \"College information updated successfully\",\n      });\n    } catch (error: any) {\n      console.error(\"Error updating college data:\", error);\n      res.status(500).json({ message: \"Failed to update college data\" });\n    }\n  });\n\n  // Admin: Get all college settings\n  app.get(\"/api/admin/college-settings\", requireAdminAuth, async (req, res) => {\n    try {\n      const { data, error } = await supabase\n        .from(\"college_settings\")\n        .select(\"*\")\n        .neq(\"key\", \"college_basic_info\")\n        .order(\"updated_at\", { ascending: false });\n\n      if (error) throw error;\n      res.json({ settings: data || [] });\n    } catch (error: any) {\n      console.error(\"Error fetching college settings:\", error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Admin: Create college setting\n  app.post(\n    \"/api/admin/college-settings\",\n    requireAdminAuth,\n    async (req, res) => {\n      try {\n        const { key, title, content, category } = req.body;\n\n        const { data, error } = await supabase\n          .from(\"college_settings\")\n          .insert({\n            key: key || `setting_${Date.now()}`,\n            value: { title, content, category },\n          })\n          .select()\n          .single();\n\n        if (error) throw error;\n        res.json({ setting: data });\n      } catch (error: any) {\n        console.error(\"Error creating college setting:\", error);\n        res.status(500).json({ message: error.message });\n      }\n    },\n  );\n\n  // Admin: Update college setting\n  app.put(\n    \"/api/admin/college-settings/:id\",\n    requireAdminAuth,\n    async (req, res) => {\n      try {\n        const { id } = req.params;\n        const { title, content, category } = req.body;\n\n        const { data, error } = await supabase\n          .from(\"college_settings\")\n          .update({\n            value: { title, content, category },\n            updated_at: new Date().toISOString(),\n          })\n          .eq(\"id\", id)\n          .select()\n          .single();\n\n        if (error) throw error;\n        res.json({ setting: data });\n      } catch (error: any) {\n        console.error(\"Error updating college setting:\", error);\n        res.status(500).json({ message: error.message });\n      }\n    },\n  );\n\n  // Admin: Delete college setting\n  app.delete(\n    \"/api/admin/college-settings/:id\",\n    requireAdminAuth,\n    async (req, res) => {\n      try {\n        const { id } = req.params;\n\n        const { error } = await supabase\n          .from(\"college_settings\")\n          .delete()\n          .eq(\"id\", id);\n\n        if (error) throw error;\n        res.json({ success: true });\n      } catch (error: any) {\n        console.error(\"Error deleting college setting:\", error);\n        res.status(500).json({ message: error.message });\n      }\n    },\n  );\n\n  // Admin: Get classes data JSON\n  app.get(\"/api/admin/classes\", requireAdminAuth, async (req, res) => {\n    try {\n      const data = await storage.getClassesDataJSON();\n      res.json(data);\n    } catch (error) {\n      console.error(\"Error fetching classes data:\", error);\n      res.status(500).json({ message: \"Failed to fetch classes data\" });\n    }\n  });\n\n  // Admin: Update classes data JSON\n  app.post(\"/api/admin/classes\", requireAdminAuth, async (req, res) => {\n    try {\n      await storage.updateClassesDataJSON(req.body);\n      res.json({ success: true, message: \"Classes data updated successfully\" });\n    } catch (error) {\n      console.error(\"Error updating classes data:\", error);\n      res.status(500).json({ message: \"Failed to update classes data\" });\n    }\n  });\n\n  // Register new routes\n  registerAdminRoutes(app);\n  registerHeadAdminRoutes(app);\n  registerDepartmentRoutes(app);\n\n  // Check Supabase connection on startup\n  checkSupabaseConnection().then((connected) => {\n    if (connected) {\n      console.log(\"âœ… Supabase is ready for use\");\n    } else {\n      console.log(\n        \"âš ï¸ Please run the SQL schema in Supabase (see SUPABASE_SETUP.md)\",\n      );\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":94523},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/index.css":{"content":"@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');\n\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --background: hsl(0 0% 100%);\n  --foreground: hsl(210 25% 7.8431%);\n  --card: hsl(180 6.6667% 97.0588%);\n  --card-foreground: hsl(210 25% 7.8431%);\n  --popover: hsl(0 0% 100%);\n  --popover-foreground: hsl(210 25% 7.8431%);\n  --primary: hsl(203.8863 88.2845% 53.1373%);\n  --primary-foreground: hsl(0 0% 100%);\n  --secondary: hsl(210 25% 7.8431%);\n  --secondary-foreground: hsl(0 0% 100%);\n  --muted: hsl(240 1.9608% 90%);\n  --muted-foreground: hsl(210 25% 7.8431%);\n  --accent: hsl(211.5789 51.3514% 92.7451%);\n  --accent-foreground: hsl(203.8863 88.2845% 53.1373%);\n  --destructive: hsl(356.3033 90.5579% 54.3137%);\n  --destructive-foreground: hsl(0 0% 100%);\n  --border: hsl(201.4286 30.4348% 90.9804%);\n  --input: hsl(200 23.0769% 97.4510%);\n  --ring: hsl(202.8169 89.1213% 53.1373%);\n  --chart-1: hsl(203.8863 88.2845% 53.1373%);\n  --chart-2: hsl(159.7826 100% 36.0784%);\n  --chart-3: hsl(42.0290 92.8251% 56.2745%);\n  --chart-4: hsl(147.1429 78.5047% 41.9608%);\n  --chart-5: hsl(341.4894 75.2000% 50.9804%);\n  --sidebar: hsl(180 6.6667% 97.0588%);\n  --sidebar-foreground: hsl(210 25% 7.8431%);\n  --sidebar-primary: hsl(203.8863 88.2845% 53.1373%);\n  --sidebar-primary-foreground: hsl(0 0% 100%);\n  --sidebar-accent: hsl(211.5789 51.3514% 92.7451%);\n  --sidebar-accent-foreground: hsl(203.8863 88.2845% 53.1373%);\n  --sidebar-border: hsl(205.0000 25.0000% 90.5882%);\n  --sidebar-ring: hsl(202.8169 89.1213% 53.1373%);\n  --font-sans: Inter, system-ui, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: 1.3rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 1px 2px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 1px 2px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 2px 4px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 4px 6px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 8px 10px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n  \n  /* Voice Assistant Colors - Enhanced Theme */\n  --mint-bg: hsl(220 60% 99%);\n  --mint-from: hsl(220 60% 96%);\n  --mint-to: hsl(240 60% 98%);\n  --teal-primary: hsl(166 92% 51%);\n  --teal-secondary: hsl(178 89% 62%);\n  --slate-text: hsl(220 20% 8%);\n  --slate-muted: hsl(215 20% 44%);\n  \n  /* RKSD College Custom Colors */\n  --rksd-blue: hsl(234 89% 52%);\n  --rksd-light: hsl(234 89% 62%);\n}\n\n.dark {\n  --background: hsl(0 0% 0%);\n  --foreground: hsl(200 6.6667% 91.1765%);\n  --card: hsl(228 9.8039% 10%);\n  --card-foreground: hsl(0 0% 85.0980%);\n  --popover: hsl(0 0% 0%);\n  --popover-foreground: hsl(200 6.6667% 91.1765%);\n  --primary: hsl(203.7736 87.6033% 52.5490%);\n  --primary-foreground: hsl(0 0% 100%);\n  --secondary: hsl(195.0000 15.3846% 94.9020%);\n  --secondary-foreground: hsl(210 25% 7.8431%);\n  --muted: hsl(0 0% 9.4118%);\n  --muted-foreground: hsl(210 3.3898% 46.2745%);\n  --accent: hsl(205.7143 70% 7.8431%);\n  --accent-foreground: hsl(203.7736 87.6033% 52.5490%);\n  --destructive: hsl(356.3033 90.5579% 54.3137%);\n  --destructive-foreground: hsl(0 0% 100%);\n  --border: hsl(210 5.2632% 14.9020%);\n  --input: hsl(207.6923 27.6596% 18.4314%);\n  --ring: hsl(202.8169 89.1213% 53.1373%);\n  --chart-1: hsl(203.8863 88.2845% 53.1373%);\n  --chart-2: hsl(159.7826 100% 36.0784%);\n  --chart-3: hsl(42.0290 92.8251% 56.2745%);\n  --chart-4: hsl(147.1429 78.5047% 41.9608%);\n  --chart-5: hsl(341.4894 75.2000% 50.9804%);\n  --sidebar: hsl(228 9.8039% 10%);\n  --sidebar-foreground: hsl(0 0% 85.0980%);\n  --sidebar-primary: hsl(202.8169 89.1213% 53.1373%);\n  --sidebar-primary-foreground: hsl(0 0% 100%);\n  --sidebar-accent: hsl(205.7143 70% 7.8431%);\n  --sidebar-accent-foreground: hsl(203.7736 87.6033% 52.5490%);\n  --sidebar-border: hsl(205.7143 15.7895% 26.0784%);\n  --sidebar-ring: hsl(202.8169 89.1213% 53.1373%);\n  --font-sans: Inter, system-ui, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: 1.3rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 1px 2px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 1px 2px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 2px 4px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 4px 6px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 8px 10px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  \n  /* RKSD College Custom Colors for Dark Mode */\n  --rksd-blue: hsl(234 89% 58%);\n  --rksd-light: hsl(234 89% 68%);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-inter antialiased;\n    background: linear-gradient(135deg, hsl(220 60% 99%) 0%, hsl(230 60% 97%) 30%, hsl(240 60% 98%) 70%, hsl(250 60% 99%) 100%);\n    min-height: 100vh;\n    overflow-x: hidden;\n  }\n  \n  .gradient-background {\n    background: linear-gradient(135deg, \n      hsl(259 100% 85%) 0%, \n      hsl(243 100% 85%) 30%, \n      hsl(310 100% 90%) 70%, \n      hsl(289 100% 92%) 100%);\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .gradient-background::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: \n      radial-gradient(circle at 20% 20%, hsla(259, 100%, 90%, 0.4) 0%, transparent 50%),\n      radial-gradient(circle at 80% 80%, hsla(310, 100%, 90%, 0.4) 0%, transparent 50%),\n      radial-gradient(circle at 40% 60%, hsla(243, 100%, 90%, 0.3) 0%, transparent 50%);\n    pointer-events: none;\n  }\n}\n\n@layer utilities {\n  .bg-rksd-blue {\n    background-color: var(--rksd-blue);\n  }\n  \n  .bg-rksd-light {\n    background-color: var(--rksd-light);\n  }\n  \n  .text-rksd-blue {\n    color: var(--rksd-blue);\n  }\n  \n  .text-rksd-light {\n    color: var(--rksd-light);\n  }\n  \n  .border-rksd-blue {\n    border-color: var(--rksd-blue);\n  }\n  \n  .hover\\:bg-rksd-blue:hover {\n    background-color: var(--rksd-blue);\n  }\n  \n  .hover\\:text-rksd-blue:hover {\n    color: var(--rksd-blue);\n  }\n  \n  .phone-mockup {\n    background: rgba(255, 255, 255, 0.2);\n    backdrop-filter: blur(20px);\n    border: 1px solid rgba(255, 255, 255, 0.3);\n    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n  }\n  \n  .glass-card {\n    background: rgba(255, 255, 255, 0.3);\n    backdrop-filter: blur(16px);\n    border: 1px solid rgba(255, 255, 255, 0.4);\n    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);\n  }\n  \n  /* Voice Assistant Specific Styles */\n  .va-card {\n    background: rgba(255, 255, 255, 0.8);\n    backdrop-filter: blur(10px);\n    border: 1px solid rgba(255, 255, 255, 0.3);\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    border-radius: 16px;\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);\n  }\n  \n  .va-card:hover {\n    background: rgba(255, 255, 255, 0.95);\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);\n  }\n  \n  .va-response-card {\n    background: rgba(255, 255, 255, 0.4);\n    backdrop-filter: blur(16px);\n    border: 1px solid rgba(255, 255, 255, 0.5);\n    border-radius: 20px;\n    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12);\n  }\n  \n  .va-blob {\n    background: linear-gradient(45deg, var(--teal-primary), var(--teal-secondary));\n    border-radius: 50%;\n    filter: blur(8px);\n    opacity: 0.6;\n  }\n  \n  .face-animated {\n    transition: all 0.3s ease-in-out;\n  }\n  \n  .face-listening {\n    animation: pulse 2s infinite;\n  }\n  \n  .face-speaking {\n    animation: speak 0.8s ease-in-out infinite;\n  }\n  \n  .face-typing {\n    animation: bounce 1s ease-in-out infinite;\n  }\n  \n  @keyframes pulse {\n    0%, 100% { transform: scale(1); }\n    50% { transform: scale(1.05); }\n  }\n  \n  @keyframes speak {\n    0%, 100% { transform: scale(1) rotate(0deg); }\n    25% { transform: scale(1.02) rotate(-1deg); }\n    75% { transform: scale(1.02) rotate(1deg); }\n  }\n  \n  @keyframes bounce {\n    0%, 100% { transform: translateY(0); }\n    50% { transform: translateY(-4px); }\n  }\n  \n  .quick-action {\n    background: rgba(255, 255, 255, 0.8);\n    backdrop-filter: blur(10px);\n    border: 1px solid rgba(255, 255, 255, 0.3);\n    transition: all 0.2s ease;\n  }\n  \n  .quick-action:hover {\n    background: rgba(255, 255, 255, 0.95);\n    transform: translateY(-2px);\n    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n  }\n\n  /* Message Animation */\n  @keyframes slideInMessage {\n    from {\n      opacity: 0;\n      transform: translateY(15px) scale(0.95);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0) scale(1);\n    }\n  }\n\n  /* Professional Chat Animations */\n  @keyframes bounceIn {\n    0% {\n      opacity: 0;\n      transform: scale(0.3) translateY(-20px);\n    }\n    50% {\n      opacity: 1;\n      transform: scale(1.05) translateY(0);\n    }\n    70% {\n      transform: scale(0.95);\n    }\n    100% {\n      transform: scale(1);\n    }\n  }\n\n  @keyframes fadeInUp {\n    0% {\n      opacity: 0;\n      transform: translateY(20px) scale(0.95);\n    }\n    100% {\n      opacity: 1;\n      transform: translateY(0) scale(1);\n    }\n  }\n\n  @keyframes typewriter {\n    0% {\n      opacity: 0;\n      transform: translateX(-10px);\n    }\n    100% {\n      opacity: 1;\n      transform: translateX(0);\n    }\n  }\n\n  /* Animation Classes */\n  .animate-slide-in-message {\n    animation: slideInMessage 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;\n  }\n\n  .animate-bounce-in {\n    animation: bounceIn 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;\n    animation-delay: 0.2s;\n    opacity: 0;\n  }\n\n  .animate-fade-in-up {\n    animation: fadeInUp 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;\n    animation-delay: 0.4s;\n    opacity: 0;\n  }\n\n  .animate-typewriter {\n    animation: typewriter 0.5s ease-out forwards;\n    animation-delay: 0.8s;\n    opacity: 0;\n  }\n\n  /* Voice Assistant Orb Animations */\n  @keyframes wave {\n    0%, 100% { \n      transform: rotate(0deg) scale(1); \n      filter: hue-rotate(0deg);\n    }\n    25% { \n      transform: rotate(2deg) scale(1.02); \n      filter: hue-rotate(15deg);\n    }\n    50% { \n      transform: rotate(5deg) scale(1.05); \n      filter: hue-rotate(30deg);\n    }\n    75% { \n      transform: rotate(2deg) scale(1.02); \n      filter: hue-rotate(15deg);\n    }\n  }\n  \n  @keyframes ripple {\n    0% { \n      transform: scale(0.8); \n      opacity: 1; \n    }\n    100% { \n      transform: scale(1.4); \n      opacity: 0; \n    }\n  }\n\n  @keyframes rotate {\n    0% { \n      transform: rotate(15deg) scale(1.2); \n    }\n    100% { \n      transform: rotate(375deg) scale(1.2); \n    }\n  }\n}\n","size_bytes":11444},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, timestamp, integer } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n});\n\nexport const chatMessages = pgTable(\"chat_messages\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  content: text(\"content\").notNull(),\n  role: text(\"role\").notNull(), // 'user' or 'assistant'\n  timestamp: timestamp(\"timestamp\").defaultNow(),\n  language: text(\"language\"), // 'en' or 'hi'\n});\n\nexport const collegeInfo = pgTable(\"college_info\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  category: text(\"category\").notNull(), // 'hostel', 'department', 'contact', etc.\n  title: text(\"title\").notNull(),\n  content: text(\"content\").notNull(),\n  metadata: text(\"metadata\"), // JSON string for additional data\n});\n\nexport const collegeSettings = pgTable(\"college_settings\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  key: text(\"key\").notNull().unique(),\n  value: text(\"value\").notNull(), // JSONB stored as text\n  updated_at: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertUserSchema = createInsertSchema(users).pick({\n  username: true,\n  password: true,\n});\n\nexport const insertChatMessageSchema = createInsertSchema(chatMessages).omit({\n  id: true,\n  timestamp: true,\n});\n\nexport const insertCollegeInfoSchema = createInsertSchema(collegeInfo).omit({\n  id: true,\n});\n\nexport const insertCollegeSettingsSchema = createInsertSchema(collegeSettings).omit({\n  id: true,\n  updated_at: true,\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\nexport type ChatMessage = typeof chatMessages.$inferSelect;\nexport type InsertChatMessage = z.infer<typeof insertChatMessageSchema>;\nexport type CollegeInfo = typeof collegeInfo.$inferSelect;\nexport type InsertCollegeInfo = z.infer<typeof insertCollegeInfoSchema>;\nexport type CollegeSettings = typeof collegeSettings.$inferSelect;\nexport type InsertCollegeSettings = z.infer<typeof insertCollegeSettingsSchema>;\n","size_bytes":2292},"server/text-normalizer.ts":{"content":"/**\n * Advanced Text Normalization for ElevenLabs TTS\n * Handles numbers, years, times, acronyms, ordinals for better pronunciation\n */\n\n// Custom pronunciation mapping\nconst customPronunciations: Record<string, string> = {\n  'RKSD': 'R K S D',\n  'Kurukshetra': 'Kurukshetra',\n  'Kaithal': 'Kaithal',\n  'B.Tech': 'B Tech',\n  'B.Com': 'B Com',\n  'B.Sc': 'B Sc',\n  'M.Tech': 'M Tech',\n  'Ph.D': 'P H D',\n  'MBA': 'M B A',\n  'BCA': 'B C A',\n  'MCA': 'M C A'\n};\n\n// Number to words conversion (basic implementation for 1-100)\nfunction numberToWords(num: number): string {\n  const ones = ['', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', \n               'ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', \n               'seventeen', 'eighteen', 'nineteen'];\n  const tens = ['', '', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety'];\n\n  if (num === 0) return 'zero';\n  if (num < 0) return 'minus ' + numberToWords(-num);\n  if (num < 20) return ones[num];\n  if (num < 100) return tens[Math.floor(num / 10)] + (num % 10 ? ' ' + ones[num % 10] : '');\n  if (num < 1000) return ones[Math.floor(num / 100)] + ' hundred' + (num % 100 ? ' ' + numberToWords(num % 100) : '');\n  \n  // For larger numbers, return as string (fallback)\n  return num.toString();\n}\n\n/**\n * Convert years to proper pronunciation (extend existing logic)\n */\nexport function normalizeYears(text: string): string {\n  return text.replace(/\\b(19|20)\\d{2}\\b/g, (match) => {\n    const year = parseInt(match);\n    if (year >= 1900 && year <= 1999) {\n      const lastTwo = year - 1900;\n      if (lastTwo === 0) return 'nineteen hundred';\n      if (lastTwo < 10) return `nineteen oh ${numberToWords(lastTwo)}`;\n      return `nineteen ${numberToWords(lastTwo)}`;\n    } else if (year >= 2000 && year <= 2099) {\n      const lastTwo = year - 2000;\n      if (lastTwo === 0) return 'two thousand';\n      if (lastTwo < 10) return `two thousand ${numberToWords(lastTwo)}`;\n      return `two thousand ${numberToWords(lastTwo)}`;\n    }\n    return match;\n  });\n}\n\n/**\n * Convert times and AM/PM to proper pronunciation\n * 8:00 AM â†’ \"eight am\", 5:45 PM â†’ \"five forty five pm\"\n */\nexport function normalizeTimes(text: string): string {\n  // Convert times with minutes: 5:45 PM â†’ \"five forty five pm\"\n  text = text.replace(/\\b(\\d{1,2}):(\\d{2})\\s*([APap][Mm])\\b/g, (match, hour, minutes, ampm) => {\n    const h = parseInt(hour, 10);\n    const m = parseInt(minutes, 10);\n    const hourWord = numberToWords(h);\n    const period = ampm.toLowerCase().replace(/\\./g, '');\n    \n    // If minutes are 00, just say hour + am/pm\n    if (m === 0) {\n      return `${hourWord} ${period}`;\n    }\n    \n    // Otherwise say hour + minutes + am/pm\n    const minuteWord = numberToWords(m);\n    return `${hourWord} ${minuteWord} ${period}`;\n  });\n\n  // Convert simple times without colon: 8 AM â†’ \"eight am\"  \n  text = text.replace(/\\b(\\d{1,2})\\s*([APap][Mm])\\b/g, (match, hour, ampm) => {\n    const h = parseInt(hour, 10);\n    const hourWord = numberToWords(h);\n    const period = ampm.toLowerCase().replace(/\\./g, '');\n    \n    return `${hourWord} ${period}`;\n  });\n\n  // Convert time ranges like \"8:00 AM se 5:00 PM\" or \"8 AM to 5 PM\"\n  text = text.replace(/\\b(\\d{1,2}):?(\\d{2})?\\s*([APap][Mm])\\s*(se|to|-)\\s*(\\d{1,2}):?(\\d{2})?\\s*([APap][Mm])\\b/g, \n    (match, h1, m1, ap1, connector, h2, m2, ap2) => {\n      const hour1Word = numberToWords(parseInt(h1));\n      const hour2Word = numberToWords(parseInt(h2));\n      const period1 = ap1.toLowerCase().replace(/\\./g, '');\n      const period2 = ap2.toLowerCase().replace(/\\./g, '');\n      \n      // Handle first time\n      let time1;\n      if (m1 && parseInt(m1) !== 0) {\n        const minute1Word = numberToWords(parseInt(m1));\n        time1 = `${hour1Word} ${minute1Word} ${period1}`;\n      } else {\n        time1 = `${hour1Word} ${period1}`;\n      }\n      \n      // Handle second time\n      let time2;\n      if (m2 && parseInt(m2) !== 0) {\n        const minute2Word = numberToWords(parseInt(m2));\n        time2 = `${hour2Word} ${minute2Word} ${period2}`;\n      } else {\n        time2 = `${hour2Word} ${period2}`;\n      }\n      \n      const connectorWord = connector === 'se' ? 'se' : 'to';\n      return `${time1} ${connectorWord} ${time2}`;\n    });\n\n  return text;\n}\n\n/**\n * Convert ordinals (1st, 2nd, 3rd, etc.) to words\n */\nexport function normalizeOrdinals(text: string): string {\n  const ordinalMap: Record<string, string> = {\n    '1': 'first', '2': 'second', '3': 'third', '4': 'fourth', '5': 'fifth',\n    '6': 'sixth', '7': 'seventh', '8': 'eighth', '9': 'ninth', '10': 'tenth',\n    '11': 'eleventh', '12': 'twelfth', '13': 'thirteenth', '14': 'fourteenth', '15': 'fifteenth',\n    '16': 'sixteenth', '17': 'seventeenth', '18': 'eighteenth', '19': 'nineteenth', '20': 'twentieth',\n    '21': 'twenty first', '22': 'twenty second', '23': 'twenty third', '30': 'thirtieth'\n  };\n\n  return text.replace(/\\b(\\d+)(st|nd|rd|th)\\b/g, (match, num) => {\n    if (ordinalMap[num]) return ordinalMap[num];\n    \n    // Fallback for larger numbers\n    const numWord = numberToWords(parseInt(num, 10));\n    if (numWord !== num) return numWord + 'th';\n    \n    return match; // Keep original if conversion failed\n  });\n}\n\n/**\n * Handle acronyms (convert ALL-CAPS to spaced letters)\n */\nexport function normalizeAcronyms(text: string): string {\n  return text.replace(/\\b([A-Z]{2,6})\\b/g, (match) => {\n    // Skip common English words that are legitimately all caps\n    const exceptions = ['USA', 'UK', 'AI', 'IT', 'TV', 'OK', 'AM', 'PM'];\n    if (exceptions.includes(match)) return match;\n    \n    // Convert to spaced letters for pronunciation\n    if (match.length <= 6) return match.split('').join(' ');\n    return match;\n  });\n}\n\n/**\n * Normalize URLs for better pronunciation\n * Converts https://rksdcollege.ac.in to \"R K S D college dot a c dot i n\"\n */\nexport function normalizeURLs(text: string): string {\n  // Match URLs starting with http:// or https://\n  return text.replace(/https?:\\/\\/([a-zA-Z0-9.-]+)/g, (match, domain) => {\n    // Remove protocol and just work with domain\n    let result = '';\n    \n    // Split domain by dots\n    const parts = domain.split('.');\n    \n    for (let i = 0; i < parts.length; i++) {\n      const part = parts[i];\n      \n      // Handle special cases like \"rksdcollege\" \n      if (part.toLowerCase().includes('rksd')) {\n        result += 'R K S D ';\n        // Get the remaining part after 'rksd'\n        const remaining = part.toLowerCase().replace('rksd', '');\n        if (remaining) {\n          result += remaining + ' ';\n        }\n      } \n      // Handle other parts\n      else if (part.length <= 3) {\n        // Short parts like \"ac\", \"in\" - spell out each letter\n        result += part.split('').join(' ');\n      } else {\n        // Longer parts - say as word\n        result += part;\n      }\n      \n      // Add \"dot\" between parts (except for the last one)\n      if (i < parts.length - 1) {\n        result += ' dot ';\n      }\n    }\n    \n    return result.trim();\n  });\n}\n\n/**\n * Normalize phone numbers for better pronunciation\n * Converts +91-1746234 or +91-1746-220103 to \"plus nine one, one seven four six two three four\" or \"plus nine one, one seven four six, two two zero one zero three\"\n */\nexport function normalizePhoneNumbers(text: string): string {\n  // Match various phone number patterns:\n  // Pattern 1: +[country code]-[full number] (e.g., +91-1746234)\n  // Pattern 2: +[country code]-[area code]-[number] (e.g., +91-1746-220103)\n  // Pattern 3: Plain 10 digit numbers (e.g., 9876543210)\n  \n  // First handle international format with +\n  text = text.replace(/\\+(\\d{1,3})-(\\d{3,10})(?:-(\\d{3,7}))?/g, (match, country, middle, end) => {\n    // Convert + to \"plus\"\n    let result = 'plus ';\n    \n    // Convert each digit in country code individually\n    result += country.split('').map((digit: string) => numberToWords(parseInt(digit))).join(' ');\n    result += ', ';\n    \n    // Convert each digit in middle part individually\n    result += middle.split('').map((digit: string) => numberToWords(parseInt(digit))).join(' ');\n    \n    // If there's an end part (third group), add it\n    if (end) {\n      result += ', ';\n      result += end.split('').map((digit: string) => numberToWords(parseInt(digit))).join(' ');\n    }\n    \n    return result;\n  });\n  \n  // Handle plain 10 digit phone numbers (typically Indian mobile numbers)\n  text = text.replace(/\\b(\\d{10})\\b/g, (match) => {\n    // Split into groups for better pronunciation: 98765 43210\n    const part1 = match.substring(0, 5);\n    const part2 = match.substring(5);\n    \n    const result = part1.split('').map((digit: string) => numberToWords(parseInt(digit))).join(' ') +\n                   ', ' +\n                   part2.split('').map((digit: string) => numberToWords(parseInt(digit))).join(' ');\n    \n    return result;\n  });\n  \n  return text;\n}\n\n/**\n * Normalize email addresses for better pronunciation\n * Converts kaithalcourt@gov.in to \"kaithalcourt at the rate g, o, v dot in\"\n */\nexport function normalizeEmails(text: string): string {\n  return text.replace(/([a-zA-Z0-9._+-]+)@([a-zA-Z0-9.-]+\\.[a-zA-Z]{2,})/g, (match, localPart, domain) => {\n    // Handle the local part (before @)\n    let result = localPart;\n    \n    // Replace common separators in email addresses\n    result = result.replace(/\\./g, ' dot ');\n    result = result.replace(/_/g, ' underscore ');\n    result = result.replace(/-/g, ' dash ');\n    result = result.replace(/\\+/g, ' plus ');\n    \n    result += ' at the rate ';\n    \n    // Handle domain part (after @)\n    const domainParts = domain.split('.');\n    \n    for (let i = 0; i < domainParts.length; i++) {\n      const part = domainParts[i];\n      \n      // Spell out EVERY domain part letter by letter\n      // e.g., \"gov\" â†’ \"g, o, v\", \"court\" â†’ \"c, o, u, r, t\", \"in\" â†’ \"i, n\"\n      const letters = part.split('').join(', ');\n      result += letters;\n      \n      // Add \"dot\" between parts (except for the last one)\n      if (i < domainParts.length - 1) {\n        result += ' dot ';\n      }\n    }\n    \n    return result;\n  });\n}\n\n/**\n * Normalize numbers (basic implementation)\n */\nexport function normalizeNumbers(text: string): string {\n  // Convert standalone numbers (1-100) to words\n  return text.replace(/\\b(\\d{1,2})\\b/g, (match, num) => {\n    const n = parseInt(num, 10);\n    if (n >= 1 && n <= 100) {\n      const word = numberToWords(n);\n      if (word !== num) return word;\n    }\n    return match;\n  });\n}\n\n/**\n * Apply custom pronunciation mappings\n */\nexport function applyCustomPronunciations(text: string): string {\n  let result = text;\n  \n  for (const [original, corrected] of Object.entries(customPronunciations)) {\n    const regex = new RegExp(`\\\\b${original.replace(/\\./g, '\\\\.')}\\\\b`, 'gi');\n    result = result.replace(regex, corrected);\n  }\n  \n  return result;\n}\n\n/**\n * Main normalization function - applies all normalizations in proper order\n */\nexport function normalizeTextForTTS(text: string): string {\n  let normalized = text;\n  \n  // Step 1: Apply custom pronunciations first\n  normalized = applyCustomPronunciations(normalized);\n  \n  // Step 2: Normalize URLs (before phone numbers to avoid conflicts)\n  normalized = normalizeURLs(normalized);\n  \n  // Step 3: Normalize email addresses (before phone numbers to avoid conflicts)\n  normalized = normalizeEmails(normalized);\n  \n  // Step 4: Normalize phone numbers (before general numbers)\n  normalized = normalizePhoneNumbers(normalized);\n  \n  // Step 5: Normalize years (before general numbers)\n  normalized = normalizeYears(normalized);\n  \n  // Step 6: Normalize times and AM/PM\n  normalized = normalizeTimes(normalized);\n  \n  // Step 7: Normalize ordinals\n  normalized = normalizeOrdinals(normalized);\n  \n  // Step 8: Normalize acronyms\n  normalized = normalizeAcronyms(normalized);\n  \n  // Step 9: Normalize remaining numbers (careful not to conflict with years/times)\n  normalized = normalizeNumbers(normalized);\n  \n  // Step 10: Clean up extra whitespace\n  normalized = normalized.replace(/\\s+/g, ' ').trim();\n  \n  return normalized;\n}\n\n/**\n * Test examples for development\n */\nexport function testNormalization() {\n  const testCases = [\n    \"RKSD College was established in 1947.\",\n    \"The timing is 8:00 AM to 5:00 PM.\",\n    \"I got 1st rank in 2nd semester.\",\n    \"Contact MBA office or BCA department.\",\n    \"Classes start at 9 AM and end at 4 PM.\",\n    \"The 21st century began in 2001.\",\n    \"Call me at +91-1746-220103 for more information.\",\n    \"Visit our website https://rksdcollege.ac.in for details.\",\n    \"Send email to contact@court.gov.in or support@example.com\",\n    \"Court timing: 9:30 AM se 5:30 PM, Monday to Friday\",\n    \"Phone: 9876543210 or +91-124-4567890\"\n  ];\n  \n  console.log('=== Text Normalization Tests ===');\n  testCases.forEach((test, index) => {\n    console.log(`Test ${index + 1}:`);\n    console.log(`Original: \"${test}\"`);\n    console.log(`Normalized: \"${normalizeTextForTTS(test)}\"`);\n    console.log('');\n  });\n}\n","size_bytes":13036},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/hooks/use-voice.tsx":{"content":"import { useState, useEffect, useCallback } from \"react\";\n\n// Extend Window interface for TypeScript\ndeclare global {\n  interface Window {\n    SpeechRecognition?: new() => SpeechRecognition;\n    webkitSpeechRecognition?: new() => SpeechRecognition;\n  }\n}\n\ninterface SpeechRecognitionEvent extends Event {\n  results: SpeechRecognitionResultList;\n}\n\ninterface SpeechRecognitionErrorEvent extends Event {\n  error: string;\n}\n\ninterface SpeechRecognition extends EventTarget {\n  continuous: boolean;\n  interimResults: boolean;\n  lang: string;\n  maxAlternatives: number;\n  start(): void;\n  stop(): void;\n  onresult: ((event: SpeechRecognitionEvent) => void) | null;\n  onerror: ((event: SpeechRecognitionErrorEvent) => void) | null;\n  onend: (() => void) | null;\n}\n\ninterface UseVoiceReturn {\n  isListening: boolean;\n  transcript: string;\n  startListening: (currentText?: string) => void;\n  stopListening: () => void;\n  resetTranscript: () => void;\n  setTranscript: (value: string) => void;\n  browserSupported: boolean;\n}\n\nexport function useVoice(): UseVoiceReturn {\n  const [isListening, setIsListening] = useState(false);\n  const [transcript, setTranscript] = useState(\"\");\n  const [recognition, setRecognition] = useState<SpeechRecognition | null>(null);\n\n  const browserSupported = typeof window !== 'undefined' && \n    ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window);\n\n  useEffect(() => {\n    if (!browserSupported) return;\n\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) return;\n    \n    const recognition = new SpeechRecognition();\n\n    recognition.continuous = false;\n    recognition.interimResults = false;\n    recognition.lang = 'en-US'; // Primary language\n    recognition.maxAlternatives = 1;\n\n    recognition.onresult = (event: SpeechRecognitionEvent) => {\n      const newTranscript = event.results[0][0].transcript;\n      setTranscript(prev => prev ? `${prev} ${newTranscript}` : newTranscript);\n      setIsListening(false);\n    };\n\n    recognition.onerror = (event: SpeechRecognitionErrorEvent) => {\n      console.error('Speech recognition error:', event.error);\n      setIsListening(false);\n    };\n\n    recognition.onend = () => {\n      setIsListening(false);\n    };\n\n    setRecognition(recognition);\n\n    return () => {\n      if (recognition) {\n        recognition.stop();\n      }\n    };\n  }, [browserSupported]);\n\n  const startListening = useCallback((currentText = \"\") => {\n    if (!recognition || isListening) return;\n    \n    try {\n      setTranscript(currentText);\n      setIsListening(true);\n      recognition.start();\n    } catch (error) {\n      console.error('Error starting speech recognition:', error);\n      setIsListening(false);\n    }\n  }, [recognition, isListening]);\n\n  const stopListening = useCallback(() => {\n    if (!recognition || !isListening) return;\n    \n    recognition.stop();\n    setIsListening(false);\n  }, [recognition, isListening]);\n\n  const resetTranscript = useCallback(() => {\n    setTranscript(\"\");\n  }, []);\n\n  return {\n    isListening,\n    transcript,\n    startListening,\n    stopListening,\n    resetTranscript,\n    setTranscript,\n    browserSupported,\n  };\n}\n","size_bytes":3201},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"server/session-manager.ts":{"content":"/**\n * Session Management for Conversation Memory\n * Maintains conversation history per session with automatic cleanup\n */\n\ninterface Message {\n  role: 'user' | 'assistant' | 'system';\n  content: string;\n  timestamp: number;\n}\n\ninterface Session {\n  id: string;\n  messages: Message[];\n  lastActivity: number;\n}\n\nclass SessionManager {\n  private sessions: Map<string, Session>;\n  private readonly MAX_MESSAGES = 30;\n  private readonly SESSION_TIMEOUT = 15 * 60 * 1000; // 15 minutes in milliseconds\n  private cleanupInterval: NodeJS.Timeout | null = null;\n\n  constructor() {\n    this.sessions = new Map();\n    this.startCleanupTask();\n  }\n\n  /**\n   * Generate a new session ID\n   */\n  generateSessionId(): string {\n    return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * Get or create a session\n   */\n  getOrCreateSession(sessionId?: string): { sessionId: string; session: Session } {\n    if (sessionId && this.sessions.has(sessionId)) {\n      const session = this.sessions.get(sessionId)!;\n      session.lastActivity = Date.now();\n      return { sessionId, session };\n    }\n\n    // Create new session\n    const newSessionId = this.generateSessionId();\n    const newSession: Session = {\n      id: newSessionId,\n      messages: [],\n      lastActivity: Date.now()\n    };\n    this.sessions.set(newSessionId, newSession);\n    console.log(`Session created: ${newSessionId}`);\n    return { sessionId: newSessionId, session: newSession };\n  }\n\n  /**\n   * Add a message to session\n   */\n  addMessage(sessionId: string, role: 'user' | 'assistant', content: string): void {\n    const session = this.sessions.get(sessionId);\n    if (!session) {\n      console.warn(`Session not found: ${sessionId}`);\n      return;\n    }\n\n    session.messages.push({\n      role,\n      content,\n      timestamp: Date.now()\n    });\n\n    // Keep only last N messages\n    if (session.messages.length > this.MAX_MESSAGES) {\n      session.messages = session.messages.slice(-this.MAX_MESSAGES);\n    }\n\n    session.lastActivity = Date.now();\n  }\n\n  /**\n   * Get conversation history for Groq API\n   * Returns messages in OpenAI format\n   */\n  getConversationHistory(sessionId: string, systemPrompt: string): Array<{ role: string; content: string }> {\n    const session = this.sessions.get(sessionId);\n    if (!session) {\n      return [{ role: 'system', content: systemPrompt }];\n    }\n\n    // Start with system prompt\n    const messages: Array<{ role: string; content: string }> = [\n      { role: 'system', content: systemPrompt }\n    ];\n\n    // Add recent conversation history (last 20 messages for context)\n    const recentMessages = session.messages.slice(-20);\n    messages.push(...recentMessages.map(msg => ({\n      role: msg.role,\n      content: msg.content\n    })));\n\n    return messages;\n  }\n\n  /**\n   * Clear a specific session\n   */\n  clearSession(sessionId: string): void {\n    if (this.sessions.delete(sessionId)) {\n      console.log(`Session cleared: ${sessionId}`);\n    }\n  }\n\n  /**\n   * Clean up inactive sessions\n   */\n  private cleanupInactiveSessions(): void {\n    const now = Date.now();\n    let cleanedCount = 0;\n\n    const entries = Array.from(this.sessions.entries());\n    for (const [sessionId, session] of entries) {\n      if (now - session.lastActivity > this.SESSION_TIMEOUT) {\n        this.sessions.delete(sessionId);\n        cleanedCount++;\n      }\n    }\n\n    if (cleanedCount > 0) {\n      console.log(`Cleaned up ${cleanedCount} inactive sessions. Active sessions: ${this.sessions.size}`);\n    }\n  }\n\n  /**\n   * Start periodic cleanup task\n   */\n  private startCleanupTask(): void {\n    // Run cleanup every 5 minutes\n    this.cleanupInterval = setInterval(() => {\n      this.cleanupInactiveSessions();\n    }, 5 * 60 * 1000);\n  }\n\n  /**\n   * Stop cleanup task (for graceful shutdown)\n   */\n  stopCleanupTask(): void {\n    if (this.cleanupInterval) {\n      clearInterval(this.cleanupInterval);\n      this.cleanupInterval = null;\n    }\n  }\n\n  /**\n   * Get session stats for monitoring\n   */\n  getStats(): { totalSessions: number; sessions: Array<{ id: string; messageCount: number; lastActivity: Date }> } {\n    const sessions = Array.from(this.sessions.values()).map(session => ({\n      id: session.id,\n      messageCount: session.messages.length,\n      lastActivity: new Date(session.lastActivity)\n    }));\n\n    return {\n      totalSessions: this.sessions.size,\n      sessions\n    };\n  }\n}\n\nexport const sessionManager = new SessionManager();\n","size_bytes":4473},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/hooks/use-webrtc.ts":{"content":"import { useState, useEffect, useRef } from 'react';\n\ninterface UseWebRTCAudioSessionReturn {\n  currentVolume: number;\n  isSessionActive: boolean;\n  handleStartStopClick: () => void;\n}\n\nconst useWebRTCAudioSession = (voice: string = 'alloy'): UseWebRTCAudioSessionReturn => {\n  const [currentVolume, setCurrentVolume] = useState(0);\n  const [isSessionActive, setIsSessionActive] = useState(false);\n  const audioContextRef = useRef<AudioContext | null>(null);\n  const analyserRef = useRef<AnalyserNode | null>(null);\n  const animationFrameRef = useRef<number | null>(null);\n\n  const handleStartStopClick = () => {\n    if (isSessionActive) {\n      stopSession();\n    } else {\n      startSession();\n    }\n  };\n\n  const startSession = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      \n      audioContextRef.current = new (window.AudioContext || (window as any).webkitAudioContext)();\n      const source = audioContextRef.current.createMediaStreamSource(stream);\n      \n      analyserRef.current = audioContextRef.current.createAnalyser();\n      analyserRef.current.fftSize = 256;\n      source.connect(analyserRef.current);\n      \n      setIsSessionActive(true);\n      analyzeAudio();\n    } catch (error) {\n      console.error('Error accessing microphone:', error);\n    }\n  };\n\n  const stopSession = () => {\n    if (audioContextRef.current) {\n      audioContextRef.current.close();\n      audioContextRef.current = null;\n    }\n    \n    if (animationFrameRef.current) {\n      cancelAnimationFrame(animationFrameRef.current);\n    }\n    \n    setIsSessionActive(false);\n    setCurrentVolume(0);\n  };\n\n  const analyzeAudio = () => {\n    if (!analyserRef.current) return;\n\n    const bufferLength = analyserRef.current.frequencyBinCount;\n    const dataArray = new Uint8Array(bufferLength);\n    \n    const updateVolume = () => {\n      if (!analyserRef.current) return;\n      \n      analyserRef.current.getByteFrequencyData(dataArray);\n      \n      // Calculate average volume\n      let sum = 0;\n      for (let i = 0; i < bufferLength; i++) {\n        sum += dataArray[i];\n      }\n      const average = sum / bufferLength;\n      \n      // Normalize to 0-1 range and smooth it\n      const normalizedVolume = average / 255;\n      setCurrentVolume(normalizedVolume);\n      \n      animationFrameRef.current = requestAnimationFrame(updateVolume);\n    };\n    \n    updateVolume();\n  };\n\n  useEffect(() => {\n    return () => {\n      stopSession();\n    };\n  }, []);\n\n  return {\n    currentVolume,\n    isSessionActive,\n    handleStartStopClick,\n  };\n};\n\nexport default useWebRTCAudioSession;","size_bytes":2627},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/admin/DepartmentsSection.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Save, Building2 } from \"lucide-react\";\n\nexport function DepartmentsSection() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n        <div>\n          <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900\">Departments</h1>\n          <p className=\"text-sm sm:text-base text-gray-600 mt-1 sm:mt-2\">Manage college departments</p>\n        </div>\n        <Button className=\"w-full sm:w-auto\">\n          <Save className=\"mr-2 h-4 w-4\" />\n          Save Changes\n        </Button>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center\">\n            <Building2 className=\"mr-2 h-5 w-5\" />\n            Departments Management\n          </CardTitle>\n          <CardDescription>Coming soon - Manage Arts, Science, Commerce, Computer Science departments</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-gray-500\">Department management features will be available here.</p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":1247},"client/src/components/admin/GeneralInfoSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Save, Building2, Plus, Edit, Trash2, Info, Sparkles, ArrowLeft } from \"lucide-react\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { supabase } from \"@/lib/supabase\";\nimport { useVoice } from \"@/hooks/use-voice\";\nimport { EnhancedAIInput } from \"./EnhancedAIInput\";\nimport { EnhancedAIPreview } from \"./EnhancedAIPreview\";\nimport { SmartAIUpdatePreview } from \"./SmartAIUpdatePreview\";\n\ninterface CustomSetting {\n  id: string;\n  key: string;\n  value: {\n    title: string;\n    content: string;\n    category?: string;\n  };\n  updated_at: string;\n}\n\nexport function GeneralInfoSection() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [formData, setFormData] = useState({\n    name: \"\",\n    established_year: \"\",\n    motto: \"\",\n    principal: \"\",\n    vice_principal: \"\",\n    registrar: \"\",\n    address: \"\",\n    phone: \"\",\n    email: \"\",\n    website: \"\",\n    affiliation: \"\",\n    student_strength: \"\",\n    faculty_strength: \"\",\n  });\n\n  const [customFormData, setCustomFormData] = useState({\n    title: \"\",\n    content: \"\",\n    category: \"\",\n  });\n\n  const [editingSetting, setEditingSetting] = useState<CustomSetting | null>(null);\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\n  const [isAiMode, setIsAiMode] = useState(false);\n  const [aiPrompt, setAiPrompt] = useState(\"\");\n  const [aiGeneratedData, setAiGeneratedData] = useState<any>(null);\n  const [smartAIResponse, setSmartAIResponse] = useState<any>(null);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [currentPreviewIndex, setCurrentPreviewIndex] = useState(0);\n  const [isEditingFromPreview, setIsEditingFromPreview] = useState(false);\n  const [editingEntryIndex, setEditingEntryIndex] = useState<number | null>(null);\n\n  const token = localStorage.getItem(\"adminToken\");\n\n  const {\n    isListening,\n    transcript,\n    startListening,\n    stopListening,\n    resetTranscript,\n    setTranscript,\n    browserSupported,\n  } = useVoice();\n\n  const { data: collegeData } = useQuery<any>({\n    queryKey: [\"/api/admin/college-info\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/college-info\", {\n        headers: {\n          \"Authorization\": `Bearer ${token}`,\n        },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch data\");\n      return await res.json();\n    },\n  });\n\n  const { data: customSettingsData } = useQuery<{ settings: CustomSetting[] }>({\n    queryKey: [\"/api/admin/college-settings\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/college-settings\", {\n        headers: {\n          \"Authorization\": `Bearer ${token}`,\n        },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch settings\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    const channel = supabase\n      .channel('college-settings-changes')\n      .on(\n        'postgres_changes',\n        { event: '*', schema: 'public', table: 'college_settings' },\n        () => {\n          queryClient.invalidateQueries({ queryKey: [\"/api/admin/college-settings\"] });\n        }\n      )\n      .subscribe();\n\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, [queryClient]);\n\n  useEffect(() => {\n    if (collegeData?.college) {\n      setFormData({\n        name: collegeData.college.name || \"\",\n        established_year: collegeData.college.established_year?.toString() || \"\",\n        motto: collegeData.college.motto || \"\",\n        principal: collegeData.college.principal || \"\",\n        vice_principal: collegeData.college.vice_principal || \"\",\n        registrar: collegeData.college.registrar || \"\",\n        address: collegeData.college.address || \"\",\n        phone: collegeData.college.phone || \"\",\n        email: collegeData.college.email?.college_email || \"\",\n        website: collegeData.college.website || \"\",\n        affiliation: collegeData.college.affiliation || \"\",\n        student_strength: collegeData.college.student_strength_approx?.toString() || \"\",\n        faculty_strength: collegeData.college.faculty_strength_approx?.toString() || \"\",\n      });\n    }\n  }, [collegeData]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(\"/api/admin/college-info\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to save data\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"College information updated successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/college-info\"] });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const createCustomSettingMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(\"/api/admin/college-settings\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to create setting\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Information added successfully\",\n      });\n      \n      if (isEditingFromPreview && editingEntryIndex !== null && aiGeneratedData) {\n        const entries = aiGeneratedData.entries || [aiGeneratedData];\n        entries[editingEntryIndex] = customFormData;\n        setAiGeneratedData({ entries });\n        setIsEditingFromPreview(false);\n        setEditingEntryIndex(null);\n        setCustomFormData({ title: \"\", content: \"\", category: \"\" });\n      } else {\n        setCustomFormData({ title: \"\", content: \"\", category: \"\" });\n        setIsCreateOpen(false);\n      }\n      \n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/college-settings\"] });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateCustomSettingMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: any }) => {\n      const res = await fetch(`/api/admin/college-settings/${id}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to update setting\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Information updated successfully\",\n      });\n      setEditingSetting(null);\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/college-settings\"] });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteCustomSettingMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const res = await fetch(`/api/admin/college-settings/${id}`, {\n        method: \"DELETE\",\n        headers: {\n          \"Authorization\": `Bearer ${token}`,\n        },\n      });\n      if (!res.ok) throw new Error(\"Failed to delete setting\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Information deleted successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/college-settings\"] });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate(formData);\n  };\n\n  const handleChange = (field: string, value: string) => {\n    setFormData((prev) => ({ ...prev, [field]: value }));\n  };\n\n  const handleCreateCustomSetting = () => {\n    if (!customFormData.title || !customFormData.content) {\n      toast({\n        title: \"Error\",\n        description: \"Please fill in all required fields\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    createCustomSettingMutation.mutate(customFormData);\n  };\n\n  const handleUpdateCustomSetting = () => {\n    if (!editingSetting) return;\n    updateCustomSettingMutation.mutate({\n      id: editingSetting.id,\n      data: editingSetting.value,\n    });\n  };\n\n  useEffect(() => {\n    if (transcript && isAiMode) {\n      setAiPrompt(transcript);\n    }\n  }, [transcript, isAiMode]);\n\n  const handleGenerateAI = async () => {\n    if (!aiPrompt.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please enter a description or use voice input\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsGenerating(true);\n    try {\n      const updateKeywords = ['change', 'update', 'modify', 'kar do', 'badlo', 'edit', 'correct', 'fix'];\n      const isUpdateIntent = updateKeywords.some(keyword => \n        aiPrompt.toLowerCase().includes(keyword)\n      );\n\n      if (isUpdateIntent) {\n        const res = await fetch(\"/api/admin/ai-smart-generate\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": `Bearer ${token}`,\n          },\n          body: JSON.stringify({ \n            prompt: aiPrompt,\n            sectionType: 'general_info'\n          }),\n        });\n\n        if (!res.ok) {\n          throw new Error(\"Failed to generate information\");\n        }\n\n        const data = await res.json();\n        setSmartAIResponse(data);\n        \n        toast({\n          title: \"Success\",\n          description: data.operation === 'update' \n            ? \"Update detected! Review changes below.\" \n            : \"Information generated successfully!\",\n        });\n      } else {\n        const res = await fetch(\"/api/admin/ai-generate-info\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": `Bearer ${token}`,\n          },\n          body: JSON.stringify({ prompt: aiPrompt }),\n        });\n\n        if (!res.ok) {\n          throw new Error(\"Failed to generate information\");\n        }\n\n        const data = await res.json();\n        setAiGeneratedData(data);\n        \n        toast({\n          title: \"Success\",\n          description: \"Information generated successfully!\",\n        });\n      }\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to generate information\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  const handleConfirmAI = async () => {\n    try {\n      if (smartAIResponse && smartAIResponse.operation === 'update') {\n        // Handle UPDATE operation\n        const matchedEntry = smartAIResponse.matched_entry;\n        const changes = smartAIResponse.changes;\n        \n        if (!matchedEntry || !matchedEntry.id) {\n          throw new Error(\"No entry found to update\");\n        }\n\n        // Apply changes to the matched entry's value object\n        // The college_settings table has a JSONB 'value' field containing {title, content, category}\n        const currentValue = matchedEntry.value || {};\n        const updatedValue = { \n          title: currentValue.title || '',\n          content: currentValue.content || '',\n          category: currentValue.category || ''\n        };\n\n        // Apply all changes to the value object\n        for (const [fieldName, change] of Object.entries(changes)) {\n          if (fieldName === 'title' || fieldName === 'content' || fieldName === 'category') {\n            updatedValue[fieldName] = (change as any).new;\n          }\n        }\n\n        console.log('Updating entry:', matchedEntry.id, 'with value:', updatedValue);\n\n        // Update the entry\n        const res = await fetch(`/api/admin/college-settings/${matchedEntry.id}`, {\n          method: \"PUT\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": `Bearer ${token}`,\n          },\n          body: JSON.stringify(updatedValue),\n        });\n\n        if (!res.ok) {\n          const errorData = await res.json().catch(() => ({}));\n          throw new Error(errorData.message || \"Failed to update entry\");\n        }\n\n        // Invalidate queries to refresh data immediately\n        await queryClient.invalidateQueries({ queryKey: [\"/api/admin/college-settings\"] });\n        \n        // Wait a moment for the update to propagate\n        await new Promise(resolve => setTimeout(resolve, 500));\n\n        toast({ \n          title: \"Success\", \n          description: \"Information updated successfully! Changes are now visible.\" \n        });\n        \n        // Reset state after successful update\n        setAiPrompt(\"\");\n        setAiGeneratedData(null);\n        setSmartAIResponse(null);\n        setCurrentPreviewIndex(0);\n        setIsAiMode(false);\n        setIsCreateOpen(false);\n        resetTranscript();\n        setIsEditingFromPreview(false);\n        setEditingEntryIndex(null);\n      } else if (aiGeneratedData) {\n        // Handle CREATE flow\n        const entries = aiGeneratedData.entries || [aiGeneratedData];\n        \n        const creationPromises = entries.map(async (entry: any) => {\n          const res = await fetch(\"/api/admin/college-settings\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              \"Authorization\": `Bearer ${token}`,\n            },\n            body: JSON.stringify({\n              title: entry.title,\n              content: entry.content,\n              category: entry.category || \"\",\n            }),\n          });\n          \n          if (!res.ok) {\n            const errorData = await res.json().catch(() => ({}));\n            throw new Error(errorData.message || `Failed to create: ${entry.title}`);\n          }\n          \n          return res.json();\n        });\n\n        await Promise.all(creationPromises);\n        \n        // Invalidate queries to refresh data immediately\n        await queryClient.invalidateQueries({ queryKey: [\"/api/admin/college-settings\"] });\n        \n        // Wait a moment for the creation to propagate\n        await new Promise(resolve => setTimeout(resolve, 500));\n        \n        toast({ \n          title: \"Success\", \n          description: `${entries.length} item${entries.length > 1 ? 's' : ''} added successfully!` \n        });\n        \n        // Reset state after successful creation\n        setAiPrompt(\"\");\n        setAiGeneratedData(null);\n        setSmartAIResponse(null);\n        setCurrentPreviewIndex(0);\n        setIsAiMode(false);\n        setIsCreateOpen(false);\n        resetTranscript();\n        setIsEditingFromPreview(false);\n        setEditingEntryIndex(null);\n      }\n    } catch (error: any) {\n      console.error('Error in handleConfirmAI:', error);\n      toast({ \n        title: \"Error\", \n        description: error.message || \"Failed to process request\", \n        variant: \"destructive\" \n      });\n    }\n  };\n\n  const handleEditEntry = (entry: any, index: number) => {\n    setCustomFormData({\n      title: entry.title,\n      content: entry.content,\n      category: entry.category || \"\",\n    });\n    setIsEditingFromPreview(true);\n    setEditingEntryIndex(index);\n  };\n\n  const handleBackToPreview = () => {\n    setIsEditingFromPreview(false);\n    setEditingEntryIndex(null);\n    setCustomFormData({ title: \"\", content: \"\", category: \"\" });\n  };\n\n  const handleSaveEditedEntry = () => {\n    if (!customFormData.title || !customFormData.content) {\n      toast({\n        title: \"Error\",\n        description: \"Please fill in all required fields\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (editingEntryIndex !== null && aiGeneratedData) {\n      const entries = aiGeneratedData.entries || [aiGeneratedData];\n      entries[editingEntryIndex] = customFormData;\n      setAiGeneratedData({ entries });\n      setIsEditingFromPreview(false);\n      setEditingEntryIndex(null);\n      setCustomFormData({ title: \"\", content: \"\", category: \"\" });\n      toast({\n        title: \"Success\",\n        description: \"Entry updated successfully\",\n      });\n    }\n  };\n\n  const handleDeleteEntry = (index: number) => {\n    if (!aiGeneratedData) return;\n    \n    const entries = aiGeneratedData.entries || [aiGeneratedData];\n    const updatedEntries = entries.filter((_: any, i: number) => i !== index);\n    \n    if (updatedEntries.length === 0) {\n      setAiGeneratedData(null);\n      setCurrentPreviewIndex(0);\n      toast({\n        title: \"Info\",\n        description: \"All entries removed. You can generate new ones.\",\n      });\n    } else {\n      setAiGeneratedData({ entries: updatedEntries });\n      if (currentPreviewIndex >= updatedEntries.length) {\n        setCurrentPreviewIndex(updatedEntries.length - 1);\n      }\n      toast({\n        title: \"Success\",\n        description: \"Entry removed from preview\",\n      });\n    }\n  };\n\n  const handleToggleVoice = () => {\n    if (isListening) {\n      stopListening();\n    } else {\n      startListening(aiPrompt);\n    }\n  };\n\n  const handleClearPrompt = () => {\n    setAiPrompt(\"\");\n    resetTranscript();\n  };\n\n  const handleRegenerateAI = () => {\n    setAiGeneratedData(null);\n    setSmartAIResponse(null);\n    setCurrentPreviewIndex(0);\n  };\n\n  const handleCancelSmartAI = () => {\n    setSmartAIResponse(null);\n    setAiGeneratedData(null);\n    setAiPrompt(\"\");\n    setCurrentPreviewIndex(0);\n    resetTranscript();\n  };\n\n  const handleOpenDialog = (mode: 'manual' | 'ai') => {\n    setIsAiMode(mode === 'ai');\n    setIsCreateOpen(true);\n    setAiPrompt(\"\");\n    setAiGeneratedData(null);\n    setCurrentPreviewIndex(0);\n    setIsEditingFromPreview(false);\n    setEditingEntryIndex(null);\n    setCustomFormData({ title: \"\", content: \"\", category: \"\" });\n    resetTranscript();\n  };\n\n  const handleCloseDialog = () => {\n    setIsCreateOpen(false);\n    setIsAiMode(false);\n    setAiPrompt(\"\");\n    setAiGeneratedData(null);\n    setCurrentPreviewIndex(0);\n    setIsEditingFromPreview(false);\n    setEditingEntryIndex(null);\n    setCustomFormData({ title: \"\", content: \"\", category: \"\" });\n    resetTranscript();\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n        <div>\n          <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900\">General Information</h1>\n          <p className=\"text-sm sm:text-base text-gray-600 mt-1 sm:mt-2\">Manage college basic information and custom details</p>\n        </div>\n        <div className=\"flex flex-col sm:flex-row gap-2\">\n          <Button onClick={handleSave} disabled={saveMutation.isPending} className=\"w-full sm:w-auto\">\n            <Save className=\"mr-2 h-4 w-4\" />\n            <span className=\"sm:inline\">{saveMutation.isPending ? \"Saving...\" : \"Save Basic Info\"}</span>\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center\">\n              <Building2 className=\"mr-2 h-5 w-5\" />\n              Basic Details\n            </CardTitle>\n            <CardDescription>College fundamental information</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"name\">College Name</Label>\n              <Input\n                id=\"name\"\n                value={formData.name}\n                onChange={(e) => handleChange(\"name\", e.target.value)}\n                placeholder=\"Enter college name\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"established\">Established Year</Label>\n              <Input\n                id=\"established\"\n                type=\"number\"\n                value={formData.established_year}\n                onChange={(e) => handleChange(\"established_year\", e.target.value)}\n                placeholder=\"e.g., 1954\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"motto\">College Motto</Label>\n              <Input\n                id=\"motto\"\n                value={formData.motto}\n                onChange={(e) => handleChange(\"motto\", e.target.value)}\n                placeholder=\"e.g., Knowledge is Power\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"affiliation\">Affiliation</Label>\n              <Input\n                id=\"affiliation\"\n                value={formData.affiliation}\n                onChange={(e) => handleChange(\"affiliation\", e.target.value)}\n                placeholder=\"e.g., Kurukshetra University\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Administration</CardTitle>\n            <CardDescription>College leadership details</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"principal\">Principal Name</Label>\n              <Input\n                id=\"principal\"\n                value={formData.principal}\n                onChange={(e) => handleChange(\"principal\", e.target.value)}\n                placeholder=\"Enter principal name\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"vice_principal\">Vice Principal Name</Label>\n              <Input\n                id=\"vice_principal\"\n                value={formData.vice_principal}\n                onChange={(e) => handleChange(\"vice_principal\", e.target.value)}\n                placeholder=\"Enter vice principal name\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"registrar\">Registrar Name</Label>\n              <Input\n                id=\"registrar\"\n                value={formData.registrar}\n                onChange={(e) => handleChange(\"registrar\", e.target.value)}\n                placeholder=\"Enter registrar name\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"students\">Student Strength</Label>\n                <Input\n                  id=\"students\"\n                  type=\"number\"\n                  value={formData.student_strength}\n                  onChange={(e) => handleChange(\"student_strength\", e.target.value)}\n                  placeholder=\"e.g., 5200\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"faculty\">Faculty Strength</Label>\n                <Input\n                  id=\"faculty\"\n                  type=\"number\"\n                  value={formData.faculty_strength}\n                  onChange={(e) => handleChange(\"faculty_strength\", e.target.value)}\n                  placeholder=\"e.g., 41\"\n                />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"lg:col-span-2\">\n          <CardHeader>\n            <CardTitle>Contact Information</CardTitle>\n            <CardDescription>College contact details</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"phone\">Phone Number</Label>\n                <Input\n                  id=\"phone\"\n                  value={formData.phone}\n                  onChange={(e) => handleChange(\"phone\", e.target.value)}\n                  placeholder=\"+91-1746-222368\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"email\">Email Address</Label>\n                <Input\n                  id=\"email\"\n                  type=\"email\"\n                  value={formData.email}\n                  onChange={(e) => handleChange(\"email\", e.target.value)}\n                  placeholder=\"college@example.com\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"website\">Website URL</Label>\n                <Input\n                  id=\"website\"\n                  type=\"url\"\n                  value={formData.website}\n                  onChange={(e) => handleChange(\"website\", e.target.value)}\n                  placeholder=\"https://example.com\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"address\">Complete Address</Label>\n                <Textarea\n                  id=\"address\"\n                  value={formData.address}\n                  onChange={(e) => handleChange(\"address\", e.target.value)}\n                  placeholder=\"Enter complete address\"\n                  rows={3}\n                />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card className=\"mt-8\">\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle className=\"flex items-center\">\n                <Info className=\"mr-2 h-5 w-5\" />\n                Custom Information\n              </CardTitle>\n              <CardDescription>Add any additional college-related information for the AI assistant</CardDescription>\n            </div>\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button>\n                  <Plus className=\"mr-2 h-4 w-4\" />\n                  Add Information\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\">\n                <DropdownMenuItem onClick={() => handleOpenDialog('manual')}>\n                  <Edit className=\"mr-2 h-4 w-4\" />\n                  Manual Mode\n                </DropdownMenuItem>\n                <DropdownMenuItem onClick={() => handleOpenDialog('ai')}>\n                  <Sparkles className=\"mr-2 h-4 w-4\" />\n                  AI Mode (Smart Add)\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n\n            <Dialog open={isCreateOpen} onOpenChange={handleCloseDialog}>\n              <DialogContent className=\"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto\">\n                <DialogHeader>\n                  <DialogTitle className=\"flex items-center gap-2\">\n                    {isAiMode ? (\n                      <>\n                        <Sparkles className=\"h-5 w-5 text-purple-600\" />\n                        Smart Add Information (AI Mode)\n                      </>\n                    ) : (\n                      \"Add Custom Information\"\n                    )}\n                  </DialogTitle>\n                  <DialogDescription>\n                    {isAiMode \n                      ? \"Use AI to automatically structure and add information to your college database.\"\n                      : \"Manually add custom information about your college for the AI assistant.\"}\n                  </DialogDescription>\n                </DialogHeader>\n                <div className=\"space-y-4 mt-4\">\n                  {isAiMode ? (\n                    <>\n                      {isEditingFromPreview ? (\n                        <>\n                          <div className=\"flex items-center justify-between mb-3\">\n                            <Button\n                              variant=\"ghost\"\n                              size=\"sm\"\n                              onClick={handleBackToPreview}\n                              className=\"text-gray-600 hover:text-gray-900\"\n                            >\n                              <ArrowLeft className=\"h-4 w-4 mr-1\" />\n                              Back to Preview\n                            </Button>\n                          </div>\n                          <div className=\"space-y-3\">\n                            <div className=\"space-y-2\">\n                              <Label htmlFor=\"edit-title\">Title *</Label>\n                              <Input\n                                id=\"edit-title\"\n                                value={customFormData.title}\n                                onChange={(e) => setCustomFormData({ ...customFormData, title: e.target.value })}\n                                placeholder=\"e.g., Library Timings, Sports Facilities, etc.\"\n                              />\n                            </div>\n\n                            <div className=\"space-y-2\">\n                              <Label htmlFor=\"edit-category\">Category (Optional)</Label>\n                              <Input\n                                id=\"edit-category\"\n                                value={customFormData.category}\n                                onChange={(e) => setCustomFormData({ ...customFormData, category: e.target.value })}\n                                placeholder=\"e.g., facilities, timings, rules, etc.\"\n                              />\n                            </div>\n\n                            <div className=\"space-y-2\">\n                              <Label htmlFor=\"edit-content\">Content *</Label>\n                              <Textarea\n                                id=\"edit-content\"\n                                value={customFormData.content}\n                                onChange={(e) => setCustomFormData({ ...customFormData, content: e.target.value })}\n                                placeholder=\"Enter detailed information here.\"\n                                rows={6}\n                              />\n                            </div>\n\n                            <Button\n                              onClick={handleSaveEditedEntry}\n                              className=\"w-full\"\n                            >\n                              Save Changes\n                            </Button>\n                          </div>\n                        </>\n                      ) : !aiGeneratedData && !smartAIResponse ? (\n                        <EnhancedAIInput\n                          prompt={aiPrompt}\n                          onPromptChange={setAiPrompt}\n                          onGenerate={handleGenerateAI}\n                          isGenerating={isGenerating}\n                          isListening={isListening}\n                          onToggleVoice={handleToggleVoice}\n                          browserSupported={browserSupported}\n                          placeholder=\"Describe what you want to add or update in any language (e.g., 'library timing 9 am kar do')...\"\n                          examples={[\n                            \"Add: Library timings are 9 AM to 6 PM on weekdays\",\n                            \"Change library timing to 9 AM to 7 PM\",\n                            \"library opening time 8 am kar do\",\n                            \"Update canteen timing - close hone ka time 8 pm kro\",\n                            \"Add hostel rules and regulations\",\n                            \"sports timing change kro - 5 pm se 7 pm\"\n                          ]}\n                          sectionType=\"information entries\"\n                          onClear={handleClearPrompt}\n                        />\n                      ) : smartAIResponse ? (\n                        <SmartAIUpdatePreview\n                          operation={smartAIResponse.operation}\n                          confidence={smartAIResponse.confidence}\n                          matched_entry={smartAIResponse.matched_entry}\n                          changes={smartAIResponse.changes}\n                          entries={smartAIResponse.entries}\n                          explanation={smartAIResponse.explanation}\n                          sectionType=\"general_info\"\n                          onConfirm={handleConfirmAI}\n                          onRegenerate={handleRegenerateAI}\n                          onCancel={handleCancelSmartAI}\n                          renderPreview={(info) => (\n                            <div className=\"space-y-2\">\n                              <div>\n                                <span className=\"font-semibold text-gray-700 text-xs\">Title:</span>\n                                <p className=\"text-gray-900 text-sm\">{info.title}</p>\n                              </div>\n                              {info.category && (\n                                <div>\n                                  <span className=\"font-semibold text-gray-700 text-xs\">Category:</span>\n                                  <p className=\"text-gray-900 text-sm\">{info.category}</p>\n                                </div>\n                              )}\n                              <div>\n                                <span className=\"font-semibold text-gray-700 text-xs\">Content:</span>\n                                <p className=\"text-gray-900 text-sm whitespace-pre-wrap\">{info.content}</p>\n                              </div>\n                            </div>\n                          )}\n                        />\n                      ) : (\n                        <EnhancedAIPreview\n                            entries={aiGeneratedData.entries || [aiGeneratedData]}\n                            currentIndex={currentPreviewIndex}\n                            onIndexChange={setCurrentPreviewIndex}\n                            renderPreview={(info) => (\n                              <div className=\"space-y-3\">\n                                <div>\n                                  <span className=\"font-semibold text-gray-700 block mb-1 text-xs\">Title:</span>\n                                  <p className=\"text-gray-900 text-base\">{info.title}</p>\n                                </div>\n                                {info.category && (\n                                  <div>\n                                    <span className=\"font-semibold text-gray-700 block mb-1 text-xs\">Category:</span>\n                                    <p className=\"text-gray-900 text-sm\">{info.category}</p>\n                                  </div>\n                                )}\n                                <div className=\"pt-2 border-t\">\n                                  <span className=\"font-semibold text-gray-700 block mb-1 text-xs\">Content:</span>\n                                  <p className=\"text-gray-900 whitespace-pre-wrap text-sm leading-relaxed\">{info.content}</p>\n                                </div>\n                                {info.tags && info.tags.length > 0 && (\n                                  <div className=\"pt-2 border-t\">\n                                    <span className=\"font-semibold text-gray-700 block mb-1 text-xs\">Tags:</span>\n                                    <div className=\"flex flex-wrap gap-1.5\">\n                                      {info.tags.map((tag: string, idx: number) => (\n                                        <span key={idx} className=\"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full font-medium\">\n                                          {tag}\n                                        </span>\n                                      ))}\n                                    </div>\n                                  </div>\n                                )}\n                              </div>\n                            )}\n                            onConfirmAll={handleConfirmAI}\n                            onRegenerate={handleRegenerateAI}\n                            onEditEntry={handleEditEntry}\n                            onDeleteEntry={handleDeleteEntry}\n                            confirmButtonText={`Add ${(aiGeneratedData.entries || [aiGeneratedData]).length} Item${(aiGeneratedData.entries || [aiGeneratedData]).length > 1 ? 's' : ''}`}\n                            entryTypeName=\"Information\"\n                          />\n                      )}\n                    </>\n                  ) : (\n                    <>\n                      <div className=\"space-y-3\">\n                        <div className=\"space-y-2\">\n                          <Label htmlFor=\"custom-title\">Title *</Label>\n                          <Input\n                            id=\"custom-title\"\n                            value={customFormData.title}\n                            onChange={(e) => setCustomFormData({ ...customFormData, title: e.target.value })}\n                            placeholder=\"e.g., Library Timings, Sports Facilities, etc.\"\n                          />\n                        </div>\n\n                        <div className=\"space-y-2\">\n                          <Label htmlFor=\"custom-category\">Category (Optional)</Label>\n                          <Input\n                            id=\"custom-category\"\n                            value={customFormData.category}\n                            onChange={(e) => setCustomFormData({ ...customFormData, category: e.target.value })}\n                            placeholder=\"e.g., facilities, timings, rules, etc.\"\n                          />\n                        </div>\n\n                        <div className=\"space-y-2\">\n                          <Label htmlFor=\"custom-content\">Content *</Label>\n                          <Textarea\n                            id=\"custom-content\"\n                            value={customFormData.content}\n                            onChange={(e) => setCustomFormData({ ...customFormData, content: e.target.value })}\n                            placeholder=\"Enter detailed information here. The AI assistant will use this to answer student questions.\"\n                            rows={6}\n                          />\n                        </div>\n\n                        <Button\n                          onClick={handleCreateCustomSetting}\n                          disabled={createCustomSettingMutation.isPending}\n                          className=\"w-full\"\n                        >\n                          {createCustomSettingMutation.isPending ? \"Adding...\" : \"Add Information\"}\n                        </Button>\n                      </div>\n                    </>\n                  )}\n                </div>\n              </DialogContent>\n            </Dialog>\n          </div>\n        </CardHeader>\n        <CardContent className=\"p-0\">\n          {customSettingsData?.settings && customSettingsData.settings.length > 0 ? (\n            <>\n              {/* Desktop Table View */}\n              <div className=\"hidden lg:block overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-gray-50 border-b border-gray-200\">\n                    <tr>\n                      <th className=\"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider\">\n                        Title & Category\n                      </th>\n                      <th className=\"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider\">\n                        Content\n                      </th>\n                      <th className=\"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider\">\n                        Updated\n                      </th>\n                      <th className=\"px-6 py-4 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider\">\n                        Actions\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {customSettingsData.settings.map((setting) => (\n                      <tr key={setting.id} className=\"hover:bg-gray-50 transition-colors\">\n                        <td className=\"px-6 py-4\">\n                          <div className=\"space-y-1\">\n                            <p className=\"text-sm font-semibold text-gray-900\">{setting.value.title}</p>\n                            {setting.value.category && (\n                              <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800\">\n                                {setting.value.category}\n                              </span>\n                            )}\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          <p className=\"text-sm text-gray-700 whitespace-pre-wrap line-clamp-3 max-w-xl\">\n                            {setting.value.content}\n                          </p>\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          <p className=\"text-xs text-gray-500\">\n                            {new Date(setting.updated_at).toLocaleDateString('en-US', { \n                              year: 'numeric', \n                              month: 'short', \n                              day: 'numeric' \n                            })}\n                          </p>\n                        </td>\n                        <td className=\"px-6 py-4 text-right\">\n                          <div className=\"flex justify-end gap-2\">\n                            <Dialog>\n                              <DialogTrigger asChild>\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"outline\"\n                                  onClick={() => setEditingSetting(setting)}\n                                  className=\"hover:bg-blue-50 hover:border-blue-500 hover:text-blue-700\"\n                                >\n                                  <Edit className=\"h-4 w-4 mr-1\" />\n                                  Edit\n                                </Button>\n                              </DialogTrigger>\n                              <DialogContent className=\"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto\">\n                                <DialogHeader>\n                                  <DialogTitle>Edit Information</DialogTitle>\n                                  <DialogDescription>\n                                    Update the details of this information entry.\n                                  </DialogDescription>\n                                </DialogHeader>\n                                {editingSetting && editingSetting.id === setting.id && (\n                                  <div className=\"space-y-4 mt-4\">\n                                    <div className=\"space-y-2\">\n                                      <Label>Title *</Label>\n                                      <Input\n                                        value={editingSetting.value.title}\n                                        onChange={(e) =>\n                                          setEditingSetting({\n                                            ...editingSetting,\n                                            value: { ...editingSetting.value, title: e.target.value },\n                                          })\n                                        }\n                                      />\n                                    </div>\n\n                                    <div className=\"space-y-2\">\n                                      <Label>Category (Optional)</Label>\n                                      <Input\n                                        value={editingSetting.value.category || \"\"}\n                                        onChange={(e) =>\n                                          setEditingSetting({\n                                            ...editingSetting,\n                                            value: { ...editingSetting.value, category: e.target.value },\n                                          })\n                                        }\n                                      />\n                                    </div>\n\n                                    <div className=\"space-y-2\">\n                                      <Label>Content *</Label>\n                                      <Textarea\n                                        value={editingSetting.value.content}\n                                        onChange={(e) =>\n                                          setEditingSetting({\n                                            ...editingSetting,\n                                            value: { ...editingSetting.value, content: e.target.value },\n                                          })\n                                        }\n                                        rows={6}\n                                      />\n                                    </div>\n\n                                    <Button\n                                      onClick={handleUpdateCustomSetting}\n                                      disabled={updateCustomSettingMutation.isPending}\n                                      className=\"w-full\"\n                                    >\n                                      {updateCustomSettingMutation.isPending ? \"Updating...\" : \"Update Information\"}\n                                    </Button>\n                                  </div>\n                                )}\n                              </DialogContent>\n                            </Dialog>\n\n                            <Button\n                              size=\"sm\"\n                              variant=\"outline\"\n                              onClick={() => {\n                                if (confirm(\"Are you sure you want to delete this information?\")) {\n                                  deleteCustomSettingMutation.mutate(setting.id);\n                                }\n                              }}\n                              className=\"hover:bg-red-50 hover:border-red-500 hover:text-red-700\"\n                            >\n                              <Trash2 className=\"h-4 w-4 mr-1\" />\n                              Delete\n                            </Button>\n                          </div>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n\n              {/* Mobile Card View */}\n              <div className=\"lg:hidden p-4 space-y-4\">\n                {customSettingsData.settings.map((setting) => (\n                  <Card key={setting.id} className=\"overflow-hidden hover:shadow-md transition-shadow\">\n                    <CardHeader className=\"bg-gradient-to-r from-purple-50 to-pink-50 pb-3\">\n                      <div className=\"flex items-start justify-between gap-3\">\n                        <div className=\"flex-1 min-w-0\">\n                          <CardTitle className=\"text-base sm:text-lg text-gray-900 break-words\">\n                            {setting.value.title}\n                          </CardTitle>\n                          {setting.value.category && (\n                            <CardDescription className=\"mt-2\">\n                              <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-600 text-white\">\n                                {setting.value.category}\n                              </span>\n                            </CardDescription>\n                          )}\n                        </div>\n                      </div>\n                    </CardHeader>\n                    <CardContent className=\"pt-4 space-y-3\">\n                      <div className=\"space-y-2\">\n                        <p className=\"text-sm text-gray-700 whitespace-pre-wrap\">\n                          {setting.value.content}\n                        </p>\n                      </div>\n\n                      <div className=\"pt-2 border-t border-gray-100\">\n                        <p className=\"text-xs text-gray-500\">\n                          Updated: {new Date(setting.updated_at).toLocaleDateString('en-US', { \n                            year: 'numeric', \n                            month: 'short', \n                            day: 'numeric' \n                          })}\n                        </p>\n                      </div>\n\n                      <div className=\"flex gap-2 pt-2\">\n                        <Dialog>\n                          <DialogTrigger asChild>\n                            <Button\n                              size=\"sm\"\n                              variant=\"outline\"\n                              onClick={() => setEditingSetting(setting)}\n                              className=\"flex-1 hover:bg-blue-50 hover:border-blue-500 hover:text-blue-700 h-9\"\n                            >\n                              <Edit className=\"h-4 w-4 mr-1.5\" />\n                              Edit\n                            </Button>\n                          </DialogTrigger>\n                          <DialogContent className=\"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto\">\n                            <DialogHeader>\n                              <DialogTitle>Edit Information</DialogTitle>\n                              <DialogDescription>\n                                Update the details of this information entry.\n                              </DialogDescription>\n                            </DialogHeader>\n                            {editingSetting && editingSetting.id === setting.id && (\n                              <div className=\"space-y-4 mt-4\">\n                                <div className=\"space-y-2\">\n                                  <Label>Title *</Label>\n                                  <Input\n                                    value={editingSetting.value.title}\n                                    onChange={(e) =>\n                                      setEditingSetting({\n                                        ...editingSetting,\n                                        value: { ...editingSetting.value, title: e.target.value },\n                                      })\n                                    }\n                                  />\n                                </div>\n\n                                <div className=\"space-y-2\">\n                                  <Label>Category (Optional)</Label>\n                                  <Input\n                                    value={editingSetting.value.category || \"\"}\n                                    onChange={(e) =>\n                                      setEditingSetting({\n                                        ...editingSetting,\n                                        value: { ...editingSetting.value, category: e.target.value },\n                                      })\n                                    }\n                                  />\n                                </div>\n\n                                <div className=\"space-y-2\">\n                                  <Label>Content *</Label>\n                                  <Textarea\n                                    value={editingSetting.value.content}\n                                    onChange={(e) =>\n                                      setEditingSetting({\n                                        ...editingSetting,\n                                        value: { ...editingSetting.value, content: e.target.value },\n                                      })\n                                    }\n                                    rows={6}\n                                  />\n                                </div>\n\n                                <Button\n                                  onClick={handleUpdateCustomSetting}\n                                  disabled={updateCustomSettingMutation.isPending}\n                                  className=\"w-full\"\n                                >\n                                  {updateCustomSettingMutation.isPending ? \"Updating...\" : \"Update Information\"}\n                                </Button>\n                              </div>\n                            )}\n                          </DialogContent>\n                        </Dialog>\n\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => {\n                            if (confirm(\"Are you sure you want to delete this information?\")) {\n                              deleteCustomSettingMutation.mutate(setting.id);\n                            }\n                          }}\n                          className=\"flex-1 hover:bg-red-50 hover:border-red-500 hover:text-red-700 h-9\"\n                        >\n                          <Trash2 className=\"h-4 w-4 mr-1.5\" />\n                          Delete\n                        </Button>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            </>\n          ) : (\n            <div className=\"text-center py-12 px-4 text-gray-500\">\n              <Info className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n              <p className=\"font-medium text-base sm:text-lg mb-2\">No custom information added yet</p>\n              <p className=\"text-sm\">Click \"Add Information\" to add college-related details for the AI assistant</p>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":54192},"client/src/components/admin/AdmissionsSection.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Save, Users } from \"lucide-react\";\n\nexport function AdmissionsSection() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n        <div>\n          <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900\">Admissions & Courses</h1>\n          <p className=\"text-sm sm:text-base text-gray-600 mt-1 sm:mt-2\">Manage fee structure, eligibility, and courses</p>\n        </div>\n        <Button className=\"w-full sm:w-auto\">\n          <Save className=\"mr-2 h-4 w-4\" />\n          Save Changes\n        </Button>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center\">\n            <Users className=\"mr-2 h-5 w-5\" />\n            Admissions Management\n          </CardTitle>\n          <CardDescription>Coming soon - Manage admissions and course information</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-gray-500\">Admissions management features will be available here.</p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":1246},"client/src/components/admin/FacilitiesSection.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Save, Library } from \"lucide-react\";\n\nexport function FacilitiesSection() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n        <div>\n          <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900\">Facilities</h1>\n          <p className=\"text-sm sm:text-base text-gray-600 mt-1 sm:mt-2\">Manage hostel, library, and infrastructure</p>\n        </div>\n        <Button className=\"w-full sm:w-auto\">\n          <Save className=\"mr-2 h-4 w-4\" />\n          Save Changes\n        </Button>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center\">\n            <Library className=\"mr-2 h-5 w-5\" />\n            Facilities Management\n          </CardTitle>\n          <CardDescription>Coming soon - Manage college facilities and infrastructure</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-gray-500\">Facilities management features will be available here.</p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":1240},"client/src/pages/admin.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Sheet, SheetContent, SheetTrigger } from \"@/components/ui/sheet\";\nimport { \n  Home, \n  Building2, \n  GraduationCap, \n  Calendar, \n  Trophy, \n  Library, \n  Users,\n  Menu,\n  Save,\n  Info,\n  LogOut\n} from \"lucide-react\";\nimport { GeneralInfoSection } from \"@/components/admin/GeneralInfoSection\";\nimport { DepartmentsSection } from \"@/components/admin/DepartmentsSection\";\nimport { ClassesSection } from \"@/components/admin/ClassesSection\";\nimport { EventsSection } from \"@/components/admin/EventsSection\";\nimport { FacilitiesSection } from \"@/components/admin/FacilitiesSection\";\nimport { AdmissionsSection } from \"@/components/admin/AdmissionsSection\";\n\nconst navItems = [\n  { id: \"dashboard\", label: \"Dashboard\", icon: Home },\n  { id: \"general\", label: \"General Info\", icon: Info },\n  { id: \"departments\", label: \"Departments\", icon: Building2 },\n  { id: \"classes\", label: \"Classes & Schedule\", icon: GraduationCap },\n  { id: \"events\", label: \"Events & Activities\", icon: Calendar },\n  { id: \"facilities\", label: \"Facilities\", icon: Library },\n  { id: \"admissions\", label: \"Admissions\", icon: Users },\n];\n\nexport default function AdminPanel() {\n  const [activeTab, setActiveTab] = useState(\"dashboard\");\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const [, setLocation] = useLocation();\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"adminToken\");\n    if (!token) {\n      setLocation(\"/admin/login\");\n    }\n  }, [setLocation]);\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"adminToken\");\n    setLocation(\"/admin/login\");\n  };\n\n  const NavContent = () => (\n    <div className=\"space-y-2 p-4 flex flex-col h-full\">\n      <div className=\"mb-8\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">Admin Panel</h2>\n        <p className=\"text-sm text-gray-600\">College Management System</p>\n      </div>\n      <div className=\"flex-1\">\n        {navItems.map((item) => {\n          const Icon = item.icon;\n          return (\n            <Button\n              key={item.id}\n              variant={activeTab === item.id ? \"default\" : \"ghost\"}\n              className=\"w-full justify-start mb-2\"\n              onClick={() => {\n                setActiveTab(item.id);\n                setMobileMenuOpen(false);\n              }}\n            >\n              <Icon className=\"mr-2 h-4 w-4\" />\n              {item.label}\n            </Button>\n          );\n        })}\n      </div>\n      <Button\n        variant=\"outline\"\n        className=\"w-full justify-start text-red-600 hover:text-red-700 hover:bg-red-50\"\n        onClick={handleLogout}\n      >\n        <LogOut className=\"mr-2 h-4 w-4\" />\n        Logout\n      </Button>\n    </div>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Mobile Header */}\n      <div className=\"lg:hidden fixed top-0 left-0 right-0 h-16 bg-white border-b border-gray-200 flex items-center px-4 z-50\">\n        <Sheet open={mobileMenuOpen} onOpenChange={setMobileMenuOpen}>\n          <SheetTrigger asChild>\n            <Button variant=\"ghost\" size=\"icon\">\n              <Menu className=\"h-6 w-6\" />\n            </Button>\n          </SheetTrigger>\n          <SheetContent side=\"left\" className=\"p-0 w-64\">\n            <NavContent />\n          </SheetContent>\n        </Sheet>\n        <h1 className=\"ml-4 text-lg font-semibold\">Admin Panel</h1>\n      </div>\n\n      <div className=\"flex\">\n        {/* Desktop Sidebar */}\n        <aside className=\"hidden lg:block w-64 bg-white border-r border-gray-200 fixed left-0 top-0 bottom-0\">\n          <ScrollArea className=\"h-full\">\n            <NavContent />\n          </ScrollArea>\n        </aside>\n\n        {/* Main Content */}\n        <main className=\"flex-1 lg:ml-64 mt-16 lg:mt-0 p-4 lg:p-8\">\n          <div className=\"max-w-7xl mx-auto\">\n            {activeTab === \"dashboard\" && (\n              <div className=\"space-y-6\">\n                <div>\n                  <h1 className=\"text-3xl font-bold text-gray-900\">Dashboard</h1>\n                  <p className=\"text-gray-600 mt-2\">\n                    Welcome to the College Management Admin Panel\n                  </p>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  <Card>\n                    <CardHeader className=\"pb-3\">\n                      <CardTitle className=\"text-sm font-medium text-gray-600\">\n                        Total Students\n                      </CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"text-2xl font-bold\">5,200</div>\n                      <p className=\"text-xs text-gray-500 mt-1\">Active students</p>\n                    </CardContent>\n                  </Card>\n\n                  <Card>\n                    <CardHeader className=\"pb-3\">\n                      <CardTitle className=\"text-sm font-medium text-gray-600\">\n                        Total Faculty\n                      </CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"text-2xl font-bold\">41</div>\n                      <p className=\"text-xs text-gray-500 mt-1\">Teaching staff</p>\n                    </CardContent>\n                  </Card>\n\n                  <Card>\n                    <CardHeader className=\"pb-3\">\n                      <CardTitle className=\"text-sm font-medium text-gray-600\">\n                        Total Courses\n                      </CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"text-2xl font-bold\">28</div>\n                      <p className=\"text-xs text-gray-500 mt-1\">UG & PG programs</p>\n                    </CardContent>\n                  </Card>\n                </div>\n\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Quick Actions</CardTitle>\n                    <CardDescription>\n                      Manage your college information from the sections below\n                    </CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3\">\n                      {navItems.slice(1).map((item) => {\n                        const Icon = item.icon;\n                        return (\n                          <Button\n                            key={item.id}\n                            variant=\"outline\"\n                            className=\"justify-start h-auto py-3\"\n                            onClick={() => setActiveTab(item.id)}\n                          >\n                            <Icon className=\"mr-2 h-5 w-5\" />\n                            <span>{item.label}</span>\n                          </Button>\n                        );\n                      })}\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n            )}\n\n            {activeTab === \"general\" && <GeneralInfoSection />}\n            {activeTab === \"departments\" && <DepartmentsSection />}\n            {activeTab === \"classes\" && <ClassesSection />}\n            {activeTab === \"events\" && <EventsSection />}\n            {activeTab === \"facilities\" && <FacilitiesSection />}\n            {activeTab === \"admissions\" && <AdmissionsSection />}\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}\n","size_bytes":7906},"client/src/components/admin/EventsSection.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Save, Calendar } from \"lucide-react\";\n\nexport function EventsSection() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n        <div>\n          <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900\">Events & Activities</h1>\n          <p className=\"text-sm sm:text-base text-gray-600 mt-1 sm:mt-2\">Manage sports, cultural events, NCC, and NSS</p>\n        </div>\n        <Button className=\"w-full sm:w-auto\">\n          <Save className=\"mr-2 h-4 w-4\" />\n          Save Changes\n        </Button>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center\">\n            <Calendar className=\"mr-2 h-5 w-5\" />\n            Events Management\n          </CardTitle>\n          <CardDescription>Coming soon - Manage college events and activities</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-gray-500\">Events and activities management features will be available here.</p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":1248},"client/src/components/admin/ClassesSection.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Save, GraduationCap } from \"lucide-react\";\n\nexport function ClassesSection() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n        <div>\n          <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900\">Classes & Schedule</h1>\n          <p className=\"text-sm sm:text-base text-gray-600 mt-1 sm:mt-2\">Manage class schedules and teachers</p>\n        </div>\n        <Button className=\"w-full sm:w-auto\">\n          <Save className=\"mr-2 h-4 w-4\" />\n          Save Changes\n        </Button>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center\">\n            <GraduationCap className=\"mr-2 h-5 w-5\" />\n            Schedule Management\n          </CardTitle>\n          <CardDescription>Coming soon - Manage class schedules and teacher assignments</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-gray-500\">Class schedule management features will be available here.</p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":1254},"server/admin-auth.ts":{"content":"import { Request, Response, NextFunction } from \"express\";\n\nconst ADMIN_PASSWORD = process.env.ADMIN_PASSWORD || \"admin123\";\n\nexport function requireAdminAuth(req: Request, res: Response, next: NextFunction) {\n  const authHeader = req.headers.authorization;\n  \n  if (!authHeader || !authHeader.startsWith('Bearer ')) {\n    return res.status(401).json({ \n      message: \"Unauthorized: Admin authentication required\" \n    });\n  }\n\n  const token = authHeader.substring(7);\n  \n  if (token !== ADMIN_PASSWORD) {\n    return res.status(403).json({ \n      message: \"Forbidden: Invalid admin credentials\" \n    });\n  }\n\n  next();\n}\n\nexport function loginAdmin(req: Request, res: Response) {\n  const { password } = req.body;\n  \n  if (password !== ADMIN_PASSWORD) {\n    return res.status(401).json({ \n      message: \"Invalid admin password\" \n    });\n  }\n\n  res.json({ \n    success: true, \n    token: ADMIN_PASSWORD,\n    message: \"Admin login successful\" \n  });\n}\n","size_bytes":951},"client/src/pages/admin-login.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Lock, GraduationCap } from \"lucide-react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\nexport default function AdminLogin() {\n  const [password, setPassword] = useState(\"\");\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  const loginMutation = useMutation({\n    mutationFn: async (password: string) => {\n      const res = await apiRequest(\"POST\", \"/api/admin/login\", { password });\n      return await res.json();\n    },\n    onSuccess: (data) => {\n      localStorage.setItem(\"adminToken\", data.token);\n      toast({\n        title: \"Success\",\n        description: \"Login successful\",\n      });\n      setLocation(\"/admin\");\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    loginMutation.mutate(password);\n  };\n\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardHeader className=\"space-y-1 text-center\">\n          <div className=\"flex justify-center mb-4\">\n            <div className=\"p-3 bg-blue-600 rounded-full\">\n              <GraduationCap className=\"h-8 w-8 text-white\" />\n            </div>\n          </div>\n          <CardTitle className=\"text-2xl font-bold\">Admin Panel</CardTitle>\n          <CardDescription>\n            College Management System\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Admin Password</Label>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-3 top-3 h-4 w-4 text-gray-400\" />\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  placeholder=\"Enter admin password\"\n                  className=\"pl-10\"\n                  required\n                />\n              </div>\n            </div>\n            <Button \n              type=\"submit\" \n              className=\"w-full\" \n              disabled={loginMutation.isPending}\n            >\n              {loginMutation.isPending ? \"Logging in...\" : \"Login\"}\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":2979},"SUPABASE_SETUP.md":{"content":"# Supabase Setup Instructions\n\n## Step 1: Run the Database Schema\n\n1. Go to your Supabase Dashboard: https://supabase.com/dashboard\n2. Select your project\n3. Click on \"SQL Editor\" in the left sidebar\n4. Click \"New Query\"\n5. Copy the entire content from `supabase-schema.sql` file\n6. Paste it into the SQL Editor\n7. Click \"Run\" button\n\nThis will create all necessary tables for your college management system.\n\n## Step 2: Change Default Admin Password\n\nThe default admin credentials are:\n- **Username**: `admin`\n- **Password**: `admin123`\n\n**IMPORTANT**: Change this password immediately for security!\n\nTo change the password:\n1. Go to SQL Editor in Supabase\n2. Run this query with your new password:\n```sql\nUPDATE head_admin \nSET password = crypt('YOUR_NEW_PASSWORD', gen_salt('bf'))\nWHERE username = 'admin';\n```\n\n## Step 3: Enable Realtime\n\n1. Go to \"Database\" â†’ \"Replication\" in Supabase Dashboard\n2. Enable realtime for these tables:\n   - departments\n   - department_data\n   - notices\n   - college_settings\n   - events\n   - holidays\n   - timings\n\n## Tables Created\n\n### Core Tables:\n- **head_admin**: Main admin users\n- **departments**: Department information and credentials\n- **department_data**: All department-specific data\n- **notices**: College-wide and department notices\n- **events**: College and department events\n- **college_settings**: General college information\n- **holidays**: College holidays\n- **timings**: Facility timings (library, labs, etc.)\n- **courses**: College courses and programs (UG, PG, Diploma, etc.)\n- **staff_members**: Staff and faculty information\n\n## Features Enabled:\nâœ… Real-time updates across all panels\nâœ… Row Level Security (RLS) for data protection\nâœ… Public read access for notices and events\nâœ… UUID-based primary keys\nâœ… Automatic timestamps\nâœ… Indexed columns for fast queries\n\n## Environment Variables Already Set:\n- SUPABASE_URL\n- SUPABASE_ANON_KEY\n- SUPABASE_SERVICE_ROLE_KEY\n\nYour system is ready to use!\n","size_bytes":1966},"client/src/pages/head-admin.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Button } from \"@/components/ui/button\";\nimport { Sheet, SheetContent, SheetTrigger } from \"@/components/ui/sheet\";\nimport { Menu, LogOut, Home, Building2, Bell, Calendar } from \"lucide-react\";\nimport { DashboardStats } from \"@/components/head-admin/DashboardStats\";\nimport { DepartmentsManager } from \"@/components/head-admin/DepartmentsManager\";\nimport { NoticesManager } from \"@/components/head-admin/NoticesManager\";\nimport { EventsManager } from \"@/components/head-admin/EventsManager\";\n\nconst navItems = [\n  { id: \"dashboard\", label: \"Dashboard\", icon: Home },\n  { id: \"departments\", label: \"Departments\", icon: Building2 },\n  { id: \"notices\", label: \"Notices\", icon: Bell },\n  { id: \"events\", label: \"Events\", icon: Calendar },\n];\n\nexport default function HeadAdminPanel() {\n  const [activeTab, setActiveTab] = useState(\"dashboard\");\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const [, setLocation] = useLocation();\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"adminToken\");\n    if (!token) {\n      setLocation(\"/admin/login\");\n    }\n  }, [setLocation]);\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"adminToken\");\n    setLocation(\"/admin/login\");\n  };\n\n  const NavContent = () => (\n    <div className=\"space-y-2 p-4 flex flex-col h-full\">\n      <div className=\"mb-8\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">Head Admin</h2>\n        <p className=\"text-sm text-gray-600\">College Management</p>\n      </div>\n      <div className=\"flex-1\">\n        {navItems.map((item) => {\n          const Icon = item.icon;\n          return (\n            <Button\n              key={item.id}\n              variant={activeTab === item.id ? \"default\" : \"ghost\"}\n              className=\"w-full justify-start mb-2\"\n              onClick={() => {\n                setActiveTab(item.id);\n                setMobileMenuOpen(false);\n              }}\n            >\n              <Icon className=\"mr-2 h-4 w-4\" />\n              {item.label}\n            </Button>\n          );\n        })}\n      </div>\n      <Button\n        variant=\"outline\"\n        className=\"w-full justify-start text-red-600 hover:text-red-700 hover:bg-red-50\"\n        onClick={handleLogout}\n      >\n        <LogOut className=\"mr-2 h-4 w-4\" />\n        Logout\n      </Button>\n    </div>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"flex h-screen overflow-hidden\">\n        <aside className=\"hidden md:flex w-64 bg-white border-r border-gray-200 flex-col\">\n          <NavContent />\n        </aside>\n\n        <main className=\"flex-1 overflow-y-auto\">\n          <div className=\"md:hidden bg-white border-b border-gray-200 p-4 flex items-center justify-between sticky top-0 z-10\">\n            <h1 className=\"text-xl font-bold text-gray-900\">Head Admin</h1>\n            <Sheet open={mobileMenuOpen} onOpenChange={setMobileMenuOpen}>\n              <SheetTrigger asChild>\n                <Button variant=\"ghost\" size=\"icon\">\n                  <Menu className=\"h-6 w-6\" />\n                </Button>\n              </SheetTrigger>\n              <SheetContent side=\"left\" className=\"p-0 w-64\">\n                <NavContent />\n              </SheetContent>\n            </Sheet>\n          </div>\n\n          <div className=\"p-6\">\n            {activeTab === \"dashboard\" && <DashboardStats />}\n            {activeTab === \"departments\" && <DepartmentsManager />}\n            {activeTab === \"notices\" && <NoticesManager />}\n            {activeTab === \"events\" && <EventsManager />}\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}\n","size_bytes":3752},"client/src/components/head-admin/EventsManager.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useVoice } from \"@/hooks/use-voice\";\nimport { Plus, Trash2, Calendar, Edit, Sparkles, Mic, MicOff, Loader2, ChevronDown, Youtube, Instagram, Image as ImageIcon, Video } from \"lucide-react\";\nimport { EnhancedAIInput } from \"@/components/admin/EnhancedAIInput\";\nimport { EnhancedAIPreview } from \"@/components/admin/EnhancedAIPreview\";\n\ninterface Event {\n  id: string;\n  title: string;\n  description?: string;\n  event_type: string;\n  event_date?: string;\n  location?: string;\n  is_active: boolean;\n  department_id?: string;\n  departments?: { name: string };\n}\n\nexport function EventsManager() {\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\n  const [isEditOpen, setIsEditOpen] = useState(false);\n  const [editingEvent, setEditingEvent] = useState<Event | null>(null);\n  const [isAiMode, setIsAiMode] = useState(false);\n  const [aiPrompt, setAiPrompt] = useState(\"\");\n  const [aiGeneratedData, setAiGeneratedData] = useState<any>(null);\n  const [currentPreviewIndex, setCurrentPreviewIndex] = useState(0);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [formData, setFormData] = useState({\n    title: \"\",\n    description: \"\",\n    event_type: \"\",\n    event_date: \"\",\n    location: \"\",\n    department_id: \"\",\n    youtube_url: \"\",\n    instagram_url: \"\",\n    image_url: \"\",\n    video_url: \"\",\n    formatted_message: \"\",\n  });\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const {\n    isListening,\n    transcript,\n    startListening,\n    stopListening,\n    resetTranscript,\n    setTranscript,\n    browserSupported,\n  } = useVoice();\n\n  const { data: eventsData } = useQuery({\n    queryKey: ['/api/head-admin/events'],\n  });\n\n  const { data: departmentsData } = useQuery({\n    queryKey: ['/api/head-admin/departments'],\n  });\n\n  useEffect(() => {\n    if (transcript && isAiMode) {\n      setAiPrompt(transcript);\n    }\n  }, [transcript, isAiMode]);\n\n  const handleToggleVoice = () => {\n    if (isListening) {\n      stopListening();\n    } else {\n      startListening(aiPrompt);\n    }\n  };\n\n  const handleClearPrompt = () => {\n    setAiPrompt(\"\");\n    resetTranscript();\n  };\n\n  const handleRegenerateAI = () => {\n    setAiGeneratedData(null);\n    setCurrentPreviewIndex(0);\n  };\n\n  const handleGenerateAI = async () => {\n    if (!aiPrompt.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please enter a description or use voice input\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsGenerating(true);\n    try {\n      const res = await fetch(\"/api/admin/ai-generate-event\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ prompt: aiPrompt }),\n      });\n\n      if (!res.ok) {\n        throw new Error(\"Failed to generate event\");\n      }\n\n      const data = await res.json();\n      setAiGeneratedData(data);\n      setCurrentPreviewIndex(0);\n      const count = data.entries?.length || 1;\n      toast({\n        title: \"Success\",\n        description: `Generated ${count} event${count > 1 ? 's' : ''} successfully!`,\n      });\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to generate event\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  const handleConfirmAI = async () => {\n    if (!aiGeneratedData) return;\n    \n    const entries = aiGeneratedData.entries || [aiGeneratedData];\n    \n    try {\n      let successCount = 0;\n      let failedEntries: string[] = [];\n      \n      for (let i = 0; i < entries.length; i++) {\n        const entry = entries[i];\n        const res = await fetch('/api/head-admin/events', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(entry),\n        });\n        \n        if (!res.ok) {\n          const errorData = await res.json().catch(() => ({ message: 'Unknown error' }));\n          failedEntries.push(`${entry.title || `Entry ${i + 1}`}: ${errorData.message}`);\n        } else {\n          successCount++;\n        }\n      }\n      \n      queryClient.invalidateQueries({ queryKey: ['/api/head-admin/events'] });\n      \n      if (failedEntries.length === 0) {\n        toast({ \n          title: \"Success\", \n          description: `${successCount} event${successCount > 1 ? 's' : ''} created successfully` \n        });\n      } else if (successCount > 0) {\n        toast({\n          title: \"Partial Success\",\n          description: `${successCount} event(s) created. Failed: ${failedEntries.join(', ')}`,\n          variant: \"default\",\n        });\n      } else {\n        throw new Error(`All entries failed: ${failedEntries.join(', ')}`);\n      }\n      \n      setAiPrompt(\"\");\n      setAiGeneratedData(null);\n      setCurrentPreviewIndex(0);\n      setIsAiMode(false);\n      setIsCreateOpen(false);\n      resetTranscript();\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to create events\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleEditEntry = (entry: any, index: number) => {\n    setFormData({\n      title: entry.title || \"\",\n      description: entry.description || \"\",\n      event_type: entry.event_type || \"\",\n      event_date: entry.event_date || \"\",\n      location: entry.location || \"\",\n      department_id: \"\",\n      youtube_url: \"\",\n      instagram_url: \"\",\n      image_url: \"\",\n      video_url: \"\",\n      formatted_message: entry.formatted_message || \"\",\n    });\n    \n    setAiGeneratedData(null);\n    setCurrentPreviewIndex(0);\n    setIsAiMode(false);\n  };\n\n  const handleDeleteEntry = (index: number) => {\n    if (!aiGeneratedData) return;\n    \n    const entries = aiGeneratedData.entries || [aiGeneratedData];\n    const updatedEntries = entries.filter((_: any, i: number) => i !== index);\n    \n    if (updatedEntries.length === 0) {\n      setAiGeneratedData(null);\n      setCurrentPreviewIndex(0);\n      toast({\n        title: \"Info\",\n        description: \"All entries removed. You can generate new ones.\",\n      });\n    } else {\n      setAiGeneratedData({ entries: updatedEntries });\n      if (currentPreviewIndex >= updatedEntries.length) {\n        setCurrentPreviewIndex(updatedEntries.length - 1);\n      }\n      toast({\n        title: \"Success\",\n        description: \"Entry removed from preview\",\n      });\n    }\n  };\n\n  const resetForm = () => {\n    setFormData({\n      title: \"\",\n      description: \"\",\n      event_type: \"\",\n      event_date: \"\",\n      location: \"\",\n      department_id: \"\",\n      youtube_url: \"\",\n      instagram_url: \"\",\n      image_url: \"\",\n      video_url: \"\",\n      formatted_message: \"\",\n    });\n    setAiPrompt(\"\");\n    setAiGeneratedData(null);\n    resetTranscript();\n  };\n\n  const handleOpenDialog = (mode: 'manual' | 'ai') => {\n    setIsAiMode(mode === 'ai');\n    setIsCreateOpen(true);\n    resetForm();\n  };\n\n  const createMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch('/api/head-admin/events', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error('Failed to create event');\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/head-admin/events'] });\n      resetForm();\n      setIsCreateOpen(false);\n      toast({ title: \"Success\", description: \"Event created successfully\" });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: any }) => {\n      const res = await fetch(`/api/head-admin/events/${id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error('Failed to update event');\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/head-admin/events'] });\n      setIsEditOpen(false);\n      setEditingEvent(null);\n      toast({ title: \"Success\", description: \"Event updated successfully\" });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const res = await fetch(`/api/head-admin/events/${id}`, { method: 'DELETE' });\n      if (!res.ok) throw new Error('Failed to delete event');\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/head-admin/events'] });\n      toast({ title: \"Success\", description: \"Event deleted successfully\" });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    const payload: any = { ...formData };\n    if (!payload.department_id) delete payload.department_id;\n    createMutation.mutate(payload);\n  };\n\n  const handleEdit = (event: Event) => {\n    setEditingEvent(event);\n    setFormData({\n      title: event.title,\n      description: event.description || \"\",\n      event_type: event.event_type,\n      event_date: event.event_date ? new Date(event.event_date).toISOString().slice(0, 16) : \"\",\n      location: event.location || \"\",\n      department_id: event.department_id || \"\",\n      youtube_url: \"\",\n      instagram_url: \"\",\n      image_url: \"\",\n      video_url: \"\",\n      formatted_message: \"\",\n    });\n    setIsEditOpen(true);\n  };\n\n  const handleUpdate = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!editingEvent) return;\n    const payload: any = { ...formData };\n    if (!payload.department_id) delete payload.department_id;\n    updateMutation.mutate({ id: editingEvent.id, data: payload });\n  };\n\n  const events: Event[] = (eventsData as any)?.events || [];\n  const departments = (departmentsData as any)?.departments || [];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Events Management</h2>\n          <p className=\"text-gray-600 mt-1\">Create and manage college events</p>\n        </div>\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button>\n              <Plus className=\"mr-2 h-4 w-4\" />\n              Create Event\n              <ChevronDown className=\"h-4 w-4 ml-2\" />\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent align=\"end\">\n            <DropdownMenuItem onClick={() => handleOpenDialog('manual')}>\n              Manual Mode\n            </DropdownMenuItem>\n            <DropdownMenuItem onClick={() => handleOpenDialog('ai')}>\n              <Sparkles className=\"h-4 w-4 mr-2\" />\n              AI Mode (Smart Add)\n            </DropdownMenuItem>\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n\n      <Dialog open={isCreateOpen} onOpenChange={setIsCreateOpen}>\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>{isAiMode ? \"AI Mode - Create Event\" : \"Create New Event\"}</DialogTitle>\n            <DialogDescription>\n              {isAiMode ? \"Describe the event in natural language\" : \"Add a new event to the calendar\"}\n            </DialogDescription>\n          </DialogHeader>\n\n          {isAiMode ? (\n            <>\n              {!aiGeneratedData ? (\n                <EnhancedAIInput\n                  prompt={aiPrompt}\n                  onPromptChange={setAiPrompt}\n                  onGenerate={handleGenerateAI}\n                  isGenerating={isGenerating}\n                  isListening={isListening}\n                  onToggleVoice={handleToggleVoice}\n                  browserSupported={browserSupported}\n                  placeholder=\"Describe event(s) you want to add - single or multiple...\"\n                  examples={[\n                    \"Add Sports Day on December 20, 2024 at Main Ground\",\n                    \"Add three events: Annual Function on Dec 25, Tech Fest on Jan 15, and Cultural Night on Feb 10\",\n                    \"Create a workshop on AI and Machine Learning scheduled for next week in Auditorium\"\n                  ]}\n                  sectionType=\"events\"\n                />\n              ) : (\n                <EnhancedAIPreview\n                  entries={aiGeneratedData.entries || [aiGeneratedData]}\n                  currentIndex={currentPreviewIndex}\n                  onIndexChange={setCurrentPreviewIndex}\n                  renderPreview={(event) => (\n                    <div className=\"space-y-3\">\n                      <div>\n                        <span className=\"font-semibold text-gray-700 block mb-1\">Title:</span>\n                        <p className=\"text-gray-900 text-lg\">{event.title}</p>\n                      </div>\n                      {event.description && (\n                        <div>\n                          <span className=\"font-semibold text-gray-700 block mb-1\">Description:</span>\n                          <p className=\"text-gray-900\">{event.description}</p>\n                        </div>\n                      )}\n                      <div className=\"grid grid-cols-2 gap-4 mt-4 pt-3 border-t\">\n                        <div>\n                          <span className=\"font-semibold text-gray-700 block mb-1\">Type:</span>\n                          <p className=\"text-gray-900\">{event.event_type}</p>\n                        </div>\n                        {event.event_date && (\n                          <div>\n                            <span className=\"font-semibold text-gray-700 block mb-1\">Date:</span>\n                            <p className=\"text-gray-900\">{new Date(event.event_date).toLocaleString()}</p>\n                          </div>\n                        )}\n                        {event.location && (\n                          <div className=\"col-span-2\">\n                            <span className=\"font-semibold text-gray-700 block mb-1\">Location:</span>\n                            <p className=\"text-gray-900\">{event.location}</p>\n                          </div>\n                        )}\n                      </div>\n                      {event.formatted_message && (\n                        <div className=\"mt-4 pt-3 border-t\">\n                          <span className=\"font-semibold text-gray-700 block mb-2\">Formatted Message:</span>\n                          <div className=\"p-3 bg-blue-50 rounded-lg border border-blue-200\">\n                            <p className=\"text-gray-900 whitespace-pre-wrap leading-relaxed\">{event.formatted_message}</p>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  )}\n                  onConfirmAll={handleConfirmAI}\n                  onRegenerate={handleRegenerateAI}\n                  onEditEntry={handleEditEntry}\n                  onDeleteEntry={handleDeleteEntry}\n                  confirmButtonText={`Add ${(aiGeneratedData.entries || [aiGeneratedData]).length} Event${(aiGeneratedData.entries || [aiGeneratedData]).length > 1 ? 's' : ''}`}\n                  entryTypeName=\"Event\"\n                />\n              )}\n            </>\n          ) : (\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"title\">Event Title *</Label>\n                <Input\n                  id=\"title\"\n                  value={formData.title}\n                  onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                  placeholder=\"Event name\"\n                  required\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"description\">Description</Label>\n                <Textarea\n                  id=\"description\"\n                  value={formData.description}\n                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                  placeholder=\"Event details\"\n                  rows={4}\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <Label htmlFor=\"event_type\">Event Type *</Label>\n                  <Input\n                    id=\"event_type\"\n                    value={formData.event_type}\n                    onChange={(e) => setFormData({ ...formData, event_type: e.target.value })}\n                    placeholder=\"e.g., Cultural, Sports, Academic\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"event_date\">Event Date</Label>\n                  <Input\n                    id=\"event_date\"\n                    type=\"datetime-local\"\n                    value={formData.event_date}\n                    onChange={(e) => setFormData({ ...formData, event_date: e.target.value })}\n                  />\n                </div>\n              </div>\n\n              <div>\n                <Label htmlFor=\"location\">Location</Label>\n                <Input\n                  id=\"location\"\n                  value={formData.location}\n                  onChange={(e) => setFormData({ ...formData, location: e.target.value })}\n                  placeholder=\"Venue\"\n                />\n              </div>\n\n              <div>\n                <Label>Department (Optional)</Label>\n                <Select value={formData.department_id || \"college-wide\"} onValueChange={(v) => setFormData({ ...formData, department_id: v === \"college-wide\" ? \"\" : v })}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"College-wide event\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"college-wide\">College-wide</SelectItem>\n                    {departments.map((dept: any) => (\n                      <SelectItem key={dept.id} value={dept.id}>{dept.name}</SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"space-y-3 pt-3 border-t\">\n                <h3 className=\"font-medium text-sm flex items-center gap-2\">\n                  <ImageIcon className=\"h-4 w-4\" />\n                  Media & Links (Optional)\n                </h3>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"youtube_url\" className=\"flex items-center gap-2\">\n                      <Youtube className=\"h-4 w-4 text-red-600\" />\n                      YouTube URL\n                    </Label>\n                    <Input\n                      id=\"youtube_url\"\n                      value={formData.youtube_url}\n                      onChange={(e) => setFormData({ ...formData, youtube_url: e.target.value })}\n                      placeholder=\"https://youtube.com/...\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"instagram_url\" className=\"flex items-center gap-2\">\n                      <Instagram className=\"h-4 w-4 text-pink-600\" />\n                      Instagram URL\n                    </Label>\n                    <Input\n                      id=\"instagram_url\"\n                      value={formData.instagram_url}\n                      onChange={(e) => setFormData({ ...formData, instagram_url: e.target.value })}\n                      placeholder=\"https://instagram.com/...\"\n                    />\n                  </div>\n                </div>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"image_url\">Image URL</Label>\n                    <Input\n                      id=\"image_url\"\n                      value={formData.image_url}\n                      onChange={(e) => setFormData({ ...formData, image_url: e.target.value })}\n                      placeholder=\"Image URL\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"video_url\">Video URL</Label>\n                    <Input\n                      id=\"video_url\"\n                      value={formData.video_url}\n                      onChange={(e) => setFormData({ ...formData, video_url: e.target.value })}\n                      placeholder=\"Video URL\"\n                    />\n                  </div>\n                </div>\n                <div>\n                  <Label htmlFor=\"formatted_message\">Formatted Message (with emojis)</Label>\n                  <Textarea\n                    id=\"formatted_message\"\n                    value={formData.formatted_message}\n                    onChange={(e) => setFormData({ ...formData, formatted_message: e.target.value })}\n                    placeholder=\"ðŸ“… Event announcement with emojis for landing page...\"\n                    rows={3}\n                  />\n                </div>\n              </div>\n\n              <Button type=\"submit\" className=\"w-full\" disabled={createMutation.isPending}>\n                {createMutation.isPending ? \"Creating...\" : \"Create Event\"}\n              </Button>\n            </form>\n          )}\n        </DialogContent>\n      </Dialog>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        {events.map((event) => (\n          <Card key={event.id}>\n            <CardHeader>\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <Calendar className=\"h-4 w-4\" />\n                    <CardTitle className=\"text-lg\">{event.title}</CardTitle>\n                  </div>\n                  <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                    <span className=\"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-600\">\n                      {event.event_type}\n                    </span>\n                    {event.departments && (\n                      <span className=\"px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-600\">\n                        {event.departments.name}\n                      </span>\n                    )}\n                  </div>\n                </div>\n                <div className=\"flex gap-2\">\n                  <Button\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    onClick={() => handleEdit(event)}\n                  >\n                    <Edit className=\"h-4 w-4 text-blue-500\" />\n                  </Button>\n                  <Button\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    onClick={() => deleteMutation.mutate(event.id)}\n                  >\n                    <Trash2 className=\"h-4 w-4 text-red-500\" />\n                  </Button>\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent>\n              {event.description && <p className=\"text-gray-700 mb-2\">{event.description}</p>}\n              {event.event_date && (\n                <p className=\"text-sm text-gray-600\">\n                  ðŸ“… {new Date(event.event_date).toLocaleDateString()} at {new Date(event.event_date).toLocaleTimeString()}\n                </p>\n              )}\n              {event.location && (\n                <p className=\"text-sm text-gray-600\">ðŸ“ {event.location}</p>\n              )}\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {events.length === 0 && (\n        <Card>\n          <CardContent className=\"py-12 text-center text-gray-500\">\n            No events yet. Click \"Create Event\" to add one.\n          </CardContent>\n        </Card>\n      )}\n\n      <Dialog open={isEditOpen} onOpenChange={setIsEditOpen}>\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>Edit Event</DialogTitle>\n            <DialogDescription>Update event information</DialogDescription>\n          </DialogHeader>\n\n          <form onSubmit={handleUpdate} className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"edit-title\">Event Title *</Label>\n              <Input\n                id=\"edit-title\"\n                value={formData.title}\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                placeholder=\"Event name\"\n                required\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"edit-description\">Description</Label>\n              <Textarea\n                id=\"edit-description\"\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                placeholder=\"Event details\"\n                rows={4}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"edit-event_type\">Event Type *</Label>\n                <Input\n                  id=\"edit-event_type\"\n                  value={formData.event_type}\n                  onChange={(e) => setFormData({ ...formData, event_type: e.target.value })}\n                  placeholder=\"e.g., Cultural, Sports, Academic\"\n                  required\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"edit-event_date\">Event Date</Label>\n                <Input\n                  id=\"edit-event_date\"\n                  type=\"datetime-local\"\n                  value={formData.event_date}\n                  onChange={(e) => setFormData({ ...formData, event_date: e.target.value })}\n                />\n              </div>\n            </div>\n\n            <div>\n              <Label htmlFor=\"edit-location\">Location</Label>\n              <Input\n                id=\"edit-location\"\n                value={formData.location}\n                onChange={(e) => setFormData({ ...formData, location: e.target.value })}\n                placeholder=\"Venue\"\n              />\n            </div>\n\n            <div>\n              <Label>Department (Optional)</Label>\n              <Select value={formData.department_id || \"college-wide\"} onValueChange={(v) => setFormData({ ...formData, department_id: v === \"college-wide\" ? \"\" : v })}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"College-wide event\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"college-wide\">College-wide</SelectItem>\n                  {departments.map((dept: any) => (\n                    <SelectItem key={dept.id} value={dept.id}>{dept.name}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <Button type=\"submit\" className=\"w-full\" disabled={updateMutation.isPending}>\n              {updateMutation.isPending ? \"Updating...\" : \"Update Event\"}\n            </Button>\n          </form>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":27705},"server/supabase-init.ts":{"content":"import { supabase } from './supabase';\n\nexport async function checkSupabaseConnection() {\n  try {\n    const { data, error } = await supabase.from('departments').select('count').limit(1);\n    if (error && error.code !== 'PGRST116') {\n      console.log('âš ï¸ Supabase tables may not exist yet. Please run the SQL schema.');\n      return false;\n    }\n    console.log('âœ… Supabase connection successful');\n    return true;\n  } catch (error) {\n    console.error('âŒ Supabase connection error:', error);\n    return false;\n  }\n}\n\nexport async function seedInitialData() {\n  try {\n    console.log('ðŸ”„ Seeding initial college data...');\n    \n    // Check if college settings already exist\n    const { data: existing } = await supabase\n      .from('college_settings')\n      .select('key')\n      .eq('key', 'college_basic_info')\n      .single();\n    \n    if (existing) {\n      console.log('â„¹ï¸ Initial data already exists, skipping seed');\n      return true;\n    }\n\n    // Insert basic college info\n    const { error: collegeError } = await supabase\n      .from('college_settings')\n      .insert({\n        key: 'college_basic_info',\n        value: {\n          name: \"R.K.S.D. (PG) College, Kaithal\",\n          established_year: 1954,\n          principal: \"Dr. Rajbir Parashar\",\n          address: \"Ambala Road, Kaithal, Haryana, India - PIN 136027\",\n          phone: \"+91-1746-222368\"\n        }\n      });\n\n    if (collegeError) {\n      console.error('Error seeding college info:', collegeError);\n      return false;\n    }\n\n    console.log('âœ… Initial data seeded successfully');\n    return true;\n  } catch (error) {\n    console.error('âŒ Error seeding data:', error);\n    return false;\n  }\n}\n","size_bytes":1692},"server/supabase.ts":{"content":"import { createClient } from '@supabase/supabase-js';\n\nif (!process.env.SUPABASE_URL) {\n  throw new Error('SUPABASE_URL environment variable is required');\n}\n\nif (!process.env.SUPABASE_SERVICE_ROLE_KEY) {\n  throw new Error('SUPABASE_SERVICE_ROLE_KEY environment variable is required');\n}\n\nexport const supabase = createClient(\n  process.env.SUPABASE_URL,\n  process.env.SUPABASE_SERVICE_ROLE_KEY,\n  {\n    auth: {\n      autoRefreshToken: false,\n      persistSession: false\n    }\n  }\n);\n\nexport const supabaseAnon = createClient(\n  process.env.SUPABASE_URL,\n  process.env.SUPABASE_ANON_KEY || '',\n  {\n    auth: {\n      autoRefreshToken: true,\n      persistSession: true\n    }\n  }\n);\n","size_bytes":680},"server/department-auth.ts":{"content":"import { Request, Response, NextFunction } from \"express\";\nimport jwt from \"jsonwebtoken\";\n\nconst JWT_SECRET = process.env.JWT_SECRET;\n\nif (!JWT_SECRET) {\n  throw new Error(\"JWT_SECRET environment variable is required for department authentication\");\n}\n\nexport interface DepartmentTokenPayload {\n  departmentId: string;\n  departmentSlug: string;\n}\n\nexport function generateDepartmentToken(departmentId: string, departmentSlug: string): string {\n  return jwt.sign(\n    { departmentId, departmentSlug },\n    JWT_SECRET,\n    { expiresIn: \"24h\" }\n  );\n}\n\nexport function verifyDepartmentToken(token: string): DepartmentTokenPayload {\n  return jwt.verify(token, JWT_SECRET) as DepartmentTokenPayload;\n}\n\nexport function requireDepartmentAuth(req: Request, res: Response, next: NextFunction) {\n  const authHeader = req.headers.authorization;\n  \n  if (!authHeader || !authHeader.startsWith('Bearer ')) {\n    return res.status(401).json({ \n      message: \"Unauthorized: Department authentication required\" \n    });\n  }\n\n  const token = authHeader.substring(7);\n  \n  try {\n    const payload = verifyDepartmentToken(token);\n    (req as any).departmentAuth = payload;\n    next();\n  } catch (error) {\n    return res.status(403).json({ \n      message: \"Forbidden: Invalid or expired token\" \n    });\n  }\n}\n\nexport function validateDepartmentAccess(req: Request, res: Response, next: NextFunction) {\n  const departmentAuth = (req as any).departmentAuth as DepartmentTokenPayload;\n  const requestedDepartmentId = req.params.departmentId;\n  \n  if (!departmentAuth) {\n    return res.status(401).json({ \n      message: \"Unauthorized: No authentication found\" \n    });\n  }\n\n  if (requestedDepartmentId && departmentAuth.departmentId !== requestedDepartmentId) {\n    return res.status(403).json({ \n      message: \"Forbidden: Cannot access other department's data\" \n    });\n  }\n\n  next();\n}\n","size_bytes":1869},"client/src/lib/supabase.ts":{"content":"import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL || '';\nconst supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY || '';\n\nif (!supabaseUrl || !supabaseAnonKey) {\n  console.warn('âš ï¸ Supabase credentials not found in environment variables');\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\n  auth: {\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true\n  },\n  realtime: {\n    params: {\n      eventsPerSecond: 10\n    }\n  }\n});\n\n// Database Types\nexport interface Department {\n  id: string;\n  name: string;\n  slug: string;\n  department_id: string;\n  password: string;\n  head_name?: string;\n  contact_email?: string;\n  contact_phone?: string;\n  description?: string;\n  panel_link: string;\n  created_by?: string;\n  is_active: boolean;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface DepartmentData {\n  id: string;\n  department_id: string;\n  data_type: string;\n  title: string;\n  content: string;\n  metadata?: any;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface Notice {\n  id: string;\n  title: string;\n  content: string;\n  notice_type: string;\n  priority: string;\n  department_id?: string;\n  created_by?: string;\n  is_active: boolean;\n  start_date?: string;\n  end_date?: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface Event {\n  id: string;\n  title: string;\n  description?: string;\n  event_type: string;\n  event_date?: string;\n  location?: string;\n  department_id?: string;\n  created_by?: string;\n  is_active: boolean;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface CollegeSettings {\n  id: string;\n  key: string;\n  value: any;\n  updated_at: string;\n}\n","size_bytes":1741},"client/src/components/head-admin/DashboardStats.tsx":{"content":"import { useEffect } from \"react\";\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Building2, Bell, Calendar, TrendingUp, Activity, Shield } from \"lucide-react\";\nimport { supabase } from \"@/lib/supabase\";\n\nexport function DashboardStats() {\n  const queryClient = useQueryClient();\n  \n  const { data: stats } = useQuery({\n    queryKey: ['/api/head-admin/stats'],\n    queryFn: async () => {\n      const res = await fetch('/api/head-admin/stats');\n      if (!res.ok) throw new Error('Failed to fetch stats');\n      return res.json();\n    },\n  });\n\n  useEffect(() => {\n    const departmentsChannel = supabase\n      .channel('dashboard-departments')\n      .on(\n        'postgres_changes',\n        { event: '*', schema: 'public', table: 'departments' },\n        () => {\n          queryClient.invalidateQueries({ queryKey: ['/api/head-admin/stats'] });\n        }\n      )\n      .subscribe();\n\n    const noticesChannel = supabase\n      .channel('dashboard-notices')\n      .on(\n        'postgres_changes',\n        { event: '*', schema: 'public', table: 'notices' },\n        () => {\n          queryClient.invalidateQueries({ queryKey: ['/api/head-admin/stats'] });\n        }\n      )\n      .subscribe();\n\n    const eventsChannel = supabase\n      .channel('dashboard-events')\n      .on(\n        'postgres_changes',\n        { event: '*', schema: 'public', table: 'events' },\n        () => {\n          queryClient.invalidateQueries({ queryKey: ['/api/head-admin/stats'] });\n        }\n      )\n      .subscribe();\n\n    return () => {\n      supabase.removeChannel(departmentsChannel);\n      supabase.removeChannel(noticesChannel);\n      supabase.removeChannel(eventsChannel);\n    };\n  }, [queryClient]);\n\n  const statCards = [\n    {\n      title: \"Total Departments\",\n      value: stats?.total_departments || 0,\n      icon: Building2,\n      color: \"text-blue-600\",\n      bg: \"bg-blue-50\",\n      borderColor: \"border-blue-200\",\n      iconBg: \"bg-blue-500\",\n      description: \"Active department panels\"\n    },\n    {\n      title: \"Active Notices\",\n      value: stats?.active_notices || 0,\n      icon: Bell,\n      color: \"text-green-600\",\n      bg: \"bg-green-50\",\n      borderColor: \"border-green-200\",\n      iconBg: \"bg-green-500\",\n      description: \"Published announcements\"\n    },\n    {\n      title: \"Upcoming Events\",\n      value: stats?.upcoming_events || 0,\n      icon: Calendar,\n      color: \"text-purple-600\",\n      bg: \"bg-purple-50\",\n      borderColor: \"border-purple-200\",\n      iconBg: \"bg-purple-500\",\n      description: \"Scheduled activities\"\n    },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent\">\n            Head Admin Dashboard\n          </h2>\n          <p className=\"text-gray-600 mt-2\">\n            R.K.S.D. (PG) College - Master Control Panel\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2 px-4 py-2 bg-green-50 border border-green-200 rounded-lg\">\n          <Activity className=\"h-4 w-4 text-green-600 animate-pulse\" />\n          <span className=\"text-sm font-medium text-green-700\">Real-Time Sync Active</span>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        {statCards.map((stat) => {\n          const Icon = stat.icon;\n          return (\n            <Card key={stat.title} className={`bg-gradient-to-br from-white to-${stat.bg.replace('bg-', '')} ${stat.borderColor} hover:shadow-xl transition-all duration-300`}>\n              <CardHeader className=\"pb-3\">\n                <div className=\"flex items-center justify-between\">\n                  <CardTitle className={`text-sm font-semibold ${stat.color.replace('text-', 'text-')}`}>\n                    {stat.title}\n                  </CardTitle>\n                  <div className={`p-3 ${stat.iconBg} rounded-lg shadow-md`}>\n                    <Icon className=\"h-6 w-6 text-white\" />\n                  </div>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-4xl font-bold text-gray-900 mb-1\">{stat.value}</div>\n                <p className=\"text-sm text-gray-600 flex items-center gap-1\">\n                  <span className={`w-1.5 h-1.5 ${stat.iconBg} rounded-full`}></span>\n                  {stat.description}\n                </p>\n              </CardContent>\n            </Card>\n          );\n        })}\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <Card className=\"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200\">\n          <CardHeader className=\"border-b bg-white/50\">\n            <CardTitle className=\"flex items-center gap-2 text-blue-900\">\n              <TrendingUp className=\"h-5 w-5\" />\n              Quick Start Guide\n            </CardTitle>\n            <CardDescription>Follow these steps to manage your college</CardDescription>\n          </CardHeader>\n          <CardContent className=\"pt-6\">\n            <div className=\"space-y-4\">\n              <div className=\"flex gap-3\">\n                <div className=\"flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-sm\">\n                  1\n                </div>\n                <div>\n                  <h4 className=\"font-semibold text-blue-900\">Create Departments</h4>\n                  <p className=\"text-sm text-blue-800 mt-1\">Set up department panels from the \"Departments\" tab</p>\n                </div>\n              </div>\n              <div className=\"flex gap-3\">\n                <div className=\"flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-sm\">\n                  2\n                </div>\n                <div>\n                  <h4 className=\"font-semibold text-blue-900\">Share Credentials</h4>\n                  <p className=\"text-sm text-blue-800 mt-1\">Send generated ID & password to department heads securely</p>\n                </div>\n              </div>\n              <div className=\"flex gap-3\">\n                <div className=\"flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-sm\">\n                  3\n                </div>\n                <div>\n                  <h4 className=\"font-semibold text-blue-900\">Publish Content</h4>\n                  <p className=\"text-sm text-blue-800 mt-1\">Create notices and events for the digital notice board</p>\n                </div>\n              </div>\n              <div className=\"flex gap-3\">\n                <div className=\"flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-sm\">\n                  4\n                </div>\n                <div>\n                  <h4 className=\"font-semibold text-blue-900\">Monitor & Manage</h4>\n                  <p className=\"text-sm text-blue-800 mt-1\">All updates sync instantly with AI assistant and panels</p>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-purple-50 to-pink-50 border-purple-200\">\n          <CardHeader className=\"border-b bg-white/50\">\n            <CardTitle className=\"flex items-center gap-2 text-purple-900\">\n              <Shield className=\"h-5 w-5\" />\n              System Features\n            </CardTitle>\n            <CardDescription>Key capabilities of your management system</CardDescription>\n          </CardHeader>\n          <CardContent className=\"pt-6\">\n            <div className=\"space-y-4\">\n              <div className=\"p-4 bg-white rounded-lg border border-blue-200 shadow-sm\">\n                <h4 className=\"font-semibold text-blue-900 mb-2 flex items-center gap-2\">\n                  ðŸ”’ Enterprise Security\n                </h4>\n                <p className=\"text-sm text-blue-800\">\n                  All data is encrypted. Department credentials are shown only once during creation for maximum security.\n                </p>\n              </div>\n              <div className=\"p-4 bg-white rounded-lg border border-green-200 shadow-sm\">\n                <h4 className=\"font-semibold text-green-900 mb-2 flex items-center gap-2\">\n                  ðŸ”„ Real-Time Synchronization\n                </h4>\n                <p className=\"text-sm text-green-800\">\n                  All changes instantly sync across AI assistant, notice board, and department panels - no delays.\n                </p>\n              </div>\n              <div className=\"p-4 bg-white rounded-lg border border-purple-200 shadow-sm\">\n                <h4 className=\"font-semibold text-purple-900 mb-2 flex items-center gap-2\">\n                  ðŸ¤– AI-Powered Assistant\n                </h4>\n                <p className=\"text-sm text-purple-800\">\n                  Ram AI assistant has instant access to all departments, staff, courses, events, and notices data.\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card className=\"bg-gradient-to-r from-amber-50 to-orange-50 border-amber-200\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2 text-amber-900\">\n            <Bell className=\"h-5 w-5\" />\n            Important Information\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"p-4 bg-white rounded-lg border-l-4 border-blue-500\">\n              <h4 className=\"font-semibold text-gray-900 mb-2\">ðŸ“± Mobile Friendly</h4>\n              <p className=\"text-sm text-gray-700\">\n                Department heads can manage their panels from any device - desktop, tablet, or mobile.\n              </p>\n            </div>\n            <div className=\"p-4 bg-white rounded-lg border-l-4 border-green-500\">\n              <h4 className=\"font-semibold text-gray-900 mb-2\">ðŸ”— Unique Panel Links</h4>\n              <p className=\"text-sm text-gray-700\">\n                Each department gets a private, secure link. Only authorized users with credentials can access.\n              </p>\n            </div>\n            <div className=\"p-4 bg-white rounded-lg border-l-4 border-purple-500\">\n              <h4 className=\"font-semibold text-gray-900 mb-2\">ðŸ“Š Live Dashboard</h4>\n              <p className=\"text-sm text-gray-700\">\n                Monitor all department activities, notices, and events in real-time from this dashboard.\n              </p>\n            </div>\n            <div className=\"p-4 bg-white rounded-lg border-l-4 border-orange-500\">\n              <h4 className=\"font-semibold text-gray-900 mb-2\">ðŸŽ¯ No Technical Skills Needed</h4>\n              <p className=\"text-sm text-gray-700\">\n                Simple, intuitive interface designed for educators, not technicians. Anyone can use it.\n              </p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":11197},"client/src/pages/department-panel.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useRoute, useLocation } from \"wouter\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Plus, Trash2, Edit2, Mic, LogOut, Building2 } from \"lucide-react\";\nimport { supabase } from \"@/lib/supabase\";\nimport type { DepartmentData } from \"@/lib/supabase\";\n\nexport default function DepartmentPanel() {\n  const [, params] = useRoute(\"/department/:slug\");\n  const [, setLocation] = useLocation();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [departmentInfo, setDepartmentInfo] = useState<any>(null);\n  const [authToken, setAuthToken] = useState<string | null>(null);\n  const [loginForm, setLoginForm] = useState({ department_id: \"\", password: \"\" });\n  const [dataForm, setDataForm] = useState({ data_type: \"\", title: \"\", content: \"\", metadata: {} });\n  const [isAddDialogOpen, setIsAddDialogOpen] = useState(false);\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\n  const [editingData, setEditingData] = useState<DepartmentData | null>(null);\n  const [isListening, setIsListening] = useState(false);\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const slug = params?.slug;\n\n  // Fetch department info\n  const { data: deptData } = useQuery({\n    queryKey: [`/api/department/${slug}`],\n    enabled: !!slug,\n    queryFn: async () => {\n      const res = await fetch(`/api/department/${slug}`);\n      if (!res.ok) throw new Error('Department not found');\n      return res.json();\n    },\n  });\n\n  // Fetch department data\n  const { data: departmentDataList } = useQuery<{ data: DepartmentData[] }>({\n    queryKey: [`/api/department/${departmentInfo?.id}/data`],\n    enabled: !!departmentInfo?.id && isLoggedIn && !!authToken,\n    queryFn: async () => {\n      const res = await fetch(`/api/department/${departmentInfo.id}/data`, {\n        headers: {\n          'Authorization': `Bearer ${authToken}`\n        }\n      });\n      if (!res.ok) throw new Error('Failed to fetch data');\n      return res.json();\n    },\n  });\n\n  // Real-time subscription for department data\n  useEffect(() => {\n    if (!departmentInfo?.id || !isLoggedIn) return;\n\n    const dataChannel = supabase\n      .channel('department_data_changes')\n      .on(\n        'postgres_changes',\n        { \n          event: '*', \n          schema: 'public', \n          table: 'department_data',\n          filter: `department_id=eq.${departmentInfo.id}`\n        },\n        () => {\n          queryClient.invalidateQueries({ queryKey: [`/api/department/${departmentInfo.id}/data`] });\n        }\n      )\n      .subscribe();\n\n    return () => {\n      supabase.removeChannel(dataChannel);\n    };\n  }, [departmentInfo?.id, isLoggedIn, queryClient]);\n\n  // Login mutation\n  const loginMutation = useMutation({\n    mutationFn: async (credentials: { department_id: string; password: string }) => {\n      const res = await fetch('/api/department/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(credentials),\n      });\n      if (!res.ok) throw new Error('Invalid credentials');\n      return res.json();\n    },\n    onSuccess: (data) => {\n      setDepartmentInfo(data.department);\n      setAuthToken(data.token);\n      setIsLoggedIn(true);\n      localStorage.setItem(`dept_token_${slug}`, data.token);\n      toast({ title: \"Success\", description: \"Logged in successfully\" });\n    },\n    onError: () => {\n      toast({ title: \"Error\", description: \"Invalid credentials\", variant: \"destructive\" });\n    },\n  });\n\n  // Add data mutation\n  const addDataMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(`/api/department/${departmentInfo.id}/data`, {\n        method: 'POST',\n        headers: { \n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${authToken}`\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error('Failed to add data');\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/department/${departmentInfo.id}/data`] });\n      setDataForm({ data_type: \"\", title: \"\", content: \"\", metadata: {} });\n      setIsAddDialogOpen(false);\n      toast({ title: \"Success\", description: \"Information added successfully\" });\n    },\n  });\n\n  // Update data mutation\n  const updateDataMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: any }) => {\n      const res = await fetch(`/api/department/data/${id}`, {\n        method: 'PUT',\n        headers: { \n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${authToken}`\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error('Failed to update data');\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/department/${departmentInfo.id}/data`] });\n      setIsEditDialogOpen(false);\n      setEditingData(null);\n      toast({ title: \"Success\", description: \"Information updated successfully\" });\n    },\n  });\n\n  // Delete data mutation\n  const deleteDataMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const res = await fetch(`/api/department/data/${id}`, { \n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${authToken}`\n        }\n      });\n      if (!res.ok) throw new Error('Failed to delete data');\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/department/${departmentInfo.id}/data`] });\n      toast({ title: \"Success\", description: \"Information deleted successfully\" });\n    },\n  });\n\n  const handleLogin = (e: React.FormEvent) => {\n    e.preventDefault();\n    loginMutation.mutate(loginForm);\n  };\n\n  const handleAddData = (e: React.FormEvent) => {\n    e.preventDefault();\n    addDataMutation.mutate(dataForm);\n  };\n\n  const handleEdit = (data: DepartmentData) => {\n    setEditingData(data);\n    setDataForm({\n      data_type: data.data_type,\n      title: data.title,\n      content: data.content,\n      metadata: data.metadata || {}\n    });\n    setIsEditDialogOpen(true);\n  };\n\n  const handleUpdateData = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!editingData) return;\n    updateDataMutation.mutate({\n      id: editingData.id,\n      data: {\n        title: dataForm.title,\n        content: dataForm.content,\n        metadata: dataForm.metadata\n      }\n    });\n  };\n\n  const handleVoiceInput = (field: 'content' | 'title') => {\n    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\n      const SpeechRecognition = (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition;\n      const recognition = new SpeechRecognition();\n      \n      recognition.lang = 'hi-IN';\n      recognition.continuous = false;\n      \n      recognition.onstart = () => setIsListening(true);\n      recognition.onend = () => setIsListening(false);\n      \n      recognition.onresult = (event: any) => {\n        const transcript = event.results[0][0].transcript;\n        setDataForm(prev => ({ ...prev, [field]: prev[field] + ' ' + transcript }));\n      };\n      \n      recognition.start();\n    } else {\n      toast({ title: \"Not supported\", description: \"Voice input not supported in this browser\", variant: \"destructive\" });\n    }\n  };\n\n  const handleLogout = () => {\n    setIsLoggedIn(false);\n    setDepartmentInfo(null);\n    setAuthToken(null);\n    setLoginForm({ department_id: \"\", password: \"\" });\n    if (slug) {\n      localStorage.removeItem(`dept_token_${slug}`);\n    }\n  };\n\n  if (!slug || !deptData?.department) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <Card className=\"max-w-md w-full mx-4\">\n          <CardContent className=\"pt-6\">\n            <p className=\"text-center text-gray-600\">Department not found</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (!isLoggedIn) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100\">\n        <Card className=\"max-w-md w-full mx-4\">\n          <CardHeader className=\"text-center\">\n            <div className=\"flex justify-center mb-4\">\n              <div className=\"p-3 bg-blue-600 rounded-full\">\n                <Building2 className=\"h-8 w-8 text-white\" />\n              </div>\n            </div>\n            <CardTitle className=\"text-xl sm:text-2xl\">{deptData.department.name}</CardTitle>\n            <CardDescription>Department Panel Login</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <form onSubmit={handleLogin} className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"department_id\">Department ID</Label>\n                <Input\n                  id=\"department_id\"\n                  value={loginForm.department_id}\n                  onChange={(e) => setLoginForm({ ...loginForm, department_id: e.target.value })}\n                  placeholder=\"DEPT-XXXXXXXX\"\n                  required\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"password\">Password</Label>\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  value={loginForm.password}\n                  onChange={(e) => setLoginForm({ ...loginForm, password: e.target.value })}\n                  required\n                />\n              </div>\n              <Button type=\"submit\" className=\"w-full\" disabled={loginMutation.isPending}>\n                {loginMutation.isPending ? \"Logging in...\" : \"Login\"}\n              </Button>\n            </form>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const dataList = departmentDataList?.data || [];\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"bg-white border-b border-gray-200 p-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sticky top-0 z-10\">\n        <div>\n          <h1 className=\"text-lg sm:text-xl font-bold text-gray-900\">{departmentInfo.name}</h1>\n          <p className=\"text-xs sm:text-sm text-gray-600\">Department Panel</p>\n        </div>\n        <Button variant=\"outline\" size=\"sm\" onClick={handleLogout} className=\"w-full sm:w-auto\">\n          <LogOut className=\"h-4 w-4 mr-2\" />\n          Logout\n        </Button>\n      </div>\n\n      <div className=\"p-4 sm:p-6 max-w-6xl mx-auto\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6\">\n          <div>\n            <h2 className=\"text-xl sm:text-2xl font-bold\">Department Information</h2>\n            <p className=\"text-sm sm:text-base text-gray-600 mt-1\">Add and manage department data</p>\n          </div>\n          <Dialog open={isAddDialogOpen} onOpenChange={setIsAddDialogOpen}>\n            <DialogTrigger asChild>\n              <Button className=\"w-full sm:w-auto\">\n                <Plus className=\"mr-2 h-4 w-4\" />\n                Add Information\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto\">\n              <DialogHeader>\n                <DialogTitle>Add Department Information</DialogTitle>\n                <DialogDescription>This will be synced in real-time</DialogDescription>\n              </DialogHeader>\n\n              <form onSubmit={handleAddData} className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"data_type\">Information Type *</Label>\n                  <Input\n                    id=\"data_type\"\n                    value={dataForm.data_type}\n                    onChange={(e) => setDataForm({ ...dataForm, data_type: e.target.value })}\n                    placeholder=\"e.g., timings, events, facilities\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"title\">Title *</Label>\n                  <div className=\"flex gap-2\">\n                    <Input\n                      id=\"title\"\n                      value={dataForm.title}\n                      onChange={(e) => setDataForm({ ...dataForm, title: e.target.value })}\n                      placeholder=\"Information title\"\n                      required\n                    />\n                    <Button\n                      type=\"button\"\n                      size=\"icon\"\n                      variant=\"outline\"\n                      onClick={() => handleVoiceInput('title')}\n                      className={isListening ? \"bg-red-100\" : \"\"}\n                    >\n                      <Mic className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"content\">Content *</Label>\n                  <div className=\"space-y-2\">\n                    <Textarea\n                      id=\"content\"\n                      value={dataForm.content}\n                      onChange={(e) => setDataForm({ ...dataForm, content: e.target.value })}\n                      placeholder=\"Detailed information\"\n                      rows={6}\n                      required\n                    />\n                    <Button\n                      type=\"button\"\n                      size=\"sm\"\n                      variant=\"outline\"\n                      onClick={() => handleVoiceInput('content')}\n                      className={`w-full ${isListening ? \"bg-red-100\" : \"\"}`}\n                    >\n                      <Mic className=\"h-4 w-4 mr-2\" />\n                      {isListening ? \"Listening...\" : \"Use Voice Input\"}\n                    </Button>\n                  </div>\n                </div>\n\n                <Button type=\"submit\" className=\"w-full\" disabled={addDataMutation.isPending}>\n                  {addDataMutation.isPending ? \"Adding...\" : \"Add Information\"}\n                </Button>\n              </form>\n            </DialogContent>\n          </Dialog>\n        </div>\n\n        <div className=\"space-y-4\">\n          {dataList.map((item) => (\n            <Card key={item.id}>\n              <CardHeader>\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <CardTitle className=\"text-lg\">{item.title}</CardTitle>\n                      <span className=\"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-600\">\n                        {item.data_type}\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <Button\n                      size=\"sm\"\n                      variant=\"ghost\"\n                      onClick={() => handleEdit(item)}\n                    >\n                      <Edit2 className=\"h-4 w-4 text-blue-500\" />\n                    </Button>\n                    <Button\n                      size=\"sm\"\n                      variant=\"ghost\"\n                      onClick={() => deleteDataMutation.mutate(item.id)}\n                    >\n                      <Trash2 className=\"h-4 w-4 text-red-500\" />\n                    </Button>\n                  </div>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <p className=\"text-gray-700 whitespace-pre-wrap\">{item.content}</p>\n                <p className=\"text-xs text-gray-500 mt-2\">\n                  Updated: {new Date(item.updated_at).toLocaleString()}\n                </p>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n\n        {dataList.length === 0 && (\n          <Card>\n            <CardContent className=\"py-12 text-center text-gray-500\">\n              No information added yet. Click \"Add Information\" to get started.\n            </CardContent>\n          </Card>\n        )}\n\n        <Dialog open={isEditDialogOpen} onOpenChange={setIsEditDialogOpen}>\n          <DialogContent className=\"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto\">\n            <DialogHeader>\n              <DialogTitle>Edit Department Information</DialogTitle>\n              <DialogDescription>Update the information below</DialogDescription>\n            </DialogHeader>\n\n            <form onSubmit={handleUpdateData} className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"edit-title\">Title *</Label>\n                <div className=\"flex gap-2\">\n                  <Input\n                    id=\"edit-title\"\n                    value={dataForm.title}\n                    onChange={(e) => setDataForm({ ...dataForm, title: e.target.value })}\n                    placeholder=\"Information title\"\n                    required\n                  />\n                  <Button\n                    type=\"button\"\n                    size=\"icon\"\n                    variant=\"outline\"\n                    onClick={() => handleVoiceInput('title')}\n                    className={isListening ? \"bg-red-100\" : \"\"}\n                  >\n                    <Mic className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </div>\n\n              <div>\n                <Label htmlFor=\"edit-content\">Content *</Label>\n                <div className=\"space-y-2\">\n                  <Textarea\n                    id=\"edit-content\"\n                    value={dataForm.content}\n                    onChange={(e) => setDataForm({ ...dataForm, content: e.target.value })}\n                    placeholder=\"Detailed information\"\n                    rows={6}\n                    required\n                  />\n                  <Button\n                    type=\"button\"\n                    size=\"sm\"\n                    variant=\"outline\"\n                    onClick={() => handleVoiceInput('content')}\n                    className={`w-full ${isListening ? \"bg-red-100\" : \"\"}`}\n                  >\n                    <Mic className=\"h-4 w-4 mr-2\" />\n                    {isListening ? \"Listening...\" : \"Use Voice Input\"}\n                  </Button>\n                </div>\n              </div>\n\n              <Button type=\"submit\" className=\"w-full\" disabled={updateDataMutation.isPending}>\n                {updateDataMutation.isPending ? \"Updating...\" : \"Update Information\"}\n              </Button>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </div>\n    </div>\n  );\n}\n","size_bytes":18970},"client/src/components/head-admin/NoticesManager.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Plus, Trash2, Bell, Edit } from \"lucide-react\";\n\ninterface Notice {\n  id: string;\n  title: string;\n  content: string;\n  notice_type: string;\n  priority: string;\n  is_active: boolean;\n  created_at: string;\n  start_date?: string;\n  end_date?: string;\n  department_id?: string;\n  departments?: { name: string };\n}\n\nexport function NoticesManager() {\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\n  const [isEditOpen, setIsEditOpen] = useState(false);\n  const [editingNotice, setEditingNotice] = useState<Notice | null>(null);\n  const [formData, setFormData] = useState({\n    title: \"\",\n    content: \"\",\n    notice_type: \"general\",\n    priority: \"normal\",\n    department_id: \"\",\n    start_date: \"\",\n    end_date: \"\",\n  });\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: noticesData } = useQuery({\n    queryKey: ['/api/head-admin/notices'],\n  });\n\n  const { data: departmentsData } = useQuery({\n    queryKey: ['/api/head-admin/departments'],\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch('/api/head-admin/notices', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error('Failed to create notice');\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/head-admin/notices'] });\n      setFormData({ title: \"\", content: \"\", notice_type: \"general\", priority: \"normal\", department_id: \"\", start_date: \"\", end_date: \"\" });\n      setIsCreateOpen(false);\n      toast({ title: \"Success\", description: \"Notice created successfully\" });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: any }) => {\n      const res = await fetch(`/api/head-admin/notices/${id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error('Failed to update notice');\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/head-admin/notices'] });\n      setIsEditOpen(false);\n      setEditingNotice(null);\n      toast({ title: \"Success\", description: \"Notice updated successfully\" });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const res = await fetch(`/api/head-admin/notices/${id}`, { method: 'DELETE' });\n      if (!res.ok) throw new Error('Failed to delete notice');\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/head-admin/notices'] });\n      toast({ title: \"Success\", description: \"Notice deleted successfully\" });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    const payload: any = { ...formData };\n    if (!payload.department_id) delete payload.department_id;\n    createMutation.mutate(payload);\n  };\n\n  const handleEdit = (notice: Notice) => {\n    setEditingNotice(notice);\n    setFormData({\n      title: notice.title,\n      content: notice.content,\n      notice_type: notice.notice_type,\n      priority: notice.priority,\n      department_id: notice.department_id || \"\",\n      start_date: notice.start_date ? new Date(notice.start_date).toISOString().slice(0, 16) : \"\",\n      end_date: notice.end_date ? new Date(notice.end_date).toISOString().slice(0, 16) : \"\",\n    });\n    setIsEditOpen(true);\n  };\n\n  const handleUpdate = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!editingNotice) return;\n    const payload: any = { ...formData };\n    if (!payload.department_id) delete payload.department_id;\n    updateMutation.mutate({ id: editingNotice.id, data: payload });\n  };\n\n  const notices: Notice[] = (noticesData as any)?.notices || [];\n  const departments = (departmentsData as any)?.departments || [];\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'urgent': return 'text-red-600 bg-red-50';\n      case 'high': return 'text-orange-600 bg-orange-50';\n      case 'normal': return 'text-blue-600 bg-blue-50';\n      default: return 'text-gray-600 bg-gray-50';\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Notices Management</h2>\n          <p className=\"text-gray-600 mt-1\">Create and manage college notices</p>\n        </div>\n        <Dialog open={isCreateOpen} onOpenChange={setIsCreateOpen}>\n          <DialogTrigger asChild>\n            <Button>\n              <Plus className=\"mr-2 h-4 w-4\" />\n              Create Notice\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n            <DialogHeader>\n              <DialogTitle>Create New Notice</DialogTitle>\n              <DialogDescription>Post a new notice for students and staff</DialogDescription>\n            </DialogHeader>\n\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"title\">Title *</Label>\n                <Input\n                  id=\"title\"\n                  value={formData.title}\n                  onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                  placeholder=\"Notice title\"\n                  required\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"content\">Content *</Label>\n                <Textarea\n                  id=\"content\"\n                  value={formData.content}\n                  onChange={(e) => setFormData({ ...formData, content: e.target.value })}\n                  placeholder=\"Notice content\"\n                  rows={5}\n                  required\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <Label>Notice Type *</Label>\n                  <Select value={formData.notice_type} onValueChange={(v) => setFormData({ ...formData, notice_type: v })}>\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"general\">General</SelectItem>\n                      <SelectItem value=\"urgent\">Urgent</SelectItem>\n                      <SelectItem value=\"holiday\">Holiday</SelectItem>\n                      <SelectItem value=\"exam\">Exam</SelectItem>\n                      <SelectItem value=\"event\">Event</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                <div>\n                  <Label>Priority *</Label>\n                  <Select value={formData.priority} onValueChange={(v) => setFormData({ ...formData, priority: v })}>\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"low\">Low</SelectItem>\n                      <SelectItem value=\"normal\">Normal</SelectItem>\n                      <SelectItem value=\"high\">High</SelectItem>\n                      <SelectItem value=\"urgent\">Urgent</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n\n              <div>\n                <Label>Department (Optional)</Label>\n                <Select value={formData.department_id} onValueChange={(v) => setFormData({ ...formData, department_id: v })}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"College-wide notice\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"\">College-wide</SelectItem>\n                    {departments.map((dept: any) => (\n                      <SelectItem key={dept.id} value={dept.id}>{dept.name}</SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <Label htmlFor=\"start_date\">Start Date</Label>\n                  <Input\n                    id=\"start_date\"\n                    type=\"datetime-local\"\n                    value={formData.start_date}\n                    onChange={(e) => setFormData({ ...formData, start_date: e.target.value })}\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"end_date\">End Date</Label>\n                  <Input\n                    id=\"end_date\"\n                    type=\"datetime-local\"\n                    value={formData.end_date}\n                    onChange={(e) => setFormData({ ...formData, end_date: e.target.value })}\n                  />\n                </div>\n              </div>\n\n              <Button type=\"submit\" className=\"w-full\" disabled={createMutation.isPending}>\n                {createMutation.isPending ? \"Creating...\" : \"Create Notice\"}\n              </Button>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <div className=\"space-y-4\">\n        {notices.map((notice) => (\n          <Card key={notice.id}>\n            <CardHeader>\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <Bell className=\"h-4 w-4\" />\n                    <CardTitle className=\"text-lg\">{notice.title}</CardTitle>\n                  </div>\n                  <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${getPriorityColor(notice.priority)}`}>\n                      {notice.priority}\n                    </span>\n                    <span className=\"px-2 py-1 rounded-full text-xs font-medium bg-gray-100\">\n                      {notice.notice_type}\n                    </span>\n                    {notice.departments && (\n                      <span className=\"px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-600\">\n                        {notice.departments.name}\n                      </span>\n                    )}\n                  </div>\n                </div>\n                <div className=\"flex gap-2\">\n                  <Button\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    onClick={() => handleEdit(notice)}\n                  >\n                    <Edit className=\"h-4 w-4 text-blue-500\" />\n                  </Button>\n                  <Button\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    onClick={() => deleteMutation.mutate(notice.id)}\n                  >\n                    <Trash2 className=\"h-4 w-4 text-red-500\" />\n                  </Button>\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-gray-700\">{notice.content}</p>\n              <p className=\"text-xs text-gray-500 mt-2\">\n                Posted: {new Date(notice.created_at).toLocaleString()}\n              </p>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {notices.length === 0 && (\n        <Card>\n          <CardContent className=\"py-12 text-center text-gray-500\">\n            No notices yet. Click \"Create Notice\" to post one.\n          </CardContent>\n        </Card>\n      )}\n\n      <Dialog open={isEditOpen} onOpenChange={setIsEditOpen}>\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>Edit Notice</DialogTitle>\n            <DialogDescription>Update notice information</DialogDescription>\n          </DialogHeader>\n\n          <form onSubmit={handleUpdate} className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"edit-title\">Title *</Label>\n              <Input\n                id=\"edit-title\"\n                value={formData.title}\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                placeholder=\"Notice title\"\n                required\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"edit-content\">Content *</Label>\n              <Textarea\n                id=\"edit-content\"\n                value={formData.content}\n                onChange={(e) => setFormData({ ...formData, content: e.target.value })}\n                placeholder=\"Notice content\"\n                rows={5}\n                required\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>Notice Type *</Label>\n                <Select value={formData.notice_type} onValueChange={(v) => setFormData({ ...formData, notice_type: v })}>\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"general\">General</SelectItem>\n                    <SelectItem value=\"urgent\">Urgent</SelectItem>\n                    <SelectItem value=\"holiday\">Holiday</SelectItem>\n                    <SelectItem value=\"exam\">Exam</SelectItem>\n                    <SelectItem value=\"event\">Event</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <Label>Priority *</Label>\n                <Select value={formData.priority} onValueChange={(v) => setFormData({ ...formData, priority: v })}>\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"low\">Low</SelectItem>\n                    <SelectItem value=\"normal\">Normal</SelectItem>\n                    <SelectItem value=\"high\">High</SelectItem>\n                    <SelectItem value=\"urgent\">Urgent</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div>\n              <Label>Department (Optional)</Label>\n              <Select value={formData.department_id} onValueChange={(v) => setFormData({ ...formData, department_id: v })}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"College-wide notice\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"\">College-wide</SelectItem>\n                  {departments.map((dept: any) => (\n                    <SelectItem key={dept.id} value={dept.id}>{dept.name}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"edit-start_date\">Start Date</Label>\n                <Input\n                  id=\"edit-start_date\"\n                  type=\"datetime-local\"\n                  value={formData.start_date}\n                  onChange={(e) => setFormData({ ...formData, start_date: e.target.value })}\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"edit-end_date\">End Date</Label>\n                <Input\n                  id=\"edit-end_date\"\n                  type=\"datetime-local\"\n                  value={formData.end_date}\n                  onChange={(e) => setFormData({ ...formData, end_date: e.target.value })}\n                />\n              </div>\n            </div>\n\n            <Button type=\"submit\" className=\"w-full\" disabled={updateMutation.isPending}>\n              {updateMutation.isPending ? \"Updating...\" : \"Update Notice\"}\n            </Button>\n          </form>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":16637},"client/src/pages/notice-board.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Bell, Calendar, MessageCircle, MapPin } from \"lucide-react\";\nimport { supabase } from \"@/lib/supabase\";\nimport { getYouTubeEmbedUrl } from \"@/lib/youtube\";\ninterface Notice {\n  id: string;\n  title: string;\n  content: string;\n  notice_type: string;\n  priority: string;\n  is_active: boolean;\n  created_at: string;\n  departments?: { name: string };\n}\n\ninterface Event {\n  id: string;\n  title: string;\n  description?: string;\n  event_type: string;\n  event_date?: string;\n  location?: string;\n  youtube_url?: string;\n  instagram_url?: string;\n  formatted_message?: string;\n  is_active: boolean;\n  departments?: { name: string };\n}\n\nexport default function NoticeBoard() {\n  const [, setLocation] = useLocation();\n  const [notices, setNotices] = useState<Notice[]>([]);\n  const [events, setEvents] = useState<Event[]>([]);\n\n  // Fetch initial data\n  const { data: noticesData } = useQuery({\n    queryKey: ['/api/public/notices'],\n    queryFn: async () => {\n      const res = await fetch('/api/public/notices');\n      if (!res.ok) throw new Error('Failed to fetch notices');\n      return res.json();\n    },\n  });\n\n  const { data: eventsData } = useQuery({\n    queryKey: ['/api/public/events'],\n    queryFn: async () => {\n      const res = await fetch('/api/public/events');\n      if (!res.ok) throw new Error('Failed to fetch events');\n      return res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (noticesData?.notices) {\n      setNotices(noticesData.notices);\n    }\n  }, [noticesData]);\n\n  useEffect(() => {\n    if (eventsData?.events) {\n      setEvents(eventsData.events);\n    }\n  }, [eventsData]);\n\n  // Real-time subscriptions\n  useEffect(() => {\n    const noticesChannel = supabase\n      .channel('public:notices')\n      .on(\n        'postgres_changes',\n        { event: '*', schema: 'public', table: 'notices' },\n        (payload) => {\n          if (payload.eventType === 'INSERT') {\n            setNotices(prev => [payload.new as Notice, ...prev]);\n          } else if (payload.eventType === 'DELETE') {\n            setNotices(prev => prev.filter(n => n.id !== payload.old.id));\n          } else if (payload.eventType === 'UPDATE') {\n            setNotices(prev => prev.map(n => n.id === payload.new.id ? payload.new as Notice : n));\n          }\n        }\n      )\n      .subscribe();\n\n    const eventsChannel = supabase\n      .channel('public:events')\n      .on(\n        'postgres_changes',\n        { event: '*', schema: 'public', table: 'events' },\n        (payload) => {\n          if (payload.eventType === 'INSERT') {\n            setEvents(prev => [payload.new as Event, ...prev]);\n          } else if (payload.eventType === 'DELETE') {\n            setEvents(prev => prev.filter(e => e.id !== payload.old.id));\n          } else if (payload.eventType === 'UPDATE') {\n            setEvents(prev => prev.map(e => e.id === payload.new.id ? payload.new as Event : e));\n          }\n        }\n      )\n      .subscribe();\n\n    return () => {\n      supabase.removeChannel(noticesChannel);\n      supabase.removeChannel(eventsChannel);\n    };\n  }, []);\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'urgent': return 'destructive';\n      case 'high': return 'default';\n      case 'normal': return 'secondary';\n      default: return 'outline';\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100\">\n      <div className=\"bg-white shadow-sm border-b sticky top-0 z-10\">\n        <div className=\"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-xl sm:text-2xl font-bold text-gray-900\">Digital Notice Board</h1>\n            <p className=\"text-xs sm:text-sm text-gray-600\">R.K.S.D. (PG) College, Kaithal</p>\n          </div>\n          <Button onClick={() => setLocation('/')} className=\"gap-2\">\n            <MessageCircle className=\"h-4 w-4\" />\n            Ask Assistant\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          <div className=\"lg:col-span-2 space-y-6\">\n            <div>\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2\">\n                <Bell className=\"h-5 w-5\" />\n                Latest Notices\n              </h2>\n              <div className=\"space-y-4\">\n                {notices.map((notice) => (\n                  <Card key={notice.id} className=\"hover:shadow-lg transition-shadow\">\n                    <CardHeader>\n                      <div className=\"flex items-start justify-between gap-4\">\n                        <div className=\"flex-1\">\n                          <CardTitle className=\"text-lg mb-2\">{notice.title}</CardTitle>\n                          <div className=\"flex flex-wrap gap-2\">\n                            <Badge variant={getPriorityColor(notice.priority)}>\n                              {notice.priority}\n                            </Badge>\n                            <Badge variant=\"outline\">{notice.notice_type}</Badge>\n                            {notice.departments && (\n                              <Badge className=\"bg-purple-100 text-purple-700\">\n                                {notice.departments.name}\n                              </Badge>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <p className=\"text-gray-700 whitespace-pre-wrap\">{notice.content}</p>\n                      <p className=\"text-xs text-gray-500 mt-3\">\n                        Posted: {new Date(notice.created_at).toLocaleString()}\n                      </p>\n                    </CardContent>\n                  </Card>\n                ))}\n\n                {notices.length === 0 && (\n                  <Card>\n                    <CardContent className=\"py-12 text-center text-gray-500\">\n                      No active notices at the moment\n                    </CardContent>\n                  </Card>\n                )}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"space-y-6\">\n            <div>\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2\">\n                <Calendar className=\"h-5 w-5\" />\n                Upcoming Events\n              </h2>\n              <div className=\"space-y-4\">\n                {events.map((event) => {\n                  const youtubeEmbedUrl = event.youtube_url ? getYouTubeEmbedUrl(event.youtube_url) : null;\n                  \n                  return (\n                    <Card key={event.id} className=\"hover:shadow-lg transition-shadow\">\n                      <CardHeader>\n                        <CardTitle className=\"text-base\">{event.title}</CardTitle>\n                        <div className=\"flex flex-wrap gap-2 mt-2\">\n                          <Badge variant=\"outline\">{event.event_type}</Badge>\n                          {event.departments && (\n                            <Badge className=\"bg-purple-100 text-purple-700\">\n                              {event.departments.name}\n                            </Badge>\n                          )}\n                        </div>\n                      </CardHeader>\n                      <CardContent className=\"space-y-2\">\n                        {event.formatted_message && (\n                          <p className=\"text-sm text-gray-700 whitespace-pre-wrap\">{event.formatted_message}</p>\n                        )}\n                        {event.description && !event.formatted_message && (\n                          <p className=\"text-sm text-gray-700\">{event.description}</p>\n                        )}\n                        {youtubeEmbedUrl && (\n                          <div className=\"my-3 rounded-lg overflow-hidden\">\n                            <iframe\n                              width=\"100%\"\n                              height=\"250\"\n                              src={youtubeEmbedUrl}\n                              title={event.title}\n                              frameBorder=\"0\"\n                              allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                              allowFullScreen\n                              className=\"w-full\"\n                            ></iframe>\n                          </div>\n                        )}\n                        {event.event_date && (\n                          <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                            <Calendar className=\"h-4 w-4\" />\n                            {new Date(event.event_date).toLocaleDateString()} at{' '}\n                            {new Date(event.event_date).toLocaleTimeString()}\n                          </div>\n                        )}\n                        {event.location && (\n                          <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                            <MapPin className=\"h-4 w-4\" />\n                            {event.location}\n                          </div>\n                        )}\n                        {event.instagram_url && (\n                          <a\n                            href={event.instagram_url}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            className=\"text-sm text-pink-600 hover:underline inline-block\"\n                          >\n                            View on Instagram â†’\n                          </a>\n                        )}\n                      </CardContent>\n                    </Card>\n                  );\n                })}\n\n                {events.length === 0 && (\n                  <Card>\n                    <CardContent className=\"py-12 text-center text-gray-500 text-sm\">\n                      No upcoming events\n                    </CardContent>\n                  </Card>\n                )}\n              </div>\n            </div>\n\n            <Card className=\"bg-gradient-to-br from-blue-500 to-indigo-600 text-white border-0\">\n              <CardHeader>\n                <CardTitle className=\"text-white\">Need Help?</CardTitle>\n                <CardDescription className=\"text-blue-100\">\n                  Ask our AI assistant about college information\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <Button\n                  onClick={() => setLocation('/')}\n                  className=\"w-full bg-white text-blue-600 hover:bg-blue-50\"\n                >\n                  <MessageCircle className=\"h-4 w-4 mr-2\" />\n                  Talk to Assistant\n                </Button>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":11240},"client/src/components/head-admin/DepartmentsManager.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Plus, Edit, Trash2, Copy, Eye, EyeOff, ExternalLink } from \"lucide-react\";\nimport { supabase } from \"@/lib/supabase\";\n\ninterface Department {\n  id: string;\n  name: string;\n  slug: string;\n  department_id: string;\n  head_name?: string;\n  contact_email?: string;\n  contact_phone?: string;\n  description?: string;\n  panel_link: string;\n  is_active: boolean;\n  created_at: string;\n}\n\nexport function DepartmentsManager() {\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\n  const [formData, setFormData] = useState({\n    name: \"\",\n    head_name: \"\",\n    contact_email: \"\",\n    contact_phone: \"\",\n    description: \"\",\n  });\n  const [newCredentials, setNewCredentials] = useState<any>(null);\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  // Fetch departments\n  const { data: departmentsData } = useQuery({\n    queryKey: ['/api/head-admin/departments'],\n    queryFn: async () => {\n      const res = await fetch('/api/head-admin/departments');\n      if (!res.ok) throw new Error('Failed to fetch departments');\n      return res.json();\n    },\n  });\n\n  // Create department mutation\n  const createMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch('/api/head-admin/departments', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error('Failed to create department');\n      return res.json();\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: ['/api/head-admin/departments'] });\n      setNewCredentials(data.credentials);\n      setFormData({ name: \"\", head_name: \"\", contact_email: \"\", contact_phone: \"\", description: \"\" });\n      toast({\n        title: \"Success\",\n        description: \"Department created successfully! Save the credentials shown below.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Delete department mutation\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const res = await fetch(`/api/head-admin/departments/${id}`, {\n        method: 'DELETE',\n      });\n      if (!res.ok) throw new Error('Failed to delete department');\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/head-admin/departments'] });\n      toast({\n        title: \"Success\",\n        description: \"Department deleted successfully\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    createMutation.mutate(formData);\n  };\n\n  const copyToClipboard = (text: string, label: string) => {\n    navigator.clipboard.writeText(text);\n    toast({\n      title: \"Copied!\",\n      description: `${label} copied to clipboard`,\n    });\n  };\n\n  const departments: Department[] = departmentsData?.departments || [];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Departments Management</h2>\n          <p className=\"text-gray-600 mt-1\">Create and manage department panels</p>\n        </div>\n        <Dialog open={isCreateOpen} onOpenChange={setIsCreateOpen}>\n          <DialogTrigger asChild>\n            <Button>\n              <Plus className=\"mr-2 h-4 w-4\" />\n              Create Department\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n            <DialogHeader>\n              <DialogTitle>Create New Department Panel</DialogTitle>\n              <DialogDescription>\n                Create a new department with secure credentials\n              </DialogDescription>\n            </DialogHeader>\n\n            {newCredentials ? (\n              <div className=\"space-y-4 bg-blue-50 p-4 rounded-lg border border-blue-200\">\n                <div className=\"text-sm font-medium text-blue-900\">\n                  âš ï¸ Save these credentials! They won't be shown again.\n                </div>\n                \n                <div className=\"space-y-3\">\n                  <div>\n                    <Label className=\"text-sm font-medium\">Department ID</Label>\n                    <div className=\"flex gap-2 mt-1\">\n                      <Input value={newCredentials.department_id} readOnly className=\"bg-white\" />\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => copyToClipboard(newCredentials.department_id, \"Department ID\")}\n                      >\n                        <Copy className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n\n                  <div>\n                    <Label className=\"text-sm font-medium\">Password</Label>\n                    <div className=\"flex gap-2 mt-1\">\n                      <Input value={newCredentials.password} readOnly className=\"bg-white\" />\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => copyToClipboard(newCredentials.password, \"Password\")}\n                      >\n                        <Copy className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n\n                  <div>\n                    <Label className=\"text-sm font-medium\">Panel Link</Label>\n                    <div className=\"flex gap-2 mt-1\">\n                      <Input value={`${window.location.origin}${newCredentials.panel_link}`} readOnly className=\"bg-white\" />\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => copyToClipboard(`${window.location.origin}${newCredentials.panel_link}`, \"Panel Link\")}\n                      >\n                        <Copy className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n\n                <Button onClick={() => { setNewCredentials(null); setIsCreateOpen(false); }} className=\"w-full\">\n                  Done\n                </Button>\n              </div>\n            ) : (\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"name\">Department Name *</Label>\n                  <Input\n                    id=\"name\"\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    placeholder=\"e.g., Science, Arts, Sports\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"head_name\">Head of Department</Label>\n                  <Input\n                    id=\"head_name\"\n                    value={formData.head_name}\n                    onChange={(e) => setFormData({ ...formData, head_name: e.target.value })}\n                    placeholder=\"Dr. Name\"\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"contact_email\">Contact Email</Label>\n                  <Input\n                    id=\"contact_email\"\n                    type=\"email\"\n                    value={formData.contact_email}\n                    onChange={(e) => setFormData({ ...formData, contact_email: e.target.value })}\n                    placeholder=\"department@college.edu\"\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"contact_phone\">Contact Phone</Label>\n                  <Input\n                    id=\"contact_phone\"\n                    value={formData.contact_phone}\n                    onChange={(e) => setFormData({ ...formData, contact_phone: e.target.value })}\n                    placeholder=\"+91-XXXXXXXXXX\"\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"description\">Description</Label>\n                  <Textarea\n                    id=\"description\"\n                    value={formData.description}\n                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                    placeholder=\"Brief description of the department\"\n                    rows={3}\n                  />\n                </div>\n\n                <Button type=\"submit\" className=\"w-full\" disabled={createMutation.isPending}>\n                  {createMutation.isPending ? \"Creating...\" : \"Create Department\"}\n                </Button>\n              </form>\n            )}\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n        {departments.map((dept) => (\n          <Card key={dept.id}>\n            <CardHeader>\n              <CardTitle className=\"text-lg flex items-center justify-between\">\n                {dept.name}\n                <div className=\"flex gap-1\">\n                  <Button\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    onClick={() => window.open(dept.panel_link, '_blank')}\n                  >\n                    <ExternalLink className=\"h-4 w-4\" />\n                  </Button>\n                  <Button\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    onClick={() => deleteMutation.mutate(dept.id)}\n                  >\n                    <Trash2 className=\"h-4 w-4 text-red-500\" />\n                  </Button>\n                </div>\n              </CardTitle>\n              <CardDescription>\n                ID: {dept.department_id}\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-2 text-sm\">\n                {dept.head_name && (\n                  <div>\n                    <span className=\"font-medium\">Head:</span> {dept.head_name}\n                  </div>\n                )}\n                {dept.contact_email && (\n                  <div>\n                    <span className=\"font-medium\">Email:</span> {dept.contact_email}\n                  </div>\n                )}\n                {dept.contact_phone && (\n                  <div>\n                    <span className=\"font-medium\">Phone:</span> {dept.contact_phone}\n                  </div>\n                )}\n                <div>\n                  <span className=\"font-medium\">Status:</span>{\" \"}\n                  <span className={dept.is_active ? \"text-green-600\" : \"text-red-600\"}>\n                    {dept.is_active ? \"Active\" : \"Inactive\"}\n                  </span>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {departments.length === 0 && (\n        <Card>\n          <CardContent className=\"py-12 text-center text-gray-500\">\n            No departments created yet. Click \"Create Department\" to get started.\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n","size_bytes":11879},"server/routes-head-admin.ts":{"content":"import type { Express } from \"express\";\nimport { supabase } from \"./supabase\";\nimport { z } from \"zod\";\nimport bcrypt from \"bcryptjs\";\nimport { nanoid } from \"nanoid\";\n\nconst createDepartmentSchema = z.object({\n  name: z.string().min(1),\n  head_name: z.string().optional(),\n  contact_email: z.string().email().optional(),\n  contact_phone: z.string().optional(),\n  description: z.string().optional(),\n});\n\nconst updateDepartmentSchema = z.object({\n  head_name: z.string().optional(),\n  contact_email: z.string().email().optional(),\n  contact_phone: z.string().optional(),\n  description: z.string().optional(),\n  is_active: z.boolean().optional(),\n});\n\nconst createNoticeSchema = z.object({\n  title: z.string().min(1),\n  content: z.string().min(1),\n  notice_type: z.enum(['general', 'urgent', 'holiday', 'exam', 'event']),\n  priority: z.enum(['low', 'normal', 'high', 'urgent']).optional(),\n  department_id: z.string().uuid().optional(),\n  start_date: z.string().optional(),\n  end_date: z.string().optional(),\n});\n\nconst createEventSchema = z.object({\n  title: z.string().min(1),\n  description: z.string().optional(),\n  event_type: z.string().min(1),\n  event_date: z.string().optional(),\n  location: z.string().optional(),\n  department_id: z.string().uuid().optional(),\n});\n\nfunction generateSlug(name: string): string {\n  return name\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, '-')\n    .replace(/^-+|-+$/g, '');\n}\n\nfunction generateDepartmentId(): string {\n  return `DEPT-${nanoid(8).toUpperCase()}`;\n}\n\nfunction generatePassword(): string {\n  return nanoid(12);\n}\n\nexport function registerHeadAdminRoutes(app: Express) {\n  \n  // Get all departments\n  app.get(\"/api/head-admin/departments\", async (req, res) => {\n    try {\n      const { data, error } = await supabase\n        .from('departments')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      res.json({ departments: data });\n    } catch (error: any) {\n      console.error('Error fetching departments:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Create new department\n  app.post(\"/api/head-admin/departments\", async (req, res) => {\n    try {\n      const validated = createDepartmentSchema.parse(req.body);\n      const slug = generateSlug(validated.name);\n      const departmentId = generateDepartmentId();\n      const password = generatePassword();\n      const hashedPassword = await bcrypt.hash(password, 10);\n      const panelLink = `/department/${slug}`;\n\n      const { data, error } = await supabase\n        .from('departments')\n        .insert({\n          name: validated.name,\n          slug,\n          department_id: departmentId,\n          password: hashedPassword,\n          head_name: validated.head_name,\n          contact_email: validated.contact_email,\n          contact_phone: validated.contact_phone,\n          description: validated.description,\n          panel_link: panelLink,\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      res.json({\n        department: data,\n        credentials: {\n          department_id: departmentId,\n          password: password, // Send plain password only once\n          panel_link: panelLink\n        }\n      });\n    } catch (error: any) {\n      console.error('Error creating department:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Update department\n  app.put(\"/api/head-admin/departments/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const validated = updateDepartmentSchema.parse(req.body);\n\n      const { data, error } = await supabase\n        .from('departments')\n        .update({\n          ...validated,\n          updated_at: new Date().toISOString()\n        })\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ department: data });\n    } catch (error: any) {\n      console.error('Error updating department:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Delete department\n  app.delete(\"/api/head-admin/departments/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n\n      const { error } = await supabase\n        .from('departments')\n        .delete()\n        .eq('id', id);\n\n      if (error) throw error;\n      res.json({ success: true });\n    } catch (error: any) {\n      console.error('Error deleting department:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Get all notices\n  app.get(\"/api/head-admin/notices\", async (req, res) => {\n    try {\n      const { data, error } = await supabase\n        .from('notices')\n        .select('*, departments(name)')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      res.json({ notices: data });\n    } catch (error: any) {\n      console.error('Error fetching notices:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Create notice\n  app.post(\"/api/head-admin/notices\", async (req, res) => {\n    try {\n      const validated = createNoticeSchema.parse(req.body);\n\n      const { data, error } = await supabase\n        .from('notices')\n        .insert({\n          ...validated,\n          is_active: true\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ notice: data });\n    } catch (error: any) {\n      console.error('Error creating notice:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Update notice\n  app.put(\"/api/head-admin/notices/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n\n      const { data, error } = await supabase\n        .from('notices')\n        .update({\n          ...req.body,\n          updated_at: new Date().toISOString()\n        })\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ notice: data });\n    } catch (error: any) {\n      console.error('Error updating notice:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Delete notice\n  app.delete(\"/api/head-admin/notices/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n\n      const { error } = await supabase\n        .from('notices')\n        .delete()\n        .eq('id', id);\n\n      if (error) throw error;\n      res.json({ success: true });\n    } catch (error: any) {\n      console.error('Error deleting notice:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Get all events\n  app.get(\"/api/head-admin/events\", async (req, res) => {\n    try {\n      const { data, error } = await supabase\n        .from('events')\n        .select('*, departments(name)')\n        .order('event_date', { ascending: true });\n\n      if (error) throw error;\n      res.json({ events: data });\n    } catch (error: any) {\n      console.error('Error fetching events:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Create event\n  app.post(\"/api/head-admin/events\", async (req, res) => {\n    try {\n      const validated = createEventSchema.parse(req.body);\n\n      const { data, error } = await supabase\n        .from('events')\n        .insert({\n          ...validated,\n          is_active: true\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ event: data });\n    } catch (error: any) {\n      console.error('Error creating event:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Update event\n  app.put(\"/api/head-admin/events/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n\n      const { data, error } = await supabase\n        .from('events')\n        .update({\n          ...req.body,\n          updated_at: new Date().toISOString()\n        })\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ event: data });\n    } catch (error: any) {\n      console.error('Error updating event:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Delete event\n  app.delete(\"/api/head-admin/events/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n\n      const { error } = await supabase\n        .from('events')\n        .delete()\n        .eq('id', id);\n\n      if (error) throw error;\n      res.json({ success: true });\n    } catch (error: any) {\n      console.error('Error deleting event:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Get all department data\n  app.get(\"/api/head-admin/department-data\", async (req, res) => {\n    try {\n      const { data, error } = await supabase\n        .from('department_data')\n        .select('*, departments(name)')\n        .order('created_at', { ascending: false })\n        .limit(50);\n\n      if (error) throw error;\n      res.json({ data });\n    } catch (error: any) {\n      console.error('Error fetching department data:', error);\n      res.status(500).json({ message: error.message, data: [] });\n    }\n  });\n\n  // Get department statistics\n  app.get(\"/api/head-admin/stats\", async (req, res) => {\n    try {\n      const [depts, notices, events] = await Promise.all([\n        supabase.from('departments').select('id', { count: 'exact', head: true }),\n        supabase.from('notices').select('id', { count: 'exact', head: true }).eq('is_active', true),\n        supabase.from('events').select('id', { count: 'exact', head: true }).eq('is_active', true),\n      ]);\n\n      res.json({\n        total_departments: depts.count || 0,\n        active_notices: notices.count || 0,\n        upcoming_events: events.count || 0,\n      });\n    } catch (error: any) {\n      console.error('Error fetching stats:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n}\n","size_bytes":9866},"server/routes-department.ts":{"content":"import type { Express } from \"express\";\nimport { supabase } from \"./supabase\";\nimport { z } from \"zod\";\nimport bcrypt from \"bcryptjs\";\nimport { generateDepartmentToken, requireDepartmentAuth, validateDepartmentAccess } from \"./department-auth\";\n\nconst loginSchema = z.object({\n  department_id: z.string(),\n  password: z.string(),\n});\n\nconst addDataSchema = z.object({\n  data_type: z.string().min(1),\n  title: z.string().min(1),\n  content: z.string().min(1),\n  metadata: z.any().optional(),\n});\n\nconst updateDataSchema = z.object({\n  title: z.string().optional(),\n  content: z.string().optional(),\n  metadata: z.any().optional(),\n});\n\nexport function registerDepartmentRoutes(app: Express) {\n  \n  // Department login\n  app.post(\"/api/department/login\", async (req, res) => {\n    try {\n      const { department_id, password } = loginSchema.parse(req.body);\n\n      const { data: department, error } = await supabase\n        .from('departments')\n        .select('*')\n        .eq('department_id', department_id)\n        .eq('is_active', true)\n        .single();\n\n      if (error || !department) {\n        return res.status(401).json({ message: \"Invalid credentials\" });\n      }\n\n      const isValid = await bcrypt.compare(password, department.password);\n      if (!isValid) {\n        return res.status(401).json({ message: \"Invalid credentials\" });\n      }\n\n      // Don't send password hash to client\n      const { password: _, ...departmentData } = department;\n\n      const token = generateDepartmentToken(department.id, department.slug);\n\n      res.json({\n        department: departmentData,\n        token\n      });\n    } catch (error: any) {\n      console.error('Department login error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Get department info by slug\n  app.get(\"/api/department/:slug\", async (req, res) => {\n    try {\n      const { slug } = req.params;\n\n      const { data, error } = await supabase\n        .from('departments')\n        .select('id, name, slug, department_id, head_name, contact_email, contact_phone, description, is_active')\n        .eq('slug', slug)\n        .single();\n\n      if (error) throw error;\n      res.json({ department: data });\n    } catch (error: any) {\n      console.error('Error fetching department:', error);\n      res.status(404).json({ message: \"Department not found\" });\n    }\n  });\n\n  // Get department data (protected)\n  app.get(\"/api/department/:departmentId/data\", requireDepartmentAuth, validateDepartmentAccess, async (req, res) => {\n    try {\n      const { departmentId } = req.params;\n\n      const { data, error } = await supabase\n        .from('department_data')\n        .select('*')\n        .eq('department_id', departmentId)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      res.json({ data });\n    } catch (error: any) {\n      console.error('Error fetching department data:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Add department data (protected)\n  app.post(\"/api/department/:departmentId/data\", requireDepartmentAuth, validateDepartmentAccess, async (req, res) => {\n    try {\n      const { departmentId } = req.params;\n      const validated = addDataSchema.parse(req.body);\n\n      const { data, error } = await supabase\n        .from('department_data')\n        .insert({\n          department_id: departmentId,\n          ...validated\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ data });\n    } catch (error: any) {\n      console.error('Error adding department data:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Update department data (protected)\n  app.put(\"/api/department/data/:id\", requireDepartmentAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const validated = updateDataSchema.parse(req.body);\n      const departmentAuth = (req as any).departmentAuth;\n\n      // Update only if it belongs to the authenticated department\n      const { data, error } = await supabase\n        .from('department_data')\n        .update({\n          ...validated,\n          updated_at: new Date().toISOString()\n        })\n        .eq('id', id)\n        .eq('department_id', departmentAuth.departmentId)\n        .select()\n        .single();\n\n      if (error) {\n        if (error.code === 'PGRST116') {\n          return res.status(404).json({ message: \"Data not found or access denied\" });\n        }\n        throw error;\n      }\n\n      res.json({ data });\n    } catch (error: any) {\n      console.error('Error updating department data:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Delete department data (protected)\n  app.delete(\"/api/department/data/:id\", requireDepartmentAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const departmentAuth = (req as any).departmentAuth;\n\n      // Delete only if it belongs to the authenticated department\n      const { error, count } = await supabase\n        .from('department_data')\n        .delete({ count: 'exact' })\n        .eq('id', id)\n        .eq('department_id', departmentAuth.departmentId);\n\n      if (error) throw error;\n      \n      if (count === 0) {\n        return res.status(404).json({ message: \"Data not found or access denied\" });\n      }\n\n      res.json({ success: true });\n    } catch (error: any) {\n      console.error('Error deleting department data:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Get public notices\n  app.get(\"/api/public/notices\", async (req, res) => {\n    try {\n      const { data, error } = await supabase\n        .from('notices')\n        .select('*, departments(name)')\n        .eq('is_active', true)\n        .order('priority', { ascending: false })\n        .order('created_at', { ascending: false })\n        .limit(20);\n\n      if (error) throw error;\n      res.json({ notices: data });\n    } catch (error: any) {\n      console.error('Error fetching public notices:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Get public events\n  app.get(\"/api/public/events\", async (req, res) => {\n    try {\n      // Show events from 7 days ago to future\n      const sevenDaysAgo = new Date();\n      sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);\n      \n      const { data, error } = await supabase\n        .from('events')\n        .select('*, departments(name)')\n        .eq('is_active', true)\n        .gte('event_date', sevenDaysAgo.toISOString())\n        .order('event_date', { ascending: false })\n        .limit(20);\n\n      if (error) throw error;\n      res.json({ events: data });\n    } catch (error: any) {\n      console.error('Error fetching public events:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n}\n","size_bytes":6831},"client/src/pages/landing.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport {\n  Bot,\n  Building2,\n  Hospital,\n  Scale,\n  MapPin,\n  Navigation,\n  Sparkles,\n  Zap,\n  Shield,\n  Globe,\n  Users,\n  Clock,\n  CheckCircle2,\n  ArrowRight,\n  Mail,\n  Send,\n  MessageSquare,\n  Lightbulb,\n  Rocket,\n  Star,\n  Mic,\n  Map,\n  Brain,\n  ChevronDown,\n  Activity,\n  Eye,\n  Cpu,\n  Database,\n  Lock,\n  Image as ImageIcon,\n  Layers,\n  Smartphone,\n  Play,\n  Pause,\n  Phone,\n} from \"lucide-react\";\nimport {\n  Instagram,\n  Linkedin,\n  Twitter,\n  Send as TelegramIcon,\n} from \"lucide-react\";\nimport { motion, useScroll, useTransform } from \"framer-motion\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport Ballpit from \"@/components/Ballpit\";\nimport SplitText from \"@/components/SplitText\";\nimport CardSwap, { Card } from \"@/components/CardSwap\";\nimport CircleGallery from \"@/components/CircleGallery\";\n\nexport default function Landing() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [scrolled, setScrolled] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  const [demoModal, setDemoModal] = useState<\"campus\" | \"court\" | null>(null);\n  const [isVideoPlaying, setIsVideoPlaying] = useState(false);\n  const { scrollYProgress } = useScroll();\n  const opacity = useTransform(scrollYProgress, [0, 0.2], [1, 0]);\n\n  useEffect(() => {\n    const handleScroll = () => {\n      setScrolled(window.scrollY > 50);\n    };\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, []);\n\n  const handleEarlyAccess = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!email) return;\n    toast({\n      title: \"Welcome to the future! ðŸš€\",\n      description: \"You're on the early access list. We'll be in touch soon.\",\n    });\n    setEmail(\"\");\n  };\n\n  const fadeInUp = {\n    initial: { opacity: 0, y: 30 },\n    whileInView: { opacity: 1, y: 0 },\n    viewport: { once: true },\n    transition: { duration: 0.6 },\n  };\n\n  return (\n    <div\n      className=\"min-h-screen text-white overflow-x-hidden\"\n      style={{\n        background:\n          \"linear-gradient(180deg, #0E0E15 0%, #1a0f0f 50%, #0E0E15 100%)\",\n      }}\n    >\n      {/* Animated Background */}\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute top-0 left-1/4 w-96 h-96 bg-orange-500/5 rounded-full blur-3xl animate-pulse\"></div>\n        <div\n          className=\"absolute bottom-0 right-1/4 w-96 h-96 bg-amber-500/5 rounded-full blur-3xl animate-pulse\"\n          style={{ animationDelay: \"1s\" }}\n        ></div>\n        <div\n          className=\"absolute top-1/2 left-1/2 w-96 h-96 bg-yellow-500/3 rounded-full blur-3xl animate-pulse\"\n          style={{ animationDelay: \"2s\" }}\n        ></div>\n      </div>\n      {/* Navigation */}\n      <nav\n        className={`fixed top-0 w-full z-50 transition-all duration-300 ${scrolled ? \"bg-[#0E0E15]/90 backdrop-blur-xl border-b border-orange-500/10 shadow-lg shadow-orange-500/5\" : \"bg-transparent\"}`}\n      >\n        <div className=\"container mx-auto px-6 lg:px-8 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <motion.div\n              initial={{ opacity: 0, x: -20 }}\n              animate={{ opacity: 1, x: 0 }}\n              className=\"flex items-center gap-3\"\n            >\n              <div className=\"relative group cursor-pointer\">\n                <div className=\"absolute inset-0 bg-gradient-to-r from-orange-500 to-amber-500 rounded-xl blur-md opacity-75 group-hover:opacity-100 transition-opacity animate-pulse\"></div>\n                <div className=\"relative bg-gradient-to-br from-orange-500 to-amber-500 p-2.5 rounded-xl\">\n                  <Navigation className=\"h-6 w-6 text-white\" />\n                </div>\n              </div>\n              <div>\n                <h1 className=\"text-xl font-bold tracking-tight\">\n                  <span className=\"bg-gradient-to-r from-orange-400 via-amber-400 to-yellow-400 bg-clip-text text-transparent\">\n                    WayFinder.Ai\n                  </span>\n                </h1>\n                <p className=\"text-xs text-gray-400\">\n                  AI Navigation Intelligence\n                </p>\n              </div>\n            </motion.div>\n\n            <motion.div\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              className=\"flex items-center gap-4\"\n            >\n              <Button\n                variant=\"ghost\"\n                className=\"hidden md:flex text-gray-300 hover:text-white hover:bg-orange-500/10 text-sm\"\n                onClick={() =>\n                  document\n                    .getElementById(\"overview\")\n                    ?.scrollIntoView({ behavior: \"smooth\" })\n                }\n              >\n                Overview\n              </Button>\n              <Button\n                variant=\"ghost\"\n                className=\"hidden lg:flex text-gray-300 hover:text-white hover:bg-orange-500/10 text-sm\"\n                onClick={() =>\n                  document\n                    .getElementById(\"how-it-works\")\n                    ?.scrollIntoView({ behavior: \"smooth\" })\n                }\n              >\n                How it works\n              </Button>\n              <Button\n                variant=\"ghost\"\n                className=\"hidden lg:flex text-gray-300 hover:text-white hover:bg-orange-500/10 text-sm\"\n                onClick={() =>\n                  document\n                    .getElementById(\"features\")\n                    ?.scrollIntoView({ behavior: \"smooth\" })\n                }\n              >\n                Features\n              </Button>\n              <Button\n                variant=\"ghost\"\n                className=\"hidden md:flex text-gray-300 hover:text-white hover:bg-orange-500/10 text-sm\"\n                onClick={() =>\n                  document\n                    .getElementById(\"demo\")\n                    ?.scrollIntoView({ behavior: \"smooth\" })\n                }\n              >\n                Demo Experience\n              </Button>\n              <Button\n                className=\"relative overflow-hidden group\"\n                onClick={() =>\n                  document\n                    .getElementById(\"contact\")\n                    ?.scrollIntoView({ behavior: \"smooth\" })\n                }\n              >\n                <div className=\"absolute inset-0 bg-gradient-to-r from-orange-500 to-amber-500 transition-opacity group-hover:opacity-90\"></div>\n                <span className=\"relative flex items-center gap-2 text-white font-medium px-1\">\n                  <Rocket className=\"h-4 w-4\" />\n                  Get Early Access\n                </span>\n              </Button>\n            </motion.div>\n          </div>\n        </div>\n      </nav>\n      {/* Hero Section */}\n      <section className=\"relative min-h-screen flex items-center justify-center px-6 pt-24 pb-32 overflow-hidden\">\n        {/* Background Image */}\n        <div className=\"absolute inset-0\">\n          <img\n            src=\"/images/hero.png\"\n            alt=\"Hero Background\"\n            className=\"w-full h-full object-cover\"\n          />\n          <div className=\"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent\"></div>\n        </div>\n\n        {/* Ballpit Background - Currently Hidden */}\n        {/* <div className=\"absolute inset-0 opacity-60\">\n          <Ballpit />\n        </div> */}\n\n        <div className=\"container mx-auto max-w-6xl relative z-10\">\n          <div className=\"text-center space-y-8 py-12\">\n            <motion.div\n              initial={{ opacity: 0, scale: 0.9 }}\n              animate={{ opacity: 1, scale: 1 }}\n              transition={{ duration: 0.8 }}\n            >\n              <div className=\"inline-flex items-center gap-2 px-5 py-2.5 rounded-full mb-6 border border-orange-300/30 bg-orange-500/20 backdrop-blur-md shadow-lg\">\n                <Sparkles className=\"h-4 w-4 text-yellow-300\" />\n                <span className=\"text-yellow-100 font-semibold text-sm tracking-wide\">\n                  Next-Gen AI Navigation\n                </span>\n              </div>\n              {/* FIXED HEADING SPACING */}\n              <div className=\"text-3xl sm:text-4xl lg:text-6xl font-bold mb-6 leading-[1.2] sm:leading-[1.2] lg:leading-[1.2] drop-shadow-2xl\">\n                <SplitText\n                  text=\"Navigate institutions like\"\n                  className=\"block text-white drop-shadow-lg\"\n                  tag=\"span\"\n                  delay={50}\n                  duration={0.8}\n                  from={{ opacity: 0, y: 50 }}\n                  to={{ opacity: 1, y: 0 }}\n                  threshold={0.1}\n                />\n                <span className=\"block bg-gradient-to-r from-yellow-200 via-orange-300 to-yellow-100 bg-clip-text text-transparent drop-shadow-2xl\">\n                  the world finally learned to speak.\n                </span>\n              </div>\n\n              <p className=\"text-base sm:text-xl text-white max-w-3xl mx-auto leading-relaxed font-medium drop-shadow-lg px-4\">\n                AI that guides every student, patient, visitor, and citizen with\n                clarity, direction, and confidence.\n              </p>\n            </motion.div>\n\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.8, delay: 0.2 }}\n              className=\"flex flex-col sm:flex-row gap-5 justify-center items-center pt-6\"\n            >\n              <Button\n                size=\"lg\"\n                className=\"relative overflow-hidden group px-10 py-4 h-14 min-w-[240px] shadow-2xl\"\n                onClick={() =>\n                  document\n                    .getElementById(\"demo\")\n                    ?.scrollIntoView({ behavior: \"smooth\" })\n                }\n              >\n                <div className=\"absolute inset-0 bg-gradient-to-r from-orange-500 via-yellow-500 to-orange-400 transition-transform group-hover:scale-110\"></div>\n                <span className=\"relative flex items-center gap-2 text-black font-bold text-base\">\n                  <Zap className=\"h-5 w-5\" />\n                  Experience Live Demo\n                </span>\n              </Button>\n              <Button\n                size=\"lg\"\n                variant=\"outline\"\n                className=\"border-2 border-white/60 bg-white/10 backdrop-blur-md text-white hover:bg-white/25 hover:border-white/80 px-10 py-4 h-14 min-w-[240px] group font-bold text-base shadow-2xl\"\n                onClick={() =>\n                  document\n                    .getElementById(\"how-it-works\")\n                    ?.scrollIntoView({ behavior: \"smooth\" })\n                }\n              >\n                <span className=\"flex items-center gap-2\">\n                  How It Works\n                  <ArrowRight className=\"h-5 w-5 group-hover:translate-x-1 transition-transform\" />\n                </span>\n              </Button>\n            </motion.div>\n\n            <motion.div\n              style={{ opacity }}\n              className=\"mt-16 flex justify-center pb-4\"\n            >\n              <motion.div\n                animate={{ y: [0, 10, 0] }}\n                transition={{ duration: 2, repeat: Infinity }}\n                className=\"text-white drop-shadow-lg\"\n              >\n                <ChevronDown className=\"h-10 w-10\" />\n              </motion.div>\n            </motion.div>\n          </div>\n        </div>\n      </section>\n\n      {/* How WayFinder.Ai Works Section */}\n      <section id=\"overview\" className=\"py-10 sm:py-14 px-4 sm:px-6 relative\">\n        <div className=\"absolute inset-0 bg-gradient-to-b from-transparent via-orange-500/5 to-transparent\"></div>\n        <div className=\"container mx-auto max-w-6xl relative z-10\">\n          {/* Section Title */}\n          <motion.div {...fadeInUp} className=\"text-center mb-8 sm:mb-10\">\n            <h2 className=\"text-2xl sm:text-3xl md:text-4xl font-bold\">\n              How{\" \"}\n              <motion.span\n                className=\"inline-block bg-gradient-to-r from-orange-400 via-amber-400 to-yellow-400 bg-clip-text text-transparent\"\n                animate={{\n                  backgroundPosition: [\"0% 50%\", \"100% 50%\", \"0% 50%\"],\n                }}\n                transition={{\n                  duration: 3,\n                  repeat: Infinity,\n                  ease: \"linear\",\n                }}\n                style={{ backgroundSize: \"200% 200%\" }}\n              >\n                WayFinder.Ai\n              </motion.span>{\" \"}\n              Works\n            </h2>\n          </motion.div>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-10 items-start\">\n            {\" \"}\n            {/* Left: Video */}{\" \"}\n            <motion.div\n              {...fadeInUp}\n              className=\"flex justify-center lg:justify-start order-1 lg:order-1 ml-0 lg:ml-[-4rem] mt-2 sm:mt-3 lg:mt-4\"\n            >\n              {\" \"}\n              <div className=\"relative w-full max-w-[98%] sm:max-w-xl md:max-w-2xl lg:max-w-[72vw]\">\n                {\" \"}\n                <div className=\"absolute inset-0 bg-gradient-to-r from-orange-500 to-amber-500 rounded-xl blur-lg opacity-20\"></div>{\" \"}\n                <div className=\"relative rounded-xl overflow-hidden shadow-xl border border-orange-500/20 bg-black/40 backdrop-blur-sm\">\n                  {\" \"}\n                  <video\n                    src=\"/images/video1.mp4\"\n                    autoPlay\n                    loop\n                    muted\n                    playsInline\n                    className=\"w-full h-auto min-h-[200px] sm:min-h-[250px] md:min-h-[340px] lg:min-h-[420px] object-cover\"\n                  />{\" \"}\n                </div>{\" \"}\n              </div>{\" \"}\n            </motion.div>\n            {/* Right: Text Content */}\n            <motion.div\n              {...fadeInUp}\n              transition={{ delay: 0.2 }}\n              className=\"space-y-3 sm:space-y-4 order-2 lg:order-2\"\n            >\n              <div className=\"group\">\n                <p\n                  className=\"text-sm sm:text-base lg:text-lg text-gray-100 leading-relaxed font-medium\"\n                  style={{ lineHeight: \"1.7\" }}\n                >\n                  <span className=\"inline-block bg-gradient-to-r from-orange-400 to-amber-400 bg-clip-text text-transparent font-bold text-lg sm:text-xl\">\n                    WayFinder.Ai\n                  </span>{\" \"}\n                  is an AI-powered institutional assistant built to simplify and\n                  modernize experiences inside large facilities â€” from\n                  universities and hospitals to courts and corporate campuses.\n                </p>\n              </div>\n\n              <div className=\"group\">\n                <p\n                  className=\"text-sm sm:text-base lg:text-lg text-gray-100 leading-relaxed font-medium\"\n                  style={{ lineHeight: \"1.7\" }}\n                >\n                  It provides students, visitors, and staff with real-time\n                  guidance, instant information, and step-by-step navigation â€”\n                  through voice, chat, and interactive maps. Whether it's\n                  finding a classroom, locating a department, or reaching the\n                  right office, WayFinder.Ai eliminates confusion and saves time with\n                  intelligent, human-like assistance.\n                </p>\n              </div>\n\n              <div className=\"group\">\n                <p\n                  className=\"text-sm sm:text-base lg:text-lg text-gray-100 leading-relaxed font-medium\"\n                  style={{ lineHeight: \"1.7\" }}\n                >\n                  For institutions, WayFinder.Ai offers a powerful AI-driven control\n                  dashboard that unifies all internal operations. It helps\n                  administrators manage departments, monitor visitor flow,\n                  automate daily tasks, and improve overall coordination â€” all\n                  from a single smart interface.\n                </p>\n              </div>\n\n              <div className=\"relative overflow-hidden rounded-xl p-4 sm:p-6 border border-orange-500/30 bg-gradient-to-br from-orange-500/5 via-amber-500/5 to-transparent backdrop-blur-sm shadow-xl\">\n                <div className=\"absolute inset-0 bg-gradient-to-r from-orange-500/10 to-amber-500/10\"></div>\n                <p\n                  className=\"relative text-base sm:text-lg text-center text-gray-50 font-semibold tracking-wide\"\n                  style={{ lineHeight: \"1.6\" }}\n                >\n                  Smarter systems. Clearer communication. Seamless operations.\n                </p>\n              </div>\n            </motion.div>\n          </div>\n        </div>\n      </section>\n      {/* Smart Features of WayFinder.Ai Section */}\n      <section className=\"py-12 sm:py-16 lg:py-20 px-4 sm:px-6 relative bg-gradient-to-b from-transparent via-blue-500/5 to-transparent\">\n        <div className=\"container mx-auto max-w-6xl\">\n          {/* Section Title */}\n          <motion.div {...fadeInUp} className=\"text-center mb-8 sm:mb-12\">\n            <h2 className=\"text-2xl sm:text-3xl md:text-4xl font-bold mb-2\">\n              Smart Features of{\" \"}\n              <span className=\"bg-gradient-to-r from-orange-400 to-amber-400 bg-clip-text text-transparent\">\n                WayFinder.Ai\n              </span>\n            </h2>\n          </motion.div>\n\n          {/* Section Overview Text */}\n          <motion.div {...fadeInUp} className=\"text-center mb-8 sm:mb-10 px-4\">\n            <p\n              className=\"text-sm sm:text-base lg:text-lg text-gray-100 leading-relaxed font-medium max-w-4xl mx-auto\"\n              style={{ lineHeight: \"1.7\" }}\n            >\n              WayFinder.Ai's AI Assistant brings life to every large institution â€”\n              guiding users in real-time through natural voice or chat. It's\n              more than a chatbot â€” it's your digital guide who knows every\n              corner, every room, and every process.\n            </p>\n          </motion.div>\n\n          {/* AI Assistant Section */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-start mb-16 sm:mb-20\">\n            {/* Left: Text Content */}\n            <motion.div\n              {...fadeInUp}\n              className=\"space-y-4 sm:space-y-6 order-2 lg:order-1\"\n            >\n              <h3 className=\"text-xl sm:text-2xl lg:text-3xl font-bold text-white mb-3\">\n                AI Assistant That Understands, Guides & Simplifies\n              </h3>\n\n              {/* Key Features */}\n              <div className=\"space-y-3 mt-6\">\n                {[\n                  {\n                    icon: Mic,\n                    title: \"Voice-First Experience\",\n                    desc: \"Talk naturally and get instant, human-like guidance.\",\n                  },\n                  {\n                    icon: Map,\n                    title: \"Smart Navigation\",\n                    desc: \"Provides step-by-step routes with live maps, room numbers, and directions.\",\n                  },\n                  {\n                    icon: Navigation,\n                    title: \"Context-Aware Help\",\n                    desc: \"Detects your location and tells you where to go, whom to meet, and what to do next.\",\n                  },\n                  {\n                    icon: Users,\n                    title: \"Student & Visitor Mode\",\n                    desc: \"Access class schedules, teacher info, and process details effortlessly.\",\n                  },\n                  {\n                    icon: Building2,\n                    title: \"Custom for Every Institution\",\n                    desc: \"Each organization gets its own AI assistant mapped to its unique structure.\",\n                  },\n                ].map((feature, idx) => (\n                  <motion.div\n                    key={idx}\n                    initial={{ opacity: 0, x: -20 }}\n                    whileInView={{ opacity: 1, x: 0 }}\n                    viewport={{ once: true }}\n                    transition={{ delay: idx * 0.1 }}\n                    className=\"flex items-start gap-3 p-3 sm:p-4 rounded-lg bg-white/5 border border-orange-500/20 hover:border-orange-500/40 transition-all\"\n                  >\n                    <div className=\"flex-shrink-0 w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-gradient-to-br from-orange-500 to-amber-500 flex items-center justify-center\">\n                      <feature.icon className=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" />\n                    </div>\n                    <div>\n                      <h4 className=\"font-bold text-white mb-1 text-sm sm:text-base\">\n                        {feature.title}\n                      </h4>\n                      <p className=\"text-xs sm:text-sm text-gray-300\">\n                        {feature.desc}\n                      </p>\n                    </div>\n                  </motion.div>\n                ))}\n              </div>\n\n              <p className=\"text-sm sm:text-base lg:text-lg text-orange-300 font-semibold italic mt-4\">\n                From classrooms to courtrooms â€” WayFinder.Ai brings clarity\n                everywhere.\n              </p>\n            </motion.div>\n\n            {/* Right: Card Animation - Desktop uses CardSwap, Mobile uses horizontal scroll */}\n\n            {/* Desktop CardSwap Animation (hidden on mobile) */}\n            <motion.div\n              {...fadeInUp}\n              transition={{ delay: 0.2 }}\n              className=\"hidden lg:flex relative h-[500px] w-full order-1 lg:order-2 items-center justify-center\"\n            >\n              <div className=\"w-full max-w-[350px] mx-auto\">\n                <CardSwap\n                  width={350}\n                  height={450}\n                  cardDistance={25}\n                  verticalDistance={35}\n                  delay={3000}\n                  pauseOnHover={true}\n                  skewAmount={3}\n                  easing=\"elastic\"\n                >\n                  <Card customClass=\"bg-gradient-to-br from-gray-900 to-gray-800 border-2 border-blue-500/30 shadow-2xl shadow-blue-500/20 overflow-hidden\">\n                    <div className=\"w-full h-full flex flex-col\">\n                      <img\n                        src=\"/images/assistant1.png\"\n                        alt=\"College Voice Assistant\"\n                        className=\"w-full h-[calc(100%-60px)] object-cover\"\n                      />\n                      <div className=\"h-[60px] bg-gradient-to-r from-blue-600 to-blue-700 flex items-center justify-center px-4\">\n                        <h4 className=\"text-white font-bold text-center text-sm sm:text-base\">\n                          College Voice Assistant\n                        </h4>\n                      </div>\n                    </div>\n                  </Card>\n                  <Card customClass=\"bg-gradient-to-br from-gray-900 to-gray-800 border-2 border-amber-500/30 shadow-2xl shadow-amber-500/20 overflow-hidden\">\n                    <div className=\"w-full h-full flex flex-col\">\n                      <img\n                        src=\"/images/assistant2.png\"\n                        alt=\"Court Legal Assistant\"\n                        className=\"w-full h-[calc(100%-60px)] object-cover\"\n                      />\n                      <div className=\"h-[60px] bg-gradient-to-r from-amber-600 to-yellow-600 flex items-center justify-center px-4\">\n                        <h4 className=\"text-white font-bold text-center text-sm sm:text-base\">\n                          Court Legal Navigator\n                        </h4>\n                      </div>\n                    </div>\n                  </Card>\n                  <Card customClass=\"bg-gradient-to-br from-gray-900 to-gray-800 border-2 border-purple-500/30 shadow-2xl shadow-purple-500/20 overflow-hidden\">\n                    <div className=\"w-full h-full flex flex-col\">\n                      <img\n                        src=\"/images/assistant3.png\"\n                        alt=\"Corporate Institution Assistant\"\n                        className=\"w-full h-[calc(100%-60px)] object-cover\"\n                      />\n                      <div className=\"h-[60px] bg-gradient-to-r from-purple-600 to-purple-700 flex items-center justify-center px-4\">\n                        <h4 className=\"text-white font-bold text-center text-sm sm:text-base\">\n                          Enterprise Assistant\n                        </h4>\n                      </div>\n                    </div>\n                  </Card>\n                </CardSwap>\n              </div>\n            </motion.div>\n\n            {/* Mobile Horizontal Scroll (shown only on mobile) */}\n            <motion.div\n              {...fadeInUp}\n              transition={{ delay: 0.2 }}\n              className=\"lg:hidden relative w-full order-1 lg:order-2 overflow-hidden py-8\"\n            >\n              <motion.div\n                className=\"flex gap-6 px-4\"\n                animate={{\n                  x: [\"0%\", \"-66.66%\"],\n                }}\n                transition={{\n                  duration: 15,\n                  repeat: Infinity,\n                  ease: \"linear\",\n                  repeatType: \"loop\",\n                }}\n              >\n                {[\n                  {\n                    image: \"/images/assistant1.png\",\n                    title: \"College Voice Assistant\",\n                    gradient: \"from-blue-600 to-blue-700\",\n                    border: \"border-blue-500/30\",\n                    shadow: \"shadow-blue-500/20\",\n                  },\n                  {\n                    image: \"/images/assistant2.png\",\n                    title: \"Court Legal Navigator\",\n                    gradient: \"from-amber-600 to-yellow-600\",\n                    border: \"border-amber-500/30\",\n                    shadow: \"shadow-amber-500/20\",\n                  },\n                  {\n                    image: \"/images/assistant3.png\",\n                    title: \"Enterprise Assistant\",\n                    gradient: \"from-purple-600 to-purple-700\",\n                    border: \"border-purple-500/30\",\n                    shadow: \"shadow-purple-500/20\",\n                  },\n                  {\n                    image: \"/images/assistant1.png\",\n                    title: \"College Voice Assistant\",\n                    gradient: \"from-blue-600 to-blue-700\",\n                    border: \"border-blue-500/30\",\n                    shadow: \"shadow-blue-500/20\",\n                  },\n                  {\n                    image: \"/images/assistant2.png\",\n                    title: \"Court Legal Navigator\",\n                    gradient: \"from-amber-600 to-yellow-600\",\n                    border: \"border-amber-500/30\",\n                    shadow: \"shadow-amber-500/20\",\n                  },\n                  {\n                    image: \"/images/assistant3.png\",\n                    title: \"Enterprise Assistant\",\n                    gradient: \"from-purple-600 to-purple-700\",\n                    border: \"border-purple-500/30\",\n                    shadow: \"shadow-purple-500/20\",\n                  },\n                ].map((card, idx) => (\n                  <div\n                    key={idx}\n                    className={`flex-shrink-0 w-[280px] sm:w-[320px] bg-gradient-to-br from-gray-900 to-gray-800 border-2 ${card.border} ${card.shadow} shadow-2xl rounded-2xl overflow-hidden`}\n                  >\n                    <div className=\"w-full flex flex-col h-[380px] sm:h-[420px]\">\n                      <img\n                        src={card.image}\n                        alt={card.title}\n                        className=\"w-full h-[calc(100%-60px)] object-cover\"\n                      />\n                      <div\n                        className={`h-[60px] bg-gradient-to-r ${card.gradient} flex items-center justify-center px-4`}\n                      >\n                        <h4 className=\"text-white font-bold text-center text-sm sm:text-base\">\n                          {card.title}\n                        </h4>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </motion.div>\n            </motion.div>\n          </div>\n\n          {/* Dashboard Section */}\n          <motion.div {...fadeInUp} className=\"text-center mb-6 sm:mb-8\">\n            <h3 className=\"text-xl sm:text-2xl md:text-3xl font-bold mb-3 text-white px-4\">\n              For Institutions â€” An Intelligent Control System That Works\n              Smarter\n            </h3>\n          </motion.div>\n\n          <motion.div\n            {...fadeInUp}\n            className=\"max-w-3xl mx-auto mb-8 sm:mb-12 p-4 sm:p-6 lg:p-8 rounded-2xl bg-gradient-to-br from-orange-500/10 to-amber-500/10 border border-orange-500/20 backdrop-blur-sm\"\n          >\n            <p\n              className=\"text-sm sm:text-base lg:text-lg text-gray-100 leading-relaxed font-medium text-center\"\n              style={{ lineHeight: \"1.7\" }}\n            >\n              WayFinder.Ai empowers institutions with a centralized, AI-powered\n              control dashboard. Admins can manage data, monitor real-time\n              activity, and automate repetitive work â€” all from one intuitive\n              interface. Instant updates reflect across the assistant system,\n              ensuring smooth operations and faster communication.\n            </p>\n            <p className=\"text-base sm:text-lg lg:text-xl font-bold text-center mt-4 bg-gradient-to-r from-orange-400 to-amber-400 bg-clip-text text-transparent\">\n              From manual management to AI automation â€” WayFinder.Ai makes every\n              process 10Ã— faster.\n            </p>\n          </motion.div>\n\n          {/* Circle Gallery - Now showing on all devices */}\n          <motion.div\n            {...fadeInUp}\n            className=\"w-full h-[280px] sm:h-[400px] md:h-[450px] lg:h-[500px] relative\"\n          >\n            <CircleGallery\n              items={[\n                { image: \"/images/dashboard1.png\", text: \"Court Admin Panel\" },\n                { image: \"/images/dashboard2.png\", text: \"College Dashboard\" },\n                {\n                  image: \"/images/dashboard3.png\",\n                  text: \"Institution Control\",\n                },\n              ]}\n              bend={3}\n              textColor=\"#f97316\"\n              borderRadius={0.05}\n              scrollSpeed={2}\n              scrollEase={0.05}\n              autoRotate={true}\n              autoRotateSpeed={0.02}\n            />\n          </motion.div>\n        </div>\n      </section>\n      {/* Experience Intelligent Navigation Section */}\n      <section id=\"demo\" className=\"py-20 sm:py-24 px-4 sm:px-6 relative\">\n        <div className=\"absolute inset-0 bg-gradient-to-b from-transparent via-blue-500/5 to-transparent\"></div>\n        <div className=\"container mx-auto max-w-7xl relative z-10\">\n          {/* Section Header */}\n          <motion.div {...fadeInUp} className=\"text-center mb-12 sm:mb-16\">\n            <h2 className=\"text-3xl sm:text-4xl lg:text-5xl font-bold mb-4 sm:mb-6\">\n              Experience{\" \"}\n              <span className=\"bg-gradient-to-r from-orange-400 to-amber-400 bg-clip-text text-transparent\">\n                Intelligent Navigation\n              </span>{\" \"}\n              &{\" \"}\n              <span className=\"bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent\">\n                Real-Time Assistance\n              </span>\n            </h2>\n            <p className=\"text-base sm:text-lg lg:text-xl text-gray-300 max-w-4xl mx-auto leading-relaxed px-4\">\n              Explore how WayFinder.Ai guides, informs, and connects people inside\n              real environments.\n            </p>\n            <div className=\"mt-6 px-4\">\n              <p className=\"text-sm sm:text-base lg:text-lg text-gray-100 font-medium max-w-3xl mx-auto leading-relaxed\">\n                WayFinder.Ai doesn't just guide you to places.\n                <br className=\"hidden sm:block\" />\n                <span className=\"text-orange-400 font-semibold\">\n                  It answers, informs, assists, and connects you with the right\n                  people, the right time, the right place.\n                </span>\n              </p>\n            </div>\n          </motion.div>\n\n          {/* Demo Cards Grid */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 lg:gap-8\">\n            {/* Campus Intelligence Demo */}\n            <motion.div\n              {...fadeInUp}\n              transition={{ delay: 0.1 }}\n              className=\"relative group\"\n            >\n              <div className=\"absolute inset-0 bg-gradient-to-br from-orange-500 to-amber-500 opacity-0 group-hover:opacity-15 rounded-3xl blur-xl transition-opacity\"></div>\n              <div className=\"relative bg-gradient-to-br from-white/5 to-white/[0.02] backdrop-blur-sm border border-orange-500/20 rounded-3xl p-6 sm:p-8 h-full hover:border-orange-500/40 transition-all shadow-xl hover:shadow-2xl flex flex-col\">\n                {/* Icon & Badge */}\n                <div className=\"flex justify-between items-start mb-6\">\n                  <div className=\"bg-gradient-to-br from-orange-500 to-amber-500 p-4 rounded-2xl shadow-lg\">\n                    <Building2 className=\"h-8 w-8 text-white\" />\n                  </div>\n                </div>\n\n                {/* Title */}\n                <h3 className=\"text-2xl font-bold mb-3 text-white\">\n                  Campus Intelligence Demo\n                </h3>\n\n                {/* Description */}\n                <p className=\"text-gray-300 text-sm sm:text-base mb-6 leading-relaxed\">\n                  AI that guides, informs, and supports students in real time\n                </p>\n\n                {/* Features List */}\n                <ul className=\"space-y-3 mb-8 flex-grow\">\n                  {[\n                    \"Turn by turn campus navigation\",\n                    \"Live class schedules & faculty details\",\n                    \"Lab, library, admin & event info\",\n                    'Ask anything: \"Which room?\", \"Who is the faculty?\", \"Where is submission desk?\"',\n                  ].map((feature, idx) => (\n                    <li\n                      key={idx}\n                      className=\"flex items-start gap-3 text-sm text-gray-200\"\n                    >\n                      <CheckCircle2 className=\"h-5 w-5 text-orange-400 flex-shrink-0 mt-0.5\" />\n                      <span className=\"leading-relaxed\">{feature}</span>\n                    </li>\n                  ))}\n                </ul>\n\n                {/* CTA Button */}\n                <Button\n                  className=\"w-full bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white font-bold shadow-lg hover:shadow-xl transition-all text-base py-6 mt-auto\"\n                  onClick={() => setDemoModal(\"campus\")}\n                >\n                  Try Live Demo\n                </Button>\n              </div>\n            </motion.div>\n\n            {/* Court Intelligence Demo */}\n            <motion.div\n              {...fadeInUp}\n              transition={{ delay: 0.2 }}\n              className=\"relative group\"\n            >\n              <div className=\"absolute inset-0 bg-gradient-to-br from-purple-500 to-violet-500 opacity-0 group-hover:opacity-15 rounded-3xl blur-xl transition-opacity\"></div>\n              <div className=\"relative bg-gradient-to-br from-white/5 to-white/[0.02] backdrop-blur-sm border border-purple-500/20 rounded-3xl p-6 sm:p-8 h-full hover:border-purple-500/40 transition-all shadow-xl hover:shadow-2xl flex flex-col\">\n                {/* Icon & Badge */}\n                <div className=\"flex justify-between items-start mb-6\">\n                  <div className=\"bg-gradient-to-br from-purple-500 to-violet-500 p-4 rounded-2xl shadow-lg\">\n                    <Scale className=\"h-8 w-8 text-white\" />\n                  </div>\n                </div>\n\n                {/* Title */}\n                <h3 className=\"text-2xl font-bold mb-3 text-white\">\n                  Court Intelligence Demo\n                </h3>\n\n                {/* Description */}\n                <p className=\"text-gray-300 text-sm sm:text-base mb-6 leading-relaxed\">\n                  Smart routing and legal information access\n                </p>\n\n                {/* Features List */}\n                <ul className=\"space-y-3 mb-8 flex-grow\">\n                  {[\n                    \"Courtroom & office directions\",\n                    \"Case block & judge chamber info\",\n                    \"Visitor & lawyer support guidance\",\n                    'Ask: \"Where is Courtroom-12?\", \"Which block is registry?\"',\n                  ].map((feature, idx) => (\n                    <li\n                      key={idx}\n                      className=\"flex items-start gap-3 text-sm text-gray-200\"\n                    >\n                      <CheckCircle2 className=\"h-5 w-5 text-purple-400 flex-shrink-0 mt-0.5\" />\n                      <span className=\"leading-relaxed\">{feature}</span>\n                    </li>\n                  ))}\n                </ul>\n\n                {/* CTA Button */}\n                <Button\n                  className=\"w-full bg-gradient-to-r from-purple-500 to-violet-500 hover:from-purple-600 hover:to-violet-600 text-white font-bold shadow-lg hover:shadow-xl transition-all text-base py-6 mt-auto\"\n                  onClick={() => setDemoModal(\"court\")}\n                >\n                  Try Live Demo\n                </Button>\n              </div>\n            </motion.div>\n\n            {/* Hospital Intelligence Demo */}\n            <motion.div\n              {...fadeInUp}\n              transition={{ delay: 0.3 }}\n              className=\"relative group\"\n            >\n              <div className=\"absolute inset-0 bg-gradient-to-br from-pink-500 to-rose-500 opacity-0 group-hover:opacity-15 rounded-3xl blur-xl transition-opacity\"></div>\n              <div className=\"relative bg-gradient-to-br from-white/5 to-white/[0.02] backdrop-blur-sm border border-pink-500/20 rounded-3xl p-6 sm:p-8 h-full hover:border-pink-500/40 transition-all shadow-xl hover:shadow-2xl flex flex-col\">\n                {/* Icon & Badge */}\n                <div className=\"flex justify-between items-start mb-6\">\n                  <div className=\"bg-gradient-to-br from-pink-500 to-rose-500 p-4 rounded-2xl shadow-lg\">\n                    <Hospital className=\"h-8 w-8 text-white\" />\n                  </div>\n                  <span className=\"px-4 py-2 rounded-full text-xs font-bold bg-amber-500/20 text-amber-300 border border-amber-400/30\">\n                    Coming Soon\n                  </span>\n                </div>\n\n                {/* Title */}\n                <h3 className=\"text-2xl font-bold mb-3 text-white\">\n                  Hospital Intelligence Demo\n                </h3>\n\n                {/* Description */}\n                <p className=\"text-gray-300 text-sm sm:text-base mb-6 leading-relaxed\">\n                  Instant navigation and medical information assistance\n                </p>\n\n                {/* Features List */}\n                <ul className=\"space-y-3 mb-8 flex-grow\">\n                  {[\n                    \"Ward & OPD directions\",\n                    \"Doctor availability & department info\",\n                    \"Emergency routing & support instructions\",\n                    'Ask: \"Where is cardiology?\", \"Who is on duty?\"',\n                  ].map((feature, idx) => (\n                    <li\n                      key={idx}\n                      className=\"flex items-start gap-3 text-sm text-gray-200\"\n                    >\n                      <CheckCircle2 className=\"h-5 w-5 text-pink-400 flex-shrink-0 mt-0.5\" />\n                      <span className=\"leading-relaxed\">{feature}</span>\n                    </li>\n                  ))}\n                </ul>\n\n                {/* CTA Button - Coming Soon */}\n                <Button\n                  className=\"w-full bg-gradient-to-r from-gray-600 to-gray-700 text-gray-300 font-bold shadow-lg cursor-not-allowed text-base py-6 mt-auto\"\n                  disabled\n                >\n                  Coming Soon\n                </Button>\n              </div>\n            </motion.div>\n          </div>\n        </div>\n      </section>\n      {/* Meet the Minds Behind WayFinder.Ai Video Section */}\n      <section className=\"py-8 sm:py-10 px-4 sm:px-6 relative\">\n        <div className=\"absolute inset-0 bg-gradient-to-b from-transparent via-purple-500/5 to-transparent\"></div>\n        <div className=\"container mx-auto max-w-6xl relative z-10\">\n          {/* Section Header */}\n          <motion.div {...fadeInUp} className=\"text-center mb-6 sm:mb-8\">\n            <h2 className=\"text-3xl sm:text-4xl lg:text-5xl font-bold mb-3\">\n              <span className=\"bg-gradient-to-r from-orange-400 to-amber-400 bg-clip-text text-transparent\">\n                Meet the Minds\n              </span>{\" \"}\n              Behind WayFinder.Ai\n            </h2>\n          </motion.div>\n\n          {/* Video Frame */}\n          <motion.div\n            {...fadeInUp}\n            className=\"relative px-0 sm:px-2 md:px-4 lg:px-6 xl:px-8\"\n          >\n            <div className=\"absolute inset-0 bg-gradient-to-r from-orange-500 to-amber-500 rounded-lg blur-lg opacity-10\"></div>\n            <div className=\"relative bg-black rounded-lg overflow-hidden shadow-lg border border-orange-500/20 mx-auto w-full max-w-[98%]\">\n              <div className=\"relative\" style={{ paddingTop: \"48%\" }}>\n                {/* Video with thumbnail */}\n                <video\n                  id=\"team-video\"\n                  src=\"/images/video1.mp4\"\n                  poster=\"/images/video-thumbnail.jpg\" // Thumbnail before play\n                  className=\"absolute top-0 left-0 w-full h-full object-cover cursor-pointer\"\n                  onClick={() => {\n                    const video = document.getElementById(\n                      \"team-video\",\n                    ) as HTMLVideoElement;\n                    if (video) {\n                      if (isVideoPlaying) {\n                        video.pause();\n                        setIsVideoPlaying(false);\n                      } else {\n                        video.play();\n                        setIsVideoPlaying(true);\n                      }\n                    }\n                  }}\n                />\n                {/* Play Button Overlay */}\n                {!isVideoPlaying && (\n                  <div\n                    className=\"absolute inset-0 flex items-center justify-center cursor-pointer bg-black/20 hover:bg-black/30 transition-all\"\n                    onClick={() => {\n                      const video = document.getElementById(\n                        \"team-video\",\n                      ) as HTMLVideoElement;\n                      if (video) {\n                        video.play();\n                        setIsVideoPlaying(true);\n                      }\n                    }}\n                  >\n                    <div className=\"bg-orange-500 hover:bg-orange-600 rounded-full p-3 sm:p-4 shadow-lg transition-all transform hover:scale-110\">\n                      <Play\n                        className=\"h-6 w-6 sm:h-8 sm:w-8 text-white\"\n                        fill=\"white\"\n                      />\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </motion.div>\n        </div>\n      </section>\n\n      {/* Contact / Join Us Section */}\n      <section id=\"contact\" className=\"py-24 px-6 relative\">\n        <div className=\"container mx-auto max-w-4xl\">\n          <motion.div {...fadeInUp} className=\"text-center mb-12\">\n            <h2 className=\"text-4xl sm:text-5xl font-bold mb-4\">\n              Join our{\" \"}\n              <span className=\"bg-gradient-to-r from-amber-400 to-orange-400 bg-clip-text text-transparent\">\n                mission\n              </span>\n            </h2>\n            <p className=\"text-lg text-gray-300\">\n              We're building a future where every institution communicates\n              clearly.\n            </p>\n          </motion.div>\n\n          <motion.div\n            {...fadeInUp}\n            transition={{ delay: 0.2 }}\n            className=\"relative\"\n          >\n            <div className=\"absolute inset-0 bg-gradient-to-br from-orange-500/10 to-amber-500/10 rounded-3xl blur-2xl\"></div>\n            <div className=\"relative bg-gradient-to-br from-white/5 to-transparent backdrop-blur-sm border border-orange-500/20 rounded-3xl p-8 md:p-12 shadow-xl\">\n              <form onSubmit={handleEarlyAccess} className=\"space-y-6\">\n                <div>\n                  <Input\n                    type=\"email\"\n                    placeholder=\"Enter your email\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    className=\"bg-white/5 border-orange-500/20 text-white placeholder:text-gray-500 h-14 text-lg focus:border-orange-500/40\"\n                    required\n                  />\n                </div>\n                <Button\n                  type=\"submit\"\n                  size=\"lg\"\n                  className=\"w-full bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white h-14 text-lg font-semibold shadow-lg\"\n                >\n                  <Send className=\"mr-2 h-5 w-5\" />\n                  Join Early Access\n                </Button>\n              </form>\n            </div>\n          </motion.div>\n        </div>\n      </section>\n      {/* Footer */}\n      <footer className=\"py-12 px-6 border-t border-orange-500/10\">\n        <div className=\"container mx-auto max-w-6xl\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8\">\n            {/* WayFinder.Ai Info */}\n            <div>\n              <div className=\"flex items-center gap-3 mb-4\">\n                <div className=\"relative\">\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-orange-500 to-amber-500 rounded-lg blur-sm opacity-75\"></div>\n                  <div className=\"relative bg-gradient-to-br from-orange-500 to-amber-500 p-2 rounded-lg\">\n                    <Navigation className=\"h-5 w-5 text-white\" />\n                  </div>\n                </div>\n                <h3 className=\"text-xl font-bold bg-gradient-to-r from-orange-400 to-amber-400 bg-clip-text text-transparent\">\n                  WayFinder.Ai\n                </h3>\n              </div>\n              <p className=\"text-gray-300 text-sm\">\n                AI Navigation Intelligence for the modern world\n              </p>\n            </div>\n\n            {/* Quick Links */}\n            <div>\n              <h4 className=\"font-semibold text-white mb-4\">Quick Links</h4>\n              <ul className=\"space-y-2 text-sm\">\n                <li>\n                  <button\n                    onClick={() =>\n                      document\n                        .getElementById(\"overview\")\n                        ?.scrollIntoView({ behavior: \"smooth\" })\n                    }\n                    className=\"text-gray-300 hover:text-orange-400 transition-colors\"\n                  >\n                    Overview\n                  </button>\n                </li>\n                <li>\n                  <button\n                    onClick={() =>\n                      document\n                        .getElementById(\"demo\")\n                        ?.scrollIntoView({ behavior: \"smooth\" })\n                    }\n                    className=\"text-gray-300 hover:text-orange-400 transition-colors\"\n                  >\n                    Demo\n                  </button>\n                </li>\n                <li>\n                  <button\n                    onClick={() =>\n                      document\n                        .getElementById(\"contact\")\n                        ?.scrollIntoView({ behavior: \"smooth\" })\n                    }\n                    className=\"text-gray-300 hover:text-orange-400 transition-colors\"\n                  >\n                    Contact\n                  </button>\n                </li>\n              </ul>\n            </div>\n\n            {/* Contact */}\n            <div>\n              <h4 className=\"font-semibold text-white mb-4\">Contact</h4>\n              <div className=\"space-y-3 text-sm\">\n                <a\n                  href=\"tel:8168376279\"\n                  className=\"flex items-center gap-2 text-gray-300 hover:text-orange-400 transition-colors\"\n                >\n                  <Phone className=\"h-4 w-4\" />\n                  <span>8168376279</span>\n                </a>\n                <a\n                  href=\"https://wa.me/918708327670\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"flex items-center gap-2 text-gray-300 hover:text-orange-400 transition-colors\"\n                >\n                  <MessageSquare className=\"h-4 w-4\" />\n                  <span>8708327670</span>\n                </a>\n                <a\n                  href=\"mailto:ajaydhull9898@gmail.com\"\n                  className=\"flex items-center gap-2 text-gray-300 hover:text-orange-400 transition-colors\"\n                >\n                  <Mail className=\"h-4 w-4\" />\n                  <span>ajaydhull9898@gmail.com</span>\n                </a>\n                <a\n                  href=\"mailto:dhullajay024@gmail.com\"\n                  className=\"flex items-center gap-2 text-gray-300 hover:text-orange-400 transition-colors\"\n                >\n                  <Mail className=\"h-4 w-4\" />\n                  <span>dhullajay024@gmail.com</span>\n                </a>\n              </div>\n            </div>\n\n            {/* Social Media */}\n            <div>\n              <h4 className=\"font-semibold text-white mb-4\">Social Media</h4>\n              <div className=\"flex flex-wrap gap-3\">\n                <a\n                  href=\"https://instagram.com\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"bg-white/10 hover:bg-orange-500 p-2 rounded-lg transition-all\"\n                >\n                  <Instagram className=\"h-5 w-5 text-gray-300 hover:text-white\" />\n                </a>\n                <a\n                  href=\"https://t.me\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"bg-white/10 hover:bg-orange-500 p-2 rounded-lg transition-all\"\n                >\n                  <TelegramIcon className=\"h-5 w-5 text-gray-300 hover:text-white\" />\n                </a>\n                <a\n                  href=\"https://linkedin.com\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"bg-white/10 hover:bg-orange-500 p-2 rounded-lg transition-all\"\n                >\n                  <Linkedin className=\"h-5 w-5 text-gray-300 hover:text-white\" />\n                </a>\n                <a\n                  href=\"https://twitter.com\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"bg-white/10 hover:bg-orange-500 p-2 rounded-lg transition-all\"\n                >\n                  <Twitter className=\"h-5 w-5 text-gray-300 hover:text-white\" />\n                </a>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"border-t border-orange-500/10 pt-8 text-center\">\n            <p className=\"text-gray-300 text-sm mb-2\">\n              &copy; {new Date().getFullYear()} WayFinder.Ai. All rights reserved.\n            </p>\n            <p className=\"text-orange-400 text-sm font-medium\">\n              Made with ambition in India. Built for the world.\n            </p>\n          </div>\n        </div>\n      </footer>\n\n      {/* Campus Demo Modal */}\n      <Dialog\n        open={demoModal === \"campus\"}\n        onOpenChange={() => setDemoModal(null)}\n      >\n        <DialogContent className=\"max-w-2xl h-[90vh] flex flex-col bg-white text-gray-900 border-2 border-orange-300 shadow-2xl p-0\">\n          {/* Header */}\n          <div className=\"flex-shrink-0 p-6 pb-4\">\n            <DialogHeader>\n              <DialogTitle className=\"text-2xl font-bold text-orange-600 flex items-center gap-2\">\n                <span className=\"text-3xl\">ðŸ‘‹</span> Welcome to the WayFinder.Ai Demo\n              </DialogTitle>\n            </DialogHeader>\n          </div>\n\n          {/* Scrollable Content */}\n          <div className=\"flex-1 overflow-y-auto px-6 text-gray-700 text-base space-y-4\">\n            <div className=\"bg-blue-50 border-l-4 border-blue-500 p-4 rounded\">\n              <p className=\"font-semibold text-blue-900\">\n                This experience is a preview, running on demo-based data trained\n                around <span className=\"font-bold\">R.K.S.D College</span> only.\n              </p>\n              <p className=\"mt-2 text-blue-800\">\n                Full features, live student records, and advanced AI navigation\n                are still under development.\n              </p>\n            </div>\n\n            <div className=\"mt-6\">\n              <h4 className=\"font-bold text-lg text-gray-900 mb-3\">\n                Right now, you can try:\n              </h4>\n              <ul className=\"space-y-2\">\n                {[\n                  \"Finding classrooms and departments\",\n                  \"Getting faculty & office info\",\n                  \"Finding labs, library, canteen, admin, etc.\",\n                  \"Asking real-life student queries\",\n                ].map((item, idx) => (\n                  <li\n                    key={idx}\n                    className=\"flex items-start gap-2 text-gray-700\"\n                  >\n                    <CheckCircle2 className=\"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5\" />\n                    <span>{item}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n\n            <div className=\"mt-6 bg-orange-50 border border-orange-200 rounded-lg p-4\">\n              <h4 className=\"font-bold text-lg text-orange-900 mb-3\">\n                Try asking questions like:\n              </h4>\n              <ul className=\"space-y-2 text-gray-800\">\n                {[\n                  \"Where is BCA Second Year classroom?\",\n                  \"Find Computer Science Department\",\n                  \"Who is the librarian?\",\n                  \"Where is principal office?\",\n                  \"Show me Science Block route\",\n                  \"When is my next class? (demo sample reply)\",\n                ].map((text, idx) => (\n                  <li key={idx} className=\"flex items-center gap-2\">\n                    <span className=\"text-orange-500\">â€¢</span>\n                    <code className=\"bg-white px-2 py-1 rounded text-sm\">\n                      {text}\n                    </code>\n                  </li>\n                ))}\n              </ul>\n            </div>\n\n            <div className=\"mt-6 bg-amber-50 border-l-4 border-amber-500 p-4 rounded flex items-start gap-3 mb-6\">\n              <span className=\"text-2xl\">âš ï¸</span>\n              <div>\n                <p className=\"font-semibold text-amber-900\">Note:</p>\n                <p className=\"text-amber-800 mt-1\">\n                  This version uses sample campus data. Live campus mapping &\n                  permissions for real data are in progress.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Footer (Button) */}\n          <div className=\"flex-shrink-0 p-6 pt-4 border-t border-gray-200 bg-white\">\n            <Button\n              onClick={() => {\n                setDemoModal(null);\n                setLocation(\"/assistant\");\n              }}\n              className=\"w-full bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white font-bold py-6 text-lg shadow-lg\"\n            >\n              Continue to Demo\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Court Demo Modal */}\n      <Dialog\n        open={demoModal === \"court\"}\n        onOpenChange={() => setDemoModal(null)}\n      >\n        <DialogContent className=\"max-w-2xl h-[90vh] flex flex-col bg-white text-gray-900 border-2 border-purple-300 shadow-2xl p-0\">\n          {/* Header */}\n          <div className=\"flex-shrink-0 p-6 pb-4\">\n            <DialogHeader>\n              <DialogTitle className=\"text-2xl font-bold text-purple-600 flex items-center gap-2\">\n                <Scale className=\"h-7 w-7\" /> Court Navigation Demo Preview\n              </DialogTitle>\n            </DialogHeader>\n          </div>\n\n          {/* Scrollable Content */}\n          <div className=\"flex-1 overflow-y-auto px-6 text-gray-700 text-base space-y-4\">\n            <div className=\"bg-purple-50 border-l-4 border-purple-500 p-4 rounded\">\n              <p className=\"font-semibold text-purple-900\">\n                This is a concept demo, trained on synthetic{\" \"}\n                <span className=\"font-bold\">Kaithal Court</span> layout data.\n              </p>\n              <p className=\"mt-2 text-purple-800\">\n                Real court data requires official approval and will be\n                integrated later.\n              </p>\n            </div>\n\n            <div className=\"mt-6\">\n              <h4 className=\"font-bold text-lg text-gray-900 mb-3\">\n                In this demo, you can explore:\n              </h4>\n              <ul className=\"space-y-2\">\n                {[\n                  \"Courtroom direction system\",\n                  \"Judge block & chamber samples\",\n                  \"Office & registry routing\",\n                  \"Common legal visitor guidance\",\n                ].map((item, idx) => (\n                  <li\n                    key={idx}\n                    className=\"flex items-start gap-2 text-gray-700\"\n                  >\n                    <CheckCircle2 className=\"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5\" />\n                    <span>{item}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n\n            <div className=\"mt-6 bg-purple-50 border border-purple-200 rounded-lg p-4\">\n              <h4 className=\"font-bold text-lg text-purple-900 mb-3\">\n                Try asking:\n              </h4>\n              <ul className=\"space-y-2 text-gray-800\">\n                {[\n                  \"Where is Courtroom 12?\",\n                  \"Where can I find a typist?\",\n                  \"Which block has Judge Chambers?\",\n                  \"Where is Registry Office?\",\n                  \"Show way to Gate No. 2\",\n                ].map((text, idx) => (\n                  <li key={idx} className=\"flex items-center gap-2\">\n                    <span className=\"text-purple-500\">â€¢</span>\n                    <code className=\"bg-white px-2 py-1 rounded text-sm\">\n                      {text}\n                    </code>\n                  </li>\n                ))}\n              </ul>\n            </div>\n\n            <div className=\"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4\">\n              <h4 className=\"font-bold text-lg text-blue-900 mb-3\">\n                Example map ranges you can explore:\n              </h4>\n              <ul className=\"space-y-1 text-gray-800\">\n                {[\"Rooms 20 to 30\", \"Rooms 50 to 55\", \"Rooms 70 to 79\"].map(\n                  (text, idx) => (\n                    <li key={idx} className=\"flex items-center gap-2\">\n                      <MapPin className=\"h-4 w-4 text-blue-600\" />\n                      <span>{text}</span>\n                    </li>\n                  ),\n                )}\n              </ul>\n            </div>\n\n            <div className=\"mt-6 bg-red-50 border-l-4 border-red-500 p-4 rounded flex items-start gap-3 mb-6\">\n              <span className=\"text-2xl\">âš ï¸</span>\n              <div>\n                <p className=\"font-semibold text-red-900\">Disclaimer:</p>\n                <p className=\"text-red-800 mt-1\">\n                  This data is not real. It is designed only to preview future\n                  capabilities.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Footer (Button) */}\n          <div className=\"flex-shrink-0 p-6 pt-4 border-t border-gray-200 bg-white\">\n            <Button\n              onClick={() => {\n                setDemoModal(null);\n                setLocation(\"/court-assistant\");\n              }}\n              className=\"w-full bg-gradient-to-r from-purple-500 to-violet-500 hover:from-purple-600 hover:to-violet-600 text-white font-bold py-6 text-lg shadow-lg\"\n            >\n              Continue to Demo\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":61239},"client/src/components/admin/StaffSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { supabase } from \"@/lib/supabase\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useVoice } from \"@/hooks/use-voice\";\nimport { Plus, Edit, Trash2, Mail, Phone, Sparkles, Mic, MicOff, Loader2, ChevronDown } from \"lucide-react\";\nimport { EnhancedAIInput } from \"./EnhancedAIInput\";\nimport { EnhancedAIPreview } from \"./EnhancedAIPreview\";\nimport { SmartAIUpdatePreview } from \"./SmartAIUpdatePreview\";\n\ninterface StaffMember {\n  id: string;\n  full_name: string;\n  employee_id: string;\n  department_id: string;\n  role: string;\n  designation: string;\n  email: string;\n  phone: string;\n  qualification: string;\n  specialization: string;\n  joining_date: string;\n  is_active: boolean;\n}\n\ninterface Department {\n  id: string;\n  name: string;\n}\n\nexport function StaffSection() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\n  const [editingStaff, setEditingStaff] = useState<StaffMember | null>(null);\n  const [selectedDepartment, setSelectedDepartment] = useState<string>(\"all\");\n  const [isAiMode, setIsAiMode] = useState(false);\n  const [aiPrompt, setAiPrompt] = useState(\"\");\n  const [aiGeneratedData, setAiGeneratedData] = useState<any>(null);\n  const [smartAIResponse, setSmartAIResponse] = useState<any>(null);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [currentPreviewIndex, setCurrentPreviewIndex] = useState(0);\n  const [formData, setFormData] = useState({\n    full_name: \"\",\n    employee_id: \"\",\n    department_id: \"\",\n    role: \"\",\n    designation: \"\",\n    email: \"\",\n    phone: \"\",\n    qualification: \"\",\n    specialization: \"\",\n    joining_date: \"\",\n  });\n\n  const token = localStorage.getItem(\"adminToken\");\n\n  const {\n    isListening,\n    transcript,\n    startListening,\n    stopListening,\n    resetTranscript,\n    setTranscript,\n    browserSupported,\n  } = useVoice();\n\n  const { data: staffData } = useQuery<{ staff: StaffMember[] }>({\n    queryKey: [\"/api/admin/staff\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/staff\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch staff\");\n      return await res.json();\n    },\n  });\n\n  const { data: departmentsData } = useQuery<{ departments: Department[] }>({\n    queryKey: [\"/api/admin/departments\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/departments\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch departments\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    const channel = supabase\n      .channel('staff-changes')\n      .on(\n        'postgres_changes',\n        {\n          event: '*',\n          schema: 'public',\n          table: 'staff_members'\n        },\n        () => {\n          queryClient.invalidateQueries({ queryKey: [\"/api/admin/staff\"] });\n        }\n      )\n      .subscribe();\n\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, [queryClient]);\n\n  const createMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(\"/api/admin/staff\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to add staff member\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/staff\"] });\n      toast({ title: \"Success\", description: \"Staff member added successfully\" });\n      setIsCreateOpen(false);\n      resetForm();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: any }) => {\n      const res = await fetch(`/api/admin/staff/${id}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to update staff member\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/staff\"] });\n      toast({ title: \"Success\", description: \"Staff member updated successfully\" });\n      setEditingStaff(null);\n      resetForm();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const res = await fetch(`/api/admin/staff/${id}`, {\n        method: \"DELETE\",\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to delete staff member\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/staff\"] });\n      toast({ title: \"Success\", description: \"Staff member removed successfully\" });\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  useEffect(() => {\n    if (transcript && isAiMode) {\n      setAiPrompt(transcript);\n    }\n  }, [transcript, isAiMode]);\n\n  const handleToggleVoice = () => {\n    if (isListening) {\n      stopListening();\n    } else {\n      startListening(aiPrompt);\n    }\n  };\n\n  const handleClearPrompt = () => {\n    setAiPrompt(\"\");\n    resetTranscript();\n  };\n\n  const handleRegenerateAI = () => {\n    setAiGeneratedData(null);\n    setSmartAIResponse(null);\n    setCurrentPreviewIndex(0);\n  };\n\n  const handleCancelSmartAI = () => {\n    setSmartAIResponse(null);\n    setAiGeneratedData(null);\n    setAiPrompt(\"\");\n    setCurrentPreviewIndex(0);\n    resetTranscript();\n  };\n\n  const handleGenerateAI = async () => {\n    if (!aiPrompt.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please enter a description or use voice input\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsGenerating(true);\n    try {\n      const updateKeywords = ['change', 'update', 'modify', 'kar do', 'badlo', 'edit', 'correct', 'fix'];\n      const isUpdateIntent = updateKeywords.some(keyword => \n        aiPrompt.toLowerCase().includes(keyword)\n      );\n\n      if (isUpdateIntent) {\n        const res = await fetch(\"/api/admin/ai-smart-generate\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": `Bearer ${token}`,\n          },\n          body: JSON.stringify({ \n            prompt: aiPrompt,\n            sectionType: 'staff'\n          }),\n        });\n\n        if (!res.ok) {\n          throw new Error(\"Failed to generate staff member\");\n        }\n\n        const data = await res.json();\n        setSmartAIResponse(data);\n        \n        toast({\n          title: \"Success\",\n          description: data.operation === 'update' \n            ? \"Update detected! Review changes below.\" \n            : \"Staff member information generated successfully!\",\n        });\n      } else {\n        const res = await fetch(\"/api/admin/ai-generate-staff\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": `Bearer ${token}`,\n          },\n          body: JSON.stringify({ prompt: aiPrompt }),\n        });\n\n        if (!res.ok) {\n          throw new Error(\"Failed to generate staff member\");\n        }\n\n        const data = await res.json();\n        setAiGeneratedData(data);\n        \n        toast({\n          title: \"Success\",\n          description: \"Staff member information generated successfully!\",\n        });\n      }\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to generate staff member\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  const handleConfirmAI = async () => {\n    try {\n      if (smartAIResponse && smartAIResponse.operation === 'update') {\n        const matchedEntry = smartAIResponse.matched_entry;\n        const changes = smartAIResponse.changes;\n        \n        if (!matchedEntry || !matchedEntry.id) {\n          throw new Error(\"No entry found to update\");\n        }\n\n        // Apply changes to the matched entry\n        const updatedData = { ...matchedEntry };\n        for (const [fieldName, change] of Object.entries(changes)) {\n          updatedData[fieldName] = (change as any).new;\n        }\n\n        // Clean the data - convert null to appropriate values for Zod validation\n        // Note: department_id should be a valid UUID or undefined (not empty string)\n        const cleanedData: any = {\n          full_name: updatedData.full_name || '',\n          employee_id: updatedData.employee_id || '',\n          role: updatedData.role || '',\n          designation: updatedData.designation || '',\n          email: updatedData.email || '',\n          phone: updatedData.phone || '',\n          qualification: updatedData.qualification || '',\n          specialization: updatedData.specialization || '',\n          joining_date: updatedData.joining_date || '',\n        };\n        \n        // Only include department_id if it's a valid value (not null, undefined, or empty string)\n        if (updatedData.department_id && updatedData.department_id.trim()) {\n          cleanedData.department_id = updatedData.department_id;\n        }\n\n        console.log('Updating staff member:', matchedEntry.id, 'with cleaned data:', cleanedData);\n\n        const res = await fetch(`/api/admin/staff/${matchedEntry.id}`, {\n          method: \"PUT\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": `Bearer ${token}`,\n          },\n          body: JSON.stringify(cleanedData),\n        });\n\n        if (!res.ok) {\n          const errorData = await res.json().catch(() => ({}));\n          throw new Error(errorData.message || \"Failed to update staff member\");\n        }\n\n        // Invalidate queries to refresh data immediately\n        await queryClient.invalidateQueries({ queryKey: [\"/api/admin/staff\"] });\n        \n        // Wait a moment for the update to propagate\n        await new Promise(resolve => setTimeout(resolve, 500));\n\n        toast({ \n          title: \"Success\", \n          description: \"Staff member updated successfully! Changes are now visible.\" \n        });\n        \n        // Reset state after successful update\n        setAiPrompt(\"\");\n        setAiGeneratedData(null);\n        setSmartAIResponse(null);\n        setCurrentPreviewIndex(0);\n        setIsAiMode(false);\n        setIsCreateOpen(false);\n        resetTranscript();\n      } else if (aiGeneratedData) {\n        // Handle CREATE flow\n        const entries = aiGeneratedData.entries || [aiGeneratedData];\n        \n        const creationPromises = entries.map(async (entry: any) => {\n          // Clean the data before sending - remove empty department_id\n          const cleanedEntry: any = { ...entry };\n          if (!cleanedEntry.department_id || !cleanedEntry.department_id.trim()) {\n            delete cleanedEntry.department_id;\n          }\n          \n          const res = await fetch(\"/api/admin/staff\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              \"Authorization\": `Bearer ${token}`,\n            },\n            body: JSON.stringify(cleanedEntry),\n          });\n          \n          if (!res.ok) {\n            const errorData = await res.json().catch(() => ({}));\n            throw new Error(errorData.message || `Failed to create: ${entry.full_name}`);\n          }\n          \n          return res.json();\n        });\n\n        await Promise.all(creationPromises);\n        \n        // Invalidate queries to refresh data immediately\n        await queryClient.invalidateQueries({ queryKey: [\"/api/admin/staff\"] });\n        \n        // Wait a moment for the creation to propagate\n        await new Promise(resolve => setTimeout(resolve, 500));\n        \n        toast({ \n          title: \"Success\", \n          description: `${entries.length} staff member${entries.length > 1 ? 's' : ''} added successfully!` \n        });\n        \n        // Reset state after successful creation\n        setAiPrompt(\"\");\n        setAiGeneratedData(null);\n        setSmartAIResponse(null);\n        setCurrentPreviewIndex(0);\n        setIsAiMode(false);\n        setIsCreateOpen(false);\n        resetTranscript();\n      }\n    } catch (error: any) {\n      console.error('Error in handleConfirmAI:', error);\n      toast({ \n        title: \"Error\", \n        description: error.message || \"Failed to process request\", \n        variant: \"destructive\" \n      });\n    }\n  };\n\n  const handleEditEntry = (entry: any, index: number) => {\n    setFormData({\n      full_name: entry.full_name || \"\",\n      employee_id: entry.employee_id || \"\",\n      department_id: \"\",\n      role: entry.role || \"\",\n      designation: entry.designation || \"\",\n      email: entry.email || \"\",\n      phone: entry.phone || \"\",\n      qualification: entry.qualification || \"\",\n      specialization: entry.specialization || \"\",\n      joining_date: entry.joining_date || \"\",\n    });\n    \n    setAiGeneratedData(null);\n    setCurrentPreviewIndex(0);\n    setIsAiMode(false);\n  };\n\n  const handleDeleteEntry = (index: number) => {\n    if (!aiGeneratedData) return;\n    \n    const entries = aiGeneratedData.entries || [aiGeneratedData];\n    const updatedEntries = entries.filter((_: any, i: number) => i !== index);\n    \n    if (updatedEntries.length === 0) {\n      setAiGeneratedData(null);\n      setCurrentPreviewIndex(0);\n      toast({\n        title: \"Info\",\n        description: \"All entries removed. You can generate new ones.\",\n      });\n    } else {\n      setAiGeneratedData({ entries: updatedEntries });\n      if (currentPreviewIndex >= updatedEntries.length) {\n        setCurrentPreviewIndex(updatedEntries.length - 1);\n      }\n      toast({\n        title: \"Success\",\n        description: \"Entry removed from preview\",\n      });\n    }\n  };\n\n  const resetForm = () => {\n    setFormData({\n      full_name: \"\",\n      employee_id: \"\",\n      department_id: \"\",\n      role: \"\",\n      designation: \"\",\n      email: \"\",\n      phone: \"\",\n      qualification: \"\",\n      specialization: \"\",\n      joining_date: \"\",\n    });\n    setAiPrompt(\"\");\n    setAiGeneratedData(null);\n    setCurrentPreviewIndex(0);\n    resetTranscript();\n  };\n\n  const handleOpenDialog = (mode: 'manual' | 'ai') => {\n    setIsAiMode(mode === 'ai');\n    setIsCreateOpen(true);\n    setAiPrompt(\"\");\n    setAiGeneratedData(null);\n    setCurrentPreviewIndex(0);\n    resetTranscript();\n  };\n\n  const handleSubmit = () => {\n    if (editingStaff) {\n      updateMutation.mutate({ id: editingStaff.id, data: formData });\n    } else {\n      createMutation.mutate(formData);\n    }\n  };\n\n  const startEdit = (staff: StaffMember) => {\n    setEditingStaff(staff);\n    setFormData({\n      full_name: staff.full_name,\n      employee_id: staff.employee_id,\n      department_id: staff.department_id || \"\",\n      role: staff.role,\n      designation: staff.designation,\n      email: staff.email,\n      phone: staff.phone,\n      qualification: staff.qualification,\n      specialization: staff.specialization,\n      joining_date: staff.joining_date || \"\",\n    });\n  };\n\n  const staff = staffData?.staff || [];\n  const departments = departmentsData?.departments || [];\n\n  const filteredStaff = selectedDepartment === \"all\"\n    ? staff\n    : staff.filter((s) => s.department_id === selectedDepartment);\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n        <div>\n          <h2 className=\"text-xl sm:text-2xl font-bold\">Staff Detail</h2>\n          <p className=\"text-sm sm:text-base text-gray-600\">Manage college staff members by department</p>\n        </div>\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button className=\"w-full sm:w-auto\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Add Staff\n              <ChevronDown className=\"h-4 w-4 ml-2\" />\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent align=\"end\">\n            <DropdownMenuItem onClick={() => handleOpenDialog('manual')}>\n              Manual Mode\n            </DropdownMenuItem>\n            <DropdownMenuItem onClick={() => handleOpenDialog('ai')}>\n              <Sparkles className=\"h-4 w-4 mr-2\" />\n              AI Mode (Smart Add)\n            </DropdownMenuItem>\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n\n      <Dialog open={isCreateOpen} onOpenChange={setIsCreateOpen}>\n        <DialogContent className=\"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle className=\"text-lg sm:text-xl\">\n              {isAiMode ? \"AI Mode - Add Staff Member\" : \"Add Staff Member\"}\n            </DialogTitle>\n          </DialogHeader>\n          \n          {isAiMode ? (\n            <>\n              {!aiGeneratedData && !smartAIResponse ? (\n                <EnhancedAIInput\n                  prompt={aiPrompt}\n                  onPromptChange={setAiPrompt}\n                  onGenerate={handleGenerateAI}\n                  isGenerating={isGenerating}\n                  isListening={isListening}\n                  onToggleVoice={handleToggleVoice}\n                  browserSupported={browserSupported}\n                  placeholder=\"Add or update staff members (e.g., 'Mr. Ajay physical department ka contact number 9876543210 kar do')...\"\n                  examples={[\n                    \"Add Dr. Rajesh Kumar, Professor of Computer Science, PhD\",\n                    \"Update Prof. Sharma's phone number to 9876543210\",\n                    \"Change Dr. Verma's designation to Head of Department\",\n                    \"Add three staff: Prof. Sharma (Physics), Dr. Verma (Maths), Ms. Patel (Chemistry)\"\n                  ]}\n                  sectionType=\"staff members\"\n                />\n              ) : smartAIResponse ? (\n                <SmartAIUpdatePreview\n                  operation={smartAIResponse.operation}\n                  confidence={smartAIResponse.confidence}\n                  matched_entry={smartAIResponse.matched_entry}\n                  changes={smartAIResponse.changes}\n                  entries={smartAIResponse.entries}\n                  explanation={smartAIResponse.explanation}\n                  sectionType=\"staff\"\n                  onConfirm={handleConfirmAI}\n                  onRegenerate={handleRegenerateAI}\n                  onCancel={handleCancelSmartAI}\n                  renderPreview={(staff) => (\n                    <div className=\"space-y-2\">\n                      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\n                        <div>\n                          <span className=\"font-semibold text-gray-700 text-xs\">Name:</span>\n                          <p className=\"text-gray-900 text-sm\">{staff.full_name}</p>\n                        </div>\n                        <div>\n                          <span className=\"font-semibold text-gray-700 text-xs\">Role:</span>\n                          <p className=\"text-gray-900 text-sm\">{staff.role}</p>\n                        </div>\n                        {staff.email && (\n                          <div>\n                            <span className=\"font-semibold text-gray-700 text-xs\">Email:</span>\n                            <p className=\"text-gray-900 text-sm\">{staff.email}</p>\n                          </div>\n                        )}\n                        {staff.phone && (\n                          <div>\n                            <span className=\"font-semibold text-gray-700 text-xs\">Phone:</span>\n                            <p className=\"text-gray-900 text-sm\">{staff.phone}</p>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                />\n              ) : (\n                <EnhancedAIPreview\n                  entries={aiGeneratedData.entries || [aiGeneratedData]}\n                  currentIndex={currentPreviewIndex}\n                  onIndexChange={setCurrentPreviewIndex}\n                  renderPreview={(staff) => (\n                    <div className=\"space-y-3\">\n                      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                        <div>\n                          <span className=\"font-semibold text-gray-700 block mb-1\">Name:</span>\n                          <p className=\"text-gray-900 text-lg\">{staff.full_name}</p>\n                        </div>\n                        <div>\n                          <span className=\"font-semibold text-gray-700 block mb-1\">Employee ID:</span>\n                          <p className=\"text-gray-900\">{staff.employee_id}</p>\n                        </div>\n                        <div>\n                          <span className=\"font-semibold text-gray-700 block mb-1\">Role:</span>\n                          <p className=\"text-gray-900\">{staff.role}</p>\n                        </div>\n                        {staff.designation && (\n                          <div>\n                            <span className=\"font-semibold text-gray-700 block mb-1\">Designation:</span>\n                            <p className=\"text-gray-900\">{staff.designation}</p>\n                          </div>\n                        )}\n                      </div>\n                      {(staff.email || staff.phone || staff.qualification || staff.specialization || staff.joining_date) && (\n                        <div className=\"mt-4 pt-3 border-t grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                          {staff.email && (\n                            <div>\n                              <span className=\"font-semibold text-gray-700 block mb-1\">Email:</span>\n                              <p className=\"text-gray-900\">{staff.email}</p>\n                            </div>\n                          )}\n                          {staff.phone && (\n                            <div>\n                              <span className=\"font-semibold text-gray-700 block mb-1\">Phone:</span>\n                              <p className=\"text-gray-900\">{staff.phone}</p>\n                            </div>\n                          )}\n                          {staff.qualification && (\n                            <div>\n                              <span className=\"font-semibold text-gray-700 block mb-1\">Qualification:</span>\n                              <p className=\"text-gray-900\">{staff.qualification}</p>\n                            </div>\n                          )}\n                          {staff.specialization && (\n                            <div>\n                              <span className=\"font-semibold text-gray-700 block mb-1\">Specialization:</span>\n                              <p className=\"text-gray-900\">{staff.specialization}</p>\n                            </div>\n                          )}\n                          {staff.joining_date && (\n                            <div>\n                              <span className=\"font-semibold text-gray-700 block mb-1\">Joining Date:</span>\n                              <p className=\"text-gray-900\">{staff.joining_date}</p>\n                            </div>\n                          )}\n                        </div>\n                      )}\n                    </div>\n                  )}\n                  onConfirmAll={handleConfirmAI}\n                  onRegenerate={handleRegenerateAI}\n                  onEditEntry={handleEditEntry}\n                  onDeleteEntry={handleDeleteEntry}\n                  confirmButtonText={`Add ${(aiGeneratedData.entries || [aiGeneratedData]).length} Staff Member${(aiGeneratedData.entries || [aiGeneratedData]).length > 1 ? 's' : ''}`}\n                  entryTypeName=\"Staff Member\"\n                />\n              )}\n            </>\n          ) : (\n            <div className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                <div>\n                  <Label>Full Name</Label>\n                  <Input\n                    value={formData.full_name}\n                    onChange={(e) => setFormData({ ...formData, full_name: e.target.value })}\n                    placeholder=\"Enter full name\"\n                  />\n                </div>\n                <div>\n                  <Label>Employee ID</Label>\n                  <Input\n                    value={formData.employee_id}\n                    onChange={(e) => setFormData({ ...formData, employee_id: e.target.value })}\n                    placeholder=\"e.g., EMP001\"\n                  />\n                </div>\n              </div>\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                <div>\n                  <Label>Department</Label>\n                  <Select\n                    value={formData.department_id}\n                    onValueChange={(value) => setFormData({ ...formData, department_id: value })}\n                  >\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Select department\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {departments.map((dept) => (\n                        <SelectItem key={dept.id} value={dept.id}>\n                          {dept.name}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div>\n                  <Label>Role</Label>\n                  <Select\n                    value={formData.role}\n                    onValueChange={(value) => setFormData({ ...formData, role: value })}\n                  >\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Select role\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"Professor\">Professor</SelectItem>\n                      <SelectItem value=\"Associate Professor\">Associate Professor</SelectItem>\n                      <SelectItem value=\"Assistant Professor\">Assistant Professor</SelectItem>\n                      <SelectItem value=\"Lecturer\">Lecturer</SelectItem>\n                      <SelectItem value=\"Lab Assistant\">Lab Assistant</SelectItem>\n                      <SelectItem value=\"Administrative Staff\">Administrative Staff</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n              <div>\n                <Label>Designation</Label>\n                <Input\n                  value={formData.designation}\n                  onChange={(e) => setFormData({ ...formData, designation: e.target.value })}\n                  placeholder=\"e.g., Head of Department\"\n                />\n              </div>\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                <div>\n                  <Label>Email</Label>\n                  <Input\n                    type=\"email\"\n                    value={formData.email}\n                    onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                    placeholder=\"email@example.com\"\n                  />\n                </div>\n                <div>\n                  <Label>Phone</Label>\n                  <Input\n                    value={formData.phone}\n                    onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n                    placeholder=\"+91-XXXXXXXXXX\"\n                  />\n                </div>\n              </div>\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                <div>\n                  <Label>Qualification</Label>\n                  <Input\n                    value={formData.qualification}\n                    onChange={(e) => setFormData({ ...formData, qualification: e.target.value })}\n                    placeholder=\"e.g., Ph.D., M.Sc.\"\n                  />\n                </div>\n                <div>\n                  <Label>Joining Date</Label>\n                  <Input\n                    type=\"date\"\n                    value={formData.joining_date}\n                    onChange={(e) => setFormData({ ...formData, joining_date: e.target.value })}\n                  />\n                </div>\n              </div>\n              <div>\n                <Label>Specialization</Label>\n                <Textarea\n                  value={formData.specialization}\n                  onChange={(e) => setFormData({ ...formData, specialization: e.target.value })}\n                  placeholder=\"Area of expertise...\"\n                  rows={2}\n                />\n              </div>\n              <Button onClick={handleSubmit} className=\"w-full\">\n                Add Staff Member\n              </Button>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n\n      <Dialog open={!!editingStaff} onOpenChange={(open) => !open && setEditingStaff(null)}>\n        <DialogContent className=\"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle className=\"text-lg sm:text-xl\">Edit Staff Member</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n              <div>\n                <Label>Full Name</Label>\n                <Input\n                  value={formData.full_name}\n                  onChange={(e) => setFormData({ ...formData, full_name: e.target.value })}\n                />\n              </div>\n              <div>\n                <Label>Employee ID</Label>\n                <Input\n                  value={formData.employee_id}\n                  onChange={(e) => setFormData({ ...formData, employee_id: e.target.value })}\n                />\n              </div>\n            </div>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n              <div>\n                <Label>Department</Label>\n                <Select\n                  value={formData.department_id}\n                  onValueChange={(value) => setFormData({ ...formData, department_id: value })}\n                >\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {departments.map((dept) => (\n                      <SelectItem key={dept.id} value={dept.id}>\n                        {dept.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label>Role</Label>\n                <Select\n                  value={formData.role}\n                  onValueChange={(value) => setFormData({ ...formData, role: value })}\n                >\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"Professor\">Professor</SelectItem>\n                    <SelectItem value=\"Associate Professor\">Associate Professor</SelectItem>\n                    <SelectItem value=\"Assistant Professor\">Assistant Professor</SelectItem>\n                    <SelectItem value=\"Lecturer\">Lecturer</SelectItem>\n                    <SelectItem value=\"Lab Assistant\">Lab Assistant</SelectItem>\n                    <SelectItem value=\"Administrative Staff\">Administrative Staff</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n            <div>\n              <Label>Designation</Label>\n              <Input\n                value={formData.designation}\n                onChange={(e) => setFormData({ ...formData, designation: e.target.value })}\n              />\n            </div>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n              <div>\n                <Label>Email</Label>\n                <Input\n                  type=\"email\"\n                  value={formData.email}\n                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                />\n              </div>\n              <div>\n                <Label>Phone</Label>\n                <Input\n                  value={formData.phone}\n                  onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n                />\n              </div>\n            </div>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n              <div>\n                <Label>Qualification</Label>\n                <Input\n                  value={formData.qualification}\n                  onChange={(e) => setFormData({ ...formData, qualification: e.target.value })}\n                />\n              </div>\n              <div>\n                <Label>Joining Date</Label>\n                <Input\n                  type=\"date\"\n                  value={formData.joining_date}\n                  onChange={(e) => setFormData({ ...formData, joining_date: e.target.value })}\n                />\n              </div>\n            </div>\n            <div>\n              <Label>Specialization</Label>\n              <Textarea\n                value={formData.specialization}\n                onChange={(e) => setFormData({ ...formData, specialization: e.target.value })}\n                rows={2}\n              />\n            </div>\n            <Button onClick={handleSubmit} className=\"w-full\">\n              Update Staff Member\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      <Tabs value={selectedDepartment} onValueChange={setSelectedDepartment}>\n        <TabsList>\n          <TabsTrigger value=\"all\">All Staff</TabsTrigger>\n          {departments.map((dept) => (\n            <TabsTrigger key={dept.id} value={dept.id}>\n              {dept.name}\n            </TabsTrigger>\n          ))}\n        </TabsList>\n\n        <TabsContent value={selectedDepartment} className=\"mt-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {filteredStaff.map((member) => (\n              <Card key={member.id}>\n                <CardHeader>\n                  <CardTitle className=\"text-lg flex items-center justify-between\">\n                    {member.full_name}\n                    <div className=\"flex gap-1\">\n                      <Button size=\"sm\" variant=\"ghost\" onClick={() => startEdit(member)}>\n                        <Edit className=\"h-4 w-4\" />\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        onClick={() => deleteMutation.mutate(member.id)}\n                      >\n                        <Trash2 className=\"h-4 w-4 text-red-500\" />\n                      </Button>\n                    </div>\n                  </CardTitle>\n                  <CardDescription>\n                    {member.employee_id} - {member.role}\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-2 text-sm\">\n                    {member.designation && (\n                      <div><span className=\"font-medium\">Designation:</span> {member.designation}</div>\n                    )}\n                    {member.email && (\n                      <div className=\"flex items-center gap-1\">\n                        <Mail className=\"h-3 w-3\" />\n                        {member.email}\n                      </div>\n                    )}\n                    {member.phone && (\n                      <div className=\"flex items-center gap-1\">\n                        <Phone className=\"h-3 w-3\" />\n                        {member.phone}\n                      </div>\n                    )}\n                    {member.qualification && (\n                      <div><span className=\"font-medium\">Qualification:</span> {member.qualification}</div>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n\n          {filteredStaff.length === 0 && (\n            <Card>\n              <CardContent className=\"py-12 text-center text-gray-500\">\n                No staff members found for this department. Click \"Add Staff\" to get started.\n              </CardContent>\n            </Card>\n          )}\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n","size_bytes":37654},"client/src/pages/main-admin.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { supabase } from \"@/lib/supabase\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Sheet, SheetContent, SheetTrigger } from \"@/components/ui/sheet\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { \n  Home, \n  Building2, \n  Calendar, \n  Menu,\n  LogOut,\n  Info,\n  Users,\n  GraduationCap,\n  ExternalLink\n} from \"lucide-react\";\nimport { GeneralInfoSectionNew } from \"@/components/admin/GeneralInfoSectionNew\";\nimport { CoursesSection } from \"@/components/admin/CoursesSection\";\nimport { StaffSection } from \"@/components/admin/StaffSection\";\nimport { DepartmentsManager } from \"@/components/head-admin/DepartmentsManager\";\nimport { EventsManager } from \"@/components/head-admin/EventsManager\";\n\nconst navItems = [\n  { id: \"dashboard\", label: \"Dashboard\", icon: Home },\n  { id: \"general\", label: \"General Information\", icon: Info },\n  { id: \"courses\", label: \"Courses Detail\", icon: GraduationCap },\n  { id: \"staff\", label: \"Staff Detail\", icon: Users },\n  { id: \"departments\", label: \"Departments\", icon: Building2 },\n  { id: \"events\", label: \"Events & Activities\", icon: Calendar },\n];\n\nexport default function MainAdminPanel() {\n  const [activeTab, setActiveTab] = useState(\"dashboard\");\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const [, setLocation] = useLocation();\n  const queryClient = useQueryClient();\n\n  const token = localStorage.getItem(\"adminToken\");\n\n  useEffect(() => {\n    if (!token) {\n      setLocation(\"/admin/login\");\n    }\n  }, [token, setLocation]);\n\n  const { data: departmentsData } = useQuery<any>({\n    queryKey: [\"/api/admin/departments\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/departments\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch departments\");\n      return await res.json();\n    },\n  });\n\n  const { data: statsData } = useQuery<any>({\n    queryKey: [\"/api/admin/stats\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/stats\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) return { students: 0, staff: 0, courses: 0, departments: 0 };\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (!token) return;\n\n    const departmentsChannel = supabase\n      .channel('dashboard-departments')\n      .on('postgres_changes', { event: '*', schema: 'public', table: 'departments' }, () => {\n        queryClient.invalidateQueries({ queryKey: [\"/api/admin/departments\"] });\n        queryClient.invalidateQueries({ queryKey: [\"/api/admin/stats\"] });\n      })\n      .subscribe();\n\n    const coursesChannel = supabase\n      .channel('dashboard-courses')\n      .on('postgres_changes', { event: '*', schema: 'public', table: 'courses' }, () => {\n        queryClient.invalidateQueries({ queryKey: [\"/api/admin/stats\"] });\n      })\n      .subscribe();\n\n    const staffChannel = supabase\n      .channel('dashboard-staff')\n      .on('postgres_changes', { event: '*', schema: 'public', table: 'staff_members' }, () => {\n        queryClient.invalidateQueries({ queryKey: [\"/api/admin/stats\"] });\n      })\n      .subscribe();\n\n    return () => {\n      supabase.removeChannel(departmentsChannel);\n      supabase.removeChannel(coursesChannel);\n      supabase.removeChannel(staffChannel);\n    };\n  }, [queryClient, token]);\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"adminToken\");\n    setLocation(\"/admin/login\");\n  };\n\n  const handleDataChange = () => {\n    queryClient.invalidateQueries({ queryKey: [\"/api/admin/stats\"] });\n    queryClient.invalidateQueries({ queryKey: [\"/api/admin/courses\"] });\n    queryClient.invalidateQueries({ queryKey: [\"/api/admin/staff\"] });\n    queryClient.invalidateQueries({ queryKey: [\"/api/admin/college-info\"] });\n    queryClient.invalidateQueries({ queryKey: [\"/api/admin/college-settings\"] });\n    queryClient.invalidateQueries({ queryKey: [\"/api/admin/departments\"] });\n    queryClient.invalidateQueries({ queryKey: [\"/api/head-admin/events\"] });\n  };\n\n  const NavContent = () => (\n    <div className=\"space-y-2 p-4 flex flex-col h-full\">\n      <div className=\"mb-8\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">Main Admin Panel</h2>\n        <p className=\"text-sm text-gray-600\">College Management System</p>\n      </div>\n      <div className=\"flex-1\">\n        {navItems.map((item) => {\n          const Icon = item.icon;\n          return (\n            <Button\n              key={item.id}\n              variant={activeTab === item.id ? \"default\" : \"ghost\"}\n              className=\"w-full justify-start mb-2\"\n              onClick={() => {\n                setActiveTab(item.id);\n                setMobileMenuOpen(false);\n              }}\n            >\n              <Icon className=\"mr-2 h-4 w-4\" />\n              {item.label}\n            </Button>\n          );\n        })}\n      </div>\n      <Button\n        variant=\"outline\"\n        className=\"w-full justify-start text-red-600 hover:text-red-700 hover:bg-red-50\"\n        onClick={handleLogout}\n      >\n        <LogOut className=\"mr-2 h-4 w-4\" />\n        Logout\n      </Button>\n    </div>\n  );\n\n  const departments = departmentsData?.departments || [];\n  const stats = statsData || { students: 0, staff: 0, courses: 0, departments: 0 };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Mobile Header */}\n      <div className=\"lg:hidden fixed top-0 left-0 right-0 h-16 bg-white border-b border-gray-200 flex items-center px-4 z-50\">\n        <Sheet open={mobileMenuOpen} onOpenChange={setMobileMenuOpen}>\n          <SheetTrigger asChild>\n            <Button variant=\"ghost\" size=\"icon\">\n              <Menu className=\"h-6 w-6\" />\n            </Button>\n          </SheetTrigger>\n          <SheetContent side=\"left\" className=\"p-0 w-64\">\n            <NavContent />\n          </SheetContent>\n        </Sheet>\n        <h1 className=\"ml-4 text-lg font-semibold\">Main Admin Panel</h1>\n      </div>\n\n      <div className=\"flex\">\n        {/* Desktop Sidebar */}\n        <aside className=\"hidden lg:block w-64 bg-white border-r border-gray-200 fixed left-0 top-0 bottom-0\">\n          <ScrollArea className=\"h-full\">\n            <NavContent />\n          </ScrollArea>\n        </aside>\n\n        {/* Main Content */}\n        <main className=\"flex-1 lg:ml-64 mt-16 lg:mt-0 p-4 lg:p-8\">\n          <div className=\"max-w-7xl mx-auto\">\n            {activeTab === \"dashboard\" && (\n              <div className=\"space-y-6\">\n                <div className=\"flex items-center justify-between flex-wrap gap-4\">\n                  <div>\n                    <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900 bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent\">\n                      Main Admin Dashboard\n                    </h1>\n                    <p className=\"text-sm sm:text-base text-gray-600 mt-2\">\n                      R.K.S.D. (PG) College - Complete Management System\n                    </p>\n                  </div>\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"flex items-center gap-2 px-4 py-2 bg-green-50 border border-green-200 rounded-lg\">\n                      <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\n                      <span className=\"text-sm font-medium text-green-700\">Live Updates Active</span>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n                  <Card className=\"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200 hover:shadow-lg transition-shadow\">\n                    <CardHeader className=\"pb-3\">\n                      <div className=\"flex items-center justify-between\">\n                        <CardTitle className=\"text-sm font-semibold text-blue-900\">\n                          Total Students\n                        </CardTitle>\n                        <div className=\"p-3 bg-blue-500 rounded-lg\">\n                          <Users className=\"h-6 w-6 text-white\" />\n                        </div>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"text-2xl sm:text-3xl font-bold text-blue-900\">{stats.students?.toLocaleString() || '5,200'}</div>\n                      <p className=\"text-sm text-blue-700 mt-2 flex items-center gap-1\">\n                        <span className=\"w-1.5 h-1.5 bg-blue-500 rounded-full\"></span>\n                        Active enrollments\n                      </p>\n                    </CardContent>\n                  </Card>\n\n                  <Card className=\"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200 hover:shadow-lg transition-shadow\">\n                    <CardHeader className=\"pb-3\">\n                      <div className=\"flex items-center justify-between\">\n                        <CardTitle className=\"text-sm font-semibold text-purple-900\">\n                          Faculty & Staff\n                        </CardTitle>\n                        <div className=\"p-3 bg-purple-500 rounded-lg\">\n                          <Users className=\"h-6 w-6 text-white\" />\n                        </div>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"text-2xl sm:text-3xl font-bold text-purple-900\">{stats.staff || 0}</div>\n                      <p className=\"text-sm text-purple-700 mt-2 flex items-center gap-1\">\n                        <span className=\"w-1.5 h-1.5 bg-purple-500 rounded-full\"></span>\n                        Teaching & Non-teaching\n                      </p>\n                    </CardContent>\n                  </Card>\n\n                  <Card className=\"bg-gradient-to-br from-green-50 to-green-100 border-green-200 hover:shadow-lg transition-shadow\">\n                    <CardHeader className=\"pb-3\">\n                      <div className=\"flex items-center justify-between\">\n                        <CardTitle className=\"text-sm font-semibold text-green-900\">\n                          Academic Programs\n                        </CardTitle>\n                        <div className=\"p-3 bg-green-500 rounded-lg\">\n                          <GraduationCap className=\"h-6 w-6 text-white\" />\n                        </div>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"text-2xl sm:text-3xl font-bold text-green-900\">{stats.courses || 0}</div>\n                      <p className=\"text-sm text-green-700 mt-2 flex items-center gap-1\">\n                        <span className=\"w-1.5 h-1.5 bg-green-500 rounded-full\"></span>\n                        UG, PG & Ph.D programs\n                      </p>\n                    </CardContent>\n                  </Card>\n\n                  <Card className=\"bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200 hover:shadow-lg transition-shadow\">\n                    <CardHeader className=\"pb-3\">\n                      <div className=\"flex items-center justify-between\">\n                        <CardTitle className=\"text-sm font-semibold text-orange-900\">\n                          Departments\n                        </CardTitle>\n                        <div className=\"p-3 bg-orange-500 rounded-lg\">\n                          <Building2 className=\"h-6 w-6 text-white\" />\n                        </div>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"text-2xl sm:text-3xl font-bold text-orange-900\">{stats.departments || departments.length}</div>\n                      <p className=\"text-sm text-orange-700 mt-2 flex items-center gap-1\">\n                        <span className=\"w-1.5 h-1.5 bg-orange-500 rounded-full\"></span>\n                        Active departments\n                      </p>\n                    </CardContent>\n                  </Card>\n                </div>\n\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n                  <Card className=\"lg:col-span-2\">\n                    <CardHeader className=\"border-b bg-gradient-to-r from-gray-50 to-gray-100\">\n                      <CardTitle className=\"flex items-center gap-2\">\n                        <Building2 className=\"h-5 w-5 text-blue-600\" />\n                        Department Overview\n                      </CardTitle>\n                      <CardDescription>\n                        Access and manage all department panels\n                      </CardDescription>\n                    </CardHeader>\n                    <CardContent className=\"pt-6\">\n                      {departments.length > 0 ? (\n                        <ScrollArea className=\"h-[320px] pr-4\">\n                          <div className=\"space-y-3\">\n                            {departments.map((dept: any) => (\n                              <div\n                                key={dept.id}\n                                className=\"group flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50/50 transition-all\"\n                              >\n                                <div className=\"flex-1\">\n                                  <div className=\"flex items-center gap-2\">\n                                    <h4 className=\"font-semibold text-gray-900\">{dept.name}</h4>\n                                    <span className=\"px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-700 rounded\">\n                                      Active\n                                    </span>\n                                  </div>\n                                  <p className=\"text-sm text-gray-500 mt-1\">ID: {dept.department_id}</p>\n                                  {dept.head_name && (\n                                    <div className=\"mt-2 flex items-center gap-4\">\n                                      <p className=\"text-sm text-gray-700\">\n                                        <span className=\"font-medium\">Head:</span> {dept.head_name}\n                                      </p>\n                                      {dept.contact_phone && (\n                                        <p className=\"text-sm text-gray-600\">\n                                          ðŸ“ž {dept.contact_phone}\n                                        </p>\n                                      )}\n                                    </div>\n                                  )}\n                                </div>\n                                <Button\n                                  size=\"sm\"\n                                  className=\"ml-4 group-hover:bg-blue-600 group-hover:text-white\"\n                                  variant=\"outline\"\n                                  onClick={() => window.open(dept.panel_link, '_blank')}\n                                >\n                                  <ExternalLink className=\"h-4 w-4 mr-1\" />\n                                  Access Panel\n                                </Button>\n                              </div>\n                            ))}\n                          </div>\n                        </ScrollArea>\n                      ) : (\n                        <div className=\"text-center py-12\">\n                          <Building2 className=\"h-12 w-12 text-gray-300 mx-auto mb-3\" />\n                          <p className=\"text-gray-500\">No departments created yet</p>\n                          <Button\n                            size=\"sm\"\n                            className=\"mt-3\"\n                            onClick={() => setActiveTab('departments')}\n                          >\n                            Create First Department\n                          </Button>\n                        </div>\n                      )}\n                    </CardContent>\n                  </Card>\n\n                  <Card>\n                    <CardHeader className=\"border-b bg-gradient-to-r from-gray-50 to-gray-100\">\n                      <CardTitle className=\"flex items-center gap-2\">\n                        <Info className=\"h-5 w-5 text-green-600\" />\n                        Quick Actions\n                      </CardTitle>\n                      <CardDescription>\n                        Manage college information\n                      </CardDescription>\n                    </CardHeader>\n                    <CardContent className=\"pt-6\">\n                      <div className=\"space-y-2\">\n                        {navItems.slice(1).map((item) => {\n                          const Icon = item.icon;\n                          return (\n                            <Button\n                              key={item.id}\n                              variant=\"outline\"\n                              className=\"w-full justify-start h-12 hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700 transition-all\"\n                              onClick={() => setActiveTab(item.id)}\n                            >\n                              <Icon className=\"mr-3 h-5 w-5\" />\n                              <span className=\"font-medium\">{item.label}</span>\n                            </Button>\n                          );\n                        })}\n                      </div>\n                    </CardContent>\n                  </Card>\n                </div>\n\n                <Card className=\"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200\">\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2 text-blue-900\">\n                      <Info className=\"h-5 w-5\" />\n                      System Information\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div className=\"p-4 bg-white rounded-lg border border-blue-200\">\n                        <h4 className=\"font-semibold text-blue-900 mb-2\">ðŸ”’ Security</h4>\n                        <p className=\"text-sm text-blue-800\">\n                          All data is encrypted and stored securely. Department credentials are shown only once during creation.\n                        </p>\n                      </div>\n                      <div className=\"p-4 bg-white rounded-lg border border-green-200\">\n                        <h4 className=\"font-semibold text-green-900 mb-2\">ðŸ”„ Real-Time Sync</h4>\n                        <p className=\"text-sm text-green-800\">\n                          All changes sync automatically with the AI assistant, notice board, and department panels.\n                        </p>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n            )}\n\n            {activeTab === \"general\" && <GeneralInfoSectionNew />}\n            {activeTab === \"courses\" && <CoursesSection />}\n            {activeTab === \"staff\" && <StaffSection />}\n            {activeTab === \"departments\" && <DepartmentsManager />}\n            {activeTab === \"events\" && <EventsManager />}\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}\n","size_bytes":19512},"server/routes-admin.ts":{"content":"import type { Express, Request, Response } from \"express\";\nimport { supabase } from \"./supabase\";\nimport { z } from \"zod\";\n\nconst courseSchema = z.object({\n  course_name: z.string(),\n  course_code: z.string(),\n  course_type: z.string(),\n  duration: z.string().optional(),\n  description: z.string().optional(),\n  eligibility: z.string().optional(),\n  total_seats: z.string().optional(),\n  fees_per_year: z.string().optional(),\n  department_id: z.string().optional(),\n});\n\nconst staffSchema = z.object({\n  full_name: z.string(),\n  employee_id: z.string(),\n  department_id: z.string().optional(),\n  role: z.string(),\n  designation: z.string().optional(),\n  email: z.string().optional(),\n  phone: z.string().optional(),\n  qualification: z.string().optional(),\n  specialization: z.string().optional(),\n  joining_date: z.string().optional(),\n});\n\nexport function registerAdminRoutes(app: Express) {\n  \n  // Get admin stats\n  app.get(\"/api/admin/stats\", async (req: Request, res: Response) => {\n    try {\n      const [coursesResult, staffResult, departmentsResult] = await Promise.all([\n        supabase.from('courses').select('count', { count: 'exact', head: true }),\n        supabase.from('staff_members').select('count', { count: 'exact', head: true }),\n        supabase.from('departments').select('count', { count: 'exact', head: true }),\n      ]);\n\n      res.json({\n        students: 5200, // This could come from a students table\n        courses: coursesResult.count || 0,\n        staff: staffResult.count || 0,\n        departments: departmentsResult.count || 0,\n      });\n    } catch (error: any) {\n      console.error('Error fetching stats:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // ===== COURSES ROUTES =====\n  \n  // Get all courses\n  app.get(\"/api/admin/courses\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('courses')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      res.json({ courses: data });\n    } catch (error: any) {\n      console.error('Error fetching courses:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Create course\n  app.post(\"/api/admin/courses\", async (req: Request, res: Response) => {\n    try {\n      const validated = courseSchema.parse(req.body);\n      \n      const { data, error } = await supabase\n        .from('courses')\n        .insert({\n          course_name: validated.course_name,\n          course_code: validated.course_code,\n          course_type: validated.course_type,\n          duration: validated.duration,\n          description: validated.description,\n          eligibility: validated.eligibility,\n          total_seats: validated.total_seats ? parseInt(validated.total_seats) : null,\n          fees_per_year: validated.fees_per_year ? parseFloat(validated.fees_per_year) : null,\n          department_id: validated.department_id || null,\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ course: data });\n    } catch (error: any) {\n      console.error('Error creating course:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Update course\n  app.put(\"/api/admin/courses/:id\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n      const validated = courseSchema.parse(req.body);\n\n      const { data, error } = await supabase\n        .from('courses')\n        .update({\n          course_name: validated.course_name,\n          course_code: validated.course_code,\n          course_type: validated.course_type,\n          duration: validated.duration,\n          description: validated.description,\n          eligibility: validated.eligibility,\n          total_seats: validated.total_seats ? parseInt(validated.total_seats) : null,\n          fees_per_year: validated.fees_per_year ? parseFloat(validated.fees_per_year) : null,\n          department_id: validated.department_id || null,\n          updated_at: new Date().toISOString(),\n        })\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ course: data });\n    } catch (error: any) {\n      console.error('Error updating course:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Delete course\n  app.delete(\"/api/admin/courses/:id\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n\n      const { error } = await supabase\n        .from('courses')\n        .delete()\n        .eq('id', id);\n\n      if (error) throw error;\n      res.json({ message: 'Course deleted successfully' });\n    } catch (error: any) {\n      console.error('Error deleting course:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // ===== STAFF ROUTES =====\n  \n  // Get all staff\n  app.get(\"/api/admin/staff\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('staff_members')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      res.json({ staff: data });\n    } catch (error: any) {\n      console.error('Error fetching staff:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Create staff member\n  app.post(\"/api/admin/staff\", async (req: Request, res: Response) => {\n    try {\n      const validated = staffSchema.parse(req.body);\n      let employeeId = validated.employee_id;\n      \n      // Check if employee_id already exists and generate a unique one if needed\n      const { data: existingStaff } = await supabase\n        .from('staff_members')\n        .select('employee_id')\n        .eq('employee_id', employeeId)\n        .single();\n      \n      if (existingStaff) {\n        // Get all staff to find the next available ID\n        const { data: allStaff } = await supabase\n          .from('staff_members')\n          .select('employee_id')\n          .order('created_at', { ascending: false });\n        \n        // Extract numbers from existing employee IDs and find max\n        const maxNumber = (allStaff || []).reduce((max, staff) => {\n          const match = staff.employee_id.match(/EMP-(\\d+)/);\n          if (match) {\n            const num = parseInt(match[1]);\n            return num > max ? num : max;\n          }\n          return max;\n        }, 0);\n        \n        // Generate new unique employee ID\n        employeeId = `EMP-${String(maxNumber + 1).padStart(3, '0')}`;\n      }\n      \n      const { data, error } = await supabase\n        .from('staff_members')\n        .insert({\n          full_name: validated.full_name,\n          employee_id: employeeId,\n          department_id: validated.department_id || null,\n          role: validated.role,\n          designation: validated.designation,\n          email: validated.email,\n          phone: validated.phone,\n          qualification: validated.qualification,\n          specialization: validated.specialization,\n          joining_date: validated.joining_date || null,\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ staff: data });\n    } catch (error: any) {\n      console.error('Error creating staff member:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Update staff member\n  app.put(\"/api/admin/staff/:id\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n      const validated = staffSchema.parse(req.body);\n\n      const { data, error } = await supabase\n        .from('staff_members')\n        .update({\n          full_name: validated.full_name,\n          employee_id: validated.employee_id,\n          department_id: validated.department_id || null,\n          role: validated.role,\n          designation: validated.designation,\n          email: validated.email,\n          phone: validated.phone,\n          qualification: validated.qualification,\n          specialization: validated.specialization,\n          joining_date: validated.joining_date || null,\n          updated_at: new Date().toISOString(),\n        })\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ staff: data });\n    } catch (error: any) {\n      console.error('Error updating staff member:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Delete staff member\n  app.delete(\"/api/admin/staff/:id\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n\n      const { error } = await supabase\n        .from('staff_members')\n        .delete()\n        .eq('id', id);\n\n      if (error) throw error;\n      res.json({ message: 'Staff member deleted successfully' });\n    } catch (error: any) {\n      console.error('Error deleting staff member:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Get all departments (for dropdowns)\n  app.get(\"/api/admin/departments\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('departments')\n        .select('id, name, slug, department_id, head_name, panel_link, is_active')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      res.json({ departments: data });\n    } catch (error: any) {\n      console.error('Error fetching departments:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // AI-powered information generation\n  app.post(\"/api/admin/ai-generate-info\", async (req: Request, res: Response) => {\n    try {\n      const { prompt } = req.body;\n      \n      if (!prompt || typeof prompt !== 'string') {\n        return res.status(400).json({ message: 'Prompt is required' });\n      }\n\n      const groqApiKey = process.env.GROQ_API_KEY_ADMIN;\n      \n      if (!groqApiKey) {\n        return res.status(500).json({ message: 'Groq API key not configured for admin panel' });\n      }\n\n      const systemPrompt = `You are an AI assistant helping college administrators add structured information to their college management system. \n\nWhen given a description of one or more pieces of information to add, you must extract and structure it into the following JSON format:\n{\n  \"entries\": [\n    {\n      \"title\": \"Clear, concise title for the information\",\n      \"category\": \"Category (e.g., Facilities, Rules, Timings, Academics, Events, etc.)\",\n      \"content\": \"Detailed, well-formatted content describing the information. Make it professional and clear.\",\n      \"tags\": [\"relevant\", \"tags\", \"as\", \"array\"]\n    }\n  ]\n}\n\nGuidelines:\n- If MULTIPLE pieces of information are mentioned, create SEPARATE entries for EACH in the \"entries\" array\n- If ONLY ONE piece of information is mentioned, still return an array with one entry\n- Keep titles short and descriptive (max 50 characters)\n- Choose appropriate categories based on the content\n- Make content clear, professional, and detailed\n- Add 2-5 relevant tags per entry\n- If timings are mentioned, format them properly (e.g., 12:00 PM, 9:00 AM)\n- Use proper grammar and formatting\n\nEXAMPLES:\nUser: \"Add library timings and canteen timings\"\nResponse: {\"entries\": [{\"title\": \"Library Timings\", \"category\": \"Facilities\", ...}, {\"title\": \"Canteen Timings\", \"category\": \"Facilities\", ...}]}\n\nReturn ONLY the JSON object, no additional text or explanation.`;\n\n      const response = await fetch(\"https://api.groq.com/openai/v1/chat/completions\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${groqApiKey}`,\n        },\n        body: JSON.stringify({\n          model: \"llama-3.3-70b-versatile\",\n          messages: [\n            { role: \"system\", content: systemPrompt },\n            { role: \"user\", content: prompt }\n          ],\n          temperature: 0.7,\n          max_tokens: 2500,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Groq API error:', errorText);\n        return res.status(500).json({ message: 'Failed to generate information with AI' });\n      }\n\n      const data = await response.json();\n      const generatedText = data.choices[0]?.message?.content;\n\n      if (!generatedText) {\n        return res.status(500).json({ message: 'No response from AI' });\n      }\n\n      let parsedInfo;\n      try {\n        let cleanedText = generatedText.trim();\n        if (cleanedText.startsWith('```')) {\n          cleanedText = cleanedText.replace(/^```(?:json)?\\s*\\n?/i, '').replace(/\\n?```\\s*$/i, '');\n        }\n        parsedInfo = JSON.parse(cleanedText);\n      } catch (parseError) {\n        console.error('Failed to parse AI response:', generatedText);\n        return res.status(500).json({ message: 'AI response format error' });\n      }\n\n      res.json(parsedInfo);\n    } catch (error: any) {\n      console.error('Error in AI generation:', error);\n      res.status(500).json({ message: error.message || 'Failed to generate information' });\n    }\n  });\n\n  // AI-powered course generation\n  app.post(\"/api/admin/ai-generate-course\", async (req: Request, res: Response) => {\n    try {\n      const { prompt } = req.body;\n      \n      if (!prompt || typeof prompt !== 'string') {\n        return res.status(400).json({ message: 'Prompt is required' });\n      }\n\n      const groqApiKey = process.env.GROQ_API_KEY_ADMIN;\n      \n      if (!groqApiKey) {\n        return res.status(500).json({ message: 'Groq API key not configured for admin panel' });\n      }\n\n      const systemPrompt = `You are an AI assistant helping college administrators add course information. \n\nWhen given a description of one or more courses, extract and structure it into this JSON format:\n{\n  \"entries\": [\n    {\n      \"course_name\": \"Course name (e.g., B.Sc Computer Science)\",\n      \"course_code\": \"Course code (e.g., BSC-CS-001) - generate if not provided\",\n      \"course_type\": \"Type: UG, PG, Diploma, or Certificate\",\n      \"duration\": \"Duration (e.g., 3 Years, 2 Years)\",\n      \"description\": \"Detailed course description\",\n      \"eligibility\": \"Eligibility criteria (e.g., 12th Pass with Science stream)\",\n      \"total_seats\": \"Number of seats (as number, e.g., 60)\",\n      \"fees_per_year\": \"Annual fees in rupees (as number, e.g., 25000)\"\n    }\n  ]\n}\n\nIMPORTANT RULES:\n1. If MULTIPLE courses are mentioned, create SEPARATE entries for EACH course in the \"entries\" array\n2. If ONLY ONE course is mentioned, still return an array with one entry\n3. Only fill fields if you are 90%+ confident about the information\n4. If confidence is below 90%, leave that field as empty string \"\" or 0 for numbers\n5. Always provide course_name, course_type if mentioned\n6. Use proper formatting and professional language\n7. For course_code: generate unique logical codes based on course name if not provided\n8. total_seats and fees_per_year must be numbers (0 if unknown)\n\nEXAMPLES:\nUser: \"Add B.Sc CS and B.Sc Maths courses\"\nResponse: {\"entries\": [{\"course_name\": \"B.Sc Computer Science\", \"course_code\": \"BSC-CS-001\", ...}, {\"course_name\": \"B.Sc Mathematics\", \"course_code\": \"BSC-MATH-001\", ...}]}\n\nReturn ONLY the JSON object, no additional text.`;\n\n      const response = await fetch(\"https://api.groq.com/openai/v1/chat/completions\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${groqApiKey}`,\n        },\n        body: JSON.stringify({\n          model: \"llama-3.3-70b-versatile\",\n          messages: [\n            { role: \"system\", content: systemPrompt },\n            { role: \"user\", content: prompt }\n          ],\n          temperature: 0.7,\n          max_tokens: 2500,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Groq API error:', errorText);\n        return res.status(500).json({ message: 'Failed to generate course with AI' });\n      }\n\n      const data = await response.json();\n      const generatedText = data.choices[0]?.message?.content;\n\n      if (!generatedText) {\n        return res.status(500).json({ message: 'No response from AI' });\n      }\n\n      let parsedCourse;\n      try {\n        let cleanedText = generatedText.trim();\n        if (cleanedText.startsWith('```')) {\n          cleanedText = cleanedText.replace(/^```(?:json)?\\s*\\n?/i, '').replace(/\\n?```\\s*$/i, '');\n        }\n        parsedCourse = JSON.parse(cleanedText);\n        \n        if (parsedCourse.entries && Array.isArray(parsedCourse.entries)) {\n          parsedCourse.entries = parsedCourse.entries.map((entry: any) => ({\n            ...entry,\n            total_seats: entry.total_seats?.toString() || \"0\",\n            fees_per_year: entry.fees_per_year?.toString() || \"0\",\n          }));\n        }\n      } catch (parseError) {\n        console.error('Failed to parse AI response:', generatedText);\n        return res.status(500).json({ message: 'AI response format error' });\n      }\n\n      res.json(parsedCourse);\n    } catch (error: any) {\n      console.error('Error in AI course generation:', error);\n      res.status(500).json({ message: error.message || 'Failed to generate course' });\n    }\n  });\n\n  // AI-powered staff generation\n  app.post(\"/api/admin/ai-generate-staff\", async (req: Request, res: Response) => {\n    try {\n      const { prompt } = req.body;\n      \n      if (!prompt || typeof prompt !== 'string') {\n        return res.status(400).json({ message: 'Prompt is required' });\n      }\n\n      const groqApiKey = process.env.GROQ_API_KEY_ADMIN;\n      \n      if (!groqApiKey) {\n        return res.status(500).json({ message: 'Groq API key not configured for admin panel' });\n      }\n\n      const systemPrompt = `You are an AI assistant helping college administrators add staff member information.\n\nWhen given a description of one or more staff members, extract and structure it into this JSON format:\n{\n  \"entries\": [\n    {\n      \"full_name\": \"Full name of the staff member\",\n      \"employee_id\": \"Employee ID (generate format EMP-XXX if not provided)\",\n      \"role\": \"Role (Professor, Associate Professor, Assistant Professor, Lecturer, Lab Assistant, or Administrative Staff)\",\n      \"designation\": \"Specific designation (e.g., Head of Department, Senior Lecturer)\",\n      \"email\": \"Email address\",\n      \"phone\": \"Phone number\",\n      \"qualification\": \"Highest qualification (e.g., Ph.D., M.Sc., M.A.)\",\n      \"specialization\": \"Area of expertise or specialization\",\n      \"joining_date\": \"Joining date in YYYY-MM-DD format (leave empty if not provided)\"\n    }\n  ]\n}\n\nIMPORTANT RULES:\n1. If MULTIPLE staff members are mentioned, create SEPARATE entries for EACH person in the \"entries\" array\n2. If ONLY ONE staff member is mentioned, still return an array with one entry\n3. Only fill fields if you are 90%+ confident about the information\n4. If confidence is below 90%, leave that field as empty string \"\"\n5. Always provide full_name if mentioned\n6. Generate unique employee_id in format EMP-001, EMP-002, etc. if not provided\n7. For role: choose from the list provided, or use \"Administrative Staff\" if unsure\n8. Use proper formatting and professional language\n9. Format dates as YYYY-MM-DD\n\nEXAMPLES:\nUser: \"Add Ajay Kumar and Mohit Sharma as professors\"\nResponse: {\"entries\": [{\"full_name\": \"Ajay Kumar\", \"employee_id\": \"EMP-001\", \"role\": \"Professor\", ...}, {\"full_name\": \"Mohit Sharma\", \"employee_id\": \"EMP-002\", \"role\": \"Professor\", ...}]}\n\nReturn ONLY the JSON object, no additional text.`;\n\n      const response = await fetch(\"https://api.groq.com/openai/v1/chat/completions\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${groqApiKey}`,\n        },\n        body: JSON.stringify({\n          model: \"llama-3.3-70b-versatile\",\n          messages: [\n            { role: \"system\", content: systemPrompt },\n            { role: \"user\", content: prompt }\n          ],\n          temperature: 0.7,\n          max_tokens: 2500,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Groq API error:', errorText);\n        return res.status(500).json({ message: 'Failed to generate staff with AI' });\n      }\n\n      const data = await response.json();\n      const generatedText = data.choices[0]?.message?.content;\n\n      if (!generatedText) {\n        return res.status(500).json({ message: 'No response from AI' });\n      }\n\n      let parsedStaff;\n      try {\n        let cleanedText = generatedText.trim();\n        if (cleanedText.startsWith('```')) {\n          cleanedText = cleanedText.replace(/^```(?:json)?\\s*\\n?/i, '').replace(/\\n?```\\s*$/i, '');\n        }\n        parsedStaff = JSON.parse(cleanedText);\n      } catch (parseError) {\n        console.error('Failed to parse AI response:', generatedText);\n        return res.status(500).json({ message: 'AI response format error' });\n      }\n\n      res.json(parsedStaff);\n    } catch (error: any) {\n      console.error('Error in AI staff generation:', error);\n      res.status(500).json({ message: error.message || 'Failed to generate staff' });\n    }\n  });\n\n  // AI-powered event generation\n  app.post(\"/api/admin/ai-generate-event\", async (req: Request, res: Response) => {\n    try {\n      const { prompt } = req.body;\n      \n      if (!prompt || typeof prompt !== 'string') {\n        return res.status(400).json({ message: 'Prompt is required' });\n      }\n\n      const groqApiKey = process.env.GROQ_API_KEY_ADMIN;\n      \n      if (!groqApiKey) {\n        return res.status(500).json({ message: 'Groq API key not configured for admin panel' });\n      }\n\n      const systemPrompt = `You are an AI assistant helping college administrators add event information.\n\nWhen given a description of one or more events or notices, extract and structure it into this JSON format:\n{\n  \"entries\": [\n    {\n      \"title\": \"Event title (clear and concise)\",\n      \"description\": \"Detailed, well-formatted event description with emojis for visual appeal\",\n      \"event_type\": \"Type (Cultural, Academic, Sports, Technical, Notice, etc.)\",\n      \"event_date\": \"Event date-time in ISO format YYYY-MM-DDTHH:MM (leave empty if not provided)\",\n      \"location\": \"Event venue/location\",\n      \"formatted_message\": \"A beautiful, professional formatted message for landing page with relevant emojis (ðŸ“… ðŸŽ‰ ðŸ† ðŸ“š etc.)\"\n    }\n  ]\n}\n\nIMPORTANT RULES:\n1. If MULTIPLE events are mentioned, create SEPARATE entries for EACH event in the \"entries\" array\n2. If ONLY ONE event is mentioned, still return an array with one entry\n3. Only fill fields if you are 90%+ confident about the information\n4. If confidence is below 90%, leave that field as empty string \"\"\n5. Always provide title and event_type if mentioned\n6. Make formatted_message attractive with emojis and proper formatting\n7. For dates: use ISO format YYYY-MM-DDTHH:MM (e.g., 2025-12-10T14:00)\n8. Make description professional and informative\n9. Use appropriate emojis: ðŸ“… for dates, ðŸ“ for location, ðŸŽ‰ for celebrations, ðŸ† for competitions, ðŸ“š for academic, etc.\n\nEXAMPLES:\nUser: \"Add Sports Day on Dec 20 and Annual Function on Dec 25\"\nResponse: {\"entries\": [{\"title\": \"Sports Day\", \"event_date\": \"2025-12-20T09:00\", ...}, {\"title\": \"Annual Function\", \"event_date\": \"2025-12-25T10:00\", ...}]}\n\nReturn ONLY the JSON object, no additional text.`;\n\n      const response = await fetch(\"https://api.groq.com/openai/v1/chat/completions\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${groqApiKey}`,\n        },\n        body: JSON.stringify({\n          model: \"llama-3.3-70b-versatile\",\n          messages: [\n            { role: \"system\", content: systemPrompt },\n            { role: \"user\", content: prompt }\n          ],\n          temperature: 0.7,\n          max_tokens: 2500,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Groq API error:', errorText);\n        return res.status(500).json({ message: 'Failed to generate event with AI' });\n      }\n\n      const data = await response.json();\n      const generatedText = data.choices[0]?.message?.content;\n\n      if (!generatedText) {\n        return res.status(500).json({ message: 'No response from AI' });\n      }\n\n      let parsedEvent;\n      try {\n        let cleanedText = generatedText.trim();\n        if (cleanedText.startsWith('```')) {\n          cleanedText = cleanedText.replace(/^```(?:json)?\\s*\\n?/i, '').replace(/\\n?```\\s*$/i, '');\n        }\n        parsedEvent = JSON.parse(cleanedText);\n      } catch (parseError) {\n        console.error('Failed to parse AI response:', generatedText);\n        return res.status(500).json({ message: 'AI response format error' });\n      }\n\n      res.json(parsedEvent);\n    } catch (error: any) {\n      console.error('Error in AI event generation:', error);\n      res.status(500).json({ message: error.message || 'Failed to generate event' });\n    }\n  });\n\n  // Smart AI endpoint - Detects UPDATE vs CREATE and handles both intelligently\n  app.post(\"/api/admin/ai-smart-generate\", async (req: Request, res: Response) => {\n    try {\n      const { prompt, sectionType } = req.body;\n      \n      if (!prompt || typeof prompt !== 'string') {\n        return res.status(400).json({ message: 'Prompt is required' });\n      }\n      \n      if (!sectionType) {\n        return res.status(400).json({ message: 'Section type is required' });\n      }\n\n      const groqApiKey = process.env.GROQ_API_KEY_ADMIN;\n      \n      if (!groqApiKey) {\n        return res.status(500).json({ message: 'Groq API key not configured for admin panel' });\n      }\n\n      // Fetch existing data based on section type\n      let existingData: any[] = [];\n      let tableName = '';\n      \n      switch(sectionType) {\n        case 'courses':\n          tableName = 'courses';\n          const coursesResult = await supabase.from('courses').select('*');\n          existingData = coursesResult.data || [];\n          break;\n        case 'staff':\n          tableName = 'staff_members';\n          const staffResult = await supabase.from('staff_members').select('*');\n          existingData = staffResult.data || [];\n          break;\n        case 'general_info':\n          tableName = 'college_settings';\n          const settingsResult = await supabase.from('college_settings').select('*');\n          existingData = settingsResult.data || [];\n          break;\n        case 'events':\n          tableName = 'events';\n          const eventsResult = await supabase.from('events').select('*');\n          existingData = eventsResult.data || [];\n          break;\n        default:\n          return res.status(400).json({ message: 'Invalid section type' });\n      }\n\n      // Smart AI prompt that detects intent and matches entries\n      const systemPrompt = `You are an intelligent AI assistant for a college management system. Your job is to analyze user requests and determine if they want to:\n1. CREATE new entry/entries\n2. UPDATE existing entry/entries\n\nEXISTING DATA IN ${sectionType.toUpperCase()} SECTION:\n${JSON.stringify(existingData, null, 2)}\n\nIMPORTANT INSTRUCTIONS:\n- Carefully analyze the user's prompt in ANY LANGUAGE (English, Hindi, Hinglish, etc.)\n- Detect UPDATE intent from keywords like: \"change\", \"update\", \"modify\", \"edit\", \"correct\", \"fix\", \"set\", \"make it\", \"badlo\", \"badal do\", \"change kro\", \"kar do\", \"theek kro\", \"sahi kro\", etc.\n- Be SMART about fuzzy matching - match on keywords, partial names, meanings, not just exact strings\n- For college_settings (general_info), the data has a 'value' JSONB field containing {title, content, category}\n- When matching, look inside the 'value' field for title/content/category\n- If updating, find the BEST MATCHING entry from existing data and return the COMPLETE entry object\n- Be intelligent about understanding what the user wants - \"library timing 9 am kar do\" means find library-related entry and update its timing/content\n\nOUTPUT FORMAT:\nReturn a JSON object with this exact structure:\n{\n  \"operation\": \"create\" | \"update\",\n  \"confidence\": <0-100 number indicating how confident you are>,\n  \"matched_entry\": <the COMPLETE existing entry object if operation is \"update\", including id, key, value fields - null otherwise>,\n  \"changes\": {\n    <field_name>: {\n      \"old\": <old value from existing data>,\n      \"new\": <new value to be set>\n    }\n  },\n  \"entries\": [<array of new entries if operation is \"create\">],\n  \"explanation\": \"<brief explanation in user's language of what you understood>\"\n}\n\nEXAMPLES:\n\nExample 1 - UPDATE (general_info with value JSONB field):\nUser: \"library timing change kar ke 9 am kar do\"\nExisting has: {\"id\": \"uuid-123\", \"key\": \"library_timings\", \"value\": {\"title\": \"Library Timings\", \"content\": \"8:00 AM to 6:00 PM\", \"category\": \"facilities\"}, \"updated_at\": \"...\"}\nResponse: {\n  \"operation\": \"update\",\n  \"confidence\": 95,\n  \"matched_entry\": {\"id\": \"uuid-123\", \"key\": \"library_timings\", \"value\": {\"title\": \"Library Timings\", \"content\": \"8:00 AM to 6:00 PM\", \"category\": \"facilities\"}, \"updated_at\": \"...\"},\n  \"changes\": {\n    \"content\": {\n      \"old\": \"8:00 AM to 6:00 PM\",\n      \"new\": \"9:00 AM to 6:00 PM\"\n    }\n  },\n  \"entries\": [],\n  \"explanation\": \"Library ka opening time 8 AM se 9 AM kar raha hu\"\n}\n\nExample 2 - UPDATE (Staff with direct fields):\nUser: \"Mr. Ajay physical department ka contact number 9876543210 kar do\"\nExisting has: {\"id\": \"uuid-456\", \"full_name\": \"Ajay Kumar\", \"designation\": \"Teacher\", \"role\": \"Physical Education\", \"phone\": \"9999999999\", ...}\nResponse: {\n  \"operation\": \"update\",\n  \"confidence\": 90,\n  \"matched_entry\": {\"id\": \"uuid-456\", \"full_name\": \"Ajay Kumar\", \"designation\": \"Teacher\", \"role\": \"Physical Education\", \"phone\": \"9999999999\", ...},\n  \"changes\": {\n    \"phone\": {\n      \"old\": \"9999999999\",\n      \"new\": \"9876543210\"\n    }\n  },\n  \"entries\": [],\n  \"explanation\": \"Ajay Kumar ka phone number update kar raha hu\"\n}\n\nExample 3 - CREATE:\nUser: \"Add canteen timings: 8 AM to 8 PM\"\nResponse: {\n  \"operation\": \"create\",\n  \"confidence\": 100,\n  \"matched_entry\": null,\n  \"changes\": {},\n  \"entries\": [{\"title\": \"Canteen Timings\", \"content\": \"8:00 AM to 8:00 PM\", \"category\": \"facilities\"}],\n  \"explanation\": \"Naya canteen timing entry add kar raha hu\"\n}\n\nExample 4 - UPDATE (Smart Understanding):\nUser: \"library 2 pm close hota h usko 6 pm kro\"\nExisting has: {\"id\": \"uuid-789\", \"key\": \"lib_hours\", \"value\": {\"title\": \"Library Hours\", \"content\": \"Monday to Friday: 9 AM to 2 PM. Weekends closed.\", \"category\": \"timings\"}, \"updated_at\": \"...\"}\nResponse: {\n  \"operation\": \"update\",\n  \"confidence\": 88,\n  \"matched_entry\": {\"id\": \"uuid-789\", \"key\": \"lib_hours\", \"value\": {\"title\": \"Library Hours\", \"content\": \"Monday to Friday: 9 AM to 2 PM. Weekends closed.\", \"category\": \"timings\"}, \"updated_at\": \"...\"},\n  \"changes\": {\n    \"content\": {\n      \"old\": \"Monday to Friday: 9 AM to 2 PM. Weekends closed.\",\n      \"new\": \"Monday to Friday: 9 AM to 6 PM. Weekends closed.\"\n    }\n  },\n  \"entries\": [],\n  \"explanation\": \"Library closing time ko 2 PM se 6 PM update kar raha hu\"\n}\n\nCRITICAL RULES:\n- For UPDATE: Return the COMPLETE matched_entry object exactly as it exists in the database (with all fields: id, key, value, etc.)\n- For UPDATE in college_settings: The changes should refer to fields inside the \"value\" object (title, content, category)\n- For UPDATE: changes should only include fields that are being modified\n- For CREATE: return properly formatted entries array\n- Always include confidence score (0-100)\n- Be VERY smart about fuzzy matching: \"library\" matches \"Library Timings\", \"Library Hours\", \"lib\", etc.\n- Understand the intent, not just keywords: \"9 am kar do\", \"set to 9 am\", \"change to 9\", \"9 baje kro\" all mean the same\n- Return ONLY valid JSON, no extra text or markdown`;\n\n      const response = await fetch(\"https://api.groq.com/openai/v1/chat/completions\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${groqApiKey}`,\n        },\n        body: JSON.stringify({\n          model: \"llama-3.3-70b-versatile\",\n          messages: [\n            { role: \"system\", content: systemPrompt },\n            { role: \"user\", content: prompt }\n          ],\n          temperature: 0.3, // Lower temperature for more deterministic results\n          max_tokens: 3000,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Groq API error:', errorText);\n        return res.status(500).json({ message: 'Failed to process with AI' });\n      }\n\n      const data = await response.json();\n      const generatedText = data.choices[0]?.message?.content;\n\n      if (!generatedText) {\n        return res.status(500).json({ message: 'No response from AI' });\n      }\n\n      let parsedResponse;\n      try {\n        let cleanedText = generatedText.trim();\n        if (cleanedText.startsWith('```')) {\n          cleanedText = cleanedText.replace(/^```(?:json)?\\s*\\n?/i, '').replace(/\\n?```\\s*$/i, '');\n        }\n        parsedResponse = JSON.parse(cleanedText);\n        \n        // Add section type to response\n        parsedResponse.sectionType = sectionType;\n        \n        console.log('Smart AI Response:', JSON.stringify(parsedResponse, null, 2));\n      } catch (parseError) {\n        console.error('Failed to parse AI response:', generatedText);\n        return res.status(500).json({ message: 'AI response format error' });\n      }\n\n      res.json(parsedResponse);\n    } catch (error: any) {\n      console.error('Error in smart AI generation:', error);\n      res.status(500).json({ message: error.message || 'Failed to process request' });\n    }\n  });\n\n  // Helper function to parse time-based queries with precision\n  function parseTimeQuery(message: string, timeframe: string): { startDate: Date | null; endDate: Date | null; description: string; isSingleUpdate: boolean } {\n    const now = new Date();\n    const msgLower = message.toLowerCase();\n    \n    // Check for \"last update\" or \"last time\" (singular) = most recent single update\n    if (msgLower.match(/\\b(last update|last time|latest update|most recent|sabse latest)\\b/) && \n        !msgLower.match(/\\b(updates|last \\d+|in last|past \\d+)\\b/)) {\n      return {\n        startDate: null,\n        endDate: now,\n        description: 'most recent single update',\n        isSingleUpdate: true\n      };\n    }\n    \n    // Yesterday at specific time (e.g., \"yesterday at 2pm\", \"kal 4 baje\")\n    const yesterdayTimeMatch = msgLower.match(/\\b(yesterday|kal)\\s+(?:at\\s+)?(\\d+)\\s*(am|pm|baje)?\\b/i);\n    if (yesterdayTimeMatch) {\n      const yesterday = new Date(now);\n      yesterday.setDate(yesterday.getDate() - 1);\n      const hour = parseInt(yesterdayTimeMatch[2]);\n      const isPM = yesterdayTimeMatch[3]?.toLowerCase().includes('pm') || yesterdayTimeMatch[3]?.toLowerCase().includes('baje');\n      yesterday.setHours(isPM && hour !== 12 ? hour + 12 : hour, 0, 0, 0);\n      const endTime = new Date(yesterday);\n      endTime.setHours(yesterday.getHours() + 1);\n      return {\n        startDate: yesterday,\n        endDate: endTime,\n        description: `yesterday at ${hour}${yesterdayTimeMatch[3] || ''}`,\n        isSingleUpdate: false\n      };\n    }\n    \n    // Yesterday (full day)\n    if (msgLower.match(/\\b(yesterday|kal)\\b/) && !msgLower.match(/\\bday before yesterday|parso\\b/)) {\n      const yesterday = new Date(now);\n      yesterday.setDate(yesterday.getDate() - 1);\n      yesterday.setHours(0, 0, 0, 0);\n      const endYesterday = new Date(yesterday);\n      endYesterday.setHours(23, 59, 59, 999);\n      return {\n        startDate: yesterday,\n        endDate: endYesterday,\n        description: 'yesterday (full day)',\n        isSingleUpdate: false\n      };\n    }\n    \n    // Day before yesterday / parso\n    if (msgLower.match(/\\b(day before yesterday|parso|2 days ago)\\b/)) {\n      const dayBefore = new Date(now);\n      dayBefore.setDate(dayBefore.getDate() - 2);\n      dayBefore.setHours(0, 0, 0, 0);\n      const endDayBefore = new Date(dayBefore);\n      endDayBefore.setHours(23, 59, 59, 999);\n      return {\n        startDate: dayBefore,\n        endDate: endDayBefore,\n        description: 'day before yesterday',\n        isSingleUpdate: false\n      };\n    }\n    \n    // Last X hours\n    const hoursMatch = msgLower.match(/\\b(?:last|past)\\s+(\\d+)\\s+(?:hours?|ghante)\\b/);\n    if (hoursMatch) {\n      const hours = parseInt(hoursMatch[1]);\n      const startDate = new Date(now.getTime() - hours * 60 * 60 * 1000);\n      return {\n        startDate,\n        endDate: now,\n        description: `last ${hours} hours`,\n        isSingleUpdate: false\n      };\n    }\n    \n    // Last X days\n    const daysMatch = msgLower.match(/\\b(?:last|past)\\s+(\\d+)\\s+(?:days?|din)\\b/);\n    if (daysMatch) {\n      const days = parseInt(daysMatch[1]);\n      const startDate = new Date(now);\n      startDate.setDate(startDate.getDate() - days);\n      startDate.setHours(0, 0, 0, 0);\n      return {\n        startDate,\n        endDate: now,\n        description: `last ${days} days`,\n        isSingleUpdate: false\n      };\n    }\n    \n    // Last X months\n    const monthsMatch = msgLower.match(/\\b(?:last|past)\\s+(\\d+)\\s+(?:months?|mahine)\\b/);\n    if (monthsMatch) {\n      const months = parseInt(monthsMatch[1]);\n      const startDate = new Date(now);\n      startDate.setMonth(startDate.getMonth() - months);\n      startDate.setHours(0, 0, 0, 0);\n      return {\n        startDate,\n        endDate: now,\n        description: `last ${months} months`,\n        isSingleUpdate: false\n      };\n    }\n    \n    // Last week\n    if (msgLower.match(/\\b(?:last|past)\\s+week\\b/)) {\n      const startDate = new Date(now);\n      startDate.setDate(startDate.getDate() - 7);\n      startDate.setHours(0, 0, 0, 0);\n      return {\n        startDate,\n        endDate: now,\n        description: 'last week',\n        isSingleUpdate: false\n      };\n    }\n    \n    // Last month\n    if (msgLower.match(/\\b(?:last|past)\\s+month\\b/)) {\n      const startDate = new Date(now);\n      startDate.setMonth(startDate.getMonth() - 1);\n      startDate.setHours(0, 0, 0, 0);\n      return {\n        startDate,\n        endDate: now,\n        description: 'last month',\n        isSingleUpdate: false\n      };\n    }\n    \n    // Default: \"last updates\" without specific time = last 24 hours\n    if (msgLower.match(/\\b(updates|recent|latest changes)\\b/)) {\n      const startDate = new Date(now.getTime() - 24 * 60 * 60 * 1000);\n      return {\n        startDate,\n        endDate: now,\n        description: 'last 24 hours',\n        isSingleUpdate: false\n      };\n    }\n    \n    // Fallback based on timeframe from classification\n    const timeframeNum = parseInt(timeframe) || 10;\n    const startDate = new Date(now);\n    startDate.setDate(startDate.getDate() - timeframeNum);\n    startDate.setHours(0, 0, 0, 0);\n    return {\n      startDate,\n      endDate: now,\n      description: `last ${timeframeNum} days`,\n      isSingleUpdate: false\n    };\n  }\n\n  // Data Query Assistant - Helps locate and track college data\n  app.post(\"/api/admin/ai-control\", async (req: Request, res: Response) => {\n    try {\n      const { message, conversationHistory = [] } = req.body;\n\n      if (!message || typeof message !== 'string') {\n        return res.status(400).json({ message: 'Message is required' });\n      }\n\n      const groqApiKey = process.env.GROQ_API_KEY_ADMIN;\n\n      if (!groqApiKey) {\n        return res.status(500).json({ message: 'Groq API key not configured' });\n      }\n\n      // STEP 1: Intent Classification\n      console.log('[Data Query] Step 1: Classifying intent...');\n      const classificationPrompt = `You are a data query assistant for RKSD College management system. Classify the user's query intent.\n\nSYSTEM STRUCTURE:\n- STAFF section: Staff member information (name, designation, role, department)\n- COURSES section: Course information (name, code, type, fees, seats, duration)\n- EVENTS section: Events and activities (title, description, date, type, location)\n- GENERAL INFO section: College information (principal, facilities, library timings, rules, contact info)\n- DEPARTMENTS section: Department information (name, description, head information)\n\nClassify the user's request into one of these intents:\n1. LOCATE_DATA: Find where specific data is stored (e.g., \"where is Mr. Ajay?\", \"where are library timings?\")\n2. QUERY_SPECIFIC: Ask for specific information (e.g., \"what is principal name?\", \"show staff details\", \"total departments\")\n3. QUERY_UPDATES: Ask about recent updates (e.g., \"what was last updated?\", \"updates in last 10 days\", \"yesterday updates\")\n4. QUERY_MISSING: Ask about missing or incomplete data (e.g., \"departments missing head info\", \"which facilities need updating\")\n5. QUERY_IMPROVEMENTS: Ask for improvement suggestions (e.g., \"what can be improved?\", \"check for issues\")\n6. GENERAL_HELP: General greetings or help requests\n\nResponse Format:\n{\n  \"intent\": \"LOCATE_DATA|QUERY_SPECIFIC|QUERY_UPDATES|QUERY_MISSING|QUERY_IMPROVEMENTS|GENERAL_HELP\",\n  \"section\": \"courses|staff|events|general_info|departments|all|none\",\n  \"searchTerm\": \"specific name or item being searched for\",\n  \"timeframe\": \"for update queries, detected time period\",\n  \"specificQuery\": \"what specifically is being asked (e.g., 'total count', 'missing head', 'facilities updated')\"\n}\n\nReturn ONLY the JSON object.`;\n\n      const classificationMessages = [\n        { role: \"system\", content: classificationPrompt },\n        { role: \"user\", content: message }\n      ];\n\n      const classificationResponse = await fetch(\"https://api.groq.com/openai/v1/chat/completions\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${groqApiKey}`,\n        },\n        body: JSON.stringify({\n          model: \"llama-3.3-70b-versatile\",\n          messages: classificationMessages,\n          temperature: 0.2,\n          max_tokens: 500,\n        }),\n      });\n\n      if (!classificationResponse.ok) {\n        throw new Error('Intent classification failed');\n      }\n\n      const classificationData = await classificationResponse.json();\n      let classification;\n      try {\n        let cleanedText = classificationData.choices[0]?.message?.content.trim();\n        if (cleanedText.startsWith('```')) {\n          cleanedText = cleanedText.replace(/^```(?:json)?\\s*\\n?/i, '').replace(/\\n?```\\s*$/i, '');\n        }\n        classification = JSON.parse(cleanedText);\n      } catch (e) {\n        throw new Error('Failed to parse classification');\n      }\n\n      console.log('[Data Query] Classification:', classification);\n\n      // STEP 2: Fetch REAL data from database based on intent\n      let contextData = '';\n      let dataWithPositions: any = null;\n      let realCounts: any = null;\n      let deterministicResponse: string | null = null;\n\n      if (classification.intent === 'LOCATE_DATA') {\n        // Fetch data with row numbers to help locate specific items\n        const searchTerm = classification.searchTerm?.toLowerCase() || '';\n        \n        if (classification.section === 'staff' || classification.section === 'all') {\n          const { data } = await supabase\n            .from('staff_members')\n            .select('id, full_name, designation, role, created_at, updated_at')\n            .order('created_at', { ascending: true });\n          \n          if (data) {\n            dataWithPositions = { staff: data.map((item, idx) => ({ ...item, position: idx + 1 })) };\n          }\n        } else if (classification.section === 'general_info' || classification.section === 'all') {\n          const { data } = await supabase\n            .from('college_settings')\n            .select('id, key, value, updated_at')\n            .order('key', { ascending: true });\n          \n          if (data) {\n            if (!dataWithPositions) dataWithPositions = {};\n            dataWithPositions.general_info = data.map((item, idx) => ({ ...item, position: idx + 1 }));\n          }\n        } else if (classification.section === 'courses' || classification.section === 'all') {\n          const { data } = await supabase\n            .from('courses')\n            .select('id, course_name, course_code, course_type, created_at, updated_at')\n            .order('created_at', { ascending: true });\n          \n          if (data) {\n            if (!dataWithPositions) dataWithPositions = {};\n            dataWithPositions.courses = data.map((item, idx) => ({ ...item, position: idx + 1 }));\n          }\n        } else if (classification.section === 'events' || classification.section === 'all') {\n          const { data } = await supabase\n            .from('events')\n            .select('id, title, event_type, event_date, created_at, updated_at')\n            .order('created_at', { ascending: true });\n          \n          if (data) {\n            if (!dataWithPositions) dataWithPositions = {};\n            dataWithPositions.events = data.map((item, idx) => ({ ...item, position: idx + 1 }));\n          }\n        }\n        \n        contextData = JSON.stringify(dataWithPositions, null, 2);\n        \n      } else if (classification.intent === 'QUERY_SPECIFIC') {\n        // Fetch specific information - ALWAYS use real database counts\n        if (!realCounts) realCounts = {};\n        \n        // Check if this is a COUNT query with comprehensive Hindi/English/Urdu variants\n        // Includes: Latin transliterations, Devanagari (à¤•à¤¿à¤¤à¤¨à¥‡/à¤•à¤¿à¤¤à¤¨à¥€/à¤•à¥à¤²), Urdu (Ú©ØªÙ†Û’/Ú©ØªÙ†ÛŒ/Ú©Ù„)\n        const isCountQuery = message.toLowerCase().match(/\\b(total|kitne|kitna|kitni|kitnay|kul|how many|count|number of|quantity)\\b|à¤•à¤¿à¤¤à¤¨à¥‡|à¤•à¤¿à¤¤à¤¨à¥€|à¤•à¤¿à¤¤à¤¨à¤¾|à¤•à¥à¤²|Ú©ØªÙ†Û’|Ú©ØªÙ†ÛŒ|Ú©ØªÙ†Ø§|Ú©Ù„/);\n        \n        if (classification.section === 'staff' || classification.section === 'all') {\n          const { data, count } = await supabase.from('staff_members').select('full_name, designation, role, department', { count: 'exact' });\n          realCounts.staff_count = count || 0;\n          contextData += JSON.stringify({ staff: data, total_staff: count || 0 }, null, 2);\n        }\n        if (classification.section === 'general_info' || classification.section === 'all') {\n          const { data } = await supabase.from('college_settings').select('key, value');\n          contextData += JSON.stringify({ general_info: data }, null, 2);\n        }\n        if (classification.section === 'courses' || classification.section === 'all') {\n          const { data, count } = await supabase.from('courses').select('course_name, course_code, course_type, fees_per_year', { count: 'exact' });\n          realCounts.courses_count = count || 0;\n          contextData += JSON.stringify({ courses: data, total_courses: count || 0 }, null, 2);\n        }\n        if (classification.section === 'events' || classification.section === 'all') {\n          const { data, count } = await supabase.from('events').select('title, event_type, event_date, location', { count: 'exact' });\n          realCounts.events_count = count || 0;\n          contextData += JSON.stringify({ events: data, total_events: count || 0 }, null, 2);\n        }\n        if (classification.section === 'departments' || classification.section === 'all') {\n          const { data, count } = await supabase.from('departments').select('id, name, description, head_name, head_email, head_phone', { count: 'exact' });\n          realCounts.departments_count = count || 0;\n          contextData += JSON.stringify({ departments: data, total_departments: count || 0 }, null, 2);\n        }\n        \n        // DETERMINISTIC COUNT RESPONSE: Build response directly from database counts\n        // Works for specific section OR section=\"all\" (infer from query keywords)\n        if (isCountQuery) {\n          // Map query keywords to specific sections (covers Latin, Devanagari, Urdu)\n          const msgLower = message.toLowerCase();\n          const inferredSection = \n            msgLower.match(/department|vibhag|à¤µà¤¿à¤­à¤¾à¤—|à¤µà¤¿à¤­à¤¾à¤—à¥‹à¤‚|Ø´Ø¹Ø¨Û|Ø´Ø¹Ø¨Û’/) ? 'departments' :\n            msgLower.match(/staff|teacher|faculty|shikshak|adhyapak|à¤¶à¤¿à¤•à¥à¤·à¤•|à¤…à¤§à¥à¤¯à¤¾à¤ªà¤•|à¤•à¤°à¥à¤®à¤šà¤¾à¤°à¥€|Ø§Ø³Ø§ØªØ°Û|Ø§Ø³ØªØ§Ø¯/) ? 'staff' :\n            msgLower.match(/course|pathyakram|à¤ªà¤¾à¤ à¥à¤¯à¤•à¥à¤°à¤®|à¤•à¥‹à¤°à¥à¤¸|Ú©ÙˆØ±Ø³|Ú©ÙˆØ±Ø³Ø²/) ? 'courses' :\n            msgLower.match(/event|karyakram|à¤•à¤¾à¤°à¥à¤¯à¤•à¥à¤°à¤®|à¤‡à¤µà¥‡à¤‚à¤Ÿ|Ø§ÛŒÙˆÙ†Ù¹|ØªÙ‚Ø±ÛŒØ¨/) ? 'events' :\n            classification.section !== 'all' ? classification.section : null;\n          \n          if (inferredSection === 'departments' && realCounts.departments_count !== undefined) {\n            deterministicResponse = `âœ… à¤†à¤ªà¤•à¥‡ system à¤®à¥‡à¤‚ currently **${realCounts.departments_count} department${realCounts.departments_count !== 1 ? 's' : ''}** ${realCounts.departments_count === 1 ? 'à¤¹à¥ˆ' : 'à¤¹à¥ˆà¤‚'} (DEPARTMENTS section à¤®à¥‡à¤‚)à¥¤`;\n          } else if (inferredSection === 'staff' && realCounts.staff_count !== undefined) {\n            deterministicResponse = `âœ… à¤†à¤ªà¤•à¥‡ system à¤®à¥‡à¤‚ currently **${realCounts.staff_count} staff member${realCounts.staff_count !== 1 ? 's' : ''}** ${realCounts.staff_count === 1 ? 'à¤¹à¥ˆ' : 'à¤¹à¥ˆà¤‚'} (STAFF section à¤®à¥‡à¤‚)à¥¤`;\n          } else if (inferredSection === 'courses' && realCounts.courses_count !== undefined) {\n            deterministicResponse = `âœ… à¤†à¤ªà¤•à¥‡ system à¤®à¥‡à¤‚ currently **${realCounts.courses_count} course${realCounts.courses_count !== 1 ? 's' : ''}** ${realCounts.courses_count === 1 ? 'à¤¹à¥ˆ' : 'à¤¹à¥ˆà¤‚'} (COURSES section à¤®à¥‡à¤‚)à¥¤`;\n          } else if (inferredSection === 'events' && realCounts.events_count !== undefined) {\n            deterministicResponse = `âœ… à¤†à¤ªà¤•à¥‡ system à¤®à¥‡à¤‚ currently **${realCounts.events_count} event${realCounts.events_count !== 1 ? 's' : ''}** ${realCounts.events_count === 1 ? 'à¤¹à¥ˆ' : 'à¤¹à¥ˆà¤‚'} (EVENTS section à¤®à¥‡à¤‚)à¥¤`;\n          } else if (classification.section === 'all' || !inferredSection) {\n            // User asked for counts but didn't specify which - show all counts\n            const parts = [];\n            if (realCounts.departments_count !== undefined) {\n              parts.push(`ðŸ“š **${realCounts.departments_count} department${realCounts.departments_count !== 1 ? 's' : ''}**`);\n            }\n            if (realCounts.staff_count !== undefined) {\n              parts.push(`ðŸ‘¥ **${realCounts.staff_count} staff member${realCounts.staff_count !== 1 ? 's' : ''}**`);\n            }\n            if (realCounts.courses_count !== undefined) {\n              parts.push(`ðŸ“– **${realCounts.courses_count} course${realCounts.courses_count !== 1 ? 's' : ''}**`);\n            }\n            if (realCounts.events_count !== undefined) {\n              parts.push(`ðŸŽ‰ **${realCounts.events_count} event${realCounts.events_count !== 1 ? 's' : ''}**`);\n            }\n            if (parts.length > 0) {\n              deterministicResponse = `âœ… à¤†à¤ªà¤•à¥‡ system à¤®à¥‡à¤‚ currently:\\n\\n${parts.join('\\n')}`;\n            }\n          }\n          \n          if (deterministicResponse) {\n            console.log('[Data Query] DETERMINISTIC COUNT RESPONSE (bypassing LLM):', deterministicResponse);\n          }\n        }\n        \n      } else if (classification.intent === 'QUERY_UPDATES') {\n        // Use precise time parsing for updates\n        const timeInfo = parseTimeQuery(message, classification.timeframe || '');\n        console.log('[Data Query] Time parsing result:', timeInfo);\n        \n        if (timeInfo.isSingleUpdate) {\n          // Get THE most recent single update across all tables\n          const [staffLatest, courseLatest, eventLatest, deptLatest, generalLatest] = await Promise.all([\n            supabase.from('staff_members').select('full_name, updated_at, created_at').order('updated_at', { ascending: false }).limit(1),\n            supabase.from('courses').select('course_name, updated_at, created_at').order('updated_at', { ascending: false }).limit(1),\n            supabase.from('events').select('title, updated_at, created_at').order('updated_at', { ascending: false }).limit(1),\n            supabase.from('departments').select('name, updated_at, created_at').order('updated_at', { ascending: false }).limit(1),\n            supabase.from('college_settings').select('key, value, updated_at').order('updated_at', { ascending: false }).limit(1)\n          ]);\n          \n          const allUpdates = [\n            ...(staffLatest.data?.map(d => ({ ...d, section: 'STAFF', item_name: d.full_name })) || []),\n            ...(courseLatest.data?.map(d => ({ ...d, section: 'COURSES', item_name: d.course_name })) || []),\n            ...(eventLatest.data?.map(d => ({ ...d, section: 'EVENTS', item_name: d.title })) || []),\n            ...(deptLatest.data?.map(d => ({ ...d, section: 'DEPARTMENTS', item_name: d.name })) || []),\n            ...(generalLatest.data?.map(d => ({ ...d, section: 'GENERAL INFO', item_name: d.key })) || [])\n          ].sort((a, b) => new Date(b.updated_at).getTime() - new Date(a.updated_at).getTime());\n          \n          const mostRecent = allUpdates[0];\n          contextData = JSON.stringify({\n            query_type: 'single_most_recent_update',\n            most_recent_update: mostRecent || null\n          }, null, 2);\n          \n        } else if (timeInfo.startDate) {\n          // Get updates within specific time range\n          const startISO = timeInfo.startDate.toISOString();\n          const endISO = timeInfo.endDate?.toISOString() || new Date().toISOString();\n          \n          const [staffUpdates, courseUpdates, eventUpdates, deptUpdates, generalUpdates] = await Promise.all([\n            supabase.from('staff_members').select('full_name, updated_at, created_at').gte('updated_at', startISO).lte('updated_at', endISO).order('updated_at', { ascending: false }),\n            supabase.from('courses').select('course_name, updated_at, created_at').gte('updated_at', startISO).lte('updated_at', endISO).order('updated_at', { ascending: false }),\n            supabase.from('events').select('title, updated_at, created_at').gte('updated_at', startISO).lte('updated_at', endISO).order('updated_at', { ascending: false }),\n            supabase.from('departments').select('name, updated_at, created_at').gte('updated_at', startISO).lte('updated_at', endISO).order('updated_at', { ascending: false }),\n            supabase.from('college_settings').select('key, value, updated_at').gte('updated_at', startISO).lte('updated_at', endISO).order('updated_at', { ascending: false })\n          ]);\n          \n          contextData = JSON.stringify({\n            query_type: 'time_range_updates',\n            timeframe_description: timeInfo.description,\n            start_date: startISO,\n            end_date: endISO,\n            staff_updates: staffUpdates.data || [],\n            course_updates: courseUpdates.data || [],\n            event_updates: eventUpdates.data || [],\n            department_updates: deptUpdates.data || [],\n            general_info_updates: generalUpdates.data || []\n          }, null, 2);\n        }\n        \n      } else if (classification.intent === 'QUERY_MISSING') {\n        // Check for missing or incomplete data\n        if (classification.section === 'departments' || classification.section === 'all') {\n          const { data: depts } = await supabase.from('departments').select('id, name, description, head_name, head_email, head_phone');\n          const missingHead = depts?.filter(d => !d.head_name || !d.head_email) || [];\n          contextData += JSON.stringify({ departments_missing_head: missingHead }, null, 2);\n        }\n        if (classification.section === 'staff' || classification.section === 'all') {\n          const { data: staff } = await supabase.from('staff_members').select('id, full_name, designation, department');\n          const missingDept = staff?.filter(s => !s.department) || [];\n          contextData += JSON.stringify({ staff_missing_department: missingDept }, null, 2);\n        }\n        if (classification.section === 'general_info' || classification.section === 'all') {\n          const { data: settings } = await supabase.from('college_settings').select('key, value');\n          const emptySettings = settings?.filter(s => !s.value || s.value.trim() === '') || [];\n          contextData += JSON.stringify({ general_info_empty_values: emptySettings }, null, 2);\n        }\n        \n      } else if (classification.intent === 'QUERY_IMPROVEMENTS') {\n        // Analyze all data for potential improvements\n        const [depts, staff, courses, events, settings] = await Promise.all([\n          supabase.from('departments').select('*', { count: 'exact' }),\n          supabase.from('staff_members').select('*', { count: 'exact' }),\n          supabase.from('courses').select('*', { count: 'exact' }),\n          supabase.from('events').select('*', { count: 'exact' }),\n          supabase.from('college_settings').select('*')\n        ]);\n        \n        const issues = [];\n        \n        // Check for departments missing head info\n        const deptsWithoutHead = depts.data?.filter(d => !d.head_name || !d.head_email) || [];\n        if (deptsWithoutHead.length > 0) {\n          issues.push(`${deptsWithoutHead.length} departments missing head information`);\n        }\n        \n        // Check for staff without department\n        const staffWithoutDept = staff.data?.filter(s => !s.department) || [];\n        if (staffWithoutDept.length > 0) {\n          issues.push(`${staffWithoutDept.length} staff members without assigned department`);\n        }\n        \n        // Check for empty settings\n        const emptySettings = settings.data?.filter(s => !s.value || s.value.trim() === '') || [];\n        if (emptySettings.length > 0) {\n          issues.push(`${emptySettings.length} general info fields are empty`);\n        }\n        \n        // Check for old events that should be archived\n        const now = new Date();\n        const oldEvents = events.data?.filter(e => new Date(e.event_date) < now) || [];\n        if (oldEvents.length > 5) {\n          issues.push(`${oldEvents.length} past events could be archived`);\n        }\n        \n        contextData = JSON.stringify({\n          total_departments: depts.count || 0,\n          total_staff: staff.count || 0,\n          total_courses: courses.count || 0,\n          total_events: events.count || 0,\n          identified_issues: issues,\n          departments_without_head: deptsWithoutHead.map(d => d.name),\n          staff_without_department: staffWithoutDept.map(s => s.full_name)\n        }, null, 2);\n      }\n\n      // STEP 3: Generate response - Use deterministic response if available, otherwise use LLM\n      if (deterministicResponse) {\n        // Short-circuit: Return deterministic response directly without LLM\n        console.log('[Data Query] Using DETERMINISTIC response (bypassing LLM)');\n        return res.json({\n          success: true,\n          response: deterministicResponse,\n          intent: classification.intent,\n          dataChanged: false,\n          requiresConfirmation: false\n        });\n      }\n      \n      const responsePrompt = `You are a Data Query Assistant for RKSD College's system. You help users locate and understand their college data.\n\n**CRITICAL RULE: ONLY use data from the AVAILABLE DATA section below. NEVER make up numbers, counts, or information. If data is not available, say so clearly.**\n\nSYSTEM STRUCTURE:\n- STAFF section: Staff member information (name, designation, role, department)\n- COURSES section: Course information (name, code, type, fees, seats, duration)\n- EVENTS section: Events and activities (title, description, date, type, location)\n- GENERAL INFO section: College information stored in key-value pairs (principal, facilities, library_timings, contact_info, etc.)\n- DEPARTMENTS section: Department information (name, description, head information)\n\nAVAILABLE DATA (THIS IS THE ONLY REAL DATA - USE ONLY THIS):\n${contextData}\n\nUser Request: ${message}\nIntent: ${classification.intent}\nSection: ${classification.section}\nSearch Term: ${classification.searchTerm || 'N/A'}\n\nResponse Format:\n{\n  \"intent\": \"${classification.intent}\",\n  \"response\": \"Human-friendly response in Hindi/English mix\",\n  \"foundLocation\": \"where the data is located (if applicable)\",\n  \"position\": \"row number or position (if applicable)\"\n}\n\nGUIDELINES FOR RESPONSES:\n\n1. LOCATE_DATA: Help find where specific data is stored\n   - Example: \"Mr. Ajay from Physical department STAFF section à¤®à¥‡à¤‚ position #103 à¤ªà¤° à¤¹à¥ˆ\"\n   - Example: \"Library timings GENERAL INFO section à¤®à¥‡à¤‚ 'library_timings' key à¤•à¥‡ under position #3 à¤ªà¤° stored à¤¹à¥ˆ\"\n   - Be specific about section name and position number\n\n2. QUERY_SPECIFIC: Provide ONLY the exact information from AVAILABLE DATA\n   - For counts (total departments, total courses, etc.): Use ONLY the \"total_departments\", \"total_courses\" values from the data\n   - Example: If data shows \"total_departments: 1\", say \"à¤†à¤ªà¤•à¥‡ system à¤®à¥‡à¤‚ currently 1 department à¤¹à¥ˆ\"\n   - NEVER guess or estimate - if count is 0, say 0, if data shows 1, say 1\n   - Example: \"Principal à¤•à¤¾ name [exact name from data] à¤¹à¥ˆ à¤œà¥‹ GENERAL INFO section à¤®à¥‡à¤‚ stored à¤¹à¥ˆ\"\n\n3. QUERY_UPDATES: Show ONLY actual updates from the data\n   - For \"single_most_recent_update\": Show the ONE most recent update only\n   - For \"time_range_updates\": Show all updates in that exact timeframe\n   - If NO updates found in timeframe, clearly say \"à¤•à¥‹à¤ˆ update à¤¨à¤¹à¥€à¤‚ à¤¹à¥à¤† à¤¥à¤¾\"\n   - Example: \"Last 24 hours à¤®à¥‡à¤‚: [list exact updates with timestamps]\"\n   - Example: \"Yesterday at 2pm à¤•à¥‹à¤ˆ update à¤¨à¤¹à¥€à¤‚ à¤¹à¥à¤† à¤¥à¤¾\"\n\n4. QUERY_MISSING: Report ONLY actual missing data from AVAILABLE DATA\n   - Example: \"à¤¯à¥‡ departments missing head info: [exact list from data]\"\n   - If nothing missing, say \"à¤¸à¤¬ complete à¤¹à¥ˆ, à¤•à¥‹à¤ˆ missing data à¤¨à¤¹à¥€à¤‚ à¤¹à¥ˆ\"\n\n5. QUERY_IMPROVEMENTS: Suggest improvements based on identified_issues from data\n   - Only mention issues that are in the \"identified_issues\" array\n   - Give specific counts and details from the data\n   - Example: \"à¤†à¤ª à¤‡à¤¨ à¤šà¥€à¤œà¥‹à¤‚ à¤•à¥‹ improve à¤•à¤° à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚: [list from identified_issues]\"\n\n6. GENERAL_HELP: Provide helpful information about the system\n   - Explain what you can help with\n   - Give examples of questions they can ask\n\n**IMPORTANT:**\n- Use emojis to make responses friendly\n- Mix Hindi and English naturally (Hinglish)\n- NEVER say approximate numbers - use exact counts from data\n- If data shows 0 or empty array, say \"à¤¨à¤¹à¥€à¤‚ à¤¹à¥ˆ\" or \"à¤•à¥‹à¤ˆ à¤¨à¤¹à¥€à¤‚\" \n- Always mention the exact section name when locating data\n\nReturn ONLY the JSON object.`;\n\n      const responseMessages = [\n        { role: \"system\", content: responsePrompt },\n        ...conversationHistory.slice(-4).map((msg: any) => ({\n          role: msg.role,\n          content: msg.content\n        })),\n        { role: \"user\", content: message }\n      ];\n\n      const finalResponse = await fetch(\"https://api.groq.com/openai/v1/chat/completions\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${groqApiKey}`,\n        },\n        body: JSON.stringify({\n          model: \"llama-3.3-70b-versatile\",\n          messages: responseMessages,\n          temperature: 0.3,\n          max_tokens: 2000,\n        }),\n      });\n\n      if (!finalResponse.ok) {\n        throw new Error('AI response generation failed');\n      }\n\n      const responseData = await finalResponse.json();\n      let parsedResponse;\n      try {\n        let cleanedText = responseData.choices[0]?.message?.content.trim();\n        if (cleanedText.startsWith('```')) {\n          cleanedText = cleanedText.replace(/^```(?:json)?\\s*\\n?/i, '').replace(/\\n?```\\s*$/i, '');\n        }\n        parsedResponse = JSON.parse(cleanedText);\n      } catch (parseError) {\n        console.error('Failed to parse AI response');\n        // Safe fallback - no data leakage\n        return res.json({\n          success: true,\n          response: 'I apologize, but I had trouble processing that request. Please try rephrasing or ask in a different way.',\n          actionType: \"query\",\n          dataChanged: false\n        });\n      }\n\n      // SECURITY: Validate response doesn't echo sensitive contextData\n      const responseText = JSON.stringify(parsedResponse.response || '');\n      if (contextData && contextData.length > 100) {\n        // Check if response contains large chunks of raw contextData (potential echo attack)\n        const contextSample = contextData.substring(0, 200);\n        if (responseText.includes(contextSample)) {\n          console.warn('[AI Control] SECURITY: Detected potential data echo in response');\n          return res.json({\n            success: true,\n            response: 'I found the information you requested. How would you like me to help you with it?',\n            actionType: \"query\",\n            dataChanged: false\n          });\n        }\n      }\n\n      console.log('[Data Query] Response generated and validated');\n\n      res.json({\n        success: true,\n        response: parsedResponse.response,\n        intent: parsedResponse.intent,\n        foundLocation: parsedResponse.foundLocation,\n        position: parsedResponse.position,\n        dataChanged: false,\n        requiresConfirmation: false\n      });\n\n    } catch (error: any) {\n      console.error('Error in data query:', error);\n      res.status(500).json({ \n        success: false,\n        response: `Sorry, I encountered an error: ${error.message}. Please try rephrasing your request.`,\n        message: error.message || 'Failed to process query' \n      });\n    }\n  });\n\n  // ===== NEW GENERAL INFORMATION ROUTES =====\n\n  // Get all general info data (for main dashboard)\n  app.get(\"/api/admin/general-info-all\", async (req: Request, res: Response) => {\n    try {\n      const { data: settings, error } = await supabase\n        .from('college_settings')\n        .select('*');\n\n      if (error) throw error;\n\n      // Organize data by categories\n      const result: any = {\n        basicDetails: {},\n        aboutHistory: {},\n        administrationManagement: {},\n        admissionEligibility: {},\n        scholarshipsFinancialAid: {},\n        facilitiesInfrastructure: {},\n        technicalDigitalResources: {},\n        studentSupportServices: {},\n        achievementsRecognitions: {},\n        campusEnvironment: {},\n        rulesRegulations: {},\n        miscellaneous: {},\n        additionalInfo: {},\n        historyOverview: {}, // Legacy support\n        facilities: [],\n        admissionScholarship: {},\n        socialMedia: {},\n        newsAnnouncements: {},\n        quickStats: {},\n      };\n\n      settings?.forEach((setting: any) => {\n        if (setting.key.startsWith('general_info_')) {\n          const category = setting.key.replace('general_info_', '');\n          \n          if (category === 'basic_details') {\n            result.basicDetails = setting.value;\n          } else if (category === 'about_history_overview') {\n            result.aboutHistory = setting.value;\n          } else if (category === 'administration_management') {\n            result.administrationManagement = setting.value;\n          } else if (category === 'admission_eligibility') {\n            result.admissionEligibility = setting.value;\n          } else if (category === 'scholarships_financial_aid') {\n            result.scholarshipsFinancialAid = setting.value;\n          } else if (category === 'facilities_infrastructure') {\n            result.facilitiesInfrastructure = setting.value;\n          } else if (category === 'technical_digital_resources') {\n            result.technicalDigitalResources = setting.value;\n          } else if (category === 'student_support_services') {\n            result.studentSupportServices = setting.value;\n          } else if (category === 'achievements_recognitions') {\n            result.achievementsRecognitions = setting.value;\n          } else if (category === 'campus_environment') {\n            result.campusEnvironment = setting.value;\n          } else if (category === 'rules_regulations') {\n            result.rulesRegulations = setting.value;\n          } else if (category === 'miscellaneous') {\n            result.miscellaneous = setting.value;\n          } else if (category === 'additional_info') {\n            result.additionalInfo = setting.value;\n          } else if (category === 'history_overview') {\n            result.historyOverview = setting.value;\n          } else if (category === 'facilities') {\n            result.facilities = setting.value.facilities || [];\n          } else if (category === 'admission_scholarship') {\n            result.admissionScholarship = setting.value;\n          } else if (category === 'social_media') {\n            result.socialMedia = setting.value;\n          } else if (category === 'news_highlights') {\n            result.newsAnnouncements = setting.value;\n          } else if (category === 'quick_stats') {\n            result.quickStats = setting.value;\n          }\n        }\n      });\n\n      res.json(result);\n    } catch (error: any) {\n      console.error('Error fetching general info:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Basic Details Routes\n  app.get(\"/api/admin/general-info/basic-details\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .select('*')\n        .eq('key', 'general_info_basic_details')\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      \n      // Parse JSON value if it exists\n      const parsedValue = data?.value ? (typeof data.value === 'string' ? JSON.parse(data.value) : data.value) : {};\n      res.json(parsedValue);\n    } catch (error: any) {\n      console.error('Error fetching basic details:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/general-info/basic-details\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'general_info_basic_details',\n          value: JSON.stringify(req.body),\n          updated_at: new Date().toISOString(),\n        }, {\n          onConflict: 'key'\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Error saving basic details:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // About / History / Overview Routes (New Section)\n  app.get(\"/api/admin/general-info/about-history-overview\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .select('*')\n        .eq('key', 'general_info_about_history_overview')\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      \n      const parsedValue = data?.value ? (typeof data.value === 'string' ? JSON.parse(data.value) : data.value) : {};\n      res.json(parsedValue);\n    } catch (error: any) {\n      console.error('Error fetching about/history/overview:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/general-info/about-history-overview\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'general_info_about_history_overview',\n          value: JSON.stringify(req.body),\n          updated_at: new Date().toISOString(),\n        }, {\n          onConflict: 'key'\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Error saving about/history/overview:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Administration / Management Routes\n  app.get(\"/api/admin/general-info/administration-management\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .select('*')\n        .eq('key', 'general_info_administration_management')\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      \n      const parsedValue = data?.value ? (typeof data.value === 'string' ? JSON.parse(data.value) : data.value) : {};\n      res.json(parsedValue);\n    } catch (error: any) {\n      console.error('Error fetching administration/management:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/general-info/administration-management\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'general_info_administration_management',\n          value: JSON.stringify(req.body),\n          updated_at: new Date().toISOString(),\n        }, {\n          onConflict: 'key'\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Error saving administration/management:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Admission & Eligibility Routes\n  app.get(\"/api/admin/general-info/admission-eligibility\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .select('*')\n        .eq('key', 'general_info_admission_eligibility')\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      \n      const parsedValue = data?.value ? (typeof data.value === 'string' ? JSON.parse(data.value) : data.value) : {};\n      res.json(parsedValue);\n    } catch (error: any) {\n      console.error('Error fetching admission/eligibility:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/general-info/admission-eligibility\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'general_info_admission_eligibility',\n          value: JSON.stringify(req.body),\n          updated_at: new Date().toISOString(),\n        }, {\n          onConflict: 'key'\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Error saving admission/eligibility:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Scholarships & Financial Aid Routes\n  app.get(\"/api/admin/general-info/scholarships-financial-aid\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .select('*')\n        .eq('key', 'general_info_scholarships_financial_aid')\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      \n      const parsedValue = data?.value ? (typeof data.value === 'string' ? JSON.parse(data.value) : data.value) : {};\n      res.json(parsedValue);\n    } catch (error: any) {\n      console.error('Error fetching scholarships/financial aid:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/general-info/scholarships-financial-aid\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'general_info_scholarships_financial_aid',\n          value: JSON.stringify(req.body),\n          updated_at: new Date().toISOString(),\n        }, {\n          onConflict: 'key'\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Error saving scholarships/financial aid:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Facilities & Infrastructure Routes\n  app.get(\"/api/admin/general-info/facilities-infrastructure\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .select('*')\n        .eq('key', 'general_info_facilities_infrastructure')\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      \n      const parsedValue = data?.value ? (typeof data.value === 'string' ? JSON.parse(data.value) : data.value) : {};\n      res.json(parsedValue);\n    } catch (error: any) {\n      console.error('Error fetching facilities/infrastructure:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/general-info/facilities-infrastructure\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'general_info_facilities_infrastructure',\n          value: JSON.stringify(req.body),\n          updated_at: new Date().toISOString(),\n        }, {\n          onConflict: 'key'\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Error saving facilities/infrastructure:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Technical & Digital Resources Routes\n  app.get(\"/api/admin/general-info/technical-digital-resources\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .select('*')\n        .eq('key', 'general_info_technical_digital_resources')\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      \n      const parsedValue = data?.value ? (typeof data.value === 'string' ? JSON.parse(data.value) : data.value) : {};\n      res.json(parsedValue);\n    } catch (error: any) {\n      console.error('Error fetching technical/digital resources:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/general-info/technical-digital-resources\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'general_info_technical_digital_resources',\n          value: JSON.stringify(req.body),\n          updated_at: new Date().toISOString(),\n        }, {\n          onConflict: 'key'\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Error saving technical/digital resources:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Student Support & Services Routes\n  app.get(\"/api/admin/general-info/student-support-services\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .select('*')\n        .eq('key', 'general_info_student_support_services')\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      \n      const parsedValue = data?.value ? (typeof data.value === 'string' ? JSON.parse(data.value) : data.value) : {};\n      res.json(parsedValue);\n    } catch (error: any) {\n      console.error('Error fetching student support services:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/general-info/student-support-services\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'general_info_student_support_services',\n          value: JSON.stringify(req.body),\n          updated_at: new Date().toISOString(),\n        }, {\n          onConflict: 'key'\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Error saving student support services:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Achievements & Recognitions Routes\n  app.get(\"/api/admin/general-info/achievements-recognitions\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .select('*')\n        .eq('key', 'general_info_achievements_recognitions')\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      \n      const parsedValue = data?.value ? (typeof data.value === 'string' ? JSON.parse(data.value) : data.value) : {};\n      res.json(parsedValue);\n    } catch (error: any) {\n      console.error('Error fetching achievements & recognitions:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/general-info/achievements-recognitions\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'general_info_achievements_recognitions',\n          value: JSON.stringify(req.body),\n          updated_at: new Date().toISOString(),\n        }, {\n          onConflict: 'key'\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Error saving achievements & recognitions:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // History & Overview Routes\n  app.get(\"/api/admin/general-info/history-overview\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .select('*')\n        .eq('key', 'general_info_history_overview')\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      res.json(data?.value || {});\n    } catch (error: any) {\n      console.error('Error fetching history:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/general-info/history-overview\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'general_info_history_overview',\n          value: req.body,\n          updated_at: new Date().toISOString(),\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Error saving history:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Facilities Routes\n  app.get(\"/api/admin/general-info/facilities\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .select('*')\n        .eq('key', 'general_info_facilities')\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      res.json(data?.value || { facilities: [] });\n    } catch (error: any) {\n      console.error('Error fetching facilities:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/general-info/facilities\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'general_info_facilities',\n          value: req.body,\n          updated_at: new Date().toISOString(),\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Error saving facilities:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Admission & Scholarship Routes\n  app.get(\"/api/admin/general-info/admission-scholarship\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .select('*')\n        .eq('key', 'general_info_admission_scholarship')\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      res.json(data?.value || {});\n    } catch (error: any) {\n      console.error('Error fetching admission info:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/general-info/admission-scholarship\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'general_info_admission_scholarship',\n          value: req.body,\n          updated_at: new Date().toISOString(),\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Error saving admission info:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Social Media Routes\n  app.get(\"/api/admin/general-info/social-media\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .select('*')\n        .eq('key', 'general_info_social_media')\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      res.json(data?.value || {});\n    } catch (error: any) {\n      console.error('Error fetching social media:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/general-info/social-media\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'general_info_social_media',\n          value: req.body,\n          updated_at: new Date().toISOString(),\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Error saving social media:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // News & Announcements Routes\n  app.get(\"/api/admin/general-info/news-announcements\", async (req: Request, res: Response) => {\n    try {\n      // Fetch active notices/events from head-admin tables\n      const { data: notices, error: noticesError } = await supabase\n        .from('notices')\n        .select('*')\n        .order('created_at', { ascending: false })\n        .limit(50);\n\n      if (noticesError) throw noticesError;\n\n      // Fetch highlighted news IDs\n      const { data: settings, error: settingsError } = await supabase\n        .from('college_settings')\n        .select('*')\n        .eq('key', 'general_info_news_highlights')\n        .single();\n\n      if (settingsError && settingsError.code !== 'PGRST116') throw settingsError;\n\n      res.json({\n        news: notices || [],\n        highlighted: settings?.value?.highlighted || [],\n        updated_at: settings?.updated_at || new Date().toISOString(),\n      });\n    } catch (error: any) {\n      console.error('Error fetching news:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/general-info/news-announcements/highlight\", async (req: Request, res: Response) => {\n    try {\n      const { highlighted } = req.body;\n\n      const { data, error } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'general_info_news_highlights',\n          value: { highlighted },\n          updated_at: new Date().toISOString(),\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Error saving news highlights:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Quick Stats Routes\n  app.get(\"/api/admin/general-info/quick-stats\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .select('*')\n        .eq('key', 'general_info_quick_stats')\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      res.json(data?.value || {});\n    } catch (error: any) {\n      console.error('Error fetching quick stats:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/general-info/quick-stats\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'general_info_quick_stats',\n          value: req.body,\n          updated_at: new Date().toISOString(),\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Error saving quick stats:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Additional Info Routes\n  app.get(\"/api/admin/general-info/additional-info\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .select('*')\n        .eq('key', 'general_info_additional_info')\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      \n      // Parse JSON value if it exists\n      const parsedValue = data?.value ? JSON.parse(data.value) : { entries: [] };\n      res.json(parsedValue);\n    } catch (error: any) {\n      console.error('Error fetching additional info:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/general-info/additional-info\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'general_info_additional_info',\n          value: JSON.stringify(req.body),\n          updated_at: new Date().toISOString(),\n        }, {\n          onConflict: 'key'\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Error saving additional info:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Campus & Environment Routes\n  app.get(\"/api/admin/general-info/campus-environment\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .select('*')\n        .eq('key', 'general_info_campus_environment')\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      \n      const parsedValue = data?.value ? (typeof data.value === 'string' ? JSON.parse(data.value) : data.value) : {};\n      res.json(parsedValue);\n    } catch (error: any) {\n      console.error('Error fetching campus environment:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/general-info/campus-environment\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'general_info_campus_environment',\n          value: JSON.stringify(req.body),\n          updated_at: new Date().toISOString(),\n        }, {\n          onConflict: 'key'\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Error saving campus environment:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Rules & Regulations Routes\n  app.get(\"/api/admin/general-info/rules-regulations\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .select('*')\n        .eq('key', 'general_info_rules_regulations')\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      \n      const parsedValue = data?.value ? (typeof data.value === 'string' ? JSON.parse(data.value) : data.value) : {};\n      res.json(parsedValue);\n    } catch (error: any) {\n      console.error('Error fetching rules regulations:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/general-info/rules-regulations\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'general_info_rules_regulations',\n          value: JSON.stringify(req.body),\n          updated_at: new Date().toISOString(),\n        }, {\n          onConflict: 'key'\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Error saving rules regulations:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Miscellaneous Information Routes\n  app.get(\"/api/admin/general-info/miscellaneous\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .select('*')\n        .eq('key', 'general_info_miscellaneous')\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      \n      const parsedValue = data?.value ? (typeof data.value === 'string' ? JSON.parse(data.value) : data.value) : {};\n      res.json(parsedValue);\n    } catch (error: any) {\n      console.error('Error fetching miscellaneous info:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/general-info/miscellaneous\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'general_info_miscellaneous',\n          value: JSON.stringify(req.body),\n          updated_at: new Date().toISOString(),\n        }, {\n          onConflict: 'key'\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Error saving miscellaneous info:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // AI Generate endpoint for Additional Info\n  app.post(\"/api/ai-generate\", async (req: Request, res: Response) => {\n    try {\n      const { prompt, type } = req.body;\n\n      if (!prompt) {\n        return res.status(400).json({ message: \"Prompt is required\" });\n      }\n\n      // Get API key from environment\n      const groqApiKey = process.env.GROQ_API_KEY;\n      if (!groqApiKey) {\n        return res.status(500).json({ \n          message: \"Groq API key not configured. Please contact administrator.\" \n        });\n      }\n\n      // Construct system prompt based on type\n      let systemPrompt = \"\";\n      if (type === \"additional_info\") {\n        systemPrompt = `You are an AI assistant helping to generate structured information for a college admin panel.\nGenerate one or more information entries based on the user's description.\nEach entry should have: title, content, and optionally a category.\n\nIMPORTANT: Return ONLY valid JSON in this exact format (no markdown, no extra text):\nFor single entry: {\"title\": \"...\", \"content\": \"...\", \"category\": \"...\"}\nFor multiple entries: {\"entries\": [{\"title\": \"...\", \"content\": \"...\", \"category\": \"...\"}, ...]}\n\nKeep content detailed and professional.`;\n      }\n\n      const response = await fetch(\"https://api.groq.com/openai/v1/chat/completions\", {\n        method: \"POST\",\n        headers: {\n          \"Authorization\": `Bearer ${groqApiKey}`,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          messages: [\n            { role: \"system\", content: systemPrompt },\n            { role: \"user\", content: prompt }\n          ],\n          model: \"llama-3.3-70b-versatile\",\n          temperature: 0.7,\n          max_tokens: 2000,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error?.message || \"AI generation failed\");\n      }\n\n      const result = await response.json();\n      const generatedText = result.choices[0]?.message?.content;\n\n      if (!generatedText) {\n        throw new Error(\"No content generated\");\n      }\n\n      // Parse the JSON response\n      const jsonMatch = generatedText.match(/\\{[\\s\\S]*\\}/);\n      if (!jsonMatch) {\n        throw new Error(\"Failed to parse AI response\");\n      }\n\n      const parsedData = JSON.parse(jsonMatch[0]);\n      res.json(parsedData);\n    } catch (error: any) {\n      console.error('Error in AI generation:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n}\n","size_bytes":97501},"client/src/components/admin/CoursesSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { supabase } from \"@/lib/supabase\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useVoice } from \"@/hooks/use-voice\";\nimport { Plus, Edit, Trash2, Sparkles, Mic, MicOff, Loader2, ChevronDown, GraduationCap } from \"lucide-react\";\nimport { EnhancedAIInput } from \"./EnhancedAIInput\";\nimport { EnhancedAIPreview } from \"./EnhancedAIPreview\";\n\ninterface Course {\n  id: string;\n  course_name: string;\n  course_code: string;\n  course_type: string;\n  duration: string;\n  description: string;\n  eligibility: string;\n  total_seats: number;\n  fees_per_year: number;\n  department_id: string;\n  is_active: boolean;\n}\n\ninterface Department {\n  id: string;\n  name: string;\n}\n\nexport function CoursesSection() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\n  const [editingCourse, setEditingCourse] = useState<Course | null>(null);\n  const [isAiMode, setIsAiMode] = useState(false);\n  const [aiPrompt, setAiPrompt] = useState(\"\");\n  const [aiGeneratedData, setAiGeneratedData] = useState<any>(null);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [currentPreviewIndex, setCurrentPreviewIndex] = useState(0);\n  const [formData, setFormData] = useState({\n    course_name: \"\",\n    course_code: \"\",\n    course_type: \"UG\",\n    duration: \"\",\n    description: \"\",\n    eligibility: \"\",\n    total_seats: \"\",\n    fees_per_year: \"\",\n    department_id: \"\",\n  });\n\n  const token = localStorage.getItem(\"adminToken\");\n\n  const {\n    isListening,\n    transcript,\n    startListening,\n    stopListening,\n    resetTranscript,\n    browserSupported,\n  } = useVoice();\n\n  const { data: coursesData } = useQuery<{ courses: Course[] }>({\n    queryKey: [\"/api/admin/courses\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/courses\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch courses\");\n      return await res.json();\n    },\n  });\n\n  const { data: departmentsData } = useQuery<{ departments: Department[] }>({\n    queryKey: [\"/api/admin/departments\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/departments\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch departments\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    const channel = supabase\n      .channel('courses-changes')\n      .on(\n        'postgres_changes',\n        {\n          event: '*',\n          schema: 'public',\n          table: 'courses'\n        },\n        () => {\n          queryClient.invalidateQueries({ queryKey: [\"/api/admin/courses\"] });\n        }\n      )\n      .subscribe();\n\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, [queryClient]);\n\n  const createMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(\"/api/admin/courses\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to create course\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/courses\"] });\n      toast({ title: \"Success\", description: \"Course created successfully\" });\n      setIsCreateOpen(false);\n      resetForm();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: any }) => {\n      const res = await fetch(`/api/admin/courses/${id}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to update course\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/courses\"] });\n      toast({ title: \"Success\", description: \"Course updated successfully\" });\n      setEditingCourse(null);\n      resetForm();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const res = await fetch(`/api/admin/courses/${id}`, {\n        method: \"DELETE\",\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to delete course\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/courses\"] });\n      toast({ title: \"Success\", description: \"Course deleted successfully\" });\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  useEffect(() => {\n    if (transcript && isAiMode) {\n      setAiPrompt(transcript);\n    }\n  }, [transcript, isAiMode]);\n\n  const handleToggleVoice = () => {\n    if (isListening) {\n      stopListening();\n    } else {\n      startListening();\n    }\n  };\n\n  const handleGenerateAI = async () => {\n    if (!aiPrompt.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please enter a description or use voice input\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsGenerating(true);\n    try {\n      const res = await fetch(\"/api/admin/ai-generate-course\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`,\n        },\n        body: JSON.stringify({ prompt: aiPrompt }),\n      });\n\n      if (!res.ok) {\n        throw new Error(\"Failed to generate course\");\n      }\n\n      const data = await res.json();\n      setAiGeneratedData(data);\n      toast({\n        title: \"Success\",\n        description: \"Course information generated successfully!\",\n      });\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to generate course\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  const handleConfirmAI = async () => {\n    if (!aiGeneratedData) return;\n    \n    const entries = aiGeneratedData.entries || [aiGeneratedData];\n    \n    try {\n      for (const entry of entries) {\n        const normalizedEntry = {\n          ...entry,\n          total_seats: entry.total_seats?.toString() || \"0\",\n          fees_per_year: entry.fees_per_year?.toString() || \"0\",\n        };\n        \n        const res = await fetch(\"/api/admin/courses\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`,\n          },\n          body: JSON.stringify(normalizedEntry),\n        });\n        \n        if (!res.ok) {\n          const errorData = await res.json().catch(() => ({ message: 'Failed to add course' }));\n          throw new Error(errorData.message || `Failed to add course: ${entry.course_name}`);\n        }\n      }\n      \n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/courses\"] });\n      toast({ \n        title: \"Success\", \n        description: `${entries.length} course(s) added successfully` \n      });\n      \n      setAiPrompt(\"\");\n      setAiGeneratedData(null);\n      setCurrentPreviewIndex(0);\n      setIsAiMode(false);\n      setIsCreateOpen(false);\n      resetTranscript();\n    } catch (error: any) {\n      toast({ \n        title: \"Error\", \n        description: error.message || \"Failed to add courses\", \n        variant: \"destructive\" \n      });\n    }\n  };\n\n  const handleEditEntry = (entry: any, index: number) => {\n    setFormData({\n      course_name: entry.course_name || \"\",\n      course_code: entry.course_code || \"\",\n      course_type: entry.course_type || \"UG\",\n      duration: entry.duration || \"\",\n      description: entry.description || \"\",\n      eligibility: entry.eligibility || \"\",\n      total_seats: entry.total_seats?.toString() || \"\",\n      fees_per_year: entry.fees_per_year?.toString() || \"\",\n      department_id: \"\",\n    });\n    \n    setAiGeneratedData(null);\n    setIsAiMode(false);\n    setCurrentPreviewIndex(0);\n  };\n\n  const handleDeleteEntry = (index: number) => {\n    if (!aiGeneratedData) return;\n    \n    const entries = aiGeneratedData.entries || [aiGeneratedData];\n    const updatedEntries = entries.filter((_: any, i: number) => i !== index);\n    \n    if (updatedEntries.length === 0) {\n      setAiGeneratedData(null);\n      setCurrentPreviewIndex(0);\n      toast({\n        title: \"Info\",\n        description: \"All entries removed. You can generate new ones.\",\n      });\n    } else {\n      setAiGeneratedData({ entries: updatedEntries });\n      if (currentPreviewIndex >= updatedEntries.length) {\n        setCurrentPreviewIndex(updatedEntries.length - 1);\n      }\n      toast({\n        title: \"Success\",\n        description: \"Entry removed from preview\",\n      });\n    }\n  };\n\n  const handleRegenerateAI = () => {\n    setAiGeneratedData(null);\n    setCurrentPreviewIndex(0);\n  };\n\n  const resetForm = () => {\n    setFormData({\n      course_name: \"\",\n      course_code: \"\",\n      course_type: \"UG\",\n      duration: \"\",\n      description: \"\",\n      eligibility: \"\",\n      total_seats: \"\",\n      fees_per_year: \"\",\n      department_id: \"\",\n    });\n    setAiPrompt(\"\");\n    setAiGeneratedData(null);\n    setCurrentPreviewIndex(0);\n    resetTranscript();\n  };\n\n  const handleOpenDialog = (mode: 'manual' | 'ai') => {\n    setIsAiMode(mode === 'ai');\n    setIsCreateOpen(true);\n    setAiPrompt(\"\");\n    setAiGeneratedData(null);\n    setCurrentPreviewIndex(0);\n    resetTranscript();\n  };\n\n  const handleSubmit = () => {\n    if (editingCourse) {\n      updateMutation.mutate({ id: editingCourse.id, data: formData });\n    } else {\n      createMutation.mutate(formData);\n    }\n  };\n\n  const startEdit = (course: Course) => {\n    setEditingCourse(course);\n    setFormData({\n      course_name: course.course_name,\n      course_code: course.course_code,\n      course_type: course.course_type,\n      duration: course.duration,\n      description: course.description,\n      eligibility: course.eligibility,\n      total_seats: course.total_seats.toString(),\n      fees_per_year: course.fees_per_year.toString(),\n      department_id: course.department_id || \"\",\n    });\n  };\n\n  const courses = coursesData?.courses || [];\n  const departments = departmentsData?.departments || [];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n        <div>\n          <h2 className=\"text-xl sm:text-2xl font-bold\">Courses Detail</h2>\n          <p className=\"text-sm sm:text-base text-gray-600\">Manage college courses and programs</p>\n        </div>\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button className=\"w-full sm:w-auto\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Add Course\n              <ChevronDown className=\"h-4 w-4 ml-2\" />\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent align=\"end\">\n            <DropdownMenuItem onClick={() => handleOpenDialog('manual')}>\n              Manual Mode\n            </DropdownMenuItem>\n            <DropdownMenuItem onClick={() => handleOpenDialog('ai')}>\n              <Sparkles className=\"h-4 w-4 mr-2\" />\n              AI Mode (Smart Add)\n            </DropdownMenuItem>\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n\n      <Dialog open={isCreateOpen} onOpenChange={setIsCreateOpen}>\n        <DialogContent className=\"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle className=\"text-lg sm:text-xl\">\n              {isAiMode ? \"AI Mode - Add Course\" : \"Add New Course\"}\n            </DialogTitle>\n          </DialogHeader>\n          \n          {isAiMode ? (\n            <div className=\"space-y-4\">\n              {!aiGeneratedData ? (\n                <EnhancedAIInput\n                  prompt={aiPrompt}\n                  onPromptChange={setAiPrompt}\n                  onGenerate={handleGenerateAI}\n                  isGenerating={isGenerating}\n                  isListening={isListening}\n                  onToggleVoice={handleToggleVoice}\n                  browserSupported={browserSupported}\n                  placeholder=\"Describe courses you want to add - single or multiple...\"\n                  examples={[\n                    \"Add B.Sc Computer Science, 3-year UG program, 60 seats, â‚¹25,000 per year fees\",\n                    \"Add three courses: B.A. in English, B.Com in Commerce, and B.Sc in Mathematics\",\n                    \"M.Sc Physics, 2 years PG course, 30 seats, fees 35000 rupees yearly\"\n                  ]}\n                  sectionType=\"courses\"\n                />\n              ) : (\n                <EnhancedAIPreview\n                  entries={aiGeneratedData.entries || [aiGeneratedData]}\n                  currentIndex={currentPreviewIndex}\n                  onIndexChange={setCurrentPreviewIndex}\n                  renderPreview={(course) => (\n                    <div className=\"space-y-3\">\n                      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2\">\n                        <div>\n                          <span className=\"font-semibold text-gray-700\">Course Name:</span>\n                          <p className=\"text-gray-900\">{course.course_name}</p>\n                        </div>\n                        <div>\n                          <span className=\"font-semibold text-gray-700\">Course Code:</span>\n                          <p className=\"text-gray-900\">{course.course_code}</p>\n                        </div>\n                        <div>\n                          <span className=\"font-semibold text-gray-700\">Type:</span>\n                          <p className=\"text-gray-900\">{course.course_type}</p>\n                        </div>\n                        <div>\n                          <span className=\"font-semibold text-gray-700\">Duration:</span>\n                          <p className=\"text-gray-900\">{course.duration}</p>\n                        </div>\n                        <div>\n                          <span className=\"font-semibold text-gray-700\">Total Seats:</span>\n                          <p className=\"text-gray-900\">{course.total_seats}</p>\n                        </div>\n                        <div>\n                          <span className=\"font-semibold text-gray-700\">Fees Per Year:</span>\n                          <p className=\"text-gray-900\">â‚¹{course.fees_per_year}</p>\n                        </div>\n                      </div>\n                      {course.description && (\n                        <div className=\"mt-4 pt-3 border-t\">\n                          <span className=\"font-semibold text-gray-700 block mb-1\">Description:</span>\n                          <p className=\"text-gray-900\">{course.description}</p>\n                        </div>\n                      )}\n                      {course.eligibility && (\n                        <div className=\"mt-3\">\n                          <span className=\"font-semibold text-gray-700 block mb-1\">Eligibility:</span>\n                          <p className=\"text-gray-900\">{course.eligibility}</p>\n                        </div>\n                      )}\n                    </div>\n                  )}\n                  onConfirmAll={handleConfirmAI}\n                  onRegenerate={handleRegenerateAI}\n                  onEditEntry={handleEditEntry}\n                  onDeleteEntry={handleDeleteEntry}\n                  confirmButtonText={`Add ${(aiGeneratedData.entries || [aiGeneratedData]).length} Course${(aiGeneratedData.entries || [aiGeneratedData]).length > 1 ? 's' : ''}`}\n                  entryTypeName=\"Course\"\n                />\n              )}\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                <div>\n                  <Label>Course Name</Label>\n                  <Input\n                    value={formData.course_name}\n                    onChange={(e) => setFormData({ ...formData, course_name: e.target.value })}\n                    placeholder=\"e.g., Bachelor of Arts\"\n                  />\n                </div>\n                <div>\n                  <Label>Course Code</Label>\n                  <Input\n                    value={formData.course_code}\n                    onChange={(e) => setFormData({ ...formData, course_code: e.target.value })}\n                    placeholder=\"e.g., BA-001\"\n                  />\n                </div>\n              </div>\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                <div>\n                  <Label>Course Type</Label>\n                  <Select\n                    value={formData.course_type}\n                    onValueChange={(value) => setFormData({ ...formData, course_type: value })}\n                  >\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"UG\">UG (Undergraduate)</SelectItem>\n                      <SelectItem value=\"PG\">PG (Postgraduate)</SelectItem>\n                      <SelectItem value=\"Diploma\">Diploma</SelectItem>\n                      <SelectItem value=\"Certificate\">Certificate</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div>\n                  <Label>Duration</Label>\n                  <Input\n                    value={formData.duration}\n                    onChange={(e) => setFormData({ ...formData, duration: e.target.value })}\n                    placeholder=\"e.g., 3 Years\"\n                  />\n                </div>\n              </div>\n              <div>\n                <Label>Department</Label>\n                <Select\n                  value={formData.department_id}\n                  onValueChange={(value) => setFormData({ ...formData, department_id: value })}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select department (optional)\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {departments.map((dept) => (\n                      <SelectItem key={dept.id} value={dept.id}>\n                        {dept.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                <div>\n                  <Label>Total Seats</Label>\n                  <Input\n                    type=\"number\"\n                    value={formData.total_seats}\n                    onChange={(e) => setFormData({ ...formData, total_seats: e.target.value })}\n                    placeholder=\"e.g., 60\"\n                  />\n                </div>\n                <div>\n                  <Label>Fees Per Year (â‚¹)</Label>\n                  <Input\n                    type=\"number\"\n                    value={formData.fees_per_year}\n                    onChange={(e) => setFormData({ ...formData, fees_per_year: e.target.value })}\n                    placeholder=\"e.g., 25000\"\n                  />\n                </div>\n              </div>\n              <div>\n                <Label>Description</Label>\n                <Textarea\n                  value={formData.description}\n                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                  placeholder=\"Course description...\"\n                  rows={3}\n                />\n              </div>\n              <div>\n                <Label>Eligibility</Label>\n                <Textarea\n                  value={formData.eligibility}\n                  onChange={(e) => setFormData({ ...formData, eligibility: e.target.value })}\n                  placeholder=\"Eligibility criteria...\"\n                  rows={2}\n                />\n              </div>\n              <Button onClick={handleSubmit} className=\"w-full\">\n                Create Course\n              </Button>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n\n      <Dialog open={!!editingCourse} onOpenChange={(open) => !open && setEditingCourse(null)}>\n        <DialogContent className=\"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle className=\"text-lg sm:text-xl\">Edit Course</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n              <div>\n                <Label>Course Name</Label>\n                <Input\n                  value={formData.course_name}\n                  onChange={(e) => setFormData({ ...formData, course_name: e.target.value })}\n                />\n              </div>\n              <div>\n                <Label>Course Code</Label>\n                <Input\n                  value={formData.course_code}\n                  onChange={(e) => setFormData({ ...formData, course_code: e.target.value })}\n                />\n              </div>\n            </div>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n              <div>\n                <Label>Course Type</Label>\n                <Select\n                  value={formData.course_type}\n                  onValueChange={(value) => setFormData({ ...formData, course_type: value })}\n                >\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"UG\">UG (Undergraduate)</SelectItem>\n                    <SelectItem value=\"PG\">PG (Postgraduate)</SelectItem>\n                    <SelectItem value=\"Diploma\">Diploma</SelectItem>\n                    <SelectItem value=\"Certificate\">Certificate</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label>Duration</Label>\n                <Input\n                  value={formData.duration}\n                  onChange={(e) => setFormData({ ...formData, duration: e.target.value })}\n                />\n              </div>\n            </div>\n            <div>\n              <Label>Department</Label>\n              <Select\n                value={formData.department_id}\n                onValueChange={(value) => setFormData({ ...formData, department_id: value })}\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select department (optional)\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {departments.map((dept) => (\n                    <SelectItem key={dept.id} value={dept.id}>\n                      {dept.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n              <div>\n                <Label>Total Seats</Label>\n                <Input\n                  type=\"number\"\n                  value={formData.total_seats}\n                  onChange={(e) => setFormData({ ...formData, total_seats: e.target.value })}\n                />\n              </div>\n              <div>\n                <Label>Fees Per Year (â‚¹)</Label>\n                <Input\n                  type=\"number\"\n                  value={formData.fees_per_year}\n                  onChange={(e) => setFormData({ ...formData, fees_per_year: e.target.value })}\n                />\n              </div>\n            </div>\n            <div>\n              <Label>Description</Label>\n              <Textarea\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                rows={3}\n              />\n            </div>\n            <div>\n              <Label>Eligibility</Label>\n              <Textarea\n                value={formData.eligibility}\n                onChange={(e) => setFormData({ ...formData, eligibility: e.target.value })}\n                rows={2}\n              />\n            </div>\n            <Button onClick={handleSubmit} className=\"w-full\">\n              Update Course\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {courses.length === 0 ? (\n        <Card className=\"border-2 border-dashed border-gray-300\">\n          <CardContent className=\"py-12 text-center\">\n            <GraduationCap className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n            <p className=\"text-gray-500 text-base sm:text-lg font-medium mb-2\">No courses added yet</p>\n            <p className=\"text-gray-400 text-sm\">Click \"Add Course\" button above to create your first course</p>\n          </CardContent>\n        </Card>\n      ) : (\n        <>\n          {/* Desktop Table View */}\n          <Card className=\"hidden lg:block\">\n            <CardContent className=\"p-0\">\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-gray-50 border-b border-gray-200\">\n                    <tr>\n                      <th className=\"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider\">\n                        Course Details\n                      </th>\n                      <th className=\"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider\">\n                        Type & Duration\n                      </th>\n                      <th className=\"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider\">\n                        Seats & Fees\n                      </th>\n                      <th className=\"px-6 py-4 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider\">\n                        Actions\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {courses.map((course) => (\n                      <tr key={course.id} className=\"hover:bg-gray-50 transition-colors\">\n                        <td className=\"px-6 py-4\">\n                          <div className=\"space-y-1\">\n                            <p className=\"text-sm font-semibold text-gray-900\">{course.course_name}</p>\n                            <p className=\"text-xs text-gray-500 font-mono\">{course.course_code}</p>\n                            {course.description && (\n                              <p className=\"text-xs text-gray-600 mt-1 line-clamp-2\">{course.description}</p>\n                            )}\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          <div className=\"space-y-1\">\n                            <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\n                              {course.course_type}\n                            </span>\n                            <p className=\"text-sm text-gray-700\">{course.duration}</p>\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          <div className=\"space-y-1 text-sm\">\n                            <div className=\"flex items-center gap-1 text-gray-700\">\n                              <span className=\"font-medium\">Seats:</span>\n                              <span>{course.total_seats || 'N/A'}</span>\n                            </div>\n                            <div className=\"flex items-center gap-1 text-gray-700\">\n                              <span className=\"font-medium\">Fees:</span>\n                              <span>â‚¹{course.fees_per_year?.toLocaleString() || 'N/A'}/year</span>\n                            </div>\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 text-right\">\n                          <div className=\"flex justify-end gap-2\">\n                            <Button \n                              size=\"sm\" \n                              variant=\"outline\" \n                              onClick={() => startEdit(course)}\n                              className=\"hover:bg-blue-50 hover:border-blue-500 hover:text-blue-700\"\n                            >\n                              <Edit className=\"h-4 w-4 mr-1\" />\n                              Edit\n                            </Button>\n                            <Button\n                              size=\"sm\"\n                              variant=\"outline\"\n                              onClick={() => deleteMutation.mutate(course.id)}\n                              className=\"hover:bg-red-50 hover:border-red-500 hover:text-red-700\"\n                            >\n                              <Trash2 className=\"h-4 w-4 mr-1\" />\n                              Delete\n                            </Button>\n                          </div>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Mobile Card View */}\n          <div className=\"lg:hidden space-y-4\">\n            {courses.map((course) => (\n              <Card key={course.id} className=\"overflow-hidden hover:shadow-md transition-shadow\">\n                <CardHeader className=\"bg-gradient-to-r from-blue-50 to-indigo-50 pb-3\">\n                  <div className=\"flex items-start justify-between gap-3\">\n                    <div className=\"flex-1 min-w-0\">\n                      <CardTitle className=\"text-base sm:text-lg text-gray-900 break-words\">\n                        {course.course_name}\n                      </CardTitle>\n                      <CardDescription className=\"text-xs sm:text-sm font-mono mt-1\">\n                        {course.course_code}\n                      </CardDescription>\n                    </div>\n                    <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-600 text-white whitespace-nowrap flex-shrink-0\">\n                      {course.course_type}\n                    </span>\n                  </div>\n                </CardHeader>\n                <CardContent className=\"pt-4 space-y-3\">\n                  {course.description && (\n                    <div className=\"pb-3 border-b border-gray-100\">\n                      <p className=\"text-sm text-gray-600 line-clamp-3\">{course.description}</p>\n                    </div>\n                  )}\n                  \n                  <div className=\"grid grid-cols-2 gap-3 text-sm\">\n                    <div className=\"space-y-2\">\n                      <div className=\"flex items-center gap-1.5 text-gray-700\">\n                        <span className=\"font-semibold\">Duration:</span>\n                        <span className=\"text-gray-900\">{course.duration}</span>\n                      </div>\n                      <div className=\"flex items-center gap-1.5 text-gray-700\">\n                        <span className=\"font-semibold\">Seats:</span>\n                        <span className=\"text-gray-900\">{course.total_seats || 'N/A'}</span>\n                      </div>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <div className=\"flex flex-col gap-0.5\">\n                        <span className=\"font-semibold text-gray-700\">Fees/Year:</span>\n                        <span className=\"text-green-600 font-semibold\">\n                          â‚¹{course.fees_per_year?.toLocaleString() || 'N/A'}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n\n                  {course.eligibility && (\n                    <div className=\"pt-2 border-t border-gray-100\">\n                      <p className=\"text-xs text-gray-500\">\n                        <span className=\"font-semibold\">Eligibility: </span>\n                        {course.eligibility}\n                      </p>\n                    </div>\n                  )}\n\n                  <div className=\"flex gap-2 pt-3\">\n                    <Button \n                      size=\"sm\"\n                      variant=\"outline\" \n                      onClick={() => startEdit(course)}\n                      className=\"flex-1 hover:bg-blue-50 hover:border-blue-500 hover:text-blue-700 h-9\"\n                    >\n                      <Edit className=\"h-4 w-4 mr-1.5\" />\n                      Edit\n                    </Button>\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      onClick={() => deleteMutation.mutate(course.id)}\n                      className=\"flex-1 hover:bg-red-50 hover:border-red-500 hover:text-red-700 h-9\"\n                    >\n                      <Trash2 className=\"h-4 w-4 mr-1.5\" />\n                      Delete\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n","size_bytes":34491},"SETUP_INSTRUCTIONS.md":{"content":"# ðŸš€ Supabase Setup Instructions\n\n## âš ï¸ IMPORTANT: You must complete this step for the admin panel to work!\n\nThe database tables need to be created in your Supabase project. Follow these steps:\n\n### Step 1: Open Supabase SQL Editor\n\n1. Go to [Supabase Dashboard](https://supabase.com/dashboard)\n2. Select your project\n3. Click on \"SQL Editor\" in the left sidebar\n4. Click \"New Query\"\n\n### Step 2: Run the Database Schema\n\n1. Open the file `supabase-schema.sql` in this project\n2. Copy the ENTIRE content of the file\n3. Paste it into the Supabase SQL Editor\n4. Click the \"Run\" button (or press `Ctrl/Cmd + Enter`)\n\n### Step 3: Verify Tables Were Created\n\nAfter running the SQL, you should see a success message. To verify:\n\n1. Go to \"Table Editor\" in Supabase\n2. You should see these tables:\n   - âœ… head_admin\n   - âœ… departments\n   - âœ… department_data\n   - âœ… notices\n   - âœ… college_settings\n   - âœ… events\n   - âœ… holidays\n   - âœ… timings\n   - âœ… courses\n   - âœ… staff_members\n\n### Step 4: Restart the Application\n\n1. The application will automatically detect the tables\n2. All features will now work:\n   - âœ… Add Courses\n   - âœ… Add Staff\n   - âœ… Create Departments\n   - âœ… Add Custom Information\n   - âœ… Real-time updates\n\n## Default Admin Credentials\n\nAfter setup, you can login with:\n- **Username**: `admin`\n- **Password**: `admin123`\n\n**âš ï¸ IMPORTANT**: Change this password immediately after first login!\n\n## Troubleshooting\n\n### Error: \"Could not find table in schema cache\"\n- **Solution**: Run the SQL schema in Supabase SQL Editor (Step 2 above)\n\n### Error: \"Relation already exists\"\n- **Solution**: Tables are already created. You're good to go!\n\n### Error: \"Permission denied\"\n- **Solution**: Make sure you're using the correct Supabase project and have admin access\n\n## Need Help?\n\nIf you encounter any issues:\n1. Make sure your Supabase environment variables are set correctly\n2. Check that you selected the correct project in Supabase\n3. Verify your internet connection\n4. Try refreshing the Supabase schema cache by clicking the \"Refresh\" button in Table Editor\n\n---\n\nAfter completing these steps, all admin panel features will work perfectly! ðŸŽ‰\n","size_bytes":2192},"client/src/lib/youtube.ts":{"content":"export function getYouTubeEmbedUrl(url: string): string | null {\n  if (!url) return null;\n  \n  try {\n    const youtubeRegex = /(?:https?:\\/\\/)?(?:www\\.)?(?:youtube\\.com\\/(?:watch\\?v=|embed\\/)|youtu\\.be\\/)([a-zA-Z0-9_-]{11})/;\n    const match = url.match(youtubeRegex);\n    \n    if (match && match[1]) {\n      return `https://www.youtube.com/embed/${match[1]}`;\n    }\n    \n    return null;\n  } catch (error) {\n    console.error('Error parsing YouTube URL:', error);\n    return null;\n  }\n}\n","size_bytes":488},"client/src/components/admin/BulkAIPreview.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { ChevronLeft, ChevronRight, Edit, CheckCircle } from \"lucide-react\";\n\ninterface BulkAIPreviewProps {\n  entries: any[];\n  currentIndex: number;\n  onIndexChange: (index: number) => void;\n  renderPreview: (entry: any, index: number) => React.ReactNode;\n  onConfirm: () => void;\n  onRegenerate: () => void;\n  confirmButtonText?: string;\n}\n\nexport function BulkAIPreview({\n  entries,\n  currentIndex,\n  onIndexChange,\n  renderPreview,\n  onConfirm,\n  onRegenerate,\n  confirmButtonText = \"Use This Data\",\n}: BulkAIPreviewProps) {\n  if (!entries || entries.length === 0) {\n    return null;\n  }\n\n  const totalEntries = entries.length;\n  const hasMultiple = totalEntries > 1;\n\n  const goToPrevious = () => {\n    if (currentIndex > 0) {\n      onIndexChange(currentIndex - 1);\n    }\n  };\n\n  const goToNext = () => {\n    if (currentIndex < totalEntries - 1) {\n      onIndexChange(currentIndex + 1);\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {hasMultiple && (\n        <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"text-sm font-medium text-blue-900\">\n              AI Generated {totalEntries} entries - Preview Entry {currentIndex + 1} of {totalEntries}\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={goToPrevious}\n                disabled={currentIndex === 0}\n              >\n                <ChevronLeft className=\"h-4 w-4 mr-1\" />\n                Previous\n              </Button>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={goToNext}\n                disabled={currentIndex === totalEntries - 1}\n              >\n                Next\n                <ChevronRight className=\"h-4 w-4 ml-1\" />\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {!hasMultiple && (\n        <div className=\"bg-green-50 border border-green-200 rounded-lg p-3\">\n          <div className=\"text-sm font-medium text-green-900 flex items-center gap-2\">\n            <CheckCircle className=\"h-4 w-4\" />\n            AI Generated Entry - Preview Below\n          </div>\n        </div>\n      )}\n\n      <div className=\"bg-gradient-to-br from-purple-50 to-blue-50 border-2 border-purple-200 rounded-lg p-4\">\n        {renderPreview(entries[currentIndex], currentIndex)}\n      </div>\n\n      <div className=\"flex gap-2\">\n        <Button onClick={onConfirm} className=\"flex-1 bg-green-600 hover:bg-green-700\">\n          <CheckCircle className=\"h-4 w-4 mr-2\" />\n          {confirmButtonText}\n        </Button>\n        <Button onClick={onRegenerate} variant=\"outline\" className=\"flex-1\">\n          <Edit className=\"h-4 w-4 mr-2\" />\n          Edit Prompt & Regenerate\n        </Button>\n      </div>\n\n      {hasMultiple && (\n        <div className=\"text-center text-sm text-gray-600\">\n          After confirming, all {totalEntries} entries will be added to the system\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":3269},"server/web-scraper.ts":{"content":"import { load } from 'cheerio';\nimport fetch from 'node-fetch';\n\nexport interface ScrapedCollegeInfo {\n  name?: string;\n  established_year?: string;\n  motto?: string;\n  principal?: string;\n  vice_principal?: string;\n  registrar?: string;\n  address?: string;\n  phone?: string;\n  email?: string;\n  website?: string;\n  affiliation?: string;\n  student_strength?: string;\n  faculty_strength?: string;\n  departments?: Array<{\n    name: string;\n    head?: string;\n    programs?: string[];\n    specializations?: string[];\n  }>;\n  courses?: Array<{\n    name: string;\n    type: string;\n    duration?: string;\n    session?: string;\n  }>;\n  facilities?: string[];\n  events?: Array<{\n    name: string;\n    type: string;\n    description?: string;\n  }>;\n  additionalInfo?: Array<{\n    category: string;\n    title: string;\n    content: string;\n  }>;\n}\n\nexport class RKSDWebScraper {\n  private baseUrl = 'https://rksdcollege.ac.in';\n\n  async scrapeCollegeInfo(): Promise<ScrapedCollegeInfo> {\n    const scrapedData: ScrapedCollegeInfo = {};\n    let successfulPages = 0;\n\n    console.log('Starting web scraping from RKSD College website...');\n\n    try {\n      const homePage = await this.fetchPage(this.baseUrl);\n      const homeData = this.scrapeHomePage(homePage);\n      Object.assign(scrapedData, homeData);\n      successfulPages++;\n      console.log('âœ… Home page scraped successfully');\n    } catch (error: any) {\n      console.log(`âš ï¸ Could not fetch home page: ${error.message}`);\n    }\n\n    const pagesToTry = [\n      { url: `${this.baseUrl}/about-us/`, scraper: this.scrapeAboutPage.bind(this), name: 'About' },\n      { url: `${this.baseUrl}/about/`, scraper: this.scrapeAboutPage.bind(this), name: 'About (alt)' },\n      { url: `${this.baseUrl}/courses/`, scraper: this.scrapeCoursesPage.bind(this), name: 'Courses' },\n      { url: `${this.baseUrl}/academics/`, scraper: this.scrapeCoursesPage.bind(this), name: 'Academics' },\n      { url: `${this.baseUrl}/contact-us-2/`, scraper: this.scrapeContactPage.bind(this), name: 'Contact' },\n      { url: `${this.baseUrl}/contact/`, scraper: this.scrapeContactPage.bind(this), name: 'Contact (alt)' },\n      { url: `${this.baseUrl}/contact-us/`, scraper: this.scrapeContactPage.bind(this), name: 'Contact (alt2)' },\n    ];\n\n    for (const page of pagesToTry) {\n      try {\n        const html = await this.fetchPage(page.url);\n        const pageData = page.scraper(html);\n        \n        if (page.name.includes('Courses') || page.name.includes('Academics')) {\n          if (Array.isArray(pageData) && pageData.length > 0) {\n            scrapedData.courses = pageData as any;\n            successfulPages++;\n            console.log(`âœ… ${page.name} page scraped successfully`);\n            continue;\n          }\n        } else {\n          if (Object.keys(pageData).length > 0) {\n            Object.assign(scrapedData, pageData);\n            successfulPages++;\n            console.log(`âœ… ${page.name} page scraped successfully`);\n          }\n        }\n      } catch (error: any) {\n        console.log(`âš ï¸ Could not fetch ${page.name} page: ${error.message}`);\n      }\n    }\n\n    if (successfulPages === 0) {\n      console.error('âŒ No pages could be scraped from the website');\n      throw new Error('Failed to scrape any data from website');\n    }\n\n    console.log(`âœ… Web scraping completed - ${successfulPages} pages scraped successfully`);\n    return scrapedData;\n  }\n\n  async searchWebsiteForQuery(query: string): Promise<string | null> {\n    try {\n      console.log(`Searching website for: ${query}`);\n      \n      const pages = [\n        { url: this.baseUrl, name: 'Home' },\n        { url: `${this.baseUrl}/about-us/`, name: 'About' },\n        { url: `${this.baseUrl}/about/`, name: 'About (alt)' },\n        { url: `${this.baseUrl}/courses/`, name: 'Courses' },\n        { url: `${this.baseUrl}/academics/`, name: 'Academics' },\n        { url: `${this.baseUrl}/contact-us-2/`, name: 'Contact' },\n        { url: `${this.baseUrl}/contact/`, name: 'Contact (alt)' },\n        { url: `${this.baseUrl}/contact-us/`, name: 'Contact (alt2)' },\n        { url: `${this.baseUrl}/admissions/`, name: 'Admissions' },\n        { url: `${this.baseUrl}/admission/`, name: 'Admission' },\n        { url: `${this.baseUrl}/facilities/`, name: 'Facilities' },\n        { url: `${this.baseUrl}/infrastructure/`, name: 'Infrastructure' },\n      ];\n\n      for (const page of pages) {\n        try {\n          const html = await this.fetchPage(page.url);\n          const $ = load(html);\n          \n          $('script, style, nav, footer, header').remove();\n          \n          const pageText = $('body').text().replace(/\\s+/g, ' ').trim();\n          \n          const queryLower = query.toLowerCase();\n          if (pageText.toLowerCase().includes(queryLower)) {\n            const sentences = pageText.split(/[.!?]+/);\n            const relevantSentences = sentences.filter(s => \n              s.toLowerCase().includes(queryLower)\n            ).slice(0, 3);\n            \n            if (relevantSentences.length > 0) {\n              console.log(`âœ… Found relevant information on ${page.name} page`);\n              return relevantSentences.join('. ').trim() + '.';\n            }\n          }\n        } catch (error) {\n          console.log(`âš ï¸ Could not fetch ${page.name} page, continuing...`);\n        }\n      }\n      \n      console.log('âš ï¸ No relevant information found on website');\n      return null;\n    } catch (error: any) {\n      console.error('Error searching website:', error.message);\n      return null;\n    }\n  }\n\n  private async fetchPage(url: string): Promise<string> {\n    const response = await fetch(url, {\n      headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',\n      },\n      timeout: 10000,\n    } as any);\n\n    if (!response.ok) {\n      throw new Error(`Failed to fetch ${url}: ${response.statusText}`);\n    }\n\n    return await response.text();\n  }\n\n  private scrapeHomePage(html: string): Partial<ScrapedCollegeInfo> {\n    const $ = load(html);\n    const data: Partial<ScrapedCollegeInfo> = {};\n    data.additionalInfo = [];\n\n    try {\n      const titleText = $('title').text();\n      if (titleText.includes('RKSD') || titleText.includes('R.K.S.D')) {\n        data.name = 'R.K.S.D. (PG) College, Kaithal';\n      }\n\n      const bodyText = $('body').text();\n      \n      const establishedMatches = [\n        bodyText.match(/established\\s+(?:in|since)\\s+(\\d{4})/i),\n        bodyText.match(/since\\s+(\\d{4})/i),\n        bodyText.match(/(?:founded|started)\\s+(?:in\\s+)?(\\d{4})/i)\n      ];\n      for (const match of establishedMatches) {\n        if (match && match[1]) {\n          data.established_year = match[1];\n          break;\n        }\n      }\n\n      $('p, div, span, h1, h2, h3, h4').each((_, elem) => {\n        const text = $(elem).text().trim();\n        \n        if (text.toLowerCase().includes('principal') && (text.includes('Dr.') || text.includes('Prof.'))) {\n          const principalMatch = text.match(/(?:Dr\\.|Prof\\.)\\s+[A-Z][a-z]+(?:\\s+[A-Z][a-z]+)+/);\n          if (principalMatch && !data.principal) {\n            data.principal = principalMatch[0];\n          }\n        }\n\n        if (text.toLowerCase().includes('vice principal') && (text.includes('Dr.') || text.includes('Prof.'))) {\n          const vpMatch = text.match(/(?:Dr\\.|Prof\\.)\\s+[A-Z][a-z]+(?:\\s+[A-Z][a-z]+)+/);\n          if (vpMatch && !data.vice_principal) {\n            data.vice_principal = vpMatch[0];\n          }\n        }\n\n        if (text.length > 100 && text.length < 1000) {\n          const lowText = text.toLowerCase();\n          if (lowText.includes('college') || lowText.includes('education') || lowText.includes('student')) {\n            data.additionalInfo!.push({\n              category: 'General',\n              title: 'College Overview',\n              content: text.slice(0, 500),\n            });\n          }\n        }\n      });\n\n      const phoneMatches = [\n        bodyText.match(/\\+91[-\\s]?\\d{4}[-\\s]?\\d{6}/),\n        bodyText.match(/\\d{5}[-\\s]?\\d{5}/),\n        bodyText.match(/\\d{4}[-\\s]?\\d{6}/),\n      ];\n      for (const match of phoneMatches) {\n        if (match) {\n          data.phone = match[0].replace(/\\s+/g, '-');\n          break;\n        }\n      }\n\n      const emailMatch = bodyText.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/);\n      if (emailMatch) {\n        data.email = emailMatch[0];\n      }\n\n      const studentStrengthMatch = bodyText.match(/(?:student|enrollment)[s\\s]*(?:strength|count|number)[:\\s]+(\\d+)/i);\n      if (studentStrengthMatch) {\n        data.student_strength = studentStrengthMatch[1];\n      }\n\n      const facultyStrengthMatch = bodyText.match(/(?:faculty|teacher|staff)[s\\s]*(?:strength|count|number)[:\\s]+(\\d+)/i);\n      if (facultyStrengthMatch) {\n        data.faculty_strength = facultyStrengthMatch[1];\n      }\n    } catch (error) {\n      console.log('Error scraping home page:', error);\n    }\n\n    return data;\n  }\n\n  private scrapeAboutPage(html: string): Partial<ScrapedCollegeInfo> {\n    const $ = load(html);\n    const data: Partial<ScrapedCollegeInfo> = {};\n\n    try {\n      const bodyText = $('body').text();\n\n      const mottoMatch = bodyText.match(/motto[:\\s]+[\"']?([^\"'\\n.]+)[\"']?/i);\n      if (mottoMatch) {\n        data.motto = mottoMatch[1].trim();\n      }\n\n      const affiliationMatch = bodyText.match(/affiliated\\s+(?:with|to)\\s+([^,.\\n]+)/i);\n      if (affiliationMatch) {\n        data.affiliation = affiliationMatch[1].trim();\n      }\n\n      const addressMatch = bodyText.match(/([^,\\n]+,\\s*Kaithal[^,\\n]*,\\s*Haryana[^,\\n]*(?:,\\s*\\d{6})?)/i);\n      if (addressMatch) {\n        data.address = addressMatch[1].trim();\n      }\n\n      data.additionalInfo = data.additionalInfo || [];\n      $('p, div.content').each((_, elem) => {\n        const text = $(elem).text().trim();\n        if (text.length > 50 && text.length < 500) {\n          data.additionalInfo!.push({\n            category: 'About',\n            title: 'College Information',\n            content: text,\n          });\n        }\n      });\n    } catch (error) {\n      console.log('Error scraping about page:', error);\n    }\n\n    return data;\n  }\n\n  private scrapeCoursesPage(html: string): Array<{ name: string; type: string; duration?: string; session?: string }> {\n    const $ = load(html);\n    const courses: Array<{ name: string; type: string; duration?: string; session?: string }> = [];\n    const seen = new Set<string>();\n\n    try {\n      $('table tr, .course-item, li, p, div, span').each((_, elem) => {\n        const text = $(elem).text().trim();\n        \n        const ugPatterns = [\n          /B\\.A\\.\\s*(?:\\(([^)]+)\\))?/gi,\n          /B\\.Sc\\.\\s*(?:\\(([^)]+)\\))?/gi,\n          /B\\.Com\\.\\s*(?:\\(([^)]+)\\))?/gi,\n          /B\\.C\\.A\\./gi,\n          /Bachelor\\s+of\\s+Arts\\s*(?:\\(([^)]+)\\))?/gi,\n          /Bachelor\\s+of\\s+Science\\s*(?:\\(([^)]+)\\))?/gi,\n          /Bachelor\\s+of\\s+Commerce\\s*(?:\\(([^)]+)\\))?/gi,\n        ];\n        \n        const pgPatterns = [\n          /M\\.A\\.\\s*(?:\\(([^)]+)\\))?/gi,\n          /M\\.Sc\\.\\s*(?:\\(([^)]+)\\))?/gi,\n          /M\\.Com\\./gi,\n          /Master\\s+of\\s+Arts\\s*(?:\\(([^)]+)\\))?/gi,\n          /Master\\s+of\\s+Science\\s*(?:\\(([^)]+)\\))?/gi,\n          /Master\\s+of\\s+Commerce/gi,\n        ];\n        \n        for (const pattern of ugPatterns) {\n          let match;\n          const regex = new RegExp(pattern.source, pattern.flags);\n          while ((match = regex.exec(text)) !== null) {\n            let courseName = match[0].split(/\\s*[-â€“]\\s*/)[0].trim();\n            if (match[1]) {\n              courseName += ` (${match[1]})`;\n            }\n            const normalizedName = courseName.toLowerCase();\n            if (!seen.has(normalizedName)) {\n              seen.add(normalizedName);\n              courses.push({\n                name: courseName,\n                type: 'UG',\n                duration: '3 Years',\n              });\n            }\n          }\n        }\n        \n        for (const pattern of pgPatterns) {\n          let match;\n          const regex = new RegExp(pattern.source, pattern.flags);\n          while ((match = regex.exec(text)) !== null) {\n            let courseName = match[0].split(/\\s*[-â€“]\\s*/)[0].trim();\n            if (match[1]) {\n              courseName += ` (${match[1]})`;\n            }\n            const normalizedName = courseName.toLowerCase();\n            if (!seen.has(normalizedName)) {\n              seen.add(normalizedName);\n              courses.push({\n                name: courseName,\n                type: 'PG',\n                duration: '2 Years',\n              });\n            }\n          }\n        }\n      });\n\n      console.log(`ðŸ“š Found ${courses.length} unique courses`);\n    } catch (error) {\n      console.log('Error scraping courses page:', error);\n    }\n\n    return courses;\n  }\n\n  private scrapeContactPage(html: string): Partial<ScrapedCollegeInfo> {\n    const $ = load(html);\n    const data: Partial<ScrapedCollegeInfo> = {};\n\n    try {\n      const bodyText = $('body').text();\n\n      const phoneMatch = bodyText.match(/\\+91[-\\s]?\\d{4}[-\\s]?\\d{6}/);\n      if (phoneMatch && !data.phone) {\n        data.phone = phoneMatch[0].replace(/\\s+/g, '-');\n      }\n\n      const emailMatch = bodyText.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/);\n      if (emailMatch && !data.email) {\n        data.email = emailMatch[0];\n      }\n\n      const addressMatch = bodyText.match(/([^,\\n]+,\\s*Kaithal[^,\\n]*,\\s*Haryana[^,\\n]*(?:,\\s*\\d{6})?)/i);\n      if (addressMatch && !data.address) {\n        data.address = addressMatch[1].trim();\n      }\n    } catch (error) {\n      console.log('Error scraping contact page:', error);\n    }\n\n    return data;\n  }\n}\n","size_bytes":13678},"server/auto-update-service.ts":{"content":"import { RKSDWebScraper } from \"./web-scraper\";\nimport { supabase } from \"./supabase\";\n\nexport class AutoUpdateService {\n  private intervalId: NodeJS.Timeout | null = null;\n  private updateIntervalHours = 24;\n  private isRunning = false;\n\n  async start() {\n    if (this.isRunning) {\n      console.log('Auto-update service is already running');\n      return;\n    }\n\n    console.log(`Starting auto-update service - will update every ${this.updateIntervalHours} hours`);\n    this.isRunning = true;\n\n    try {\n      console.log('Performing initial data sync from website...');\n      await this.performUpdate();\n    } catch (error) {\n      console.error('Initial sync failed, will retry in next cycle:', error);\n    }\n\n    this.scheduleNextUpdate();\n  }\n\n  stop() {\n    if (this.intervalId) {\n      clearTimeout(this.intervalId);\n      this.intervalId = null;\n      this.isRunning = false;\n      console.log('Auto-update service stopped');\n    }\n  }\n\n  private scheduleNextUpdate() {\n    const intervalMs = this.updateIntervalHours * 60 * 60 * 1000;\n    \n    this.intervalId = setTimeout(async () => {\n      await this.performUpdate();\n      this.scheduleNextUpdate();\n    }, intervalMs);\n  }\n\n  async performUpdate() {\n    try {\n      console.log('Auto-update: Starting scheduled website data import...');\n      const scraper = new RKSDWebScraper();\n      const scrapedData = await scraper.scrapeCollegeInfo();\n\n      const updates: any = {};\n      if (scrapedData.name) updates.name = scrapedData.name;\n      if (scrapedData.established_year) updates.established_year = scrapedData.established_year;\n      if (scrapedData.motto) updates.motto = scrapedData.motto;\n      if (scrapedData.principal) updates.principal = scrapedData.principal;\n      if (scrapedData.vice_principal) updates.vice_principal = scrapedData.vice_principal;\n      if (scrapedData.registrar) updates.registrar = scrapedData.registrar;\n      if (scrapedData.address) updates.address = scrapedData.address;\n      if (scrapedData.phone) updates.phone = scrapedData.phone;\n      if (scrapedData.email) updates.email = scrapedData.email;\n      if (scrapedData.website) updates.website = scrapedData.website;\n      if (scrapedData.affiliation) updates.affiliation = scrapedData.affiliation;\n      if (scrapedData.student_strength) updates.student_strength = scrapedData.student_strength;\n      if (scrapedData.faculty_strength) updates.faculty_strength = scrapedData.faculty_strength;\n\n      if (Object.keys(updates).length > 0) {\n        const { error: settingError } = await supabase\n          .from('college_settings')\n          .upsert({\n            key: 'college_basic_info',\n            value: JSON.stringify({\n              ...updates,\n              updated_at: new Date().toISOString(),\n              source: 'auto_update',\n            }),\n          }, { onConflict: 'key' });\n\n        if (settingError) {\n          console.error('Failed to update basic college info:', settingError.message);\n        } else {\n          console.log(`âœ… Updated ${Object.keys(updates).length} basic info fields`);\n        }\n      }\n\n      if (scrapedData.additionalInfo && scrapedData.additionalInfo.length > 0) {\n        for (const info of scrapedData.additionalInfo) {\n          const settingKey = `auto_scraped_${info.title.toLowerCase().replace(/\\s+/g, '_')}`;\n          \n          const { data: existing, error: selectError } = await supabase\n            .from('college_settings')\n            .select('id')\n            .eq('key', settingKey)\n            .limit(1)\n            .single();\n\n          if (selectError && selectError.code !== 'PGRST116') {\n            console.error(`Error checking existing setting ${settingKey}:`, selectError.message);\n            continue;\n          }\n\n          if (existing) {\n            const { error: updateError } = await supabase\n              .from('college_settings')\n              .update({\n                value: JSON.stringify({\n                  title: info.title,\n                  content: info.content,\n                  category: info.category,\n                  source: 'auto_update',\n                  updated_at: new Date().toISOString(),\n                }),\n              })\n              .eq('id', existing.id);\n            \n            if (updateError) {\n              console.error(`Failed to update setting ${settingKey}:`, updateError.message);\n            }\n          } else {\n            const { error: insertError } = await supabase\n              .from('college_settings')\n              .insert({\n                key: settingKey,\n                value: JSON.stringify({\n                  title: info.title,\n                  content: info.content,\n                  category: info.category,\n                  source: 'auto_update',\n                  imported_at: new Date().toISOString(),\n                }),\n              });\n            \n            if (insertError) {\n              console.error(`Failed to insert setting ${settingKey}:`, insertError.message);\n            }\n          }\n        }\n      }\n\n      const { error: statusError } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'last_auto_update',\n          value: JSON.stringify({\n            timestamp: new Date().toISOString(),\n            status: 'success',\n            items_updated: {\n              basic_info: Object.keys(updates).length,\n              additional_info: scrapedData.additionalInfo?.length || 0,\n            },\n          }),\n        }, { onConflict: 'key' });\n\n      if (statusError) {\n        console.error('Failed to update auto-update status:', statusError.message);\n      }\n\n      console.log(`Auto-update: Successfully updated ${Object.keys(updates).length} basic fields and ${scrapedData.additionalInfo?.length || 0} additional info items`);\n    } catch (error: any) {\n      console.error('Auto-update: Error during scheduled update:', error.message);\n      \n      const { error: statusError } = await supabase\n        .from('college_settings')\n        .upsert({\n          key: 'last_auto_update',\n          value: JSON.stringify({\n            timestamp: new Date().toISOString(),\n            status: 'error',\n            error: error.message,\n          }),\n        }, { onConflict: 'key' });\n\n      if (statusError) {\n        console.error('Failed to log error status:', statusError.message);\n      }\n    }\n  }\n\n  async triggerManualUpdate() {\n    console.log('Auto-update: Manual trigger requested');\n    await this.performUpdate();\n  }\n}\n\nexport const autoUpdateService = new AutoUpdateService();\n","size_bytes":6548},"client/src/components/admin/EnhancedAIPreview.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { \n  ChevronLeft, \n  ChevronRight, \n  CheckCircle, \n  Edit2, \n  Trash2, \n  Pencil,\n  AlertCircle,\n} from \"lucide-react\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\n\ninterface EnhancedAIPreviewProps {\n  entries: any[];\n  currentIndex: number;\n  onIndexChange: (index: number) => void;\n  renderPreview: (entry: any, index: number) => React.ReactNode;\n  onConfirmAll: () => void;\n  onRegenerate: () => void;\n  onEditEntry?: (entry: any, index: number) => void;\n  onDeleteEntry?: (index: number) => void;\n  confirmButtonText?: string;\n  entryTypeName?: string;\n}\n\nexport function EnhancedAIPreview({\n  entries,\n  currentIndex,\n  onIndexChange,\n  renderPreview,\n  onConfirmAll,\n  onRegenerate,\n  onEditEntry,\n  onDeleteEntry,\n  confirmButtonText = \"Add All Entries\",\n  entryTypeName = \"Entry\",\n}: EnhancedAIPreviewProps) {\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [entryToDelete, setEntryToDelete] = useState<number | null>(null);\n\n  if (!entries || entries.length === 0) {\n    return null;\n  }\n\n  const totalEntries = entries.length;\n  const hasMultiple = totalEntries > 1;\n\n  const goToPrevious = () => {\n    if (currentIndex > 0) {\n      onIndexChange(currentIndex - 1);\n    }\n  };\n\n  const goToNext = () => {\n    if (currentIndex < totalEntries - 1) {\n      onIndexChange(currentIndex + 1);\n    }\n  };\n\n  const handleDeleteClick = (index: number) => {\n    setEntryToDelete(index);\n    setDeleteDialogOpen(true);\n  };\n\n  const confirmDelete = () => {\n    if (entryToDelete !== null && onDeleteEntry) {\n      onDeleteEntry(entryToDelete);\n      if (currentIndex >= totalEntries - 1 && currentIndex > 0) {\n        onIndexChange(currentIndex - 1);\n      }\n    }\n    setDeleteDialogOpen(false);\n    setEntryToDelete(null);\n  };\n\n  return (\n    <div className=\"space-y-3\">\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 p-2.5 bg-green-50 border border-green-200 rounded-md\">\n        <div className=\"flex items-center gap-2\">\n          <CheckCircle className=\"h-4 w-4 text-green-600 flex-shrink-0\" />\n          <span className=\"text-xs sm:text-sm font-medium text-green-900\">\n            {totalEntries} {entryTypeName}{totalEntries > 1 ? 's' : ''} Generated\n          </span>\n        </div>\n        {hasMultiple && (\n          <div className=\"flex items-center gap-2 justify-between sm:justify-end\">\n            <span className=\"text-xs text-green-700 font-medium\">\n              {currentIndex + 1} / {totalEntries}\n            </span>\n            <div className=\"flex gap-1\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={goToPrevious}\n                disabled={currentIndex === 0}\n                className=\"h-11 w-11 sm:h-9 sm:w-auto sm:px-3 p-0 border-green-300\"\n                aria-label=\"Previous\"\n              >\n                <ChevronLeft className=\"h-4 w-4\" />\n              </Button>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={goToNext}\n                disabled={currentIndex === totalEntries - 1}\n                className=\"h-11 w-11 sm:h-9 sm:w-auto sm:px-3 p-0 border-green-300\"\n                aria-label=\"Next\"\n              >\n                <ChevronRight className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <Card className=\"border border-gray-300 shadow-sm\">\n        <CardHeader className=\"pb-3 bg-gray-50 border-b\">\n          <div className=\"flex items-center justify-between gap-2\">\n            <CardTitle className=\"text-sm sm:text-base font-semibold text-gray-900\">\n              Preview {hasMultiple ? `#${currentIndex + 1}` : ''}\n            </CardTitle>\n            <div className=\"flex gap-1\">\n              {onEditEntry && (\n                <Button\n                  type=\"button\"\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => onEditEntry(entries[currentIndex], currentIndex)}\n                  className=\"h-11 min-w-[44px] px-3 sm:h-9 sm:px-2 text-amber-700 hover:bg-amber-50\"\n                >\n                  <Edit2 className=\"h-4 w-4 sm:mr-1\" />\n                  <span className=\"hidden sm:inline text-xs\">Edit</span>\n                </Button>\n              )}\n              {onDeleteEntry && totalEntries > 1 && (\n                <Button\n                  type=\"button\"\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => handleDeleteClick(currentIndex)}\n                  className=\"h-11 min-w-[44px] px-3 sm:h-9 sm:px-2 text-red-700 hover:bg-red-50\"\n                >\n                  <Trash2 className=\"h-4 w-4 sm:mr-1\" />\n                  <span className=\"hidden sm:inline text-xs\">Delete</span>\n                </Button>\n              )}\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent className=\"pt-4 pb-4\">\n          <div className=\"text-sm\">\n            {renderPreview(entries[currentIndex], currentIndex)}\n          </div>\n        </CardContent>\n      </Card>\n\n      <div className=\"flex flex-col sm:flex-row gap-2\">\n        <Button \n          onClick={onConfirmAll} \n          className=\"w-full sm:flex-1 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-medium py-2 shadow-md\"\n        >\n          <CheckCircle className=\"h-4 w-4 mr-1.5\" />\n          <span className=\"text-sm\">{confirmButtonText}</span>\n        </Button>\n        <Button \n          onClick={onRegenerate} \n          variant=\"outline\" \n          className=\"w-full sm:flex-1 border-gray-300 hover:bg-gray-50 font-medium py-2\"\n        >\n          <Pencil className=\"h-4 w-4 mr-1.5\" />\n          <span className=\"text-sm\">Edit Prompt</span>\n        </Button>\n      </div>\n\n      {hasMultiple && (\n        <div className=\"flex items-start gap-2 p-2 bg-blue-50 border border-blue-200 rounded-md\">\n          <AlertCircle className=\"h-3.5 w-3.5 text-blue-600 mt-0.5 flex-shrink-0\" />\n          <p className=\"text-xs text-blue-900\">\n            Review all entries using navigation. Click \"Confirm\" to add all to the system.\n          </p>\n        </div>\n      )}\n\n      <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete this {entryTypeName}?</AlertDialogTitle>\n            <AlertDialogDescription>\n              This will remove {entryTypeName} #{entryToDelete !== null ? entryToDelete + 1 : ''} from the preview. \n              The remaining entries will still be available to add.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={confirmDelete}\n              className=\"bg-red-600 hover:bg-red-700\"\n            >\n              Delete\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","size_bytes":7493},"client/src/components/admin/EnhancedAIInput.tsx":{"content":"import { Textarea } from \"@/components/ui/textarea\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Sparkles, Mic, MicOff, Loader2, X } from \"lucide-react\";\n\ninterface EnhancedAIInputProps {\n  prompt: string;\n  onPromptChange: (value: string) => void;\n  onGenerate: () => void;\n  isGenerating: boolean;\n  isListening?: boolean;\n  onToggleVoice?: () => void;\n  browserSupported?: boolean;\n  placeholder?: string;\n  examples?: string[];\n  disabled?: boolean;\n  sectionType?: string;\n  onClear?: () => void;\n}\n\nexport function EnhancedAIInput({\n  prompt,\n  onPromptChange,\n  onGenerate,\n  isGenerating,\n  isListening = false,\n  onToggleVoice,\n  browserSupported = false,\n  placeholder = \"Describe what you want to add in natural language...\",\n  examples = [],\n  disabled = false,\n  sectionType = \"entries\",\n  onClear,\n}: EnhancedAIInputProps) {\n  return (\n    <div className=\"space-y-3\">\n      <Card className=\"border border-gray-300 shadow-sm\">\n        <CardContent className=\"pt-4 space-y-3\">\n          <div className=\"bg-blue-50 border border-blue-200 rounded-md p-2.5\">\n            <p className=\"text-xs text-blue-800\">\n              <span className=\"font-semibold\">AI Smart Add:</span> Describe your {sectionType} in plain language. AI will structure it for you.\n            </p>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label className=\"text-sm font-medium text-gray-700\">\n              Describe Your Information\n            </Label>\n            <div className=\"relative\">\n              <Textarea\n                value={prompt}\n                onChange={(e) => onPromptChange(e.target.value)}\n                placeholder={placeholder}\n                rows={5}\n                className=\"pr-20 text-sm resize-none border-2 border-gray-300 focus:border-purple-500 transition-colors\"\n                disabled={disabled || isGenerating}\n              />\n              <div className=\"absolute bottom-2 right-2 flex gap-1\">\n                {prompt && !disabled && !isGenerating && onClear && (\n                  <Button\n                    type=\"button\"\n                    size=\"icon\"\n                    variant=\"ghost\"\n                    className=\"h-8 w-8 hover:bg-gray-100\"\n                    onClick={onClear}\n                    title=\"Clear text\"\n                  >\n                    <X className=\"h-4 w-4 text-gray-600\" />\n                  </Button>\n                )}\n                {browserSupported && onToggleVoice && !disabled && !isGenerating && (\n                  <Button\n                    type=\"button\"\n                    size=\"icon\"\n                    variant={isListening ? \"destructive\" : \"ghost\"}\n                    className=\"h-8 w-8 hover:bg-gray-100\"\n                    onClick={onToggleVoice}\n                    title={isListening ? \"Stop listening\" : \"Voice input\"}\n                  >\n                    {isListening ? (\n                      <MicOff className=\"h-4 w-4\" />\n                    ) : (\n                      <Mic className=\"h-4 w-4 text-gray-600\" />\n                    )}\n                  </Button>\n                )}\n              </div>\n            </div>\n\n            {isListening && (\n              <div className=\"flex items-center gap-2 p-2 bg-green-50 border border-green-200 rounded-md\">\n                <span className=\"relative flex h-2 w-2\">\n                  <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75\"></span>\n                  <span className=\"relative inline-flex rounded-full h-2 w-2 bg-green-500\"></span>\n                </span>\n                <span className=\"text-xs font-medium text-green-700\">\n                  Listening...\n                </span>\n              </div>\n            )}\n\n            {examples.length > 0 && (\n              <details className=\"text-xs text-gray-600\">\n                <summary className=\"cursor-pointer font-medium hover:text-gray-900\">\n                  View examples\n                </summary>\n                <div className=\"mt-2 space-y-1 pl-2\">\n                  {examples.map((example, index) => (\n                    <div key={index} className=\"text-gray-600 italic\">\n                      â€¢ {example}\n                    </div>\n                  ))}\n                </div>\n              </details>\n            )}\n          </div>\n\n          <Button\n            onClick={onGenerate}\n            disabled={isGenerating || !prompt.trim() || disabled}\n            className=\"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-medium py-2 shadow-md\"\n          >\n            {isGenerating ? (\n              <>\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                <span>Processing...</span>\n              </>\n            ) : (\n              <>\n                <Sparkles className=\"mr-2 h-4 w-4\" />\n                <span>Generate with AI</span>\n              </>\n            )}\n          </Button>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":5153},"client/src/components/admin/AIControlPanel.tsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Sparkles,\n  Send,\n  Mic,\n  MicOff,\n  Loader2,\n  Bot,\n  User,\n  CheckCircle,\n  XCircle,\n  AlertCircle,\n  Trash2,\n} from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useVoice } from \"@/hooks/use-voice\";\n\ninterface Message {\n  id: string;\n  role: \"user\" | \"assistant\" | \"system\";\n  content: string;\n  timestamp: Date;\n  status?: \"pending\" | \"success\" | \"error\";\n}\n\ninterface AIControlPanelProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport function AIControlPanel({ isOpen, onClose }: AIControlPanelProps) {\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [input, setInput] = useState(\"\");\n  const [isProcessing, setIsProcessing] = useState(false);\n  const { toast } = useToast();\n  const scrollRef = useRef<HTMLDivElement>(null);\n  const token = localStorage.getItem(\"adminToken\");\n\n  const {\n    isListening,\n    transcript,\n    startListening,\n    stopListening,\n    resetTranscript,\n    browserSupported,\n  } = useVoice();\n\n  useEffect(() => {\n    if (isOpen && messages.length === 0) {\n      setMessages([\n        {\n          id: \"welcome\",\n          role: \"system\",\n          content:\n            \"ðŸ‘‹ à¤¨à¤®à¤¸à¥à¤¤à¥‡! Welcome to Data Query Assistant! à¤®à¥ˆà¤‚ à¤†à¤ªà¤•à¥‡ college data à¤•à¥‡ à¤¬à¤¾à¤°à¥‡ à¤®à¥‡à¤‚ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ à¤¦à¥‡à¤¨à¥‡ à¤®à¥‡à¤‚ à¤®à¤¦à¤¦ à¤•à¤°à¥‚à¤à¤—à¤¾à¥¤\\n\\nðŸ“ **à¤®à¥ˆà¤‚ à¤•à¥à¤¯à¤¾ à¤•à¤° à¤¸à¤•à¤¤à¤¾ à¤¹à¥‚à¤:**\\n\\n**DATA à¤•à¥€ LOCATION à¤¬à¤¤à¤¾à¤¨à¤¾:**\\nâ€¢ \\\"Mr. Ajay Physical department à¤•à¥€ details à¤•à¤¹à¤¾à¤ à¤¹à¥ˆ?\\\"\\nâ€¢ \\\"Library timings à¤•à¤¹à¤¾à¤ add à¤¹à¥ˆà¤‚?\\\"\\nâ€¢ \\\"Staff section à¤®à¥‡à¤‚ à¤•à¤¿à¤¤à¤¨à¥‡ entries à¤¹à¥ˆà¤‚?\\\"\\n\\n**UPDATES à¤•à¥€ INFORMATION:**\\nâ€¢ \\\"Last update à¤•à¥à¤¯à¤¾ à¤¥à¤¾?\\\"\\nâ€¢ \\\"Last 10 days à¤®à¥‡à¤‚ à¤•à¥à¤¯à¤¾ update à¤¹à¥à¤†?\\\"\\nâ€¢ \\\"à¤•à¥Œà¤¨à¤¸à¥€ à¤šà¥€à¤œà¤¼à¥‡à¤‚ à¤¹à¤¾à¤² à¤®à¥‡à¤‚ add à¤¹à¥à¤ˆ?\\\"\\n\\n**GENERAL QUERIES:**\\nâ€¢ \\\"Principal à¤•à¤¾ à¤¨à¤¾à¤® à¤•à¥à¤¯à¤¾ à¤¹à¥ˆ?\\\"\\nâ€¢ \\\"Total courses à¤•à¤¿à¤¤à¤¨à¥‡ à¤¹à¥ˆà¤‚?\\\"\\nâ€¢ \\\"Upcoming events à¤•à¥Œà¤¨à¤¸à¥‡ à¤¹à¥ˆà¤‚?\\\"\\n\\nà¤®à¥à¤à¤¸à¥‡ à¤•à¥à¤› à¤­à¥€ à¤ªà¥‚à¤›à¥‡à¤‚! ðŸ˜Š\",\n          timestamp: new Date(),\n        },\n      ]);\n    }\n  }, [isOpen, messages.length]);\n\n  useEffect(() => {\n    if (transcript && isListening) {\n      setInput(transcript);\n    }\n  }, [transcript, isListening]);\n\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  const handleToggleVoice = () => {\n    if (isListening) {\n      stopListening();\n    } else {\n      resetTranscript();\n      startListening();\n    }\n  };\n\n  const handleSend = async () => {\n    if (!input.trim() || isProcessing) return;\n\n    const userMessage: Message = {\n      id: `user-${Date.now()}`,\n      role: \"user\",\n      content: input.trim(),\n      timestamp: new Date(),\n    };\n\n    setMessages((prev) => [...prev, userMessage]);\n    setInput(\"\");\n    resetTranscript();\n    setIsProcessing(true);\n\n    try {\n      const response = await fetch(\"/api/admin/ai-control\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          message: userMessage.content,\n          conversationHistory: messages\n            .filter((m) => m.role !== \"system\")\n            .map((m) => ({ role: m.role, content: m.content })),\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to process AI command\");\n      }\n\n      const data = await response.json();\n\n      const assistantMessage: Message = {\n        id: `assistant-${Date.now()}`,\n        role: \"assistant\",\n        content: data.response,\n        timestamp: new Date(),\n        status: data.success ? \"success\" : \"error\",\n      };\n\n      setMessages((prev) => [...prev, assistantMessage]);\n    } catch (error: any) {\n      const errorMessage: Message = {\n        id: `error-${Date.now()}`,\n        role: \"assistant\",\n        content: `Sorry, I encountered an error: ${error.message}. Please try again or rephrase your request.`,\n        timestamp: new Date(),\n        status: \"error\",\n      };\n      setMessages((prev) => [...prev, errorMessage]);\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleClearHistory = () => {\n    setMessages([\n      {\n        id: \"welcome\",\n        role: \"system\",\n        content:\n          \"Chat history cleared. How can I help you today?\",\n        timestamp: new Date(),\n      },\n    ]);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  const getStatusIcon = (status?: string) => {\n    switch (status) {\n      case \"success\":\n        return <CheckCircle className=\"h-4 w-4 text-green-600\" />;\n      case \"error\":\n        return <XCircle className=\"h-4 w-4 text-red-600\" />;\n      case \"pending\":\n        return <AlertCircle className=\"h-4 w-4 text-yellow-600\" />;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <>\n      <Dialog open={isOpen} onOpenChange={onClose}>\n        <DialogContent className=\"max-w-4xl h-[85vh] flex flex-col p-0\">\n          <DialogHeader className=\"px-6 pt-6 pb-4 border-b bg-gradient-to-r from-purple-50 to-blue-50\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 bg-gradient-to-br from-purple-500 to-blue-600 rounded-lg\">\n                  <Sparkles className=\"h-6 w-6 text-white\" />\n                </div>\n                <div>\n                  <DialogTitle className=\"text-2xl font-bold\">\n                    Data Query Assistant\n                  </DialogTitle>\n                  <DialogDescription className=\"text-sm mt-1\">\n                    Find and track your college data information\n                  </DialogDescription>\n                </div>\n              </div>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={handleClearHistory}\n                className=\"text-gray-600 hover:text-gray-900\"\n              >\n                <Trash2 className=\"h-4 w-4 mr-2\" />\n                Clear History\n              </Button>\n            </div>\n          </DialogHeader>\n\n          <ScrollArea className=\"flex-1 px-6 py-4\" ref={scrollRef}>\n            <div className=\"space-y-4\">\n              {messages.map((message) => (\n                <div\n                  key={message.id}\n                  className={`flex gap-3 ${\n                    message.role === \"user\" ? \"justify-end\" : \"justify-start\"\n                  }`}\n                >\n                  {message.role !== \"user\" && (\n                    <div className=\"flex-shrink-0\">\n                      <div\n                        className={`p-2 rounded-full ${\n                          message.role === \"system\"\n                            ? \"bg-gray-100\"\n                            : \"bg-gradient-to-br from-purple-500 to-blue-600\"\n                        }`}\n                      >\n                        <Bot className=\"h-5 w-5 text-white\" />\n                      </div>\n                    </div>\n                  )}\n\n                  <div\n                    className={`flex flex-col gap-2 max-w-[75%] ${\n                      message.role === \"user\" ? \"items-end\" : \"items-start\"\n                    }`}\n                  >\n                    <div\n                      className={`rounded-lg px-4 py-3 ${\n                        message.role === \"user\"\n                          ? \"bg-gradient-to-br from-purple-600 to-blue-600 text-white\"\n                          : message.role === \"system\"\n                          ? \"bg-gray-50 text-gray-900 border border-gray-200\"\n                          : \"bg-white text-gray-900 border border-gray-200\"\n                      }`}\n                    >\n                      <p className=\"text-sm whitespace-pre-wrap leading-relaxed\">\n                        {message.content}\n                      </p>\n                      \n                    </div>\n\n                    <div className=\"flex items-center gap-2 px-2\">\n                      {getStatusIcon(message.status)}\n                      <span className=\"text-xs text-gray-500\">\n                        {message.timestamp.toLocaleTimeString([], {\n                          hour: \"2-digit\",\n                          minute: \"2-digit\",\n                        })}\n                      </span>\n                    </div>\n                  </div>\n\n                  {message.role === \"user\" && (\n                    <div className=\"flex-shrink-0\">\n                      <div className=\"p-2 rounded-full bg-gray-700\">\n                        <User className=\"h-5 w-5 text-white\" />\n                      </div>\n                    </div>\n                  )}\n                </div>\n              ))}\n\n              {isProcessing && (\n                <div className=\"flex gap-3 justify-start\">\n                  <div className=\"flex-shrink-0\">\n                    <div className=\"p-2 rounded-full bg-gradient-to-br from-purple-500 to-blue-600\">\n                      <Bot className=\"h-5 w-5 text-white\" />\n                    </div>\n                  </div>\n                  <div className=\"bg-white border border-gray-200 rounded-lg px-4 py-3\">\n                    <div className=\"flex items-center gap-2\">\n                      <Loader2 className=\"h-4 w-4 animate-spin text-purple-600\" />\n                      <span className=\"text-sm text-gray-600\">Processing your request...</span>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </ScrollArea>\n\n          <div className=\"px-6 py-4 border-t bg-gray-50\">\n            <div className=\"flex gap-2\">\n              <div className=\"relative flex-1\">\n                <Textarea\n                  value={input}\n                  onChange={(e) => setInput(e.target.value)}\n                  onKeyDown={handleKeyDown}\n                  placeholder=\"Ask me about your college data... (e.g., 'Where is Mr. Ajay?', 'Library timings kaha hai?', 'Last 10 days ka updates?')\"\n                  rows={2}\n                  className=\"pr-12 resize-none\"\n                  disabled={isProcessing}\n                />\n                {browserSupported && (\n                  <Button\n                    type=\"button\"\n                    size=\"icon\"\n                    variant={isListening ? \"destructive\" : \"ghost\"}\n                    className=\"absolute bottom-2 right-2 h-8 w-8\"\n                    onClick={handleToggleVoice}\n                    disabled={isProcessing}\n                  >\n                    {isListening ? (\n                      <MicOff className=\"h-4 w-4\" />\n                    ) : (\n                      <Mic className=\"h-4 w-4\" />\n                    )}\n                  </Button>\n                )}\n              </div>\n              <Button\n                onClick={handleSend}\n                disabled={!input.trim() || isProcessing}\n                className=\"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700\"\n              >\n                {isProcessing ? (\n                  <Loader2 className=\"h-4 w-4 animate-spin\" />\n                ) : (\n                  <Send className=\"h-4 w-4\" />\n                )}\n              </Button>\n            </div>\n            {isListening && (\n              <div className=\"flex items-center gap-2 mt-2 p-2 bg-green-50 border border-green-200 rounded-md\">\n                <span className=\"relative flex h-2 w-2\">\n                  <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75\"></span>\n                  <span className=\"relative inline-flex rounded-full h-2 w-2 bg-green-500\"></span>\n                </span>\n                <span className=\"text-xs font-medium text-green-700\">\n                  Listening...\n                </span>\n              </div>\n            )}\n          </div>\n        </DialogContent>\n      </Dialog>\n\n    </>\n  );\n}\n","size_bytes":12631},"client/src/components/admin/SmartAIUpdatePreview.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { \n  CheckCircle, \n  AlertCircle,\n  ArrowRight,\n  Sparkles,\n  X,\n} from \"lucide-react\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { useState } from \"react\";\n\ninterface SmartAIUpdatePreviewProps {\n  operation: 'create' | 'update';\n  confidence: number;\n  matched_entry?: any;\n  changes?: Record<string, { old: any; new: any }>;\n  entries?: any[];\n  explanation: string;\n  sectionType: string;\n  onConfirm: () => void;\n  onRegenerate: () => void;\n  onCancel: () => void;\n  renderPreview?: (entry: any) => React.ReactNode;\n}\n\nexport function SmartAIUpdatePreview({\n  operation,\n  confidence,\n  matched_entry,\n  changes = {},\n  entries = [],\n  explanation,\n  sectionType,\n  onConfirm,\n  onRegenerate,\n  onCancel,\n  renderPreview,\n}: SmartAIUpdatePreviewProps) {\n  const [cancelDialogOpen, setCancelDialogOpen] = useState(false);\n\n  const isUpdate = operation === 'update';\n  const changesCount = Object.keys(changes).length;\n\n  // Helper to format field names nicely\n  const formatFieldName = (fieldName: string) => {\n    return fieldName\n      .split('_')\n      .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n      .join(' ');\n  };\n\n  // Helper to render value\n  const renderValue = (value: any) => {\n    if (value === null || value === undefined || value === '') {\n      return <span className=\"text-gray-400 italic\">Empty</span>;\n    }\n    if (typeof value === 'boolean') {\n      return value ? 'Yes' : 'No';\n    }\n    if (typeof value === 'object') {\n      return JSON.stringify(value);\n    }\n    return String(value);\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Header with operation type and confidence */}\n      <div className={`flex items-center justify-between p-3 rounded-md border-2 ${\n        isUpdate \n          ? 'bg-blue-50 border-blue-300' \n          : 'bg-green-50 border-green-300'\n      }`}>\n        <div className=\"flex items-center gap-3\">\n          {isUpdate ? (\n            <AlertCircle className=\"h-5 w-5 text-blue-600\" />\n          ) : (\n            <CheckCircle className=\"h-5 w-5 text-green-600\" />\n          )}\n          <div>\n            <div className=\"flex items-center gap-2\">\n              <span className={`font-semibold ${\n                isUpdate ? 'text-blue-900' : 'text-green-900'\n              }`}>\n                {isUpdate ? 'UPDATE Operation Detected' : 'CREATE Operation Detected'}\n              </span>\n              <Badge variant={confidence >= 85 ? 'default' : 'secondary'}>\n                {confidence}% confident\n              </Badge>\n            </div>\n            <p className={`text-sm mt-1 ${\n              isUpdate ? 'text-blue-700' : 'text-green-700'\n            }`}>\n              {explanation}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* UPDATE Preview - Show changes with before/after */}\n      {isUpdate && matched_entry && (\n        <Card className=\"border-2 border-blue-200\">\n          <CardHeader className=\"bg-blue-50\">\n            <CardTitle className=\"text-lg flex items-center gap-2\">\n              <Sparkles className=\"h-5 w-5 text-blue-600\" />\n              Changes Preview ({changesCount} field{changesCount > 1 ? 's' : ''} to update)\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"pt-4 space-y-4\">\n            {/* Show matched entry info */}\n            <div className=\"bg-gray-50 p-3 rounded-md border border-gray-200\">\n              <p className=\"text-sm font-semibold text-gray-700 mb-2\">\n                Matched Entry:\n              </p>\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm\">\n                {/* Display the value object fields for college_settings or direct fields for other tables */}\n                {matched_entry.value ? (\n                  // For college_settings with JSONB value field\n                  Object.entries(matched_entry.value)\n                    .filter(([key]) => key === 'title' || key === 'content' || key === 'category')\n                    .map(([key, value]) => (\n                      <div key={key} className={key === 'content' ? 'col-span-2' : ''}>\n                        <span className=\"font-medium text-gray-600\">{formatFieldName(key)}:</span>{' '}\n                        <span className=\"text-gray-900\">{renderValue(value)}</span>\n                      </div>\n                    ))\n                ) : (\n                  // For other tables with direct fields\n                  Object.entries(matched_entry)\n                    .filter(([key]) => !key.includes('id') && !key.includes('created') && !key.includes('updated') && !key.includes('key'))\n                    .slice(0, 4)\n                    .map(([key, value]) => (\n                      <div key={key}>\n                        <span className=\"font-medium text-gray-600\">{formatFieldName(key)}:</span>{' '}\n                        <span className=\"text-gray-900\">{renderValue(value)}</span>\n                      </div>\n                    ))\n                )}\n              </div>\n            </div>\n\n            {/* Show changes with before/after comparison */}\n            <div className=\"space-y-3\">\n              <p className=\"text-sm font-semibold text-gray-700\">\n                Changes to Apply:\n              </p>\n              {Object.entries(changes).map(([fieldName, change]) => (\n                <div \n                  key={fieldName}\n                  className=\"border border-gray-300 rounded-lg p-3 bg-white\"\n                >\n                  <p className=\"text-sm font-semibold text-gray-700 mb-2\">\n                    {formatFieldName(fieldName)}\n                  </p>\n                  <div className=\"flex items-center gap-3\">\n                    {/* Before */}\n                    <div className=\"flex-1 bg-red-50 border border-red-200 rounded p-2\">\n                      <p className=\"text-xs text-red-600 font-medium mb-1\">Before</p>\n                      <p className=\"text-sm text-red-900 break-words\">\n                        {renderValue(change.old)}\n                      </p>\n                    </div>\n\n                    {/* Arrow */}\n                    <ArrowRight className=\"h-5 w-5 text-gray-400 flex-shrink-0\" />\n\n                    {/* After */}\n                    <div className=\"flex-1 bg-green-50 border border-green-200 rounded p-2\">\n                      <p className=\"text-xs text-green-600 font-medium mb-1\">After</p>\n                      <p className=\"text-sm text-green-900 break-words font-semibold\">\n                        {renderValue(change.new)}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* CREATE Preview - Show new entries */}\n      {!isUpdate && entries.length > 0 && (\n        <Card className=\"border-2 border-green-200\">\n          <CardHeader className=\"bg-green-50\">\n            <CardTitle className=\"text-lg flex items-center gap-2\">\n              <CheckCircle className=\"h-5 w-5 text-green-600\" />\n              New {entries.length > 1 ? 'Entries' : 'Entry'} to Add ({entries.length})\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"pt-4\">\n            {renderPreview ? (\n              <div className=\"space-y-3\">\n                {entries.map((entry, index) => (\n                  <div key={index} className=\"border border-gray-200 rounded-lg p-3 bg-gray-50\">\n                    {renderPreview(entry)}\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <pre className=\"text-sm bg-gray-100 p-3 rounded overflow-auto\">\n                {JSON.stringify(entries, null, 2)}\n              </pre>\n            )}\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Action buttons */}\n      <div className=\"flex items-center justify-between gap-3 pt-2\">\n        <Button\n          variant=\"outline\"\n          onClick={() => setCancelDialogOpen(true)}\n          className=\"flex items-center gap-2\"\n        >\n          <X className=\"h-4 w-4\" />\n          Cancel\n        </Button>\n\n        <div className=\"flex gap-3\">\n          <Button\n            variant=\"outline\"\n            onClick={onRegenerate}\n            className=\"flex items-center gap-2\"\n          >\n            <Sparkles className=\"h-4 w-4\" />\n            Regenerate\n          </Button>\n\n          <Button\n            onClick={onConfirm}\n            className={`flex items-center gap-2 ${\n              isUpdate \n                ? 'bg-blue-600 hover:bg-blue-700' \n                : 'bg-green-600 hover:bg-green-700'\n            }`}\n          >\n            <CheckCircle className=\"h-4 w-4\" />\n            {isUpdate ? `Apply ${changesCount} Change${changesCount > 1 ? 's' : ''}` : `Add ${entries.length} Entr${entries.length > 1 ? 'ies' : 'y'}`}\n          </Button>\n        </div>\n      </div>\n\n      {/* Cancel confirmation dialog */}\n      <AlertDialog open={cancelDialogOpen} onOpenChange={setCancelDialogOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Cancel Operation?</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to cancel this {isUpdate ? 'update' : 'creation'} operation? \n              All changes will be discarded.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>No, Continue</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={onCancel}\n              className=\"bg-red-600 hover:bg-red-700\"\n            >\n              Yes, Cancel\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","size_bytes":10104},"client/src/components/admin/general-info-sections/BasicDetailsSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { Save, Edit, MapPin, Phone, Mail, Globe, Clock, Building2, Award } from \"lucide-react\";\n\ninterface BasicDetailsSectionProps {\n  data: any;\n  onUpdate: () => void;\n}\n\nexport function BasicDetailsSection({ data, onUpdate }: BasicDetailsSectionProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const token = localStorage.getItem(\"adminToken\");\n  \n  const [formData, setFormData] = useState({\n    // Part 1: Basic College Details - COMPLETE DATA\n    college_full_name: \"Radha Krishan Sanatan Dharm (PG) College, Kaithal\",\n    college_short_name: \"RKSD (PG) College\",\n    college_code: \"\",\n    motto: \"Learning Today, Leading Tomorrow\",\n    mission_statement: \"To impart education with a futuristic vision; to improve quality of lives through education; to facilitate transition towards a digital society; to strengthen interface with dynamics of agriculture, industry and emerging needs of community.\",\n    established_year: \"1954\",\n    college_type: \"Private and Government-Aided (Managed by Rashtriya Vidya Samiti (Regd.), Kaithal)\",\n    affiliated_university: \"Kurukshetra University, Kurukshetra\",\n    accreditation_naac: \"NAAC: Accredited with 'A' Grade in session 2016-17\",\n    accreditation_ugc: \"UGC: Recognized under Sections 2(f) & 12(b) of UGC Act\",\n    principal_name: \"Dr. Rajbir Parashar\",\n    principal_tenure_start: \"2025-08-01\",\n    principal_predecessor: \"Dr. Satyabir Singh Mehla\",\n    logo_description: \"Shield emblem depicting a lotus, a lamp (diya), books, and a rising sun, encircled by the words 'Radha Krishan Sanatan Dharm College, Kaithal.'\",\n    \n    // Part 2: Address & Contact Information - COMPLETE DATA\n    address_full: \"Ambala Road, Chiranjeev Colony, Kaithal, Haryana, 136027, India\",\n    google_map_link: \"\",\n    phone_office: \"01746-222368\",\n    phone_helpdesk: \"9812018462\",\n    phone_alternate: \"\",\n    email_general: \"principal@rksdcollege.ac.in\",\n    email_principal: \"principal@rksdcollege.ac.in\",\n    email_alternate: \"rksdcollegektl@yahoo.com\",\n    email_evening_college: \"rksdeveningcollege@gmail.com\",\n    website_url: \"https://rksdcollege.ac.in/\",\n    office_timings: \"09:00 AM â€“ 05:00 PM (Mon-Sat)\",\n  });\n\n  const [isEditing, setIsEditing] = useState(false);\n\n  const { data: basicDetails } = useQuery({\n    queryKey: [\"/api/admin/general-info/basic-details\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info/basic-details\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (basicDetails) {\n      setFormData({\n        college_full_name: basicDetails.college_full_name || \"Radha Krishan Sanatan Dharm (PG) College, Kaithal\",\n        college_short_name: basicDetails.college_short_name || \"RKSD (PG) College\",\n        college_code: basicDetails.college_code || \"\",\n        motto: basicDetails.motto || \"Learning Today, Leading Tomorrow\",\n        mission_statement: basicDetails.mission_statement || \"To impart education with a futuristic vision; to improve quality of lives through education; to facilitate transition towards a digital society; to strengthen interface with dynamics of agriculture, industry and emerging needs of community.\",\n        established_year: basicDetails.established_year || \"1954\",\n        college_type: basicDetails.college_type || \"Private and Government-Aided (Managed by Rashtriya Vidya Samiti (Regd.), Kaithal)\",\n        affiliated_university: basicDetails.affiliated_university || \"Kurukshetra University, Kurukshetra\",\n        accreditation_naac: basicDetails.accreditation_naac || \"NAAC: Accredited with 'A' Grade in session 2016-17\",\n        accreditation_ugc: basicDetails.accreditation_ugc || \"UGC: Recognized under Sections 2(f) & 12(b) of UGC Act\",\n        principal_name: basicDetails.principal_name || \"Dr. Rajbir Parashar\",\n        principal_tenure_start: basicDetails.principal_tenure_start || \"2025-08-01\",\n        principal_predecessor: basicDetails.principal_predecessor || \"Dr. Satyabir Singh Mehla\",\n        logo_description: basicDetails.logo_description || \"Shield emblem depicting a lotus, a lamp (diya), books, and a rising sun, encircled by the words 'Radha Krishan Sanatan Dharm College, Kaithal.'\",\n        address_full: basicDetails.address_full || \"Ambala Road, Chiranjeev Colony, Kaithal, Haryana, 136027, India\",\n        google_map_link: basicDetails.google_map_link || \"\",\n        phone_office: basicDetails.phone_office || \"01746-222368\",\n        phone_helpdesk: basicDetails.phone_helpdesk || \"9812018462\",\n        phone_alternate: basicDetails.phone_alternate || \"\",\n        email_general: basicDetails.email_general || \"principal@rksdcollege.ac.in\",\n        email_principal: basicDetails.email_principal || \"principal@rksdcollege.ac.in\",\n        email_alternate: basicDetails.email_alternate || \"rksdcollegektl@yahoo.com\",\n        email_evening_college: basicDetails.email_evening_college || \"rksdeveningcollege@gmail.com\",\n        website_url: basicDetails.website_url || \"https://rksdcollege.ac.in/\",\n        office_timings: basicDetails.office_timings || \"09:00 AM â€“ 05:00 PM (Mon-Sat)\",\n      });\n    }\n  }, [basicDetails]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(\"/api/admin/general-info/basic-details\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"Basic details updated successfully\" });\n      setIsEditing(false);\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/general-info/basic-details\"] });\n      onUpdate();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate(formData);\n  };\n\n  const handleChange = (field: string, value: string) => {\n    setFormData((prev) => ({ ...prev, [field]: value }));\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">Complete College Information</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">All fundamental details about the institution</p>\n        </div>\n        {!isEditing ? (\n          <Button onClick={() => setIsEditing(true)} variant=\"outline\">\n            <Edit className=\"h-4 w-4 mr-2\" />\n            Edit\n          </Button>\n        ) : (\n          <div className=\"flex gap-2\">\n            <Button onClick={() => setIsEditing(false)} variant=\"outline\">\n              Cancel\n            </Button>\n            <Button onClick={handleSave} disabled={saveMutation.isPending}>\n              <Save className=\"h-4 w-4 mr-2\" />\n              {saveMutation.isPending ? \"Saving...\" : \"Save All Changes\"}\n            </Button>\n          </div>\n        )}\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {/* Part 1: Basic College Details */}\n        <Card className=\"md:col-span-2\">\n          <CardHeader className=\"pb-4\">\n            <CardTitle className=\"text-base flex items-center gap-2\">\n              <Building2 className=\"h-4 w-4\" />\n              Part 1: Basic College Details\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"college_full_name\">College Full Name *</Label>\n              <Input\n                id=\"college_full_name\"\n                value={formData.college_full_name}\n                onChange={(e) => handleChange(\"college_full_name\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"Radha Krishan Sanatan Dharm (PG) College, Kaithal\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"college_short_name\">Short Name / Code</Label>\n              <Input\n                id=\"college_short_name\"\n                value={formData.college_short_name}\n                onChange={(e) => handleChange(\"college_short_name\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"RKSD (PG) College\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"college_code\">College Code / ID</Label>\n              <Input\n                id=\"college_code\"\n                value={formData.college_code}\n                onChange={(e) => handleChange(\"college_code\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"Internal administrative number\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"established_year\">Established Year *</Label>\n              <Input\n                id=\"established_year\"\n                type=\"number\"\n                value={formData.established_year}\n                onChange={(e) => handleChange(\"established_year\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"1954\"\n              />\n            </div>\n\n            <div className=\"space-y-2 md:col-span-2\">\n              <Label htmlFor=\"motto\">Motto / Tagline</Label>\n              <Input\n                id=\"motto\"\n                value={formData.motto}\n                onChange={(e) => handleChange(\"motto\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"Learning Today, Leading Tomorrow\"\n              />\n            </div>\n\n            <div className=\"space-y-2 md:col-span-2\">\n              <Label htmlFor=\"mission_statement\">Mission Statement *</Label>\n              <Textarea\n                id=\"mission_statement\"\n                value={formData.mission_statement}\n                onChange={(e) => handleChange(\"mission_statement\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"To impart education with a futuristic vision...\"\n                rows={4}\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"college_type\">College Type *</Label>\n              <Input\n                id=\"college_type\"\n                value={formData.college_type}\n                onChange={(e) => handleChange(\"college_type\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"Government / Private / Autonomous / Government-Aided\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"affiliated_university\">Affiliated University *</Label>\n              <Input\n                id=\"affiliated_university\"\n                value={formData.affiliated_university}\n                onChange={(e) => handleChange(\"affiliated_university\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"Kurukshetra University, Kurukshetra\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"accreditation_naac\">NAAC Accreditation</Label>\n              <Input\n                id=\"accreditation_naac\"\n                value={formData.accreditation_naac}\n                onChange={(e) => handleChange(\"accreditation_naac\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"Accredited with 'A' Grade in session 2016-17\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"accreditation_ugc\">UGC Recognition</Label>\n              <Input\n                id=\"accreditation_ugc\"\n                value={formData.accreditation_ugc}\n                onChange={(e) => handleChange(\"accreditation_ugc\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"Recognized under Sections 2(f) & 12(b) of UGC Act\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"principal_name\">Current Principal Name *</Label>\n              <Input\n                id=\"principal_name\"\n                value={formData.principal_name}\n                onChange={(e) => handleChange(\"principal_name\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"Dr. Rajbir Parashar\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"principal_tenure_start\">Principal Tenure Start Date</Label>\n              <Input\n                id=\"principal_tenure_start\"\n                type=\"date\"\n                value={formData.principal_tenure_start}\n                onChange={(e) => handleChange(\"principal_tenure_start\", e.target.value)}\n                disabled={!isEditing}\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"principal_predecessor\">Previous Principal</Label>\n              <Input\n                id=\"principal_predecessor\"\n                value={formData.principal_predecessor}\n                onChange={(e) => handleChange(\"principal_predecessor\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"Dr. Satyabir Singh Mehla\"\n              />\n            </div>\n\n            <div className=\"space-y-2 md:col-span-2\">\n              <Label htmlFor=\"logo_description\">Official Logo / Emblem Description</Label>\n              <Textarea\n                id=\"logo_description\"\n                value={formData.logo_description}\n                onChange={(e) => handleChange(\"logo_description\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"Shield emblem depicting a lotus, a lamp (diya), books, and a rising sun...\"\n                rows={3}\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Part 2: Address & Contact Information */}\n        <Card className=\"md:col-span-2\">\n          <CardHeader className=\"pb-4\">\n            <CardTitle className=\"text-base flex items-center gap-2\">\n              <MapPin className=\"h-4 w-4\" />\n              Part 2: Address & Contact Information\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2 md:col-span-2\">\n              <Label htmlFor=\"address_full\">Full Address *</Label>\n              <Textarea\n                id=\"address_full\"\n                value={formData.address_full}\n                onChange={(e) => handleChange(\"address_full\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"Ambala Road, Chiranjeev Colony, Kaithal, Haryana, 136027, India\"\n                rows={3}\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"phone_office\">Phone - Office / Main *</Label>\n              <div className=\"relative\">\n                <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                <Input\n                  id=\"phone_office\"\n                  value={formData.phone_office}\n                  onChange={(e) => handleChange(\"phone_office\", e.target.value)}\n                  disabled={!isEditing}\n                  className=\"pl-10\"\n                  placeholder=\"01746-222368\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"phone_helpdesk\">Phone - Helpdesk / Admission</Label>\n              <div className=\"relative\">\n                <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                <Input\n                  id=\"phone_helpdesk\"\n                  value={formData.phone_helpdesk}\n                  onChange={(e) => handleChange(\"phone_helpdesk\", e.target.value)}\n                  disabled={!isEditing}\n                  className=\"pl-10\"\n                  placeholder=\"9812018462\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"phone_alternate\">Phone - Alternate</Label>\n              <div className=\"relative\">\n                <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                <Input\n                  id=\"phone_alternate\"\n                  value={formData.phone_alternate}\n                  onChange={(e) => handleChange(\"phone_alternate\", e.target.value)}\n                  disabled={!isEditing}\n                  className=\"pl-10\"\n                  placeholder=\"Additional phone number\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email_general\">Email - General / Office *</Label>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                <Input\n                  id=\"email_general\"\n                  type=\"email\"\n                  value={formData.email_general}\n                  onChange={(e) => handleChange(\"email_general\", e.target.value)}\n                  disabled={!isEditing}\n                  className=\"pl-10\"\n                  placeholder=\"principal@rksdcollege.ac.in\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email_principal\">Email - Principal</Label>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                <Input\n                  id=\"email_principal\"\n                  type=\"email\"\n                  value={formData.email_principal}\n                  onChange={(e) => handleChange(\"email_principal\", e.target.value)}\n                  disabled={!isEditing}\n                  className=\"pl-10\"\n                  placeholder=\"principal@rksdcollege.ac.in\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email_alternate\">Email - Alternate</Label>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                <Input\n                  id=\"email_alternate\"\n                  type=\"email\"\n                  value={formData.email_alternate}\n                  onChange={(e) => handleChange(\"email_alternate\", e.target.value)}\n                  disabled={!isEditing}\n                  className=\"pl-10\"\n                  placeholder=\"rksdcollegektl@yahoo.com\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email_evening_college\">Email - Evening College</Label>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                <Input\n                  id=\"email_evening_college\"\n                  type=\"email\"\n                  value={formData.email_evening_college}\n                  onChange={(e) => handleChange(\"email_evening_college\", e.target.value)}\n                  disabled={!isEditing}\n                  className=\"pl-10\"\n                  placeholder=\"rksdeveningcollege@gmail.com\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"website_url\">Official Website</Label>\n              <div className=\"relative\">\n                <Globe className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                <Input\n                  id=\"website_url\"\n                  value={formData.website_url}\n                  onChange={(e) => handleChange(\"website_url\", e.target.value)}\n                  disabled={!isEditing}\n                  className=\"pl-10\"\n                  placeholder=\"https://rksdcollege.ac.in/\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"office_timings\">Office Timings</Label>\n              <div className=\"relative\">\n                <Clock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                <Input\n                  id=\"office_timings\"\n                  value={formData.office_timings}\n                  onChange={(e) => handleChange(\"office_timings\", e.target.value)}\n                  disabled={!isEditing}\n                  className=\"pl-10\"\n                  placeholder=\"09:00 AM â€“ 05:00 PM (Mon-Sat)\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2 md:col-span-2\">\n              <Label htmlFor=\"google_map_link\">Google Map Embed Link</Label>\n              <Input\n                id=\"google_map_link\"\n                value={formData.google_map_link}\n                onChange={(e) => handleChange(\"google_map_link\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"Paste Google Maps embed iframe src URL\"\n              />\n              <p className=\"text-xs text-gray-500\">\n                To get embed link: Open Google Maps â†’ Search your college â†’ Click \"Share\" â†’ Click \"Embed a map\" â†’ Copy the iframe src URL\n              </p>\n            </div>\n            \n            {formData.google_map_link && (\n              <div className=\"md:col-span-2\">\n                <div className=\"aspect-video w-full rounded-lg overflow-hidden border\">\n                  <iframe\n                    src={formData.google_map_link}\n                    width=\"100%\"\n                    height=\"100%\"\n                    style={{ border: 0 }}\n                    allowFullScreen\n                    loading=\"lazy\"\n                    referrerPolicy=\"no-referrer-when-downgrade\"\n                  />\n                </div>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      {basicDetails && (\n        <div className=\"text-xs text-gray-500 text-right\">\n          Last updated: {new Date(basicDetails.updated_at || Date.now()).toLocaleString()}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":22972},"client/src/components/admin/general-info-sections/HistoryOverviewSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { Save, Edit, Plus, Trash2, Award } from \"lucide-react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\n\ninterface HistoryOverviewSectionProps {\n  data: any;\n  onUpdate: () => void;\n}\n\ninterface Achievement {\n  id: string;\n  year: string;\n  title: string;\n  description: string;\n}\n\nexport function HistoryOverviewSection({ data, onUpdate }: HistoryOverviewSectionProps) {\n  const { toast } = useToast();\n  const token = localStorage.getItem(\"adminToken\");\n  \n  const [formData, setFormData] = useState({\n    short_overview: \"\",\n    detailed_history: \"\",\n    founder_name: \"\",\n    founder_bio: \"\",\n    founder_image_url: \"\",\n  });\n\n  const [achievements, setAchievements] = useState<Achievement[]>([]);\n  const [newAchievement, setNewAchievement] = useState({ year: \"\", title: \"\", description: \"\" });\n  const [isEditing, setIsEditing] = useState(false);\n  const [isAddingAchievement, setIsAddingAchievement] = useState(false);\n\n  const { data: historyData } = useQuery({\n    queryKey: [\"/api/admin/general-info/history-overview\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info/history-overview\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (historyData) {\n      setFormData({\n        short_overview: historyData.short_overview || \"\",\n        detailed_history: historyData.detailed_history || \"\",\n        founder_name: historyData.founder_name || \"\",\n        founder_bio: historyData.founder_bio || \"\",\n        founder_image_url: historyData.founder_image_url || \"\",\n      });\n      setAchievements(historyData.achievements || []);\n    }\n  }, [historyData]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(\"/api/admin/general-info/history-overview\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"History & overview updated successfully\" });\n      setIsEditing(false);\n      onUpdate();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate({ ...formData, achievements });\n  };\n\n  const handleAddAchievement = () => {\n    if (!newAchievement.year || !newAchievement.title) {\n      toast({ title: \"Error\", description: \"Year and title are required\", variant: \"destructive\" });\n      return;\n    }\n    const achievement: Achievement = {\n      id: Date.now().toString(),\n      ...newAchievement,\n    };\n    setAchievements([...achievements, achievement]);\n    setNewAchievement({ year: \"\", title: \"\", description: \"\" });\n    setIsAddingAchievement(false);\n    toast({ title: \"Success\", description: \"Achievement added\" });\n  };\n\n  const handleDeleteAchievement = (id: string) => {\n    setAchievements(achievements.filter((a) => a.id !== id));\n    toast({ title: \"Success\", description: \"Achievement removed\" });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">College History & Overview</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">Institution's legacy, founders, and achievements</p>\n        </div>\n        {!isEditing ? (\n          <Button onClick={() => setIsEditing(true)} variant=\"outline\">\n            <Edit className=\"h-4 w-4 mr-2\" />\n            Edit\n          </Button>\n        ) : (\n          <div className=\"flex gap-2\">\n            <Button onClick={() => setIsEditing(false)} variant=\"outline\">\n              Cancel\n            </Button>\n            <Button onClick={handleSave} disabled={saveMutation.isPending}>\n              <Save className=\"h-4 w-4 mr-2\" />\n              {saveMutation.isPending ? \"Saving...\" : \"Save\"}\n            </Button>\n          </div>\n        )}\n      </div>\n\n      <div className=\"grid grid-cols-1 gap-6\">\n        <Card>\n          <CardHeader className=\"pb-4\">\n            <CardTitle className=\"text-base\">Overview & Introduction</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"short_overview\">Short Overview / Introduction *</Label>\n              <Textarea\n                id=\"short_overview\"\n                value={formData.short_overview}\n                onChange={(e) => setFormData({ ...formData, short_overview: e.target.value })}\n                disabled={!isEditing}\n                placeholder=\"Brief introduction about the college (2-3 sentences)\"\n                rows={3}\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"detailed_history\">Detailed History *</Label>\n              <Textarea\n                id=\"detailed_history\"\n                value={formData.detailed_history}\n                onChange={(e) => setFormData({ ...formData, detailed_history: e.target.value })}\n                disabled={!isEditing}\n                placeholder=\"Complete history of the college, including major milestones, developments over the years...\"\n                rows={8}\n                className=\"font-mono text-sm\"\n              />\n              <p className=\"text-xs text-gray-500\">You can use markdown formatting for better presentation</p>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-4\">\n            <CardTitle className=\"text-base\">Founder's Information</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"founder_name\">Founder's Name</Label>\n                <Input\n                  id=\"founder_name\"\n                  value={formData.founder_name}\n                  onChange={(e) => setFormData({ ...formData, founder_name: e.target.value })}\n                  disabled={!isEditing}\n                  placeholder=\"Name of the founder\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"founder_image_url\">Founder's Image URL</Label>\n                <Input\n                  id=\"founder_image_url\"\n                  value={formData.founder_image_url}\n                  onChange={(e) => setFormData({ ...formData, founder_image_url: e.target.value })}\n                  disabled={!isEditing}\n                  placeholder=\"URL to founder's photo\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"founder_bio\">Founder's Biography</Label>\n              <Textarea\n                id=\"founder_bio\"\n                value={formData.founder_bio}\n                onChange={(e) => setFormData({ ...formData, founder_bio: e.target.value })}\n                disabled={!isEditing}\n                placeholder=\"Brief biography of the founder...\"\n                rows={4}\n              />\n            </div>\n\n            {formData.founder_image_url && (\n              <div className=\"flex justify-center\">\n                <img\n                  src={formData.founder_image_url}\n                  alt=\"Founder\"\n                  className=\"w-32 h-32 object-cover rounded-lg border-2\"\n                  onError={(e) => {\n                    e.currentTarget.src = \"https://via.placeholder.com/150?text=No+Image\";\n                  }}\n                />\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-4 flex flex-row items-center justify-between\">\n            <CardTitle className=\"text-base flex items-center gap-2\">\n              <Award className=\"h-4 w-4\" />\n              Important Achievements & Milestones\n            </CardTitle>\n            {isEditing && (\n              <Dialog open={isAddingAchievement} onOpenChange={setIsAddingAchievement}>\n                <DialogTrigger asChild>\n                  <Button size=\"sm\" variant=\"outline\">\n                    <Plus className=\"h-4 w-4 mr-1\" />\n                    Add\n                  </Button>\n                </DialogTrigger>\n                <DialogContent>\n                  <DialogHeader>\n                    <DialogTitle>Add Achievement / Milestone</DialogTitle>\n                  </DialogHeader>\n                  <div className=\"space-y-4 mt-4\">\n                    <div className=\"space-y-2\">\n                      <Label>Year *</Label>\n                      <Input\n                        value={newAchievement.year}\n                        onChange={(e) => setNewAchievement({ ...newAchievement, year: e.target.value })}\n                        placeholder=\"e.g., 2020\"\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label>Title *</Label>\n                      <Input\n                        value={newAchievement.title}\n                        onChange={(e) => setNewAchievement({ ...newAchievement, title: e.target.value })}\n                        placeholder=\"e.g., NAAC A+ Accreditation\"\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label>Description</Label>\n                      <Textarea\n                        value={newAchievement.description}\n                        onChange={(e) => setNewAchievement({ ...newAchievement, description: e.target.value })}\n                        placeholder=\"Brief description...\"\n                        rows={3}\n                      />\n                    </div>\n                    <Button onClick={handleAddAchievement} className=\"w-full\">\n                      Add Achievement\n                    </Button>\n                  </div>\n                </DialogContent>\n              </Dialog>\n            )}\n          </CardHeader>\n          <CardContent>\n            {achievements.length > 0 ? (\n              <div className=\"space-y-3\">\n                {achievements.map((achievement) => (\n                  <div key={achievement.id} className=\"border rounded-lg p-4 hover:bg-gray-50 transition-colors\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <span className=\"font-semibold text-blue-600\">{achievement.year}</span>\n                          <span className=\"text-gray-400\">â€¢</span>\n                          <span className=\"font-medium text-gray-900\">{achievement.title}</span>\n                        </div>\n                        {achievement.description && (\n                          <p className=\"text-sm text-gray-600\">{achievement.description}</p>\n                        )}\n                      </div>\n                      {isEditing && (\n                        <Button\n                          size=\"sm\"\n                          variant=\"ghost\"\n                          onClick={() => handleDeleteAchievement(achievement.id)}\n                          className=\"text-red-600 hover:text-red-700 hover:bg-red-50\"\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-8 text-gray-500\">\n                <Award className=\"h-12 w-12 mx-auto mb-2 text-gray-400\" />\n                <p className=\"text-sm\">No achievements added yet</p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      {historyData && (\n        <div className=\"text-xs text-gray-500 text-right\">\n          Last updated: {new Date(historyData.updated_at || Date.now()).toLocaleString()}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":12818},"client/src/components/admin/general-info-sections/AdmissionScholarshipSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { Save, Edit, Plus, Trash2, Award, FileText, Calendar } from \"lucide-react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger, DialogDescription } from \"@/components/ui/dialog\";\n\ninterface AdmissionScholarshipSectionProps {\n  data: any;\n  onUpdate: () => void;\n}\n\ninterface Scholarship {\n  id: string;\n  name: string;\n  description: string;\n  eligibility: string;\n  amount: string;\n}\n\nexport function AdmissionScholarshipSection({ data, onUpdate }: AdmissionScholarshipSectionProps) {\n  const { toast } = useToast();\n  const token = localStorage.getItem(\"adminToken\");\n  \n  const [formData, setFormData] = useState({\n    admission_process: \"\",\n    required_documents: \"\",\n    eligibility_criteria: \"\",\n    admission_start_date: \"\",\n    admission_end_date: \"\",\n    counselling_date: \"\",\n    fee_structure_pdf_url: \"\",\n  });\n\n  const [scholarships, setScholarships] = useState<Scholarship[]>([]);\n  const [newScholarship, setNewScholarship] = useState({ name: \"\", description: \"\", eligibility: \"\", amount: \"\" });\n  const [editingScholarship, setEditingScholarship] = useState<Scholarship | null>(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const [isAddingScholarship, setIsAddingScholarship] = useState(false);\n\n  const { data: admissionData } = useQuery({\n    queryKey: [\"/api/admin/general-info/admission-scholarship\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info/admission-scholarship\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (admissionData) {\n      setFormData({\n        admission_process: admissionData.admission_process || \"\",\n        required_documents: admissionData.required_documents || \"\",\n        eligibility_criteria: admissionData.eligibility_criteria || \"\",\n        admission_start_date: admissionData.admission_start_date || \"\",\n        admission_end_date: admissionData.admission_end_date || \"\",\n        counselling_date: admissionData.counselling_date || \"\",\n        fee_structure_pdf_url: admissionData.fee_structure_pdf_url || \"\",\n      });\n      setScholarships(admissionData.scholarships || []);\n    }\n  }, [admissionData]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(\"/api/admin/general-info/admission-scholarship\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"Admission & scholarship info updated successfully\" });\n      setIsEditing(false);\n      onUpdate();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate({ ...formData, scholarships });\n  };\n\n  const handleAddScholarship = () => {\n    if (!newScholarship.name || !newScholarship.description) {\n      toast({ title: \"Error\", description: \"Name and description are required\", variant: \"destructive\" });\n      return;\n    }\n    const scholarship: Scholarship = {\n      id: Date.now().toString(),\n      ...newScholarship,\n    };\n    setScholarships([...scholarships, scholarship]);\n    setNewScholarship({ name: \"\", description: \"\", eligibility: \"\", amount: \"\" });\n    setIsAddingScholarship(false);\n    toast({ title: \"Success\", description: \"Scholarship added\" });\n  };\n\n  const handleUpdateScholarship = () => {\n    if (!editingScholarship) return;\n    setScholarships(scholarships.map((s) => (s.id === editingScholarship.id ? editingScholarship : s)));\n    setEditingScholarship(null);\n    toast({ title: \"Success\", description: \"Scholarship updated\" });\n  };\n\n  const handleDeleteScholarship = (id: string) => {\n    setScholarships(scholarships.filter((s) => s.id !== id));\n    toast({ title: \"Success\", description: \"Scholarship removed\" });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">Admission & Scholarship</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">Manage admission process and scholarship programs</p>\n        </div>\n        {!isEditing ? (\n          <Button onClick={() => setIsEditing(true)} variant=\"outline\">\n            <Edit className=\"h-4 w-4 mr-2\" />\n            Edit\n          </Button>\n        ) : (\n          <div className=\"flex gap-2\">\n            <Button onClick={() => setIsEditing(false)} variant=\"outline\">\n              Cancel\n            </Button>\n            <Button onClick={handleSave} disabled={saveMutation.isPending}>\n              <Save className=\"h-4 w-4 mr-2\" />\n              {saveMutation.isPending ? \"Saving...\" : \"Save All\"}\n            </Button>\n          </div>\n        )}\n      </div>\n\n      <div className=\"grid grid-cols-1 gap-6\">\n        <Card>\n          <CardHeader className=\"pb-4\">\n            <CardTitle className=\"text-base\">Admission Process</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"admission_process\">Admission Process Overview *</Label>\n              <Textarea\n                id=\"admission_process\"\n                value={formData.admission_process}\n                onChange={(e) => setFormData({ ...formData, admission_process: e.target.value })}\n                disabled={!isEditing}\n                placeholder=\"Describe the admission process step by step...\"\n                rows={5}\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"required_documents\">Required Documents *</Label>\n              <Textarea\n                id=\"required_documents\"\n                value={formData.required_documents}\n                onChange={(e) => setFormData({ ...formData, required_documents: e.target.value })}\n                disabled={!isEditing}\n                placeholder=\"List all required documents (one per line or comma separated)...\"\n                rows={4}\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"eligibility_criteria\">Eligibility Criteria *</Label>\n              <Textarea\n                id=\"eligibility_criteria\"\n                value={formData.eligibility_criteria}\n                onChange={(e) => setFormData({ ...formData, eligibility_criteria: e.target.value })}\n                disabled={!isEditing}\n                placeholder=\"Describe eligibility requirements for admission...\"\n                rows={4}\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-4\">\n            <CardTitle className=\"text-base flex items-center gap-2\">\n              <Calendar className=\"h-4 w-4\" />\n              Important Dates\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"admission_start_date\">Admission Start Date</Label>\n                <Input\n                  id=\"admission_start_date\"\n                  type=\"date\"\n                  value={formData.admission_start_date}\n                  onChange={(e) => setFormData({ ...formData, admission_start_date: e.target.value })}\n                  disabled={!isEditing}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"admission_end_date\">Admission End Date</Label>\n                <Input\n                  id=\"admission_end_date\"\n                  type=\"date\"\n                  value={formData.admission_end_date}\n                  onChange={(e) => setFormData({ ...formData, admission_end_date: e.target.value })}\n                  disabled={!isEditing}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"counselling_date\">Counselling Date</Label>\n                <Input\n                  id=\"counselling_date\"\n                  type=\"date\"\n                  value={formData.counselling_date}\n                  onChange={(e) => setFormData({ ...formData, counselling_date: e.target.value })}\n                  disabled={!isEditing}\n                />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-4\">\n            <CardTitle className=\"text-base flex items-center gap-2\">\n              <FileText className=\"h-4 w-4\" />\n              Fee Structure\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"fee_structure_pdf_url\">Fee Structure PDF URL</Label>\n              <Input\n                id=\"fee_structure_pdf_url\"\n                value={formData.fee_structure_pdf_url}\n                onChange={(e) => setFormData({ ...formData, fee_structure_pdf_url: e.target.value })}\n                disabled={!isEditing}\n                placeholder=\"https://example.com/fee-structure.pdf\"\n              />\n              <p className=\"text-xs text-gray-500\">\n                Upload your fee structure PDF to a cloud service and paste the link here\n              </p>\n            </div>\n            {formData.fee_structure_pdf_url && (\n              <a\n                href={formData.fee_structure_pdf_url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"inline-flex items-center text-sm text-blue-600 hover:underline\"\n              >\n                <FileText className=\"h-4 w-4 mr-1\" />\n                View Fee Structure PDF\n              </a>\n            )}\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-4 flex flex-row items-center justify-between\">\n            <CardTitle className=\"text-base flex items-center gap-2\">\n              <Award className=\"h-4 w-4\" />\n              Scholarship Programs\n            </CardTitle>\n            {isEditing && (\n              <Dialog open={isAddingScholarship} onOpenChange={setIsAddingScholarship}>\n                <DialogTrigger asChild>\n                  <Button size=\"sm\" variant=\"outline\">\n                    <Plus className=\"h-4 w-4 mr-1\" />\n                    Add\n                  </Button>\n                </DialogTrigger>\n                <DialogContent>\n                  <DialogHeader>\n                    <DialogTitle>Add Scholarship Program</DialogTitle>\n                    <DialogDescription>Add a new scholarship available at your college</DialogDescription>\n                  </DialogHeader>\n                  <div className=\"space-y-4 mt-4\">\n                    <div className=\"space-y-2\">\n                      <Label>Scholarship Name *</Label>\n                      <Input\n                        value={newScholarship.name}\n                        onChange={(e) => setNewScholarship({ ...newScholarship, name: e.target.value })}\n                        placeholder=\"e.g., Merit Scholarship\"\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label>Description *</Label>\n                      <Textarea\n                        value={newScholarship.description}\n                        onChange={(e) => setNewScholarship({ ...newScholarship, description: e.target.value })}\n                        placeholder=\"Brief description of the scholarship...\"\n                        rows={3}\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label>Eligibility</Label>\n                      <Input\n                        value={newScholarship.eligibility}\n                        onChange={(e) => setNewScholarship({ ...newScholarship, eligibility: e.target.value })}\n                        placeholder=\"e.g., 85% or above in 12th\"\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label>Amount/Benefit</Label>\n                      <Input\n                        value={newScholarship.amount}\n                        onChange={(e) => setNewScholarship({ ...newScholarship, amount: e.target.value })}\n                        placeholder=\"e.g., â‚¹50,000 per year\"\n                      />\n                    </div>\n                    <Button onClick={handleAddScholarship} className=\"w-full\">\n                      Add Scholarship\n                    </Button>\n                  </div>\n                </DialogContent>\n              </Dialog>\n            )}\n          </CardHeader>\n          <CardContent>\n            {scholarships.length > 0 ? (\n              <div className=\"space-y-3\">\n                {scholarships.map((scholarship) => (\n                  <div key={scholarship.id} className=\"border rounded-lg p-4 hover:bg-gray-50 transition-colors\">\n                    <div className=\"flex items-start justify-between gap-3\">\n                      <div className=\"flex-1\">\n                        <h4 className=\"font-semibold text-gray-900 flex items-center gap-2\">\n                          <Award className=\"h-4 w-4 text-yellow-600\" />\n                          {scholarship.name}\n                        </h4>\n                        <p className=\"text-sm text-gray-600 mt-1\">{scholarship.description}</p>\n                        <div className=\"flex flex-wrap gap-3 mt-2\">\n                          {scholarship.eligibility && (\n                            <span className=\"text-xs text-gray-500\">\n                              <span className=\"font-medium\">Eligibility:</span> {scholarship.eligibility}\n                            </span>\n                          )}\n                          {scholarship.amount && (\n                            <span className=\"text-xs text-green-700 font-medium\">\n                              {scholarship.amount}\n                            </span>\n                          )}\n                        </div>\n                      </div>\n                      {isEditing && (\n                        <div className=\"flex gap-2\">\n                          <Dialog>\n                            <DialogTrigger asChild>\n                              <Button\n                                size=\"sm\"\n                                variant=\"ghost\"\n                                onClick={() => setEditingScholarship(scholarship)}\n                              >\n                                <Edit className=\"h-4 w-4\" />\n                              </Button>\n                            </DialogTrigger>\n                            <DialogContent>\n                              <DialogHeader>\n                                <DialogTitle>Edit Scholarship</DialogTitle>\n                              </DialogHeader>\n                              {editingScholarship && editingScholarship.id === scholarship.id && (\n                                <div className=\"space-y-4 mt-4\">\n                                  <div className=\"space-y-2\">\n                                    <Label>Name *</Label>\n                                    <Input\n                                      value={editingScholarship.name}\n                                      onChange={(e) => setEditingScholarship({ ...editingScholarship, name: e.target.value })}\n                                    />\n                                  </div>\n                                  <div className=\"space-y-2\">\n                                    <Label>Description *</Label>\n                                    <Textarea\n                                      value={editingScholarship.description}\n                                      onChange={(e) => setEditingScholarship({ ...editingScholarship, description: e.target.value })}\n                                      rows={3}\n                                    />\n                                  </div>\n                                  <div className=\"space-y-2\">\n                                    <Label>Eligibility</Label>\n                                    <Input\n                                      value={editingScholarship.eligibility}\n                                      onChange={(e) => setEditingScholarship({ ...editingScholarship, eligibility: e.target.value })}\n                                    />\n                                  </div>\n                                  <div className=\"space-y-2\">\n                                    <Label>Amount/Benefit</Label>\n                                    <Input\n                                      value={editingScholarship.amount}\n                                      onChange={(e) => setEditingScholarship({ ...editingScholarship, amount: e.target.value })}\n                                    />\n                                  </div>\n                                  <Button onClick={handleUpdateScholarship} className=\"w-full\">\n                                    Update Scholarship\n                                  </Button>\n                                </div>\n                              )}\n                            </DialogContent>\n                          </Dialog>\n                          <Button\n                            size=\"sm\"\n                            variant=\"ghost\"\n                            onClick={() => handleDeleteScholarship(scholarship.id)}\n                            className=\"text-red-600 hover:text-red-700 hover:bg-red-50\"\n                          >\n                            <Trash2 className=\"h-4 w-4\" />\n                          </Button>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-8 text-gray-500\">\n                <Award className=\"h-12 w-12 mx-auto mb-2 text-gray-400\" />\n                <p className=\"text-sm\">No scholarship programs added yet</p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      {admissionData && (\n        <div className=\"text-xs text-gray-500 text-right\">\n          Last updated: {new Date(admissionData.updated_at || Date.now()).toLocaleString()}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":19149},"client/src/components/admin/GeneralInfoSectionNew.tsx":{"content":"import { useState, useEffect, useMemo } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { supabase } from \"@/lib/supabase\";\nimport {\n  Search,\n  Building2,\n  History,\n  Library,\n  GraduationCap,\n  Share2,\n  Bell,\n  BarChart3,\n  ChevronRight,\n  Clock,\n  Edit,\n  X,\n  Plus,\n  Users,\n  FileText,\n  Award,\n  Building,\n  Globe,\n  HandHeart,\n  Trophy,\n  TreePine,\n  Shield,\n  AlertCircle,\n  Info,\n} from \"lucide-react\";\nimport { Sheet, SheetContent, SheetDescription, SheetHeader, SheetTitle } from \"@/components/ui/sheet\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\n\n// Sub-section imports (will create these components)\nimport { BasicDetailsSection } from \"./general-info-sections/BasicDetailsSection\";\nimport { AboutHistoryOverviewSection } from \"./general-info-sections/AboutHistoryOverviewSection\";\nimport { AdministrationManagementSection } from \"./general-info-sections/AdministrationManagementSection\";\nimport { AdmissionEligibilitySection } from \"./general-info-sections/AdmissionEligibilitySection\";\nimport { ScholarshipsFinancialAidSection } from \"./general-info-sections/ScholarshipsFinancialAidSection\";\nimport { FacilitiesInfrastructureSection } from \"./general-info-sections/FacilitiesInfrastructureSection\";\nimport { TechnicalDigitalResourcesSection } from \"./general-info-sections/TechnicalDigitalResourcesSection\";\nimport { StudentSupportServicesSection } from \"./general-info-sections/StudentSupportServicesSection\";\nimport { AchievementsRecognitionsSection } from \"./general-info-sections/AchievementsRecognitionsSection\";\nimport { CampusEnvironmentSection } from \"./general-info-sections/CampusEnvironmentSection\";\nimport { RulesRegulationsSection } from \"./general-info-sections/RulesRegulationsSection\";\nimport { MiscellaneousInfoSection } from \"./general-info-sections/MiscellaneousInfoSection\";\nimport { AdditionalInfoSection } from \"./general-info-sections/AdditionalInfoSection\";\n\ninterface SubSection {\n  id: string;\n  title: string;\n  description: string;\n  icon: any;\n  color: string;\n  bgColor: string;\n  component: any;\n}\n\ninterface SearchResult {\n  sectionId: string;\n  sectionTitle: string;\n  fieldName: string;\n  fieldValue: string;\n  matchType: 'exact' | 'partial';\n}\n\nexport function GeneralInfoSectionNew() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedSection, setSelectedSection] = useState<string | null>(null);\n  const [searchResults, setSearchResults] = useState<SearchResult[]>([]);\n  const [isSearching, setIsSearching] = useState(false);\n\n  const token = localStorage.getItem(\"adminToken\");\n\n  // Define all sub-sections\n  const subSections: SubSection[] = [\n    {\n      id: \"basic-details\",\n      title: \"Basic Details\",\n      description: \"College name, affiliation, principal, contact info\",\n      icon: Building2,\n      color: \"text-blue-600\",\n      bgColor: \"bg-blue-50\",\n      component: BasicDetailsSection,\n    },\n    {\n      id: \"about-history-overview\",\n      title: \"About / History / Overview\",\n      description: \"College overview, history, founder, vision, mission, and values\",\n      icon: History,\n      color: \"text-purple-600\",\n      bgColor: \"bg-purple-50\",\n      component: AboutHistoryOverviewSection,\n    },\n    {\n      id: \"administration-management\",\n      title: \"Administration / Management\",\n      description: \"Principal, governing body, committees, and department heads\",\n      icon: Users,\n      color: \"text-indigo-600\",\n      bgColor: \"bg-indigo-50\",\n      component: AdministrationManagementSection,\n    },\n    {\n      id: \"admission-eligibility\",\n      title: \"Admission & Eligibility\",\n      description: \"Admission process, eligibility criteria, documents, and fee structure\",\n      icon: FileText,\n      color: \"text-emerald-600\",\n      bgColor: \"bg-emerald-50\",\n      component: AdmissionEligibilitySection,\n    },\n    {\n      id: \"scholarships-financial-aid\",\n      title: \"Scholarships & Financial Aid\",\n      description: \"College scholarships, government schemes, and application process\",\n      icon: Award,\n      color: \"text-amber-600\",\n      bgColor: \"bg-amber-50\",\n      component: ScholarshipsFinancialAidSection,\n    },\n    {\n      id: \"facilities-infrastructure\",\n      title: \"Facilities & Infrastructure\",\n      description: \"Library, labs, sports, hostel, canteen, medical, transport, and campus facilities\",\n      icon: Building,\n      color: \"text-rose-600\",\n      bgColor: \"bg-rose-50\",\n      component: FacilitiesInfrastructureSection,\n    },\n    {\n      id: \"technical-digital-resources\",\n      title: \"Technical & Digital Resources\",\n      description: \"ERP, online fee payment, library OPAC, e-resources, and IT infrastructure\",\n      icon: Globe,\n      color: \"text-cyan-600\",\n      bgColor: \"bg-cyan-50\",\n      component: TechnicalDigitalResourcesSection,\n    },\n    {\n      id: \"student-support-services\",\n      title: \"Student Support & Services\",\n      description: \"Career guidance, placement, grievance, anti-ragging, women cell, alumni, NSS/NCC\",\n      icon: HandHeart,\n      color: \"text-violet-600\",\n      bgColor: \"bg-violet-50\",\n      component: StudentSupportServicesSection,\n    },\n    {\n      id: \"achievements-recognitions\",\n      title: \"Achievements & Recognitions\",\n      description: \"College awards, NAAC grade, faculty & student achievements, notable alumni\",\n      icon: Trophy,\n      color: \"text-yellow-600\",\n      bgColor: \"bg-yellow-50\",\n      component: AchievementsRecognitionsSection,\n    },\n    {\n      id: \"campus-environment\",\n      title: \"Campus & Environment\",\n      description: \"Campus area, green initiatives, safety measures, and emergency preparedness\",\n      icon: TreePine,\n      color: \"text-green-600\",\n      bgColor: \"bg-green-50\",\n      component: CampusEnvironmentSection,\n    },\n    {\n      id: \"rules-regulations\",\n      title: \"Rules & Regulations\",\n      description: \"Attendance rules, examination policy, dress code, and disciplinary policies\",\n      icon: Shield,\n      color: \"text-red-600\",\n      bgColor: \"bg-red-50\",\n      component: RulesRegulationsSection,\n    },\n    {\n      id: \"miscellaneous-info\",\n      title: \"Other / Miscellaneous Information\",\n      description: \"Emergency contacts, calendar, dress code, feedback, and lost & found\",\n      icon: Info,\n      color: \"text-orange-600\",\n      bgColor: \"bg-orange-50\",\n      component: MiscellaneousInfoSection,\n    },\n    {\n      id: \"additional-info\",\n      title: \"Additional Information\",\n      description: \"Custom information with AI or Manual modes\",\n      icon: Plus,\n      color: \"text-teal-600\",\n      bgColor: \"bg-teal-50\",\n      component: AdditionalInfoSection,\n    },\n  ];\n\n  // Fetch all general info data\n  const { data: generalInfoData, isLoading } = useQuery({\n    queryKey: [\"/api/admin/general-info-all\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info-all\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch data\");\n      return await res.json();\n    },\n  });\n\n  // Real-time subscription\n  useEffect(() => {\n    const channel = supabase\n      .channel(\"general-info-changes\")\n      .on(\n        \"postgres_changes\",\n        { event: \"*\", schema: \"public\", table: \"college_settings\" },\n        () => {\n          queryClient.invalidateQueries({ queryKey: [\"/api/admin/general-info-all\"] });\n        }\n      )\n      .subscribe();\n\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, [queryClient]);\n\n  // Helper function to recursively search nested structures\n  const searchNestedValue = (\n    value: any,\n    sectionId: string,\n    sectionTitle: string,\n    parentKey: string,\n    query: string,\n    results: SearchResult[]\n  ) => {\n    if (!value) return;\n\n    if (Array.isArray(value)) {\n      // Handle arrays\n      value.forEach((item: any) => {\n        const searchableText = JSON.stringify(item).toLowerCase();\n        if (searchableText.includes(query)) {\n          results.push({\n            sectionId,\n            sectionTitle,\n            fieldName: item.name || item.title || item.department || item.event || parentKey.replace(/_/g, \" \"),\n            fieldValue: item.description || item.requirements || item.headName || item.timeline || JSON.stringify(item).substring(0, 100),\n            matchType: searchableText === query ? \"exact\" : \"partial\",\n          });\n        }\n      });\n    } else if (typeof value === 'object' && value !== null) {\n      // Handle nested objects recursively\n      Object.entries(value).forEach(([nestedKey, nestedValue]) => {\n        if (typeof nestedValue === 'string' && nestedValue.toLowerCase().includes(query)) {\n          results.push({\n            sectionId,\n            sectionTitle,\n            fieldName: `${parentKey.replace(/_/g, \" \")} - ${nestedKey.replace(/_/g, \" \")}`.replace(/\\b\\w/g, (l) => l.toUpperCase()),\n            fieldValue: nestedValue.substring(0, 100) + (nestedValue.length > 100 ? \"...\" : \"\"),\n            matchType: nestedValue.toLowerCase() === query ? \"exact\" : \"partial\",\n          });\n        } else if (typeof nestedValue === 'object') {\n          // Recursively search deeper levels\n          searchNestedValue(nestedValue, sectionId, sectionTitle, `${parentKey} ${nestedKey}`, query, results);\n        }\n      });\n    } else if (typeof value === 'string' && value.toLowerCase().includes(query)) {\n      // Handle simple strings\n      results.push({\n        sectionId,\n        sectionTitle,\n        fieldName: parentKey.replace(/_/g, \" \").replace(/\\b\\w/g, (l) => l.toUpperCase()),\n        fieldValue: value.substring(0, 100) + (value.length > 100 ? \"...\" : \"\"),\n        matchType: value.toLowerCase() === query ? \"exact\" : \"partial\",\n      });\n    }\n  };\n\n  // Advanced search functionality\n  useEffect(() => {\n    if (!searchQuery.trim()) {\n      setSearchResults([]);\n      setIsSearching(false);\n      return;\n    }\n\n    setIsSearching(true);\n    const results: SearchResult[] = [];\n    const query = searchQuery.toLowerCase();\n\n    // Search through all active sections and fields\n    if (generalInfoData) {\n      // Search in Basic Details\n      const basicDetails = generalInfoData.basicDetails || {};\n      Object.entries(basicDetails).forEach(([key, value]) => {\n        if (value && String(value).toLowerCase().includes(query)) {\n          results.push({\n            sectionId: \"basic-details\",\n            sectionTitle: \"Basic Details\",\n            fieldName: key.replace(/_/g, \" \").replace(/\\b\\w/g, (l) => l.toUpperCase()),\n            fieldValue: String(value),\n            matchType: String(value).toLowerCase() === query ? \"exact\" : \"partial\",\n          });\n        }\n      });\n\n      // Search in About/History/Overview\n      const aboutHistory = generalInfoData.aboutHistory || {};\n      Object.entries(aboutHistory).forEach(([key, value]) => {\n        if (value && String(value).toLowerCase().includes(query)) {\n          results.push({\n            sectionId: \"about-history-overview\",\n            sectionTitle: \"About / History / Overview\",\n            fieldName: key.replace(/_/g, \" \").replace(/\\b\\w/g, (l) => l.toUpperCase()),\n            fieldValue: String(value).substring(0, 100) + (String(value).length > 100 ? \"...\" : \"\"),\n            matchType: String(value).toLowerCase() === query ? \"exact\" : \"partial\",\n          });\n        }\n      });\n\n      // Search in Administration/Management\n      const administrationManagement = generalInfoData.administrationManagement || {};\n      Object.entries(administrationManagement).forEach(([key, value]) => {\n        searchNestedValue(value, \"administration-management\", \"Administration / Management\", key, query, results);\n      });\n\n      // Search in Admission & Eligibility\n      const admissionEligibility = generalInfoData.admissionEligibility || {};\n      Object.entries(admissionEligibility).forEach(([key, value]) => {\n        searchNestedValue(value, \"admission-eligibility\", \"Admission & Eligibility\", key, query, results);\n      });\n\n      // Search in Scholarships & Financial Aid\n      const scholarshipsFinancialAid = generalInfoData.scholarshipsFinancialAid || {};\n      Object.entries(scholarshipsFinancialAid).forEach(([key, value]) => {\n        searchNestedValue(value, \"scholarships-financial-aid\", \"Scholarships & Financial Aid\", key, query, results);\n      });\n\n      // Search in Facilities & Infrastructure\n      const facilitiesInfrastructure = generalInfoData.facilitiesInfrastructure || {};\n      Object.entries(facilitiesInfrastructure).forEach(([key, value]) => {\n        searchNestedValue(value, \"facilities-infrastructure\", \"Facilities & Infrastructure\", key, query, results);\n      });\n\n      // Search in Technical & Digital Resources\n      const technicalDigitalResources = generalInfoData.technicalDigitalResources || {};\n      Object.entries(technicalDigitalResources).forEach(([key, value]) => {\n        searchNestedValue(value, \"technical-digital-resources\", \"Technical & Digital Resources\", key, query, results);\n      });\n\n      // Search in Student Support & Services\n      const studentSupportServices = generalInfoData.studentSupportServices || {};\n      Object.entries(studentSupportServices).forEach(([key, value]) => {\n        searchNestedValue(value, \"student-support-services\", \"Student Support & Services\", key, query, results);\n      });\n\n      // Search in Achievements & Recognitions\n      const achievementsRecognitions = generalInfoData.achievementsRecognitions || {};\n      Object.entries(achievementsRecognitions).forEach(([key, value]) => {\n        searchNestedValue(value, \"achievements-recognitions\", \"Achievements & Recognitions\", key, query, results);\n      });\n\n      // Search in Campus & Environment\n      const campusEnvironment = generalInfoData.campusEnvironment || {};\n      Object.entries(campusEnvironment).forEach(([key, value]) => {\n        searchNestedValue(value, \"campus-environment\", \"Campus & Environment\", key, query, results);\n      });\n\n      // Search in Rules & Regulations\n      const rulesRegulations = generalInfoData.rulesRegulations || {};\n      Object.entries(rulesRegulations).forEach(([key, value]) => {\n        searchNestedValue(value, \"rules-regulations\", \"Rules & Regulations\", key, query, results);\n      });\n\n      // Search in Miscellaneous Information\n      const miscellaneous = generalInfoData.miscellaneous || {};\n      Object.entries(miscellaneous).forEach(([key, value]) => {\n        searchNestedValue(value, \"miscellaneous-info\", \"Other / Miscellaneous Information\", key, query, results);\n      });\n\n      // Search in Additional Information\n      const additionalInfo = generalInfoData.additionalInfo?.entries || [];\n      additionalInfo.forEach((entry: any) => {\n        if (entry.title?.toLowerCase().includes(query) || entry.content?.toLowerCase().includes(query)) {\n          results.push({\n            sectionId: \"additional-info\",\n            sectionTitle: \"Additional Information\",\n            fieldName: entry.title,\n            fieldValue: entry.content?.substring(0, 100) + (entry.content?.length > 100 ? \"...\" : \"\") || \"\",\n            matchType: entry.title?.toLowerCase() === query ? \"exact\" : \"partial\",\n          });\n        }\n      });\n    }\n\n    // Sort results: exact matches first\n    results.sort((a, b) => {\n      if (a.matchType === \"exact\" && b.matchType === \"partial\") return -1;\n      if (a.matchType === \"partial\" && b.matchType === \"exact\") return 1;\n      return 0;\n    });\n\n    setSearchResults(results);\n    setIsSearching(false);\n  }, [searchQuery, generalInfoData]);\n\n  const handleSectionClick = (sectionId: string) => {\n    setSelectedSection(sectionId);\n  };\n\n  const handleCloseSheet = () => {\n    setSelectedSection(null);\n  };\n\n  const handleSearchResultClick = (result: SearchResult) => {\n    // Only open if the section exists in our subSections array\n    const sectionExists = subSections.find(s => s.id === result.sectionId);\n    if (sectionExists) {\n      setSelectedSection(result.sectionId);\n      setSearchQuery(\"\");\n      setSearchResults([]);\n    }\n  };\n\n  const selectedSectionData = subSections.find((s) => s.id === selectedSection);\n\n  return (\n    <div className=\"space-y-6 pb-8\">\n      {/* Header */}\n      <div className=\"flex flex-col gap-4\">\n        <div>\n          <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900\">General Information</h1>\n          <p className=\"text-sm sm:text-base text-gray-600 mt-1\">\n            Manage all college information across different categories\n          </p>\n        </div>\n\n        {/* Advanced Search Bar */}\n        <div className=\"relative\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400\" />\n            <Input\n              placeholder=\"Search across all sections... (e.g., 'library', 'fees', 'principal')\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"pl-10 pr-10 h-12 text-base border-2 focus:border-blue-500\"\n            />\n            {searchQuery && (\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"absolute right-2 top-1/2 -translate-y-1/2\"\n                onClick={() => {\n                  setSearchQuery(\"\");\n                  setSearchResults([]);\n                }}\n              >\n                <X className=\"h-4 w-4\" />\n              </Button>\n            )}\n          </div>\n\n          {/* Search Results Dropdown */}\n          {searchResults.length > 0 && (\n            <Card className=\"absolute top-full mt-2 w-full z-50 shadow-lg max-h-96 overflow-auto\">\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-sm\">\n                  Found {searchResults.length} result{searchResults.length !== 1 ? \"s\" : \"\"}\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"p-0\">\n                <div className=\"divide-y\">\n                  {searchResults.map((result, index) => (\n                    <button\n                      key={index}\n                      onClick={() => handleSearchResultClick(result)}\n                      className=\"w-full px-4 py-3 hover:bg-gray-50 transition-colors text-left\"\n                    >\n                      <div className=\"flex items-start justify-between gap-3\">\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <Badge variant={result.matchType === \"exact\" ? \"default\" : \"secondary\"} className=\"text-xs\">\n                              {result.sectionTitle}\n                            </Badge>\n                            {result.matchType === \"exact\" && (\n                              <Badge variant=\"outline\" className=\"text-xs bg-green-50 text-green-700 border-green-200\">\n                                Exact Match\n                              </Badge>\n                            )}\n                          </div>\n                          <p className=\"font-medium text-sm text-gray-900\">{result.fieldName}</p>\n                          <p className=\"text-xs text-gray-600 truncate mt-1\">{result.fieldValue}</p>\n                        </div>\n                        <ChevronRight className=\"h-4 w-4 text-gray-400 flex-shrink-0 mt-1\" />\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* No Results */}\n          {searchQuery && searchResults.length === 0 && !isSearching && (\n            <Card className=\"absolute top-full mt-2 w-full z-50 shadow-lg\">\n              <CardContent className=\"p-4 text-center text-sm text-gray-600\">\n                No results found for \"{searchQuery}\"\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </div>\n\n      {/* Sub-Sections Grid */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n        {subSections.map((section) => {\n          const Icon = section.icon;\n          return (\n            <Card\n              key={section.id}\n              className=\"cursor-pointer hover:shadow-lg transition-all duration-200 hover:-translate-y-1 border-2 hover:border-gray-300\"\n              onClick={() => handleSectionClick(section.id)}\n            >\n              <CardHeader className=\"pb-3\">\n                <div className={`w-12 h-12 rounded-lg ${section.bgColor} flex items-center justify-center mb-3`}>\n                  <Icon className={`h-6 w-6 ${section.color}`} />\n                </div>\n                <CardTitle className=\"text-lg\">{section.title}</CardTitle>\n                <CardDescription className=\"text-xs line-clamp-2\">{section.description}</CardDescription>\n              </CardHeader>\n              <CardContent className=\"pt-0\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-1 text-xs text-gray-500\">\n                    <Clock className=\"h-3 w-3\" />\n                    <span>Updated recently</span>\n                  </div>\n                  <ChevronRight className={`h-5 w-5 ${section.color}`} />\n                </div>\n              </CardContent>\n            </Card>\n          );\n        })}\n      </div>\n\n      {/* Section Detail Sheet/Drawer */}\n      <Sheet open={!!selectedSection} onOpenChange={(open) => !open && handleCloseSheet()}>\n        <SheetContent side=\"right\" className=\"w-full sm:max-w-2xl lg:max-w-4xl overflow-y-auto p-0\">\n          {selectedSectionData && (\n            <>\n              <SheetHeader className=\"p-6 pb-4 border-b sticky top-0 bg-white z-10\">\n                <div className=\"flex items-center gap-3\">\n                  <div className={`w-10 h-10 rounded-lg ${selectedSectionData.bgColor} flex items-center justify-center`}>\n                    <selectedSectionData.icon className={`h-5 w-5 ${selectedSectionData.color}`} />\n                  </div>\n                  <div>\n                    <SheetTitle className=\"text-xl\">{selectedSectionData.title}</SheetTitle>\n                    <SheetDescription>{selectedSectionData.description}</SheetDescription>\n                  </div>\n                </div>\n              </SheetHeader>\n              <ScrollArea className=\"h-[calc(100vh-120px)]\">\n                <div className=\"p-6\">\n                  <selectedSectionData.component\n                    data={generalInfoData}\n                    onUpdate={() => queryClient.invalidateQueries({ queryKey: [\"/api/admin/general-info-all\"] })}\n                  />\n                </div>\n              </ScrollArea>\n            </>\n          )}\n        </SheetContent>\n      </Sheet>\n    </div>\n  );\n}\n","size_bytes":23301},"client/src/components/admin/general-info-sections/QuickStatsSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { Save, Edit, Users, UserCheck, Building2, GraduationCap, MapPin, Award, RefreshCw } from \"lucide-react\";\nimport { Switch } from \"@/components/ui/switch\";\n\ninterface QuickStatsSectionProps {\n  data: any;\n  onUpdate: () => void;\n}\n\nexport function QuickStatsSection({ data, onUpdate }: QuickStatsSectionProps) {\n  const { toast } = useToast();\n  const token = localStorage.getItem(\"adminToken\");\n  \n  const [formData, setFormData] = useState({\n    total_students: \"\",\n    total_staff: \"\",\n    total_departments: \"\",\n    total_courses: \"\",\n    campus_area: \"\",\n    accreditations: \"\",\n  });\n\n  const [autoFetch, setAutoFetch] = useState({\n    students: false,\n    staff: true,\n    departments: true,\n    courses: true,\n  });\n\n  const [isEditing, setIsEditing] = useState(false);\n\n  // Fetch stats data\n  const { data: statsData, refetch } = useQuery({\n    queryKey: [\"/api/admin/general-info/quick-stats\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info/quick-stats\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  // Fetch real-time counts\n  const { data: liveCounts } = useQuery({\n    queryKey: [\"/api/admin/stats\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/stats\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n    refetchInterval: 30000, // Refetch every 30 seconds\n  });\n\n  useEffect(() => {\n    if (statsData) {\n      setFormData({\n        total_students: statsData.total_students || \"\",\n        total_staff: statsData.total_staff || \"\",\n        total_departments: statsData.total_departments || \"\",\n        total_courses: statsData.total_courses || \"\",\n        campus_area: statsData.campus_area || \"\",\n        accreditations: statsData.accreditations || \"\",\n      });\n      setAutoFetch({\n        students: statsData.auto_fetch_students ?? false,\n        staff: statsData.auto_fetch_staff ?? true,\n        departments: statsData.auto_fetch_departments ?? true,\n        courses: statsData.auto_fetch_courses ?? true,\n      });\n    }\n  }, [statsData]);\n\n  // Auto-apply live counts when auto-fetch is enabled\n  useEffect(() => {\n    if (liveCounts && isEditing) {\n      const updates: any = {};\n      if (autoFetch.students) updates.total_students = liveCounts.students?.toString() || \"\";\n      if (autoFetch.staff) updates.total_staff = liveCounts.staff?.toString() || \"\";\n      if (autoFetch.departments) updates.total_departments = liveCounts.departments?.toString() || \"\";\n      if (autoFetch.courses) updates.total_courses = liveCounts.courses?.toString() || \"\";\n      \n      if (Object.keys(updates).length > 0) {\n        setFormData((prev) => ({ ...prev, ...updates }));\n      }\n    }\n  }, [liveCounts, autoFetch, isEditing]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(\"/api/admin/general-info/quick-stats\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({ ...data, autoFetch }),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"Quick stats updated successfully\" });\n      setIsEditing(false);\n      onUpdate();\n      refetch();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate(formData);\n  };\n\n  const handleRefresh = () => {\n    refetch();\n    toast({ title: \"Refreshed\", description: \"Stats data refreshed from database\" });\n  };\n\n  const statsItems = [\n    {\n      id: \"total_students\",\n      label: \"Total Students\",\n      icon: Users,\n      color: \"text-blue-600\",\n      bgColor: \"bg-blue-50\",\n      autoFetchKey: \"students\" as const,\n      liveValue: liveCounts?.students,\n    },\n    {\n      id: \"total_staff\",\n      label: \"Total Staff\",\n      icon: UserCheck,\n      color: \"text-green-600\",\n      bgColor: \"bg-green-50\",\n      autoFetchKey: \"staff\" as const,\n      liveValue: liveCounts?.staff,\n    },\n    {\n      id: \"total_departments\",\n      label: \"Total Departments\",\n      icon: Building2,\n      color: \"text-purple-600\",\n      bgColor: \"bg-purple-50\",\n      autoFetchKey: \"departments\" as const,\n      liveValue: liveCounts?.departments,\n    },\n    {\n      id: \"total_courses\",\n      label: \"Total Courses\",\n      icon: GraduationCap,\n      color: \"text-orange-600\",\n      bgColor: \"bg-orange-50\",\n      autoFetchKey: \"courses\" as const,\n      liveValue: liveCounts?.courses,\n    },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">Quick Stats</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">Key statistics about your institution</p>\n        </div>\n        <div className=\"flex gap-2\">\n          {!isEditing && (\n            <Button onClick={handleRefresh} variant=\"outline\" size=\"sm\">\n              <RefreshCw className=\"h-4 w-4 mr-2\" />\n              Refresh\n            </Button>\n          )}\n          {!isEditing ? (\n            <Button onClick={() => setIsEditing(true)} variant=\"outline\">\n              <Edit className=\"h-4 w-4 mr-2\" />\n              Edit\n            </Button>\n          ) : (\n            <>\n              <Button onClick={() => setIsEditing(false)} variant=\"outline\">\n                Cancel\n              </Button>\n              <Button onClick={handleSave} disabled={saveMutation.isPending}>\n                <Save className=\"h-4 w-4 mr-2\" />\n                {saveMutation.isPending ? \"Saving...\" : \"Save\"}\n              </Button>\n            </>\n          )}\n        </div>\n      </div>\n\n      {/* Auto-Fetchable Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        {statsItems.map((item) => {\n          const Icon = item.icon;\n          const fieldValue = formData[item.id as keyof typeof formData];\n          const isAutoFetch = autoFetch[item.autoFetchKey];\n          \n          return (\n            <Card key={item.id}>\n              <CardHeader className=\"pb-3\">\n                <div className=\"flex items-center justify-between\">\n                  <CardTitle className=\"text-base flex items-center gap-2\">\n                    <div className={`w-10 h-10 rounded-lg ${item.bgColor} flex items-center justify-center`}>\n                      <Icon className={`h-5 w-5 ${item.color}`} />\n                    </div>\n                    {item.label}\n                  </CardTitle>\n                  {isEditing && (\n                    <div className=\"flex items-center gap-2\">\n                      <Label htmlFor={`auto-${item.id}`} className=\"text-xs text-gray-600\">Auto</Label>\n                      <Switch\n                        id={`auto-${item.id}`}\n                        checked={isAutoFetch}\n                        onCheckedChange={(checked) =>\n                          setAutoFetch({ ...autoFetch, [item.autoFetchKey]: checked })\n                        }\n                      />\n                    </div>\n                  )}\n                </div>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                <div className=\"space-y-2\">\n                  <Input\n                    type=\"number\"\n                    value={fieldValue}\n                    onChange={(e) => setFormData({ ...formData, [item.id]: e.target.value })}\n                    disabled={!isEditing || isAutoFetch}\n                    placeholder=\"Enter count\"\n                    className=\"text-2xl font-bold h-12\"\n                  />\n                  {isEditing && isAutoFetch && item.liveValue !== undefined && (\n                    <p className=\"text-xs text-green-600\">\n                      âœ“ Auto-fetching from database: {item.liveValue}\n                    </p>\n                  )}\n                  {isEditing && !isAutoFetch && (\n                    <p className=\"text-xs text-gray-500\">\n                      Manual entry mode\n                    </p>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          );\n        })}\n      </div>\n\n      {/* Manual Entry Only Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-base flex items-center gap-2\">\n              <div className=\"w-10 h-10 rounded-lg bg-indigo-50 flex items-center justify-center\">\n                <MapPin className=\"h-5 w-5 text-indigo-600\" />\n              </div>\n              Campus Area\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-2\">\n            <Input\n              value={formData.campus_area}\n              onChange={(e) => setFormData({ ...formData, campus_area: e.target.value })}\n              disabled={!isEditing}\n              placeholder=\"e.g., 50 acres / 20 hectares\"\n            />\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-base flex items-center gap-2\">\n              <div className=\"w-10 h-10 rounded-lg bg-yellow-50 flex items-center justify-center\">\n                <Award className=\"h-5 w-5 text-yellow-600\" />\n              </div>\n              Recognition & Accreditations\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-2\">\n            <Textarea\n              value={formData.accreditations}\n              onChange={(e) => setFormData({ ...formData, accreditations: e.target.value })}\n              disabled={!isEditing}\n              placeholder=\"e.g., NAAC A+ Grade, UGC Recognized, ISO 9001:2015 Certified\"\n              rows={3}\n            />\n            <p className=\"text-xs text-gray-500\">\n              List all major accreditations and recognitions (comma separated)\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Stats Preview */}\n      {!isEditing && (\n        <Card className=\"bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200\">\n          <CardHeader>\n            <CardTitle className=\"text-base\">Stats at a Glance</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-center\">\n              <div>\n                <p className=\"text-3xl font-bold text-blue-600\">{formData.total_students || \"â€”\"}</p>\n                <p className=\"text-xs text-gray-600 mt-1\">Students</p>\n              </div>\n              <div>\n                <p className=\"text-3xl font-bold text-green-600\">{formData.total_staff || \"â€”\"}</p>\n                <p className=\"text-xs text-gray-600 mt-1\">Staff</p>\n              </div>\n              <div>\n                <p className=\"text-3xl font-bold text-purple-600\">{formData.total_departments || \"â€”\"}</p>\n                <p className=\"text-xs text-gray-600 mt-1\">Departments</p>\n              </div>\n              <div>\n                <p className=\"text-3xl font-bold text-orange-600\">{formData.total_courses || \"â€”\"}</p>\n                <p className=\"text-xs text-gray-600 mt-1\">Courses</p>\n              </div>\n            </div>\n            {formData.campus_area && (\n              <div className=\"mt-4 pt-4 border-t\">\n                <p className=\"text-sm text-gray-700\">\n                  <span className=\"font-medium\">Campus:</span> {formData.campus_area}\n                </p>\n              </div>\n            )}\n            {formData.accreditations && (\n              <div className=\"mt-2\">\n                <p className=\"text-sm text-gray-700\">\n                  <span className=\"font-medium\">Accreditations:</span> {formData.accreditations}\n                </p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      )}\n\n      {statsData && (\n        <div className=\"text-xs text-gray-500 text-right\">\n          Last updated: {new Date(statsData.updated_at || Date.now()).toLocaleString()}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":12809},"client/src/components/admin/general-info-sections/FacilitiesInfoSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { Save, Edit, Plus, Trash2, Library, FlaskConical, Trophy, Home, Bus, HeartPulse, Coffee, Wifi, Building } from \"lucide-react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger, DialogDescription } from \"@/components/ui/dialog\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\n\ninterface FacilitiesInfoSectionProps {\n  data: any;\n  onUpdate: () => void;\n}\n\ninterface Facility {\n  id: string;\n  type: string;\n  name: string;\n  description: string;\n  capacity?: string;\n  timings?: string;\n}\n\nconst facilityTypes = [\n  { value: \"library\", label: \"Library\", icon: Library },\n  { value: \"laboratory\", label: \"Laboratory\", icon: FlaskConical },\n  { value: \"sports\", label: \"Sports\", icon: Trophy },\n  { value: \"hostel\", label: \"Hostel\", icon: Home },\n  { value: \"transport\", label: \"Transport\", icon: Bus },\n  { value: \"medical\", label: \"Medical / First Aid\", icon: HeartPulse },\n  { value: \"cafeteria\", label: \"Cafeteria\", icon: Coffee },\n  { value: \"wifi\", label: \"Wi-Fi / IT Infrastructure\", icon: Wifi },\n  { value: \"auditorium\", label: \"Auditorium / Seminar Hall\", icon: Building },\n  { value: \"other\", label: \"Other Facility\", icon: Building },\n];\n\nexport function FacilitiesInfoSection({ data, onUpdate }: FacilitiesInfoSectionProps) {\n  const { toast } = useToast();\n  const token = localStorage.getItem(\"adminToken\");\n  \n  const [facilities, setFacilities] = useState<Facility[]>([]);\n  const [newFacility, setNewFacility] = useState({ type: \"\", name: \"\", description: \"\", capacity: \"\", timings: \"\" });\n  const [editingFacility, setEditingFacility] = useState<Facility | null>(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const [isAddingFacility, setIsAddingFacility] = useState(false);\n\n  const { data: facilitiesData } = useQuery({\n    queryKey: [\"/api/admin/general-info/facilities\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info/facilities\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (facilitiesData?.facilities) {\n      setFacilities(facilitiesData.facilities);\n    }\n  }, [facilitiesData]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(\"/api/admin/general-info/facilities\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({ facilities: data }),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"Facilities updated successfully\" });\n      setIsEditing(false);\n      onUpdate();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate(facilities);\n  };\n\n  const handleAddFacility = () => {\n    if (!newFacility.type || !newFacility.name) {\n      toast({ title: \"Error\", description: \"Type and name are required\", variant: \"destructive\" });\n      return;\n    }\n    const facility: Facility = {\n      id: Date.now().toString(),\n      ...newFacility,\n    };\n    setFacilities([...facilities, facility]);\n    setNewFacility({ type: \"\", name: \"\", description: \"\", capacity: \"\", timings: \"\" });\n    setIsAddingFacility(false);\n    toast({ title: \"Success\", description: \"Facility added\" });\n  };\n\n  const handleUpdateFacility = () => {\n    if (!editingFacility) return;\n    setFacilities(facilities.map((f) => (f.id === editingFacility.id ? editingFacility : f)));\n    setEditingFacility(null);\n    toast({ title: \"Success\", description: \"Facility updated\" });\n  };\n\n  const handleDeleteFacility = (id: string) => {\n    setFacilities(facilities.filter((f) => f.id !== id));\n    toast({ title: \"Success\", description: \"Facility removed\" });\n  };\n\n  const getFacilityIcon = (type: string) => {\n    const facilityType = facilityTypes.find((ft) => ft.value === type);\n    return facilityType ? facilityType.icon : Building;\n  };\n\n  const groupedFacilities = facilities.reduce((acc, facility) => {\n    if (!acc[facility.type]) acc[facility.type] = [];\n    acc[facility.type].push(facility);\n    return acc;\n  }, {} as Record<string, Facility[]>);\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">College Facilities</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">Manage all facilities available at the college</p>\n        </div>\n        {!isEditing ? (\n          <Button onClick={() => setIsEditing(true)} variant=\"outline\">\n            <Edit className=\"h-4 w-4 mr-2\" />\n            Edit\n          </Button>\n        ) : (\n          <div className=\"flex gap-2\">\n            <Button onClick={() => setIsEditing(false)} variant=\"outline\">\n              Cancel\n            </Button>\n            <Button onClick={handleSave} disabled={saveMutation.isPending}>\n              <Save className=\"h-4 w-4 mr-2\" />\n              {saveMutation.isPending ? \"Saving...\" : \"Save All\"}\n            </Button>\n          </div>\n        )}\n      </div>\n\n      {isEditing && (\n        <Dialog open={isAddingFacility} onOpenChange={setIsAddingFacility}>\n          <DialogTrigger asChild>\n            <Button className=\"w-full sm:w-auto\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Add New Facility\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-2xl\">\n            <DialogHeader>\n              <DialogTitle>Add New Facility</DialogTitle>\n              <DialogDescription>Add a new facility to your college</DialogDescription>\n            </DialogHeader>\n            <div className=\"space-y-4 mt-4\">\n              <div className=\"space-y-2\">\n                <Label>Facility Type *</Label>\n                <Select\n                  value={newFacility.type}\n                  onValueChange={(value) => setNewFacility({ ...newFacility, type: value })}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select type\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {facilityTypes.map((type) => (\n                      <SelectItem key={type.value} value={type.value}>\n                        {type.label}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              <div className=\"space-y-2\">\n                <Label>Name *</Label>\n                <Input\n                  value={newFacility.name}\n                  onChange={(e) => setNewFacility({ ...newFacility, name: e.target.value })}\n                  placeholder=\"e.g., Central Library, Physics Lab\"\n                />\n              </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label>Capacity</Label>\n                  <Input\n                    value={newFacility.capacity}\n                    onChange={(e) => setNewFacility({ ...newFacility, capacity: e.target.value })}\n                    placeholder=\"e.g., 200 students\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label>Timings</Label>\n                  <Input\n                    value={newFacility.timings}\n                    onChange={(e) => setNewFacility({ ...newFacility, timings: e.target.value })}\n                    placeholder=\"e.g., 9 AM - 5 PM\"\n                  />\n                </div>\n              </div>\n              <div className=\"space-y-2\">\n                <Label>Description</Label>\n                <Textarea\n                  value={newFacility.description}\n                  onChange={(e) => setNewFacility({ ...newFacility, description: e.target.value })}\n                  placeholder=\"Detailed description...\"\n                  rows={4}\n                />\n              </div>\n              <Button onClick={handleAddFacility} className=\"w-full\">\n                Add Facility\n              </Button>\n            </div>\n          </DialogContent>\n        </Dialog>\n      )}\n\n      <div className=\"grid grid-cols-1 gap-4\">\n        {Object.entries(groupedFacilities).map(([type, typeFacilities]) => {\n          const facilityTypeInfo = facilityTypes.find((ft) => ft.value === type);\n          const Icon = facilityTypeInfo?.icon || Building;\n          \n          return (\n            <Card key={type}>\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-base flex items-center gap-2\">\n                  <Icon className=\"h-5 w-5\" />\n                  {facilityTypeInfo?.label || type}\n                  <span className=\"text-sm font-normal text-gray-500\">({typeFacilities.length})</span>\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  {typeFacilities.map((facility) => (\n                    <div key={facility.id} className=\"border rounded-lg p-4 hover:bg-gray-50 transition-colors\">\n                      <div className=\"flex items-start justify-between gap-3\">\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-semibold text-gray-900\">{facility.name}</h4>\n                          {facility.description && (\n                            <p className=\"text-sm text-gray-600 mt-1\">{facility.description}</p>\n                          )}\n                          <div className=\"flex flex-wrap gap-3 mt-2\">\n                            {facility.capacity && (\n                              <span className=\"text-xs text-gray-500\">\n                                <span className=\"font-medium\">Capacity:</span> {facility.capacity}\n                              </span>\n                            )}\n                            {facility.timings && (\n                              <span className=\"text-xs text-gray-500\">\n                                <span className=\"font-medium\">Timings:</span> {facility.timings}\n                              </span>\n                            )}\n                          </div>\n                        </div>\n                        {isEditing && (\n                          <div className=\"flex gap-2\">\n                            <Dialog>\n                              <DialogTrigger asChild>\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"ghost\"\n                                  onClick={() => setEditingFacility(facility)}\n                                >\n                                  <Edit className=\"h-4 w-4\" />\n                                </Button>\n                              </DialogTrigger>\n                              <DialogContent className=\"max-w-2xl\">\n                                <DialogHeader>\n                                  <DialogTitle>Edit Facility</DialogTitle>\n                                </DialogHeader>\n                                {editingFacility && editingFacility.id === facility.id && (\n                                  <div className=\"space-y-4 mt-4\">\n                                    <div className=\"space-y-2\">\n                                      <Label>Name *</Label>\n                                      <Input\n                                        value={editingFacility.name}\n                                        onChange={(e) => setEditingFacility({ ...editingFacility, name: e.target.value })}\n                                      />\n                                    </div>\n                                    <div className=\"grid grid-cols-2 gap-4\">\n                                      <div className=\"space-y-2\">\n                                        <Label>Capacity</Label>\n                                        <Input\n                                          value={editingFacility.capacity || \"\"}\n                                          onChange={(e) => setEditingFacility({ ...editingFacility, capacity: e.target.value })}\n                                        />\n                                      </div>\n                                      <div className=\"space-y-2\">\n                                        <Label>Timings</Label>\n                                        <Input\n                                          value={editingFacility.timings || \"\"}\n                                          onChange={(e) => setEditingFacility({ ...editingFacility, timings: e.target.value })}\n                                        />\n                                      </div>\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                      <Label>Description</Label>\n                                      <Textarea\n                                        value={editingFacility.description}\n                                        onChange={(e) => setEditingFacility({ ...editingFacility, description: e.target.value })}\n                                        rows={4}\n                                      />\n                                    </div>\n                                    <Button onClick={handleUpdateFacility} className=\"w-full\">\n                                      Update Facility\n                                    </Button>\n                                  </div>\n                                )}\n                              </DialogContent>\n                            </Dialog>\n                            <Button\n                              size=\"sm\"\n                              variant=\"ghost\"\n                              onClick={() => handleDeleteFacility(facility.id)}\n                              className=\"text-red-600 hover:text-red-700 hover:bg-red-50\"\n                            >\n                              <Trash2 className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          );\n        })}\n\n        {facilities.length === 0 && (\n          <Card>\n            <CardContent className=\"text-center py-12 text-gray-500\">\n              <Library className=\"h-12 w-12 mx-auto mb-2 text-gray-400\" />\n              <p className=\"text-sm\">No facilities added yet</p>\n              <p className=\"text-xs mt-1\">Click \"Add New Facility\" to get started</p>\n            </CardContent>\n          </Card>\n        )}\n      </div>\n\n      {facilitiesData && (\n        <div className=\"text-xs text-gray-500 text-right\">\n          Last updated: {new Date(facilitiesData.updated_at || Date.now()).toLocaleString()}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":15589},"client/src/components/admin/general-info-sections/SocialMediaSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { Save, Edit, Facebook, Instagram, Youtube, Linkedin, Twitter, Smartphone, ExternalLink } from \"lucide-react\";\n\ninterface SocialMediaSectionProps {\n  data: any;\n  onUpdate: () => void;\n}\n\nexport function SocialMediaSection({ data, onUpdate }: SocialMediaSectionProps) {\n  const { toast } = useToast();\n  const token = localStorage.getItem(\"adminToken\");\n  \n  const [formData, setFormData] = useState({\n    facebook: \"\",\n    instagram: \"\",\n    youtube: \"\",\n    linkedin: \"\",\n    twitter: \"\",\n    app_link: \"\",\n  });\n\n  const [isEditing, setIsEditing] = useState(false);\n\n  const { data: socialMediaData } = useQuery({\n    queryKey: [\"/api/admin/general-info/social-media\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info/social-media\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (socialMediaData) {\n      setFormData({\n        facebook: socialMediaData.facebook || \"\",\n        instagram: socialMediaData.instagram || \"\",\n        youtube: socialMediaData.youtube || \"\",\n        linkedin: socialMediaData.linkedin || \"\",\n        twitter: socialMediaData.twitter || \"\",\n        app_link: socialMediaData.app_link || \"\",\n      });\n    }\n  }, [socialMediaData]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(\"/api/admin/general-info/social-media\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"Social media links updated successfully\" });\n      setIsEditing(false);\n      onUpdate();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate(formData);\n  };\n\n  const socialPlatforms = [\n    {\n      id: \"facebook\",\n      name: \"Facebook\",\n      icon: Facebook,\n      color: \"text-blue-600\",\n      bgColor: \"bg-blue-50\",\n      placeholder: \"https://facebook.com/yourcollegepage\",\n    },\n    {\n      id: \"instagram\",\n      name: \"Instagram\",\n      icon: Instagram,\n      color: \"text-pink-600\",\n      bgColor: \"bg-pink-50\",\n      placeholder: \"https://instagram.com/yourcollegepage\",\n    },\n    {\n      id: \"youtube\",\n      name: \"YouTube\",\n      icon: Youtube,\n      color: \"text-red-600\",\n      bgColor: \"bg-red-50\",\n      placeholder: \"https://youtube.com/@yourcollegechannel\",\n    },\n    {\n      id: \"linkedin\",\n      name: \"LinkedIn\",\n      icon: Linkedin,\n      color: \"text-blue-700\",\n      bgColor: \"bg-blue-50\",\n      placeholder: \"https://linkedin.com/company/yourcollegepage\",\n    },\n    {\n      id: \"twitter\",\n      name: \"X (Twitter)\",\n      icon: Twitter,\n      color: \"text-gray-900\",\n      bgColor: \"bg-gray-50\",\n      placeholder: \"https://twitter.com/yourcollegepage\",\n    },\n    {\n      id: \"app_link\",\n      name: \"Official App\",\n      icon: Smartphone,\n      color: \"text-purple-600\",\n      bgColor: \"bg-purple-50\",\n      placeholder: \"https://play.google.com/store/apps/...\",\n    },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">Social Media & Online Presence</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">Connect your college's social media profiles</p>\n        </div>\n        {!isEditing ? (\n          <Button onClick={() => setIsEditing(true)} variant=\"outline\">\n            <Edit className=\"h-4 w-4 mr-2\" />\n            Edit\n          </Button>\n        ) : (\n          <div className=\"flex gap-2\">\n            <Button onClick={() => setIsEditing(false)} variant=\"outline\">\n              Cancel\n            </Button>\n            <Button onClick={handleSave} disabled={saveMutation.isPending}>\n              <Save className=\"h-4 w-4 mr-2\" />\n              {saveMutation.isPending ? \"Saving...\" : \"Save\"}\n            </Button>\n          </div>\n        )}\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        {socialPlatforms.map((platform) => {\n          const Icon = platform.icon;\n          const fieldValue = formData[platform.id as keyof typeof formData];\n          \n          return (\n            <Card key={platform.id} className=\"overflow-hidden\">\n              <CardHeader className={`pb-3 ${isEditing ? '' : fieldValue ? platform.bgColor : 'bg-gray-50'}`}>\n                <CardTitle className=\"text-base flex items-center gap-2\">\n                  <div className={`w-8 h-8 rounded-lg ${platform.bgColor} flex items-center justify-center`}>\n                    <Icon className={`h-4 w-4 ${platform.color}`} />\n                  </div>\n                  {platform.name}\n                  {!isEditing && fieldValue && (\n                    <a\n                      href={fieldValue}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"ml-auto\"\n                      onClick={(e) => e.stopPropagation()}\n                    >\n                      <ExternalLink className=\"h-4 w-4 text-gray-500 hover:text-gray-700\" />\n                    </a>\n                  )}\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"pt-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor={platform.id}>Profile URL</Label>\n                  <Input\n                    id={platform.id}\n                    type=\"url\"\n                    value={fieldValue}\n                    onChange={(e) => setFormData({ ...formData, [platform.id]: e.target.value })}\n                    disabled={!isEditing}\n                    placeholder={platform.placeholder}\n                  />\n                  {!isEditing && !fieldValue && (\n                    <p className=\"text-xs text-gray-500\">Not configured</p>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          );\n        })}\n      </div>\n\n      {/* Preview Section */}\n      {!isEditing && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-base\">Quick Links Preview</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex flex-wrap gap-3\">\n              {socialPlatforms.map((platform) => {\n                const Icon = platform.icon;\n                const fieldValue = formData[platform.id as keyof typeof formData];\n                \n                if (!fieldValue) return null;\n                \n                return (\n                  <a\n                    key={platform.id}\n                    href={fieldValue}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className={`inline-flex items-center gap-2 px-4 py-2 rounded-lg ${platform.bgColor} ${platform.color} hover:opacity-80 transition-opacity`}\n                  >\n                    <Icon className=\"h-5 w-5\" />\n                    <span className=\"text-sm font-medium\">{platform.name}</span>\n                    <ExternalLink className=\"h-3 w-3\" />\n                  </a>\n                );\n              })}\n              \n              {!Object.values(formData).some(v => v) && (\n                <p className=\"text-sm text-gray-500\">No social media links configured yet</p>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {socialMediaData && (\n        <div className=\"text-xs text-gray-500 text-right\">\n          Last updated: {new Date(socialMediaData.updated_at || Date.now()).toLocaleString()}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":8344},"client/src/components/admin/general-info-sections/NewsAnnouncementsSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Bell, ExternalLink, Star, StarOff, ArrowRight } from \"lucide-react\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\n\ninterface NewsAnnouncementsSectionProps {\n  data: any;\n  onUpdate: () => void;\n}\n\ninterface NewsItem {\n  id: string;\n  title: string;\n  content?: string;\n  created_at: string;\n  notice_type?: string;\n  priority?: string;\n}\n\nexport function NewsAnnouncementsSection({ data, onUpdate }: NewsAnnouncementsSectionProps) {\n  const { toast } = useToast();\n  const token = localStorage.getItem(\"adminToken\");\n  \n  const [highlightedNewsIds, setHighlightedNewsIds] = useState<string[]>([]);\n\n  // Fetch all news/notices\n  const { data: newsData } = useQuery({\n    queryKey: [\"/api/admin/general-info/news-announcements\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info/news-announcements\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (newsData?.highlighted) {\n      setHighlightedNewsIds(newsData.highlighted);\n    }\n  }, [newsData]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (highlightedIds: string[]) => {\n      const res = await fetch(\"/api/admin/general-info/news-announcements/highlight\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({ highlighted: highlightedIds }),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"Top announcements updated successfully\" });\n      onUpdate();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleToggleHighlight = (newsId: string) => {\n    const newHighlighted = highlightedNewsIds.includes(newsId)\n      ? highlightedNewsIds.filter((id) => id !== newsId)\n      : [...highlightedNewsIds.slice(0, 2), newsId]; // Max 3 items\n\n    if (newHighlighted.length > 3) {\n      toast({\n        title: \"Limit Reached\",\n        description: \"You can only highlight up to 3 announcements\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setHighlightedNewsIds(newHighlighted);\n  };\n\n  const handleSave = () => {\n    saveMutation.mutate(highlightedNewsIds);\n  };\n\n  const allNews: NewsItem[] = newsData?.news || [];\n  const totalCount = allNews.length;\n  const highlightedNews = allNews.filter((item) => highlightedNewsIds.includes(item.id));\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">News & Announcements</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">Manage highlighted announcements for General Info</p>\n        </div>\n        <Button\n          onClick={handleSave}\n          disabled={saveMutation.isPending}\n          variant={highlightedNewsIds.length > 0 ? \"default\" : \"outline\"}\n        >\n          {saveMutation.isPending ? \"Saving...\" : \"Save Highlights\"}\n        </Button>\n      </div>\n\n      {/* Stats Card */}\n      <Card className=\"bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200\">\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-base flex items-center gap-2\">\n            <Bell className=\"h-5 w-5 text-blue-600\" />\n            Overview\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n            <div>\n              <p className=\"text-2xl font-bold text-blue-600\">{totalCount}</p>\n              <p className=\"text-xs text-gray-600\">Total Active News</p>\n            </div>\n            <div>\n              <p className=\"text-2xl font-bold text-purple-600\">{highlightedNewsIds.length}</p>\n              <p className=\"text-xs text-gray-600\">Highlighted (Max 3)</p>\n            </div>\n            <div className=\"col-span-2 md:col-span-1\">\n              <a\n                href=\"/head-admin?tab=notices\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"inline-flex items-center gap-1 text-sm text-blue-600 hover:underline font-medium\"\n              >\n                Manage All News\n                <ExternalLink className=\"h-3 w-3\" />\n              </a>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Top 3 Highlighted Announcements */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-base flex items-center gap-2\">\n            <Star className=\"h-4 w-4 text-yellow-500 fill-yellow-500\" />\n            Top Highlighted Announcements\n          </CardTitle>\n          <p className=\"text-xs text-gray-600 mt-1\">\n            These will be prominently displayed in the General Information section\n          </p>\n        </CardHeader>\n        <CardContent>\n          {highlightedNews.length > 0 ? (\n            <div className=\"space-y-3\">\n              {highlightedNews.map((item, index) => (\n                <div\n                  key={item.id}\n                  className=\"border-2 border-yellow-200 rounded-lg p-4 bg-gradient-to-r from-yellow-50 to-amber-50\"\n                >\n                  <div className=\"flex items-start gap-3\">\n                    <div className=\"flex items-center justify-center w-6 h-6 rounded-full bg-yellow-500 text-white text-xs font-bold flex-shrink-0\">\n                      {index + 1}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-start gap-2\">\n                        <h4 className=\"font-semibold text-gray-900 flex-1\">{item.title}</h4>\n                        <Button\n                          size=\"sm\"\n                          variant=\"ghost\"\n                          onClick={() => handleToggleHighlight(item.id)}\n                          className=\"text-yellow-600 hover:text-yellow-700\"\n                        >\n                          <StarOff className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                      {item.content && (\n                        <p className=\"text-sm text-gray-600 mt-1 line-clamp-2\">{item.content}</p>\n                      )}\n                      <div className=\"flex items-center gap-2 mt-2\">\n                        {item.notice_type && (\n                          <Badge variant=\"outline\" className=\"text-xs\">\n                            {item.notice_type}\n                          </Badge>\n                        )}\n                        {item.priority && (\n                          <Badge\n                            variant={item.priority === \"urgent\" ? \"destructive\" : \"secondary\"}\n                            className=\"text-xs\"\n                          >\n                            {item.priority}\n                          </Badge>\n                        )}\n                        <span className=\"text-xs text-gray-500\">\n                          {new Date(item.created_at).toLocaleDateString()}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-center py-8 text-gray-500\">\n              <Star className=\"h-12 w-12 mx-auto mb-2 text-gray-400\" />\n              <p className=\"text-sm\">No announcements highlighted yet</p>\n              <p className=\"text-xs mt-1\">Select up to 3 announcements from the list below</p>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* All News Items */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-base\">All News & Announcements</CardTitle>\n          <p className=\"text-xs text-gray-600 mt-1\">\n            Select up to 3 announcements to highlight\n          </p>\n        </CardHeader>\n        <CardContent>\n          {allNews.length > 0 ? (\n            <div className=\"space-y-2 max-h-96 overflow-y-auto\">\n              {allNews.map((item) => (\n                <div\n                  key={item.id}\n                  className={`border rounded-lg p-3 hover:bg-gray-50 transition-colors ${\n                    highlightedNewsIds.includes(item.id) ? \"bg-yellow-50 border-yellow-300\" : \"\"\n                  }`}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    <Checkbox\n                      checked={highlightedNewsIds.includes(item.id)}\n                      onCheckedChange={() => handleToggleHighlight(item.id)}\n                      className=\"mt-1\"\n                    />\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-start justify-between gap-2\">\n                        <h4 className=\"font-medium text-sm text-gray-900\">{item.title}</h4>\n                        {highlightedNewsIds.includes(item.id) && (\n                          <Star className=\"h-4 w-4 text-yellow-500 fill-yellow-500 flex-shrink-0\" />\n                        )}\n                      </div>\n                      {item.content && (\n                        <p className=\"text-xs text-gray-600 mt-1 line-clamp-1\">{item.content}</p>\n                      )}\n                      <div className=\"flex items-center gap-2 mt-1\">\n                        {item.notice_type && (\n                          <Badge variant=\"outline\" className=\"text-[10px] py-0\">\n                            {item.notice_type}\n                          </Badge>\n                        )}\n                        <span className=\"text-[10px] text-gray-500\">\n                          {new Date(item.created_at).toLocaleDateString()}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-center py-8 text-gray-500\">\n              <Bell className=\"h-12 w-12 mx-auto mb-2 text-gray-400\" />\n              <p className=\"text-sm\">No news or announcements available</p>\n              <a\n                href=\"/head-admin?tab=notices\"\n                className=\"inline-flex items-center gap-1 text-xs text-blue-600 hover:underline mt-2\"\n              >\n                Create New Announcement\n                <ArrowRight className=\"h-3 w-3\" />\n              </a>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {newsData && (\n        <div className=\"text-xs text-gray-500 text-right\">\n          Last updated: {new Date(newsData.updated_at || Date.now()).toLocaleString()}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":11163},"client/src/components/admin/general-info-sections/AdditionalInfoSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { Save, Edit, Plus, Trash2, ChevronDown, Sparkles } from \"lucide-react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger, DialogDescription } from \"@/components/ui/dialog\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport { EnhancedAIInput } from \"../EnhancedAIInput\";\nimport { EnhancedAIPreview } from \"../EnhancedAIPreview\";\n\ninterface AdditionalInfoSectionProps {\n  data: any;\n  onUpdate: () => void;\n}\n\ninterface InfoEntry {\n  id: string;\n  title: string;\n  content: string;\n  category?: string;\n}\n\nexport function AdditionalInfoSection({ data, onUpdate }: AdditionalInfoSectionProps) {\n  const { toast } = useToast();\n  const token = localStorage.getItem(\"adminToken\");\n  const queryClient = useQueryClient();\n  \n  const [entries, setEntries] = useState<InfoEntry[]>([]);\n  const [newEntry, setNewEntry] = useState({ title: \"\", content: \"\", category: \"\" });\n  const [editingEntry, setEditingEntry] = useState<InfoEntry | null>(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [dialogMode, setDialogMode] = useState<'manual' | 'ai'>('manual');\n  \n  // AI Mode State\n  const [aiPrompt, setAiPrompt] = useState(\"\");\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [aiGeneratedData, setAiGeneratedData] = useState<any>(null);\n  const [currentPreviewIndex, setCurrentPreviewIndex] = useState(0);\n  const [isListening, setIsListening] = useState(false);\n  const [browserSupported] = useState(() => 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window);\n\n  const { data: additionalInfoData } = useQuery({\n    queryKey: [\"/api/admin/general-info/additional-info\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info/additional-info\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (additionalInfoData?.entries) {\n      setEntries(additionalInfoData.entries);\n    }\n  }, [additionalInfoData]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(\"/api/admin/general-info/additional-info\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({ entries: data }),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/general-info/additional-info\"] });\n      toast({ title: \"Success\", description: \"Additional info updated successfully\" });\n      setIsEditing(false);\n      onUpdate();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate(entries);\n  };\n\n  const handleOpenDialog = (mode: 'manual' | 'ai') => {\n    setDialogMode(mode);\n    setIsDialogOpen(true);\n    setAiGeneratedData(null);\n    setAiPrompt(\"\");\n  };\n\n  // Manual Mode Functions\n  const handleAddEntry = () => {\n    if (!newEntry.title || !newEntry.content) {\n      toast({ title: \"Error\", description: \"Title and content are required\", variant: \"destructive\" });\n      return;\n    }\n    const entry: InfoEntry = {\n      id: Date.now().toString(),\n      ...newEntry,\n    };\n    setEntries([...entries, entry]);\n    setNewEntry({ title: \"\", content: \"\", category: \"\" });\n    setIsDialogOpen(false);\n    toast({ title: \"Success\", description: \"Entry added\" });\n  };\n\n  const handleUpdateEntry = () => {\n    if (!editingEntry) return;\n    setEntries(entries.map((e) => (e.id === editingEntry.id ? editingEntry : e)));\n    setEditingEntry(null);\n    toast({ title: \"Success\", description: \"Entry updated\" });\n  };\n\n  const handleDeleteEntry = (id: string) => {\n    setEntries(entries.filter((e) => e.id !== id));\n    toast({ title: \"Success\", description: \"Entry removed\" });\n  };\n\n  // AI Mode Functions\n  const handleGenerateAI = async () => {\n    if (!aiPrompt.trim()) {\n      toast({ title: \"Error\", description: \"Please enter a description\", variant: \"destructive\" });\n      return;\n    }\n\n    setIsGenerating(true);\n    try {\n      const response = await fetch(\"/api/ai-generate\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          prompt: aiPrompt,\n          type: \"additional_info\",\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || \"Failed to generate\");\n      }\n      \n      const result = await response.json();\n      setAiGeneratedData(result);\n      setCurrentPreviewIndex(0);\n      toast({ title: \"Success\", description: \"Information generated successfully\" });\n    } catch (error: any) {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  const handleConfirmAI = () => {\n    if (!aiGeneratedData) return;\n    const newEntries = aiGeneratedData.entries || [aiGeneratedData];\n    const entriesWithIds = newEntries.map((entry: any) => ({\n      id: Date.now().toString() + Math.random(),\n      title: entry.title,\n      content: entry.content,\n      category: entry.category || \"\",\n    }));\n    setEntries([...entries, ...entriesWithIds]);\n    setAiGeneratedData(null);\n    setAiPrompt(\"\");\n    setIsDialogOpen(false);\n    toast({ \n      title: \"Success\", \n      description: `${entriesWithIds.length} entry/entries added successfully` \n    });\n  };\n\n  const handleRegenerateAI = () => {\n    setAiGeneratedData(null);\n    setCurrentPreviewIndex(0);\n  };\n\n  const handleEditAIEntry = (entry: any, index: number) => {\n    const updatedEntries = [...(aiGeneratedData.entries || [aiGeneratedData])];\n    updatedEntries[index] = entry;\n    setAiGeneratedData({ ...aiGeneratedData, entries: updatedEntries });\n  };\n\n  const handleDeleteAIEntry = (index: number) => {\n    const updatedEntries = [...(aiGeneratedData.entries || [aiGeneratedData])];\n    updatedEntries.splice(index, 1);\n    if (updatedEntries.length === 0) {\n      setAiGeneratedData(null);\n    } else {\n      setAiGeneratedData({ ...aiGeneratedData, entries: updatedEntries });\n    }\n  };\n\n  const handleToggleVoice = () => {\n    if (!browserSupported) {\n      toast({ title: \"Not Supported\", description: \"Voice input not supported in this browser\", variant: \"destructive\" });\n      return;\n    }\n    setIsListening(!isListening);\n    // Voice recognition logic would go here\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">Additional Information</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">Add custom information manually or with AI assistance</p>\n        </div>\n        {!isEditing ? (\n          <Button onClick={() => setIsEditing(true)} variant=\"outline\">\n            <Edit className=\"h-4 w-4 mr-2\" />\n            Edit\n          </Button>\n        ) : (\n          <div className=\"flex gap-2\">\n            <Button onClick={() => setIsEditing(false)} variant=\"outline\">\n              Cancel\n            </Button>\n            <Button onClick={handleSave} disabled={saveMutation.isPending}>\n              <Save className=\"h-4 w-4 mr-2\" />\n              {saveMutation.isPending ? \"Saving...\" : \"Save All\"}\n            </Button>\n          </div>\n        )}\n      </div>\n\n      {isEditing && (\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button className=\"w-full sm:w-auto\">\n              <Plus className=\"mr-2 h-4 w-4\" />\n              Add Information\n              <ChevronDown className=\"h-4 w-4 ml-2\" />\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent align=\"start\">\n            <DropdownMenuItem onClick={() => handleOpenDialog('manual')}>\n              Manual Mode\n            </DropdownMenuItem>\n            <DropdownMenuItem onClick={() => handleOpenDialog('ai')}>\n              <Sparkles className=\"h-4 w-4 mr-2\" />\n              AI Mode (Smart Add)\n            </DropdownMenuItem>\n          </DropdownMenuContent>\n        </DropdownMenu>\n      )}\n\n      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n        <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {dialogMode === 'ai' ? \"AI Mode - Add Information\" : \"Add Information\"}\n            </DialogTitle>\n            <DialogDescription>\n              {dialogMode === 'ai' \n                ? \"Describe the information in natural language and AI will structure it for you\" \n                : \"Add additional information manually\"}\n            </DialogDescription>\n          </DialogHeader>\n\n          {dialogMode === 'ai' ? (\n            <>\n              {!aiGeneratedData ? (\n                <EnhancedAIInput\n                  prompt={aiPrompt}\n                  onPromptChange={setAiPrompt}\n                  onGenerate={handleGenerateAI}\n                  isGenerating={isGenerating}\n                  isListening={isListening}\n                  onToggleVoice={handleToggleVoice}\n                  browserSupported={browserSupported}\n                  placeholder=\"Describe the additional information you want to add...\"\n                  examples={[\n                    \"Add information about our alumni network and success stories\",\n                    \"Add details about our international collaborations and exchange programs\",\n                    \"Add information about our research publications and patents\"\n                  ]}\n                  sectionType=\"information\"\n                />\n              ) : (\n                <EnhancedAIPreview\n                  entries={aiGeneratedData.entries || [aiGeneratedData]}\n                  currentIndex={currentPreviewIndex}\n                  onIndexChange={setCurrentPreviewIndex}\n                  renderPreview={(entry) => (\n                    <div className=\"space-y-3\">\n                      <div>\n                        <span className=\"font-semibold text-gray-700 block mb-1\">Title:</span>\n                        <p className=\"text-gray-900 text-lg\">{entry.title}</p>\n                      </div>\n                      {entry.category && (\n                        <div>\n                          <span className=\"font-semibold text-gray-700 block mb-1\">Category:</span>\n                          <p className=\"text-gray-900\">{entry.category}</p>\n                        </div>\n                      )}\n                      <div>\n                        <span className=\"font-semibold text-gray-700 block mb-1\">Content:</span>\n                        <p className=\"text-gray-900 whitespace-pre-wrap\">{entry.content}</p>\n                      </div>\n                    </div>\n                  )}\n                  onConfirmAll={handleConfirmAI}\n                  onRegenerate={handleRegenerateAI}\n                  onEditEntry={handleEditAIEntry}\n                  onDeleteEntry={handleDeleteAIEntry}\n                  confirmButtonText={`Add ${(aiGeneratedData.entries || [aiGeneratedData]).length} Entry/Entries`}\n                  entryTypeName=\"Information\"\n                />\n              )}\n            </>\n          ) : (\n            <div className=\"space-y-4 mt-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"title\">Title *</Label>\n                <Input\n                  id=\"title\"\n                  value={newEntry.title}\n                  onChange={(e) => setNewEntry({ ...newEntry, title: e.target.value })}\n                  placeholder=\"Enter title\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"category\">Category (Optional)</Label>\n                <Input\n                  id=\"category\"\n                  value={newEntry.category}\n                  onChange={(e) => setNewEntry({ ...newEntry, category: e.target.value })}\n                  placeholder=\"e.g., Alumni, Collaborations, Research\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"content\">Content *</Label>\n                <Textarea\n                  id=\"content\"\n                  value={newEntry.content}\n                  onChange={(e) => setNewEntry({ ...newEntry, content: e.target.value })}\n                  placeholder=\"Enter detailed content\"\n                  rows={6}\n                />\n              </div>\n\n              <div className=\"flex justify-end gap-2 pt-4\">\n                <Button onClick={() => setIsDialogOpen(false)} variant=\"outline\">\n                  Cancel\n                </Button>\n                <Button onClick={handleAddEntry}>\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Add Entry\n                </Button>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n\n      <div className=\"grid grid-cols-1 gap-4\">\n        {entries.length === 0 ? (\n          <Card>\n            <CardContent className=\"py-12 text-center text-gray-500\">\n              <p>No additional information added yet.</p>\n              <p className=\"text-sm mt-2\">Use the \"Add Information\" button to add custom content.</p>\n            </CardContent>\n          </Card>\n        ) : (\n          entries.map((entry) => (\n            <Card key={entry.id}>\n              <CardHeader className=\"pb-3\">\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <CardTitle className=\"text-base\">{entry.title}</CardTitle>\n                    {entry.category && (\n                      <p className=\"text-sm text-gray-600 mt-1\">Category: {entry.category}</p>\n                    )}\n                  </div>\n                  {isEditing && (\n                    <div className=\"flex gap-2 ml-4\">\n                      <Button\n                        onClick={() => setEditingEntry(entry)}\n                        size=\"sm\"\n                        variant=\"ghost\"\n                      >\n                        <Edit className=\"h-4 w-4\" />\n                      </Button>\n                      <Button\n                        onClick={() => handleDeleteEntry(entry.id)}\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        className=\"text-red-600 hover:text-red-700\"\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  )}\n                </div>\n              </CardHeader>\n              <CardContent>\n                <p className=\"text-gray-700 whitespace-pre-wrap\">{entry.content}</p>\n              </CardContent>\n            </Card>\n          ))\n        )}\n      </div>\n\n      <Dialog open={!!editingEntry} onOpenChange={(open) => !open && setEditingEntry(null)}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>Edit Information</DialogTitle>\n          </DialogHeader>\n          {editingEntry && (\n            <div className=\"space-y-4 mt-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"edit-title\">Title *</Label>\n                <Input\n                  id=\"edit-title\"\n                  value={editingEntry.title}\n                  onChange={(e) => setEditingEntry({ ...editingEntry, title: e.target.value })}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"edit-category\">Category (Optional)</Label>\n                <Input\n                  id=\"edit-category\"\n                  value={editingEntry.category || \"\"}\n                  onChange={(e) => setEditingEntry({ ...editingEntry, category: e.target.value })}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"edit-content\">Content *</Label>\n                <Textarea\n                  id=\"edit-content\"\n                  value={editingEntry.content}\n                  onChange={(e) => setEditingEntry({ ...editingEntry, content: e.target.value })}\n                  rows={6}\n                />\n              </div>\n\n              <div className=\"flex justify-end gap-2 pt-4\">\n                <Button onClick={() => setEditingEntry(null)} variant=\"outline\">\n                  Cancel\n                </Button>\n                <Button onClick={handleUpdateEntry}>\n                  <Save className=\"h-4 w-4 mr-2\" />\n                  Update Entry\n                </Button>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n\n      {additionalInfoData && (\n        <div className=\"text-xs text-gray-500 text-right\">\n          Last updated: {new Date(additionalInfoData.updated_at || Date.now()).toLocaleString()}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":17761},"client/src/components/admin/general-info-sections/AboutHistoryOverviewSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { Edit, Save, BookOpen, History as HistoryIcon, User, Target, Heart } from \"lucide-react\";\n\ninterface AboutHistoryOverviewSectionProps {\n  data: any;\n  onUpdate: () => void;\n}\n\nexport function AboutHistoryOverviewSection({ data, onUpdate }: AboutHistoryOverviewSectionProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const token = localStorage.getItem(\"adminToken\");\n  \n  const [formData, setFormData] = useState({\n    short_overview: \"Founded in 1954 by philanthropist Seth Makhan Lal, Radha Krishan Sanatan Dharm (PG) College (RKSD) is a prestigious, government-aided institution dedicated to delivering quality higher education in Kaithal, Haryana. Affiliated to Kurukshetra University, the college has grown from an intermediate institution to a multi-faculty post-graduate college, blending traditional values with modern academics and community-oriented learning.\",\n    \n    detailed_history: `Early 1950s â€” The Need for Higher Education:\nKaithal, though a prominent trade centre, lacked institutions for higher studies. Local students had to travel to distant cities to pursue college education.\n\n1953â€“1954 â€” Formation of Rashtriya Vidya Samiti (RVS):\nInspired by community leaders and led by Seth Makhan Lal, the idea of founding a college took shape. The Rashtriya Vidya Samiti (Regd.), Kaithal, was officially registered in 1954 under the Societies Registration Act XXI of 1860.\n\n1954 â€” Establishment of RKSD College:\nThe college was founded as an Intermediate College in a rented building and named after Seth Makhan Lal's father-in-law, Shri Radha Krishan Ji. Later, it shifted to its current campus spread over 10 acres on the Ambalaâ€“Hisar Highway.\n\n1976 â€” Attaining Post-Graduate Status:\nRKSD College achieved PG status with the introduction of M.A. (Hindi). Subsequently, it expanded into multiple disciplines, adding M.A. (Political Science, English), M.Sc. (Mathematics), BBA, and BCA programmes.\n\n2003 â€” Introduction of Evening Session:\nTo accommodate more students, the Government of Haryana and Kurukshetra University permitted the college to begin Evening Session classes.\n\n2017 â€” NAAC Accreditation:\nThe college was accredited with an 'A' Grade by NAAC, affirming its commitment to academic excellence, quality assurance, and institutional growth.\n\nOngoing Development:\nRKSD continues to evolve through academic innovation, infrastructural expansion, and community engagement, positioning itself as a model of holistic education in Haryana.`,\n\n    founder_story: `The founder, Seth Makhan Lal (1909â€“1965), a visionary philanthropist of the Aggarwal community, recognized Kaithal's urgent need for higher education. He generously donated his movable and immovable property to the Rashtriya Vidya Samiti, laying the foundation for RKSD College in 1954. Under his leadership, and with support from other community members, the college became a beacon of education and social upliftment in the region.`,\n\n    vision_statement: `To impart quality education by consistently incorporating the latest advancements and global learning traditions â€” transforming lives, empowering future leaders, and contributing to the holistic development of society while preserving India's cultural heritage.`,\n\n    mission_statement: `â€¢ To create a dynamic and progressive learning environment fostering curiosity, critical thinking, and innovation.\nâ€¢ To nurture well-rounded individuals who excel academically and contribute positively to the community.\nâ€¢ To equip students with modern skills and knowledge essential for success in a rapidly changing global landscape.\nâ€¢ To integrate ethical values and social responsibility in education.`,\n\n    core_values: `â€¢ Academic Excellence: Maintaining high standards in teaching, learning, and research.\nâ€¢ Inclusivity & Pluralism: Offering accessible education to all, respecting diversity and equality.\nâ€¢ Holistic Development: Promoting balanced growth through academics, sports, and cultural activities.\nâ€¢ Ethics & Integrity: Upholding honesty, transparency, and moral conduct in all endeavors.\nâ€¢ Community Engagement: Encouraging social responsibility and outreach for societal betterment.`,\n  });\n\n  const [isEditing, setIsEditing] = useState(false);\n\n  const { data: aboutData } = useQuery({\n    queryKey: [\"/api/admin/general-info/about-history-overview\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info/about-history-overview\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (aboutData) {\n      setFormData({\n        short_overview: aboutData.short_overview || formData.short_overview,\n        detailed_history: aboutData.detailed_history || formData.detailed_history,\n        founder_story: aboutData.founder_story || formData.founder_story,\n        vision_statement: aboutData.vision_statement || formData.vision_statement,\n        mission_statement: aboutData.mission_statement || formData.mission_statement,\n        core_values: aboutData.core_values || formData.core_values,\n      });\n    }\n  }, [aboutData]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(\"/api/admin/general-info/about-history-overview\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"About / History / Overview updated successfully\" });\n      setIsEditing(false);\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/general-info/about-history-overview\"] });\n      onUpdate();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate(formData);\n  };\n\n  const handleChange = (field: string, value: string) => {\n    setFormData((prev) => ({ ...prev, [field]: value }));\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">About / History / Overview</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">Complete information about college history, vision, mission, and values</p>\n        </div>\n        {!isEditing ? (\n          <Button onClick={() => setIsEditing(true)} variant=\"outline\">\n            <Edit className=\"h-4 w-4 mr-2\" />\n            Edit\n          </Button>\n        ) : (\n          <div className=\"flex gap-2\">\n            <Button onClick={() => setIsEditing(false)} variant=\"outline\">\n              Cancel\n            </Button>\n            <Button onClick={handleSave} disabled={saveMutation.isPending}>\n              <Save className=\"h-4 w-4 mr-2\" />\n              {saveMutation.isPending ? \"Saving...\" : \"Save All Changes\"}\n            </Button>\n          </div>\n        )}\n      </div>\n\n      <div className=\"space-y-6\">\n        {/* Short Overview Section */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <BookOpen className=\"h-5 w-5 text-blue-600\" />\n              Short Overview\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Textarea\n                value={formData.short_overview}\n                onChange={(e) => handleChange(\"short_overview\", e.target.value)}\n                disabled={!isEditing}\n                rows={5}\n                className=\"w-full\"\n                placeholder=\"Brief overview of the college...\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Detailed History Section */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <HistoryIcon className=\"h-5 w-5 text-purple-600\" />\n              Detailed History\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Textarea\n                value={formData.detailed_history}\n                onChange={(e) => handleChange(\"detailed_history\", e.target.value)}\n                disabled={!isEditing}\n                rows={15}\n                className=\"w-full font-mono text-sm\"\n                placeholder=\"Complete historical timeline of the college...\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Founder Story Section */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <User className=\"h-5 w-5 text-green-600\" />\n              Founder / Establishment Story\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Textarea\n                value={formData.founder_story}\n                onChange={(e) => handleChange(\"founder_story\", e.target.value)}\n                disabled={!isEditing}\n                rows={6}\n                className=\"w-full\"\n                placeholder=\"Information about the founder and establishment...\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Vision Statement Section */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <Target className=\"h-5 w-5 text-orange-600\" />\n              Vision Statement\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Textarea\n                value={formData.vision_statement}\n                onChange={(e) => handleChange(\"vision_statement\", e.target.value)}\n                disabled={!isEditing}\n                rows={4}\n                className=\"w-full\"\n                placeholder=\"College vision statement...\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Mission Statement Section */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <Target className=\"h-5 w-5 text-red-600\" />\n              Mission Statement\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Textarea\n                value={formData.mission_statement}\n                onChange={(e) => handleChange(\"mission_statement\", e.target.value)}\n                disabled={!isEditing}\n                rows={6}\n                className=\"w-full\"\n                placeholder=\"College mission statement with bullet points...\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Core Values Section */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <Heart className=\"h-5 w-5 text-pink-600\" />\n              Core Values\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Textarea\n                value={formData.core_values}\n                onChange={(e) => handleChange(\"core_values\", e.target.value)}\n                disabled={!isEditing}\n                rows={6}\n                className=\"w-full\"\n                placeholder=\"Core values of the institution...\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {aboutData && (\n        <div className=\"text-xs text-gray-500 text-right\">\n          Last updated: {new Date(aboutData.updated_at || Date.now()).toLocaleString()}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":12595},"client/src/components/admin/general-info-sections/ScholarshipsFinancialAidSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { Edit, Save, Award, Gift, Trash2, Plus, ExternalLink, FileText, DollarSign } from \"lucide-react\";\n\ninterface ScholarshipsFinancialAidSectionProps {\n  data: any;\n  onUpdate: () => void;\n}\n\ninterface DonorScholarship {\n  id: string;\n  name: string;\n  amount: string;\n  donor: string;\n  description?: string;\n}\n\ninterface GovernmentScholarship {\n  id: string;\n  name: string;\n  description: string;\n  platform: string;\n}\n\ninterface ApplicationStep {\n  id: string;\n  stepNumber: number;\n  title: string;\n  description: string;\n}\n\nexport function ScholarshipsFinancialAidSection({ data, onUpdate }: ScholarshipsFinancialAidSectionProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const token = localStorage.getItem(\"adminToken\");\n  \n  const [formData, setFormData] = useState({\n    overview: \"R.K.S.D. (P.G.) College, Kaithal provides financial assistance to deserving students through a blend of college-specific donor scholarships, Student Aid Fund freeships, and government-sponsored schemes. All scholarships aim to encourage academic excellence, support economically weaker students, and promote inclusive education.\",\n    \n    eligibility_freeships: \"For orphans and students from financially weaker sections.\",\n    eligibility_merit_awards: \"For students excelling in academics, sports, or cultural activities.\",\n    eligibility_general_conditions: \"Recipients must maintain minimum attendance, follow college code of conduct, and show satisfactory academic performance for continuation.\",\n    \n    har_chhatravratti_link: \"https://harchhatravratti.highereduhry.ac.in\",\n    nsp_link: \"https://scholarships.gov.in\",\n    \n    important_notes_timeline: \"Online applications generally open Julyâ€“September 2025 (depending on scheme).\",\n    important_notes_documents: \"Required documents include Caste Certificate, Income Certificate, Aadhaar, Bank Passbook, Mark Sheets, and Bonafide Certificate from the college.\",\n    important_notes_updates: \"Students should regularly check notice boards and official portals for deadlines and status updates.\",\n  });\n\n  const [donorScholarships, setDonorScholarships] = useState<DonorScholarship[]>([\n    {\n      id: \"1\",\n      name: \"R.G. Charitable Trust\",\n      donor: \"New Delhi\",\n      amount: \"â‚¹ 2,00,000\",\n      description: \"\"\n    },\n    {\n      id: \"2\",\n      name: \"Krishnaâ€“Gopi Nath Memorial Scholarship\",\n      donor: \"Dr. Sanjay Goyal\",\n      amount: \"â‚¹ 20,000\",\n      description: \"\"\n    },\n    {\n      id: \"3\",\n      name: \"Nirmal S.L. Mangal Memorial Scholarship\",\n      donor: \"Dr. Geeta Goyal\",\n      amount: \"â‚¹ 20,000\",\n      description: \"\"\n    },\n    {\n      id: \"4\",\n      name: \"Saroj Bhardwaj Balika Vikas Scholarship\",\n      donor: \"College Trust\",\n      amount: \"Variable\",\n      description: \"For meritorious girl students\"\n    },\n    {\n      id: \"5\",\n      name: \"Additional Donor Awards\",\n      donor: \"Alumni, Faculty, and Local Philanthropists\",\n      amount: \"Variable\",\n      description: \"Distributed annually based on merit and need\"\n    }\n  ]);\n\n  const [applicationSteps, setApplicationSteps] = useState<ApplicationStep[]>([\n    {\n      id: \"1\",\n      stepNumber: 1,\n      title: \"Application Submission\",\n      description: \"Students apply through the Student Welfare Committee during the notified period.\"\n    },\n    {\n      id: \"2\",\n      stepNumber: 2,\n      title: \"Faculty Recommendation\",\n      description: \"Each application must carry a recommendation from a faculty member.\"\n    },\n    {\n      id: \"3\",\n      stepNumber: 3,\n      title: \"Scrutiny & Approval\",\n      description: \"The committee reviews applications and forwards recommendations to the Principal for final approval.\"\n    },\n    {\n      id: \"4\",\n      stepNumber: 4,\n      title: \"Renewal\",\n      description: \"Granted annually on the basis of academic progress and disciplinary record.\"\n    }\n  ]);\n\n  const [governmentScholarships, setGovernmentScholarships] = useState<GovernmentScholarship[]>([\n    {\n      id: \"1\",\n      name: \"Post-Matric Scholarship (SC/BC)\",\n      description: \"For students of Scheduled Castes and Backward Classes in Haryana\",\n      platform: \"National Scholarship Portal (NSP)\"\n    },\n    {\n      id: \"2\",\n      name: \"Har-Chhatravratti Portal Schemes\",\n      description: \"Consolidated Haryana Govt. scholarships for UG/PG students â€“ SC/BC/EWS/Disabled categories\",\n      platform: \"Har-Chhatravratti Portal\"\n    },\n    {\n      id: \"3\",\n      name: \"Merit Scholarship to Undergraduate Girls\",\n      description: \"For meritorious female students pursuing UG programs\",\n      platform: \"Har-Chhatravratti\"\n    },\n    {\n      id: \"4\",\n      name: \"Haryana State Merit Scholarship Scheme\",\n      description: \"For students from economically weaker sections with high merit\",\n      platform: \"Har-Chhatravratti\"\n    },\n    {\n      id: \"5\",\n      name: \"Disabled Scholarship\",\n      description: \"For students with physical disabilities (â‰¥ 40 %)\",\n      platform: \"Har-Chhatravratti / NSP\"\n    },\n    {\n      id: \"6\",\n      name: \"National Merit / State Merit / Silver Jubilee Scholarships\",\n      description: \"Based on board/university exam performance\",\n      platform: \"NSP / DHE Haryana\"\n    }\n  ]);\n\n  const [newDonorScholarship, setNewDonorScholarship] = useState({ name: \"\", donor: \"\", amount: \"\", description: \"\" });\n  const [newApplicationStep, setNewApplicationStep] = useState({ stepNumber: 0, title: \"\", description: \"\" });\n  const [newGovtScholarship, setNewGovtScholarship] = useState({ name: \"\", description: \"\", platform: \"\" });\n  const [isEditing, setIsEditing] = useState(false);\n\n  const { data: scholarshipsData } = useQuery({\n    queryKey: [\"/api/admin/general-info/scholarships-financial-aid\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info/scholarships-financial-aid\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (scholarshipsData) {\n      setFormData({\n        overview: scholarshipsData.overview || formData.overview,\n        eligibility_freeships: scholarshipsData.eligibility_freeships || formData.eligibility_freeships,\n        eligibility_merit_awards: scholarshipsData.eligibility_merit_awards || formData.eligibility_merit_awards,\n        eligibility_general_conditions: scholarshipsData.eligibility_general_conditions || formData.eligibility_general_conditions,\n        har_chhatravratti_link: scholarshipsData.har_chhatravratti_link || formData.har_chhatravratti_link,\n        nsp_link: scholarshipsData.nsp_link || formData.nsp_link,\n        important_notes_timeline: scholarshipsData.important_notes_timeline || formData.important_notes_timeline,\n        important_notes_documents: scholarshipsData.important_notes_documents || formData.important_notes_documents,\n        important_notes_updates: scholarshipsData.important_notes_updates || formData.important_notes_updates,\n      });\n      if (scholarshipsData.donor_scholarships) {\n        setDonorScholarships(scholarshipsData.donor_scholarships);\n      }\n      if (scholarshipsData.application_steps) {\n        setApplicationSteps(scholarshipsData.application_steps);\n      }\n      if (scholarshipsData.government_scholarships) {\n        setGovernmentScholarships(scholarshipsData.government_scholarships);\n      }\n    }\n  }, [scholarshipsData]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(\"/api/admin/general-info/scholarships-financial-aid\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"Scholarships & Financial Aid information updated successfully\" });\n      setIsEditing(false);\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/general-info/scholarships-financial-aid\"] });\n      onUpdate();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate({\n      ...formData,\n      donor_scholarships: donorScholarships,\n      application_steps: applicationSteps,\n      government_scholarships: governmentScholarships,\n    });\n  };\n\n  const handleChange = (field: string, value: string) => {\n    setFormData((prev) => ({ ...prev, [field]: value }));\n  };\n\n  const addDonorScholarship = () => {\n    if (newDonorScholarship.name.trim() && newDonorScholarship.donor.trim()) {\n      setDonorScholarships([...donorScholarships, { \n        id: Date.now().toString(), \n        ...newDonorScholarship \n      }]);\n      setNewDonorScholarship({ name: \"\", donor: \"\", amount: \"\", description: \"\" });\n    }\n  };\n\n  const removeDonorScholarship = (id: string) => {\n    setDonorScholarships(donorScholarships.filter(s => s.id !== id));\n  };\n\n  const updateDonorScholarship = (id: string, field: keyof DonorScholarship, value: string) => {\n    setDonorScholarships(donorScholarships.map(s => \n      s.id === id ? { ...s, [field]: value } : s\n    ));\n  };\n\n  const addApplicationStep = () => {\n    if (newApplicationStep.title.trim() && newApplicationStep.description.trim()) {\n      setApplicationSteps([...applicationSteps, { \n        id: Date.now().toString(), \n        stepNumber: newApplicationStep.stepNumber || applicationSteps.length + 1,\n        title: newApplicationStep.title, \n        description: newApplicationStep.description \n      }]);\n      setNewApplicationStep({ stepNumber: 0, title: \"\", description: \"\" });\n    }\n  };\n\n  const removeApplicationStep = (id: string) => {\n    setApplicationSteps(applicationSteps.filter(s => s.id !== id));\n  };\n\n  const updateApplicationStep = (id: string, field: keyof ApplicationStep, value: string | number) => {\n    setApplicationSteps(applicationSteps.map(s => \n      s.id === id ? { ...s, [field]: value } : s\n    ));\n  };\n\n  const addGovtScholarship = () => {\n    if (newGovtScholarship.name.trim() && newGovtScholarship.description.trim()) {\n      setGovernmentScholarships([...governmentScholarships, { \n        id: Date.now().toString(), \n        ...newGovtScholarship \n      }]);\n      setNewGovtScholarship({ name: \"\", description: \"\", platform: \"\" });\n    }\n  };\n\n  const removeGovtScholarship = (id: string) => {\n    setGovernmentScholarships(governmentScholarships.filter(s => s.id !== id));\n  };\n\n  const updateGovtScholarship = (id: string, field: keyof GovernmentScholarship, value: string) => {\n    setGovernmentScholarships(governmentScholarships.map(s => \n      s.id === id ? { ...s, [field]: value } : s\n    ));\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">Scholarships & Financial Aid</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">College scholarships, government schemes, and application process</p>\n        </div>\n        {!isEditing ? (\n          <Button onClick={() => setIsEditing(true)} variant=\"outline\">\n            <Edit className=\"h-4 w-4 mr-2\" />\n            Edit\n          </Button>\n        ) : (\n          <div className=\"flex gap-2\">\n            <Button onClick={() => setIsEditing(false)} variant=\"outline\">\n              Cancel\n            </Button>\n            <Button onClick={handleSave} disabled={saveMutation.isPending}>\n              <Save className=\"h-4 w-4 mr-2\" />\n              {saveMutation.isPending ? \"Saving...\" : \"Save All Changes\"}\n            </Button>\n          </div>\n        )}\n      </div>\n\n      <div className=\"space-y-6\">\n        {/* Overview Section */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <Award className=\"h-5 w-5 text-blue-600\" />\n              Overview\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Textarea\n                value={formData.overview}\n                onChange={(e) => handleChange(\"overview\", e.target.value)}\n                disabled={!isEditing}\n                rows={4}\n                placeholder=\"Overview of scholarships and financial aid...\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* College-Specific Donor Scholarships */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <Gift className=\"h-5 w-5 text-purple-600\" />\n              College-Specific Donor Scholarships\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            {donorScholarships.map((scholarship) => (\n              <div key={scholarship.id} className=\"border p-4 rounded-lg space-y-2\">\n                <div className=\"flex items-start justify-between gap-2\">\n                  <div className=\"flex-1 grid grid-cols-1 md:grid-cols-3 gap-3\">\n                    <div className=\"space-y-2\">\n                      <Label className=\"text-xs\">Scholarship Name</Label>\n                      <Input\n                        value={scholarship.name}\n                        onChange={(e) => updateDonorScholarship(scholarship.id, 'name', e.target.value)}\n                        disabled={!isEditing}\n                        placeholder=\"Scholarship name\"\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label className=\"text-xs\">Donor</Label>\n                      <Input\n                        value={scholarship.donor}\n                        onChange={(e) => updateDonorScholarship(scholarship.id, 'donor', e.target.value)}\n                        disabled={!isEditing}\n                        placeholder=\"Donor name\"\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label className=\"text-xs\">Amount</Label>\n                      <Input\n                        value={scholarship.amount}\n                        onChange={(e) => updateDonorScholarship(scholarship.id, 'amount', e.target.value)}\n                        disabled={!isEditing}\n                        placeholder=\"Amount\"\n                      />\n                    </div>\n                    <div className=\"space-y-2 md:col-span-3\">\n                      <Label className=\"text-xs\">Description (Optional)</Label>\n                      <Textarea\n                        value={scholarship.description || \"\"}\n                        onChange={(e) => updateDonorScholarship(scholarship.id, 'description', e.target.value)}\n                        disabled={!isEditing}\n                        rows={2}\n                        placeholder=\"Additional description...\"\n                      />\n                    </div>\n                  </div>\n                  {isEditing && (\n                    <Button\n                      variant=\"destructive\"\n                      size=\"sm\"\n                      onClick={() => removeDonorScholarship(scholarship.id)}\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                </div>\n              </div>\n            ))}\n            \n            {isEditing && (\n              <div className=\"border-2 border-dashed p-4 rounded-lg space-y-3\">\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n                  <Input\n                    value={newDonorScholarship.name}\n                    onChange={(e) => setNewDonorScholarship({ ...newDonorScholarship, name: e.target.value })}\n                    placeholder=\"Scholarship name\"\n                  />\n                  <Input\n                    value={newDonorScholarship.donor}\n                    onChange={(e) => setNewDonorScholarship({ ...newDonorScholarship, donor: e.target.value })}\n                    placeholder=\"Donor name\"\n                  />\n                  <Input\n                    value={newDonorScholarship.amount}\n                    onChange={(e) => setNewDonorScholarship({ ...newDonorScholarship, amount: e.target.value })}\n                    placeholder=\"Amount\"\n                  />\n                  <Textarea\n                    value={newDonorScholarship.description}\n                    onChange={(e) => setNewDonorScholarship({ ...newDonorScholarship, description: e.target.value })}\n                    rows={2}\n                    placeholder=\"Description (optional)\"\n                    className=\"md:col-span-3\"\n                  />\n                </div>\n                <Button onClick={addDonorScholarship} size=\"sm\" className=\"w-full\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Add Donor Scholarship\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Eligibility Rules */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <FileText className=\"h-5 w-5 text-green-600\" />\n              Eligibility Rules\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label>Freeships (Student Aid Fund)</Label>\n              <Textarea\n                value={formData.eligibility_freeships}\n                onChange={(e) => handleChange(\"eligibility_freeships\", e.target.value)}\n                disabled={!isEditing}\n                rows={2}\n                placeholder=\"Freeship eligibility...\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Merit Awards</Label>\n              <Textarea\n                value={formData.eligibility_merit_awards}\n                onChange={(e) => handleChange(\"eligibility_merit_awards\", e.target.value)}\n                disabled={!isEditing}\n                rows={2}\n                placeholder=\"Merit award eligibility...\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>General Conditions</Label>\n              <Textarea\n                value={formData.eligibility_general_conditions}\n                onChange={(e) => handleChange(\"eligibility_general_conditions\", e.target.value)}\n                disabled={!isEditing}\n                rows={2}\n                placeholder=\"General conditions...\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Application & Renewal Process */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <FileText className=\"h-5 w-5 text-orange-600\" />\n              Application & Renewal Process (Internal)\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            {applicationSteps.sort((a, b) => a.stepNumber - b.stepNumber).map((step) => (\n              <div key={step.id} className=\"border p-4 rounded-lg space-y-2\">\n                <div className=\"flex items-start justify-between gap-2\">\n                  <div className=\"flex-1 space-y-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <Input\n                        type=\"number\"\n                        value={step.stepNumber}\n                        onChange={(e) => updateApplicationStep(step.id, 'stepNumber', parseInt(e.target.value))}\n                        disabled={!isEditing}\n                        placeholder=\"#\"\n                        className=\"w-16 font-bold\"\n                      />\n                      <Input\n                        value={step.title}\n                        onChange={(e) => updateApplicationStep(step.id, 'title', e.target.value)}\n                        disabled={!isEditing}\n                        placeholder=\"Step title\"\n                        className=\"font-medium flex-1\"\n                      />\n                    </div>\n                    <Textarea\n                      value={step.description}\n                      onChange={(e) => updateApplicationStep(step.id, 'description', e.target.value)}\n                      disabled={!isEditing}\n                      rows={2}\n                      placeholder=\"Step description\"\n                    />\n                  </div>\n                  {isEditing && (\n                    <Button\n                      variant=\"destructive\"\n                      size=\"sm\"\n                      onClick={() => removeApplicationStep(step.id)}\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                </div>\n              </div>\n            ))}\n            \n            {isEditing && (\n              <div className=\"border-2 border-dashed p-4 rounded-lg space-y-2\">\n                <div className=\"flex items-center gap-2\">\n                  <Input\n                    type=\"number\"\n                    value={newApplicationStep.stepNumber || \"\"}\n                    onChange={(e) => setNewApplicationStep({ ...newApplicationStep, stepNumber: parseInt(e.target.value) || 0 })}\n                    placeholder=\"#\"\n                    className=\"w-16\"\n                  />\n                  <Input\n                    value={newApplicationStep.title}\n                    onChange={(e) => setNewApplicationStep({ ...newApplicationStep, title: e.target.value })}\n                    placeholder=\"Step title\"\n                    className=\"flex-1\"\n                  />\n                </div>\n                <Textarea\n                  value={newApplicationStep.description}\n                  onChange={(e) => setNewApplicationStep({ ...newApplicationStep, description: e.target.value })}\n                  rows={2}\n                  placeholder=\"Step description\"\n                />\n                <Button onClick={addApplicationStep} size=\"sm\" className=\"w-full\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Add Step\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* External / Government Scholarships */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <Award className=\"h-5 w-5 text-red-600\" />\n              External / Government Scholarships\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            {governmentScholarships.map((scholarship) => (\n              <div key={scholarship.id} className=\"border p-4 rounded-lg space-y-2\">\n                <div className=\"flex items-start justify-between gap-2\">\n                  <div className=\"flex-1 space-y-2\">\n                    <Input\n                      value={scholarship.name}\n                      onChange={(e) => updateGovtScholarship(scholarship.id, 'name', e.target.value)}\n                      disabled={!isEditing}\n                      placeholder=\"Scholarship name\"\n                      className=\"font-medium\"\n                    />\n                    <Textarea\n                      value={scholarship.description}\n                      onChange={(e) => updateGovtScholarship(scholarship.id, 'description', e.target.value)}\n                      disabled={!isEditing}\n                      rows={2}\n                      placeholder=\"Description / Eligibility\"\n                    />\n                    <Input\n                      value={scholarship.platform}\n                      onChange={(e) => updateGovtScholarship(scholarship.id, 'platform', e.target.value)}\n                      disabled={!isEditing}\n                      placeholder=\"Application Platform\"\n                    />\n                  </div>\n                  {isEditing && (\n                    <Button\n                      variant=\"destructive\"\n                      size=\"sm\"\n                      onClick={() => removeGovtScholarship(scholarship.id)}\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                </div>\n              </div>\n            ))}\n            \n            {isEditing && (\n              <div className=\"border-2 border-dashed p-4 rounded-lg space-y-2\">\n                <Input\n                  value={newGovtScholarship.name}\n                  onChange={(e) => setNewGovtScholarship({ ...newGovtScholarship, name: e.target.value })}\n                  placeholder=\"Scholarship name\"\n                />\n                <Textarea\n                  value={newGovtScholarship.description}\n                  onChange={(e) => setNewGovtScholarship({ ...newGovtScholarship, description: e.target.value })}\n                  rows={2}\n                  placeholder=\"Description / Eligibility\"\n                />\n                <Input\n                  value={newGovtScholarship.platform}\n                  onChange={(e) => setNewGovtScholarship({ ...newGovtScholarship, platform: e.target.value })}\n                  placeholder=\"Application Platform\"\n                />\n                <Button onClick={addGovtScholarship} size=\"sm\" className=\"w-full\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Add Government Scholarship\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Application Portal Links */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <ExternalLink className=\"h-5 w-5 text-teal-600\" />\n              Application Portal Links (External)\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label>Har-Chhatravratti Portal (Haryana Govt.)</Label>\n              <Input\n                value={formData.har_chhatravratti_link}\n                onChange={(e) => handleChange(\"har_chhatravratti_link\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"Har-Chhatravratti portal URL\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>National Scholarship Portal (NSP)</Label>\n              <Input\n                value={formData.nsp_link}\n                onChange={(e) => handleChange(\"nsp_link\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"NSP portal URL\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Important Notes */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <DollarSign className=\"h-5 w-5 text-indigo-600\" />\n              Important Notes (for 2025-26 Session)\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label>Application Timeline</Label>\n              <Textarea\n                value={formData.important_notes_timeline}\n                onChange={(e) => handleChange(\"important_notes_timeline\", e.target.value)}\n                disabled={!isEditing}\n                rows={2}\n                placeholder=\"Timeline information...\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Required Documents</Label>\n              <Textarea\n                value={formData.important_notes_documents}\n                onChange={(e) => handleChange(\"important_notes_documents\", e.target.value)}\n                disabled={!isEditing}\n                rows={3}\n                placeholder=\"List of required documents...\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Updates & Notifications</Label>\n              <Textarea\n                value={formData.important_notes_updates}\n                onChange={(e) => handleChange(\"important_notes_updates\", e.target.value)}\n                disabled={!isEditing}\n                rows={2}\n                placeholder=\"Information about updates...\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {scholarshipsData && (\n        <div className=\"text-xs text-gray-500 text-right\">\n          Last updated: {new Date(scholarshipsData.updated_at || Date.now()).toLocaleString()}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":29226},"client/src/components/admin/general-info-sections/AdministrationManagementSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { Edit, Save, Users, Building, Trash2, Plus } from \"lucide-react\";\n\ninterface AdministrationManagementSectionProps {\n  data: any;\n  onUpdate: () => void;\n}\n\ninterface DepartmentHead {\n  id: string;\n  department: string;\n  headName: string;\n}\n\ninterface Committee {\n  id: string;\n  name: string;\n  description: string;\n}\n\nexport function AdministrationManagementSection({ data, onUpdate }: AdministrationManagementSectionProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const token = localStorage.getItem(\"adminToken\");\n  \n  const [formData, setFormData] = useState({\n    principal_name: \"Dr. Rajbir Parashar\",\n    principal_designation: \"Principal\",\n    principal_tenure_start: \"August 1, 2025\",\n    principal_predecessor: \"Dr. Satyabir Singh Mehla\",\n    principal_contact: \"01746-222368\",\n    principal_email: \"principal@rksdcollege.ac.in\",\n    \n    chairman_name: \"Sh. Ashwani Shorewala\",\n    chairman_role: \"Under the visionary leadership of Sh. Ashwani Shorewala, the college has evolved into a centre of excellence where tradition harmoniously blends with modern educational practices.\",\n    \n    organizational_structure: \"The college operates under the Rashtriya Vidya Samiti (RVS), Kaithal, a registered charitable society. The administrative structure includes various committees and departments that ensure smooth functioning and adherence to academic and administrative standards.\",\n    \n    administrative_staff_description: \"The administrative wing of the college comprises various staff members who handle day-to-day operations, including admissions, accounts, student services, and general administration. They work under the guidance of the Principal and the Governing Body to ensure the smooth functioning of the institution.\",\n  });\n\n  const [committees, setCommittees] = useState<Committee[]>([\n    {\n      id: \"1\",\n      name: \"Internal Quality Assurance Cell (IQAC)\",\n      description: \"Focuses on enhancing the quality of education and institutional performance.\"\n    },\n    {\n      id: \"2\",\n      name: \"Admission Committee\",\n      description: \"Oversees the admission process, ensuring transparency and adherence to university guidelines.\"\n    },\n    {\n      id: \"3\",\n      name: \"Disciplinary Committee\",\n      description: \"Maintains discipline and decorum within the campus.\"\n    },\n    {\n      id: \"4\",\n      name: \"Examination Committee\",\n      description: \"Handles all matters related to internal and external examinations.\"\n    },\n    {\n      id: \"5\",\n      name: \"Grievance Redressal Cell\",\n      description: \"Addresses and resolves grievances of students and staff.\"\n    },\n    {\n      id: \"6\",\n      name: \"Anti-Ragging Committee\",\n      description: \"Ensures a ragging-free environment on campus.\"\n    },\n    {\n      id: \"7\",\n      name: \"Women's Cell\",\n      description: \"Promotes gender equality and addresses issues related to women.\"\n    },\n    {\n      id: \"8\",\n      name: \"NSS (National Service Scheme)\",\n      description: \"Encourages students to participate in community service and social welfare activities.\"\n    },\n    {\n      id: \"9\",\n      name: \"NCC (National Cadet Corps)\",\n      description: \"Instills discipline and leadership qualities among students.\"\n    }\n  ]);\n\n  const [departmentHeads, setDepartmentHeads] = useState<DepartmentHead[]>([\n    { id: \"1\", department: \"English\", headName: \"Dr. Rajbir Parashar\" },\n    { id: \"2\", department: \"Chemistry\", headName: \"Dr. Shilpy Aggarwal\" },\n    { id: \"3\", department: \"Botany\", headName: \"Dr. Sushil Gupta\" },\n    { id: \"4\", department: \"Commerce\", headName: \"Mr. Ajay Sharma\" },\n    { id: \"5\", department: \"Economics\", headName: \"Dr. Suraj Walia\" },\n    { id: \"6\", department: \"Electronics\", headName: \"Mr. Rajesh Deshwal\" },\n    { id: \"7\", department: \"Geography\", headName: \"Mr. Raghbir Singh\" },\n    { id: \"8\", department: \"Physics\", headName: \"Dr. Alisha Goyal\" },\n    { id: \"9\", department: \"Computer Science\", headName: \"Dr. Matish Garg\" },\n    { id: \"10\", department: \"Physical Education\", headName: \"Dr. Gurdeep Bhola\" },\n    { id: \"11\", department: \"Political Science\", headName: \"Sh. Shriom\" },\n    { id: \"12\", department: \"Zoology\", headName: \"Dr. Gagan Mittal\" },\n    { id: \"13\", department: \"Hindi\", headName: \"Dr. R. P. Moun\" },\n    { id: \"14\", department: \"History\", headName: \"Dr. Rakesh Mittal\" },\n    { id: \"15\", department: \"Mathematics\", headName: \"Dr. Satyabir Mehla\" },\n    { id: \"16\", department: \"Sanskrit\", headName: \"Dr. Laxmi Mor\" },\n    { id: \"17\", department: \"Punjabi\", headName: \"Ms. Sheenu Singla\" },\n    { id: \"18\", department: \"Library\", headName: \"Dr. Naresh Kumar\" }\n  ]);\n\n  const [newCommittee, setNewCommittee] = useState({ name: \"\", description: \"\" });\n  const [newDepartmentHead, setNewDepartmentHead] = useState({ department: \"\", headName: \"\" });\n  const [isEditing, setIsEditing] = useState(false);\n\n  const { data: administrationData } = useQuery({\n    queryKey: [\"/api/admin/general-info/administration-management\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info/administration-management\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (administrationData) {\n      setFormData({\n        principal_name: administrationData.principal_name || formData.principal_name,\n        principal_designation: administrationData.principal_designation || formData.principal_designation,\n        principal_tenure_start: administrationData.principal_tenure_start || formData.principal_tenure_start,\n        principal_predecessor: administrationData.principal_predecessor || formData.principal_predecessor,\n        principal_contact: administrationData.principal_contact || formData.principal_contact,\n        principal_email: administrationData.principal_email || formData.principal_email,\n        chairman_name: administrationData.chairman_name || formData.chairman_name,\n        chairman_role: administrationData.chairman_role || formData.chairman_role,\n        organizational_structure: administrationData.organizational_structure || formData.organizational_structure,\n        administrative_staff_description: administrationData.administrative_staff_description || formData.administrative_staff_description,\n      });\n      if (administrationData.committees) {\n        setCommittees(administrationData.committees);\n      }\n      if (administrationData.department_heads) {\n        setDepartmentHeads(administrationData.department_heads);\n      }\n    }\n  }, [administrationData]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(\"/api/admin/general-info/administration-management\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"Administration/Management information updated successfully\" });\n      setIsEditing(false);\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/general-info/administration-management\"] });\n      onUpdate();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate({\n      ...formData,\n      committees,\n      department_heads: departmentHeads,\n    });\n  };\n\n  const handleChange = (field: string, value: string) => {\n    setFormData((prev) => ({ ...prev, [field]: value }));\n  };\n\n  const addCommittee = () => {\n    if (newCommittee.name.trim()) {\n      setCommittees([...committees, { \n        id: Date.now().toString(), \n        name: newCommittee.name, \n        description: newCommittee.description \n      }]);\n      setNewCommittee({ name: \"\", description: \"\" });\n    }\n  };\n\n  const removeCommittee = (id: string) => {\n    setCommittees(committees.filter(c => c.id !== id));\n  };\n\n  const addDepartmentHead = () => {\n    if (newDepartmentHead.department.trim() && newDepartmentHead.headName.trim()) {\n      setDepartmentHeads([...departmentHeads, { \n        id: Date.now().toString(), \n        department: newDepartmentHead.department, \n        headName: newDepartmentHead.headName \n      }]);\n      setNewDepartmentHead({ department: \"\", headName: \"\" });\n    }\n  };\n\n  const removeDepartmentHead = (id: string) => {\n    setDepartmentHeads(departmentHeads.filter(d => d.id !== id));\n  };\n\n  const updateDepartmentHead = (id: string, field: 'department' | 'headName', value: string) => {\n    setDepartmentHeads(departmentHeads.map(d => \n      d.id === id ? { ...d, [field]: value } : d\n    ));\n  };\n\n  const updateCommittee = (id: string, field: 'name' | 'description', value: string) => {\n    setCommittees(committees.map(c => \n      c.id === id ? { ...c, [field]: value } : c\n    ));\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">Administration / Management</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">Principal, Governing Body, Committees, and Department Heads</p>\n        </div>\n        {!isEditing ? (\n          <Button onClick={() => setIsEditing(true)} variant=\"outline\">\n            <Edit className=\"h-4 w-4 mr-2\" />\n            Edit\n          </Button>\n        ) : (\n          <div className=\"flex gap-2\">\n            <Button onClick={() => setIsEditing(false)} variant=\"outline\">\n              Cancel\n            </Button>\n            <Button onClick={handleSave} disabled={saveMutation.isPending}>\n              <Save className=\"h-4 w-4 mr-2\" />\n              {saveMutation.isPending ? \"Saving...\" : \"Save All Changes\"}\n            </Button>\n          </div>\n        )}\n      </div>\n\n      <div className=\"space-y-6\">\n        {/* Principal Section */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <Users className=\"h-5 w-5 text-blue-600\" />\n              Principal\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label>Name</Label>\n                <Input\n                  value={formData.principal_name}\n                  onChange={(e) => handleChange(\"principal_name\", e.target.value)}\n                  disabled={!isEditing}\n                  placeholder=\"Principal's name\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label>Designation</Label>\n                <Input\n                  value={formData.principal_designation}\n                  onChange={(e) => handleChange(\"principal_designation\", e.target.value)}\n                  disabled={!isEditing}\n                  placeholder=\"Designation\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label>Tenure Start</Label>\n                <Input\n                  value={formData.principal_tenure_start}\n                  onChange={(e) => handleChange(\"principal_tenure_start\", e.target.value)}\n                  disabled={!isEditing}\n                  placeholder=\"Tenure start date\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label>Predecessor</Label>\n                <Input\n                  value={formData.principal_predecessor}\n                  onChange={(e) => handleChange(\"principal_predecessor\", e.target.value)}\n                  disabled={!isEditing}\n                  placeholder=\"Previous principal\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label>Contact</Label>\n                <Input\n                  value={formData.principal_contact}\n                  onChange={(e) => handleChange(\"principal_contact\", e.target.value)}\n                  disabled={!isEditing}\n                  placeholder=\"Contact number\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label>Email</Label>\n                <Input\n                  value={formData.principal_email}\n                  onChange={(e) => handleChange(\"principal_email\", e.target.value)}\n                  disabled={!isEditing}\n                  placeholder=\"Email address\"\n                />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Governing Body Section */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <Building className=\"h-5 w-5 text-purple-600\" />\n              Governing Body\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label>Chairman Name</Label>\n              <Input\n                value={formData.chairman_name}\n                onChange={(e) => handleChange(\"chairman_name\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"Chairman's name\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Chairman's Role & Description</Label>\n              <Textarea\n                value={formData.chairman_role}\n                onChange={(e) => handleChange(\"chairman_role\", e.target.value)}\n                disabled={!isEditing}\n                rows={3}\n                placeholder=\"Description of chairman's role and leadership\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Organizational Structure Section */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <Building className=\"h-5 w-5 text-green-600\" />\n              Organizational Structure\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Textarea\n                value={formData.organizational_structure}\n                onChange={(e) => handleChange(\"organizational_structure\", e.target.value)}\n                disabled={!isEditing}\n                rows={4}\n                placeholder=\"Organizational structure description\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Key Administrative Committees Section */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <Users className=\"h-5 w-5 text-orange-600\" />\n              Key Administrative Committees\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            {committees.map((committee) => (\n              <div key={committee.id} className=\"border p-4 rounded-lg space-y-2\">\n                <div className=\"flex items-start justify-between gap-2\">\n                  <div className=\"flex-1 space-y-2\">\n                    <Input\n                      value={committee.name}\n                      onChange={(e) => updateCommittee(committee.id, 'name', e.target.value)}\n                      disabled={!isEditing}\n                      placeholder=\"Committee name\"\n                      className=\"font-medium\"\n                    />\n                    <Textarea\n                      value={committee.description}\n                      onChange={(e) => updateCommittee(committee.id, 'description', e.target.value)}\n                      disabled={!isEditing}\n                      rows={2}\n                      placeholder=\"Committee description\"\n                    />\n                  </div>\n                  {isEditing && (\n                    <Button\n                      variant=\"destructive\"\n                      size=\"sm\"\n                      onClick={() => removeCommittee(committee.id)}\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                </div>\n              </div>\n            ))}\n            \n            {isEditing && (\n              <div className=\"border-2 border-dashed p-4 rounded-lg space-y-2\">\n                <Input\n                  value={newCommittee.name}\n                  onChange={(e) => setNewCommittee({ ...newCommittee, name: e.target.value })}\n                  placeholder=\"New committee name\"\n                />\n                <Textarea\n                  value={newCommittee.description}\n                  onChange={(e) => setNewCommittee({ ...newCommittee, description: e.target.value })}\n                  rows={2}\n                  placeholder=\"Committee description\"\n                />\n                <Button onClick={addCommittee} size=\"sm\" className=\"w-full\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Add Committee\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Department Heads Section */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <Users className=\"h-5 w-5 text-red-600\" />\n              Department Heads\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n              {departmentHeads.map((head) => (\n                <div key={head.id} className=\"border p-3 rounded-lg space-y-2\">\n                  <div className=\"flex items-start gap-2\">\n                    <div className=\"flex-1 space-y-2\">\n                      <Input\n                        value={head.department}\n                        onChange={(e) => updateDepartmentHead(head.id, 'department', e.target.value)}\n                        disabled={!isEditing}\n                        placeholder=\"Department\"\n                        className=\"text-sm font-medium\"\n                      />\n                      <Input\n                        value={head.headName}\n                        onChange={(e) => updateDepartmentHead(head.id, 'headName', e.target.value)}\n                        disabled={!isEditing}\n                        placeholder=\"Head of Department\"\n                        className=\"text-sm\"\n                      />\n                    </div>\n                    {isEditing && (\n                      <Button\n                        variant=\"destructive\"\n                        size=\"sm\"\n                        onClick={() => removeDepartmentHead(head.id)}\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n            \n            {isEditing && (\n              <div className=\"border-2 border-dashed p-4 rounded-lg space-y-2\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                  <Input\n                    value={newDepartmentHead.department}\n                    onChange={(e) => setNewDepartmentHead({ ...newDepartmentHead, department: e.target.value })}\n                    placeholder=\"Department name\"\n                  />\n                  <Input\n                    value={newDepartmentHead.headName}\n                    onChange={(e) => setNewDepartmentHead({ ...newDepartmentHead, headName: e.target.value })}\n                    placeholder=\"Head of Department name\"\n                  />\n                </div>\n                <Button onClick={addDepartmentHead} size=\"sm\" className=\"w-full\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Add Department Head\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Administrative Staff Section */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <Users className=\"h-5 w-5 text-teal-600\" />\n              Administrative Staff\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Textarea\n                value={formData.administrative_staff_description}\n                onChange={(e) => handleChange(\"administrative_staff_description\", e.target.value)}\n                disabled={!isEditing}\n                rows={4}\n                placeholder=\"Administrative staff description\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {administrationData && (\n        <div className=\"text-xs text-gray-500 text-right\">\n          Last updated: {new Date(administrationData.updated_at || Date.now()).toLocaleString()}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":21588},"client/src/components/admin/general-info-sections/AdmissionEligibilitySection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { Edit, Save, GraduationCap, FileText, Trash2, Plus, Calendar, DollarSign, Link as LinkIcon } from \"lucide-react\";\n\ninterface AdmissionEligibilitySectionProps {\n  data: any;\n  onUpdate: () => void;\n}\n\ninterface AdmissionStep {\n  id: string;\n  stepNumber: number;\n  title: string;\n  description: string;\n}\n\ninterface EligibilityCriteria {\n  id: string;\n  courseType: string;\n  requirements: string;\n}\n\ninterface Document {\n  id: string;\n  name: string;\n}\n\ninterface FeeStructure {\n  id: string;\n  courseType: string;\n  feeRange: string;\n}\n\ninterface AdmissionTimeline {\n  id: string;\n  courseType: string;\n  event: string;\n  timeline: string;\n}\n\nexport function AdmissionEligibilitySection({ data, onUpdate }: AdmissionEligibilitySectionProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const token = localStorage.getItem(\"adminToken\");\n  \n  const [formData, setFormData] = useState({\n    ug_portal_link: \"https://admissions.highereduhry.ac.in\",\n    pg_portal_link: \"https://rksdcollege.ac.in\",\n    fee_structure_note: \"The fee structure varies by course, but generally falls within the following ranges for the 2025-26 session, as per reports:\",\n  });\n\n  const [admissionSteps, setAdmissionSteps] = useState<AdmissionStep[]>([\n    {\n      id: \"1\",\n      stepNumber: 1,\n      title: \"Online Registration\",\n      description: \"Candidates must register and fill out the application form on the official centralized admission portal of the Directorate of Higher Education, Haryana, for undergraduate (UG) courses. For postgraduate (PG) courses, the process is handled either directly through the college or the Kurukshetra University portal.\"\n    },\n    {\n      id: \"2\",\n      stepNumber: 2,\n      title: \"Merit List\",\n      description: \"The college prepares and releases a merit list based on the marks obtained in the qualifying examination (Class 12 for UG, Bachelor's degree for PG). This list is displayed on the college notice board and website.\"\n    },\n    {\n      id: \"3\",\n      stepNumber: 3,\n      title: \"Counselling and Document Verification\",\n      description: \"Shortlisted candidates are called for online or physical counselling, depending on the academic session's guidelines. During this stage, documents are verified.\"\n    },\n    {\n      id: \"4\",\n      stepNumber: 4,\n      title: \"Fee Payment and Confirmation\",\n      description: \"After successful document verification, selected candidates must pay the admission fee within the specified time to confirm their seat.\"\n    }\n  ]);\n\n  const [eligibilityCriteria, setEligibilityCriteria] = useState<EligibilityCriteria[]>([\n    {\n      id: \"1\",\n      courseType: \"UG Courses (e.g., B.A., B.Sc., B.Com, BBA, BCA)\",\n      requirements: \"Must have passed the 10+2 examination from a recognized board. Minimum marks vary depending on the course and category, but generally, it is around 45%â€“50%.\"\n    },\n    {\n      id: \"2\",\n      courseType: \"PG Courses (e.g., M.A., M.Sc., M.Com)\",\n      requirements: \"Must hold a relevant Bachelor's degree from a recognized university. Minimum marks generally fall between 45%â€“50%.\"\n    }\n  ]);\n\n  const [documents, setDocuments] = useState<Document[]>([\n    { id: \"1\", name: \"Class 10th Marksheet and Certificate\" },\n    { id: \"2\", name: \"Class 12th Marksheet and Certificate\" },\n    { id: \"3\", name: \"Graduation Marksheet and Degree (for PG admissions)\" },\n    { id: \"4\", name: \"Character Certificate from the institution last attended\" },\n    { id: \"5\", name: \"Transfer Certificate (if applicable)\" },\n    { id: \"6\", name: \"Caste Certificate (for reserved categories)\" },\n    { id: \"7\", name: \"Recent passport-size photographs\" },\n    { id: \"8\", name: \"Aadhaar card\" },\n    { id: \"9\", name: \"Anti-Ragging Undertaking (to be submitted online)\" }\n  ]);\n\n  const [feeStructures, setFeeStructures] = useState<FeeStructure[]>([\n    {\n      id: \"1\",\n      courseType: \"UG Courses\",\n      feeRange: \"Approximately â‚¹15,000 to â‚¹20,000 annually\"\n    },\n    {\n      id: \"2\",\n      courseType: \"PG Courses\",\n      feeRange: \"Approximately â‚¹20,000 to â‚¹25,000 annually\"\n    },\n    {\n      id: \"3\",\n      courseType: \"Self-financed courses (BCA and BBA)\",\n      feeRange: \"May be slightly higher\"\n    }\n  ]);\n\n  const [admissionTimelines, setAdmissionTimelines] = useState<AdmissionTimeline[]>([\n    { id: \"1\", courseType: \"UG\", event: \"Online Registration\", timeline: \"Mayâ€“June 2025\" },\n    { id: \"2\", courseType: \"UG\", event: \"Merit List\", timeline: \"Juneâ€“July 2025\" },\n    { id: \"3\", courseType: \"UG\", event: \"Counselling/Admission\", timeline: \"Julyâ€“August 2025\" },\n    { id: \"4\", courseType: \"PG\", event: \"Online Registration\", timeline: \"Juneâ€“July 2025\" },\n    { id: \"5\", courseType: \"PG\", event: \"Merit List\", timeline: \"Julyâ€“August 2025\" },\n    { id: \"6\", courseType: \"PG\", event: \"Counselling/Admission\", timeline: \"August 2025\" }\n  ]);\n\n  const [newStep, setNewStep] = useState({ stepNumber: 0, title: \"\", description: \"\" });\n  const [newEligibility, setNewEligibility] = useState({ courseType: \"\", requirements: \"\" });\n  const [newDocument, setNewDocument] = useState(\"\");\n  const [newFee, setNewFee] = useState({ courseType: \"\", feeRange: \"\" });\n  const [newTimeline, setNewTimeline] = useState({ courseType: \"\", event: \"\", timeline: \"\" });\n  const [isEditing, setIsEditing] = useState(false);\n\n  const { data: admissionData } = useQuery({\n    queryKey: [\"/api/admin/general-info/admission-eligibility\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info/admission-eligibility\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (admissionData) {\n      setFormData({\n        ug_portal_link: admissionData.ug_portal_link || formData.ug_portal_link,\n        pg_portal_link: admissionData.pg_portal_link || formData.pg_portal_link,\n        fee_structure_note: admissionData.fee_structure_note || formData.fee_structure_note,\n      });\n      if (admissionData.admission_steps) {\n        setAdmissionSteps(admissionData.admission_steps);\n      }\n      if (admissionData.eligibility_criteria) {\n        setEligibilityCriteria(admissionData.eligibility_criteria);\n      }\n      if (admissionData.documents) {\n        setDocuments(admissionData.documents);\n      }\n      if (admissionData.fee_structures) {\n        setFeeStructures(admissionData.fee_structures);\n      }\n      if (admissionData.admission_timelines) {\n        setAdmissionTimelines(admissionData.admission_timelines);\n      }\n    }\n  }, [admissionData]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(\"/api/admin/general-info/admission-eligibility\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"Admission & Eligibility information updated successfully\" });\n      setIsEditing(false);\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/general-info/admission-eligibility\"] });\n      onUpdate();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate({\n      ...formData,\n      admission_steps: admissionSteps,\n      eligibility_criteria: eligibilityCriteria,\n      documents,\n      fee_structures: feeStructures,\n      admission_timelines: admissionTimelines,\n    });\n  };\n\n  const handleChange = (field: string, value: string) => {\n    setFormData((prev) => ({ ...prev, [field]: value }));\n  };\n\n  const addAdmissionStep = () => {\n    if (newStep.title.trim() && newStep.description.trim()) {\n      setAdmissionSteps([...admissionSteps, { \n        id: Date.now().toString(), \n        stepNumber: newStep.stepNumber || admissionSteps.length + 1,\n        title: newStep.title, \n        description: newStep.description \n      }]);\n      setNewStep({ stepNumber: 0, title: \"\", description: \"\" });\n    }\n  };\n\n  const removeAdmissionStep = (id: string) => {\n    setAdmissionSteps(admissionSteps.filter(s => s.id !== id));\n  };\n\n  const updateAdmissionStep = (id: string, field: keyof AdmissionStep, value: string | number) => {\n    setAdmissionSteps(admissionSteps.map(s => \n      s.id === id ? { ...s, [field]: value } : s\n    ));\n  };\n\n  const addEligibility = () => {\n    if (newEligibility.courseType.trim() && newEligibility.requirements.trim()) {\n      setEligibilityCriteria([...eligibilityCriteria, { \n        id: Date.now().toString(), \n        courseType: newEligibility.courseType, \n        requirements: newEligibility.requirements \n      }]);\n      setNewEligibility({ courseType: \"\", requirements: \"\" });\n    }\n  };\n\n  const removeEligibility = (id: string) => {\n    setEligibilityCriteria(eligibilityCriteria.filter(e => e.id !== id));\n  };\n\n  const updateEligibility = (id: string, field: 'courseType' | 'requirements', value: string) => {\n    setEligibilityCriteria(eligibilityCriteria.map(e => \n      e.id === id ? { ...e, [field]: value } : e\n    ));\n  };\n\n  const addDocument = () => {\n    if (newDocument.trim()) {\n      setDocuments([...documents, { id: Date.now().toString(), name: newDocument }]);\n      setNewDocument(\"\");\n    }\n  };\n\n  const removeDocument = (id: string) => {\n    setDocuments(documents.filter(d => d.id !== id));\n  };\n\n  const updateDocument = (id: string, value: string) => {\n    setDocuments(documents.map(d => \n      d.id === id ? { ...d, name: value } : d\n    ));\n  };\n\n  const addFeeStructure = () => {\n    if (newFee.courseType.trim() && newFee.feeRange.trim()) {\n      setFeeStructures([...feeStructures, { \n        id: Date.now().toString(), \n        courseType: newFee.courseType, \n        feeRange: newFee.feeRange \n      }]);\n      setNewFee({ courseType: \"\", feeRange: \"\" });\n    }\n  };\n\n  const removeFeeStructure = (id: string) => {\n    setFeeStructures(feeStructures.filter(f => f.id !== id));\n  };\n\n  const updateFeeStructure = (id: string, field: 'courseType' | 'feeRange', value: string) => {\n    setFeeStructures(feeStructures.map(f => \n      f.id === id ? { ...f, [field]: value } : f\n    ));\n  };\n\n  const addTimeline = () => {\n    if (newTimeline.courseType.trim() && newTimeline.event.trim() && newTimeline.timeline.trim()) {\n      setAdmissionTimelines([...admissionTimelines, { \n        id: Date.now().toString(), \n        courseType: newTimeline.courseType, \n        event: newTimeline.event, \n        timeline: newTimeline.timeline \n      }]);\n      setNewTimeline({ courseType: \"\", event: \"\", timeline: \"\" });\n    }\n  };\n\n  const removeTimeline = (id: string) => {\n    setAdmissionTimelines(admissionTimelines.filter(t => t.id !== id));\n  };\n\n  const updateTimeline = (id: string, field: 'courseType' | 'event' | 'timeline', value: string) => {\n    setAdmissionTimelines(admissionTimelines.map(t => \n      t.id === id ? { ...t, [field]: value } : t\n    ));\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">Admission & Eligibility</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">Complete admission process, eligibility criteria, and fee structure</p>\n        </div>\n        {!isEditing ? (\n          <Button onClick={() => setIsEditing(true)} variant=\"outline\">\n            <Edit className=\"h-4 w-4 mr-2\" />\n            Edit\n          </Button>\n        ) : (\n          <div className=\"flex gap-2\">\n            <Button onClick={() => setIsEditing(false)} variant=\"outline\">\n              Cancel\n            </Button>\n            <Button onClick={handleSave} disabled={saveMutation.isPending}>\n              <Save className=\"h-4 w-4 mr-2\" />\n              {saveMutation.isPending ? \"Saving...\" : \"Save All Changes\"}\n            </Button>\n          </div>\n        )}\n      </div>\n\n      <div className=\"space-y-6\">\n        {/* Admission Process Steps */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <GraduationCap className=\"h-5 w-5 text-blue-600\" />\n              Admission Process (Short Steps)\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            {admissionSteps.sort((a, b) => a.stepNumber - b.stepNumber).map((step) => (\n              <div key={step.id} className=\"border p-4 rounded-lg space-y-2\">\n                <div className=\"flex items-start justify-between gap-2\">\n                  <div className=\"flex-1 space-y-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <Input\n                        type=\"number\"\n                        value={step.stepNumber}\n                        onChange={(e) => updateAdmissionStep(step.id, 'stepNumber', parseInt(e.target.value))}\n                        disabled={!isEditing}\n                        placeholder=\"#\"\n                        className=\"w-16 font-bold\"\n                      />\n                      <Input\n                        value={step.title}\n                        onChange={(e) => updateAdmissionStep(step.id, 'title', e.target.value)}\n                        disabled={!isEditing}\n                        placeholder=\"Step title\"\n                        className=\"font-medium flex-1\"\n                      />\n                    </div>\n                    <Textarea\n                      value={step.description}\n                      onChange={(e) => updateAdmissionStep(step.id, 'description', e.target.value)}\n                      disabled={!isEditing}\n                      rows={3}\n                      placeholder=\"Step description\"\n                    />\n                  </div>\n                  {isEditing && (\n                    <Button\n                      variant=\"destructive\"\n                      size=\"sm\"\n                      onClick={() => removeAdmissionStep(step.id)}\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                </div>\n              </div>\n            ))}\n            \n            {isEditing && (\n              <div className=\"border-2 border-dashed p-4 rounded-lg space-y-2\">\n                <div className=\"flex items-center gap-2\">\n                  <Input\n                    type=\"number\"\n                    value={newStep.stepNumber || \"\"}\n                    onChange={(e) => setNewStep({ ...newStep, stepNumber: parseInt(e.target.value) || 0 })}\n                    placeholder=\"#\"\n                    className=\"w-16\"\n                  />\n                  <Input\n                    value={newStep.title}\n                    onChange={(e) => setNewStep({ ...newStep, title: e.target.value })}\n                    placeholder=\"New step title\"\n                    className=\"flex-1\"\n                  />\n                </div>\n                <Textarea\n                  value={newStep.description}\n                  onChange={(e) => setNewStep({ ...newStep, description: e.target.value })}\n                  rows={3}\n                  placeholder=\"Step description\"\n                />\n                <Button onClick={addAdmissionStep} size=\"sm\" className=\"w-full\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Add Step\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Eligibility Criteria */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <FileText className=\"h-5 w-5 text-purple-600\" />\n              Eligibility Criteria (General)\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            {eligibilityCriteria.map((criteria) => (\n              <div key={criteria.id} className=\"border p-4 rounded-lg space-y-2\">\n                <div className=\"flex items-start justify-between gap-2\">\n                  <div className=\"flex-1 space-y-2\">\n                    <Input\n                      value={criteria.courseType}\n                      onChange={(e) => updateEligibility(criteria.id, 'courseType', e.target.value)}\n                      disabled={!isEditing}\n                      placeholder=\"Course type\"\n                      className=\"font-medium\"\n                    />\n                    <Textarea\n                      value={criteria.requirements}\n                      onChange={(e) => updateEligibility(criteria.id, 'requirements', e.target.value)}\n                      disabled={!isEditing}\n                      rows={3}\n                      placeholder=\"Requirements\"\n                    />\n                  </div>\n                  {isEditing && (\n                    <Button\n                      variant=\"destructive\"\n                      size=\"sm\"\n                      onClick={() => removeEligibility(criteria.id)}\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                </div>\n              </div>\n            ))}\n            \n            {isEditing && (\n              <div className=\"border-2 border-dashed p-4 rounded-lg space-y-2\">\n                <Input\n                  value={newEligibility.courseType}\n                  onChange={(e) => setNewEligibility({ ...newEligibility, courseType: e.target.value })}\n                  placeholder=\"Course type\"\n                />\n                <Textarea\n                  value={newEligibility.requirements}\n                  onChange={(e) => setNewEligibility({ ...newEligibility, requirements: e.target.value })}\n                  rows={3}\n                  placeholder=\"Requirements\"\n                />\n                <Button onClick={addEligibility} size=\"sm\" className=\"w-full\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Add Eligibility Criteria\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Documents Required */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <FileText className=\"h-5 w-5 text-green-600\" />\n              Documents Required\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-3\">\n            {documents.map((doc, index) => (\n              <div key={doc.id} className=\"flex items-center gap-2\">\n                <div className=\"flex-1 flex items-center gap-2\">\n                  <span className=\"text-sm font-medium text-gray-500 w-8\">{index + 1}.</span>\n                  <Input\n                    value={doc.name}\n                    onChange={(e) => updateDocument(doc.id, e.target.value)}\n                    disabled={!isEditing}\n                    placeholder=\"Document name\"\n                    className=\"flex-1\"\n                  />\n                </div>\n                {isEditing && (\n                  <Button\n                    variant=\"destructive\"\n                    size=\"sm\"\n                    onClick={() => removeDocument(doc.id)}\n                  >\n                    <Trash2 className=\"h-4 w-4\" />\n                  </Button>\n                )}\n              </div>\n            ))}\n            \n            {isEditing && (\n              <div className=\"border-2 border-dashed p-3 rounded-lg flex items-center gap-2\">\n                <Input\n                  value={newDocument}\n                  onChange={(e) => setNewDocument(e.target.value)}\n                  placeholder=\"New document name\"\n                  className=\"flex-1\"\n                />\n                <Button onClick={addDocument} size=\"sm\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Add\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Fee Structure */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <DollarSign className=\"h-5 w-5 text-orange-600\" />\n              Fee Structure Overview\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label>Note</Label>\n              <Textarea\n                value={formData.fee_structure_note}\n                onChange={(e) => handleChange(\"fee_structure_note\", e.target.value)}\n                disabled={!isEditing}\n                rows={2}\n                placeholder=\"Fee structure note\"\n              />\n            </div>\n            \n            {feeStructures.map((fee) => (\n              <div key={fee.id} className=\"border p-3 rounded-lg space-y-2\">\n                <div className=\"flex items-start justify-between gap-2\">\n                  <div className=\"flex-1 grid grid-cols-1 md:grid-cols-2 gap-2\">\n                    <Input\n                      value={fee.courseType}\n                      onChange={(e) => updateFeeStructure(fee.id, 'courseType', e.target.value)}\n                      disabled={!isEditing}\n                      placeholder=\"Course type\"\n                    />\n                    <Input\n                      value={fee.feeRange}\n                      onChange={(e) => updateFeeStructure(fee.id, 'feeRange', e.target.value)}\n                      disabled={!isEditing}\n                      placeholder=\"Fee range\"\n                    />\n                  </div>\n                  {isEditing && (\n                    <Button\n                      variant=\"destructive\"\n                      size=\"sm\"\n                      onClick={() => removeFeeStructure(fee.id)}\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                </div>\n              </div>\n            ))}\n            \n            {isEditing && (\n              <div className=\"border-2 border-dashed p-3 rounded-lg space-y-2\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                  <Input\n                    value={newFee.courseType}\n                    onChange={(e) => setNewFee({ ...newFee, courseType: e.target.value })}\n                    placeholder=\"Course type\"\n                  />\n                  <Input\n                    value={newFee.feeRange}\n                    onChange={(e) => setNewFee({ ...newFee, feeRange: e.target.value })}\n                    placeholder=\"Fee range\"\n                  />\n                </div>\n                <Button onClick={addFeeStructure} size=\"sm\" className=\"w-full\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Add Fee Structure\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Admission Timelines */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <Calendar className=\"h-5 w-5 text-red-600\" />\n              Admission Dates / Timelines (Approximate for 2025-26)\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-3\">\n            {admissionTimelines.map((timeline) => (\n              <div key={timeline.id} className=\"border p-3 rounded-lg\">\n                <div className=\"flex items-start justify-between gap-2\">\n                  <div className=\"flex-1 grid grid-cols-1 md:grid-cols-3 gap-2\">\n                    <Input\n                      value={timeline.courseType}\n                      onChange={(e) => updateTimeline(timeline.id, 'courseType', e.target.value)}\n                      disabled={!isEditing}\n                      placeholder=\"Course type\"\n                    />\n                    <Input\n                      value={timeline.event}\n                      onChange={(e) => updateTimeline(timeline.id, 'event', e.target.value)}\n                      disabled={!isEditing}\n                      placeholder=\"Event\"\n                    />\n                    <Input\n                      value={timeline.timeline}\n                      onChange={(e) => updateTimeline(timeline.id, 'timeline', e.target.value)}\n                      disabled={!isEditing}\n                      placeholder=\"Timeline\"\n                    />\n                  </div>\n                  {isEditing && (\n                    <Button\n                      variant=\"destructive\"\n                      size=\"sm\"\n                      onClick={() => removeTimeline(timeline.id)}\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                </div>\n              </div>\n            ))}\n            \n            {isEditing && (\n              <div className=\"border-2 border-dashed p-3 rounded-lg space-y-2\">\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-2\">\n                  <Input\n                    value={newTimeline.courseType}\n                    onChange={(e) => setNewTimeline({ ...newTimeline, courseType: e.target.value })}\n                    placeholder=\"Course type (UG/PG)\"\n                  />\n                  <Input\n                    value={newTimeline.event}\n                    onChange={(e) => setNewTimeline({ ...newTimeline, event: e.target.value })}\n                    placeholder=\"Event\"\n                  />\n                  <Input\n                    value={newTimeline.timeline}\n                    onChange={(e) => setNewTimeline({ ...newTimeline, timeline: e.target.value })}\n                    placeholder=\"Timeline\"\n                  />\n                </div>\n                <Button onClick={addTimeline} size=\"sm\" className=\"w-full\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Add Timeline\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Application Portal Links */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <LinkIcon className=\"h-5 w-5 text-teal-600\" />\n              Application Portal Links\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label>UG Courses Portal</Label>\n              <Input\n                value={formData.ug_portal_link}\n                onChange={(e) => handleChange(\"ug_portal_link\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"UG application portal URL\"\n              />\n              <p className=\"text-xs text-gray-500\">For UG courses: Centralized portal of the Directorate of Higher Education, Haryana</p>\n            </div>\n            <div className=\"space-y-2\">\n              <Label>PG Courses Portal</Label>\n              <Input\n                value={formData.pg_portal_link}\n                onChange={(e) => handleChange(\"pg_portal_link\", e.target.value)}\n                disabled={!isEditing}\n                placeholder=\"PG application portal URL\"\n              />\n              <p className=\"text-xs text-gray-500\">For PG courses: Available on the RKSD College website</p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {admissionData && (\n        <div className=\"text-xs text-gray-500 text-right\">\n          Last updated: {new Date(admissionData.updated_at || Date.now()).toLocaleString()}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":28285},"client/src/components/admin/general-info-sections/FacilitiesInfrastructureSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { Edit, Save, Building, BookOpen, Dumbbell, Home, Utensils, Heart, Bus, Users, Wifi, Camera, Leaf, Sun } from \"lucide-react\";\n\ninterface FacilitiesInfrastructureSectionProps {\n  data: any;\n  onUpdate: () => void;\n}\n\nexport function FacilitiesInfrastructureSection({ data, onUpdate }: FacilitiesInfrastructureSectionProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const token = localStorage.getItem(\"adminToken\");\n  \n  const [formData, setFormData] = useState({\n    library_collection: \"Central, air-conditioned library with 50,882 books covering course curriculum & general interest; subscribes to national & international periodicals, journals, magazines and newspapers.\",\n    library_digital_access: \"Internet access, e-resources (NLIST/NDL style access implied) and an Online Public Access Catalogue (OPAC) / search portal is available. (Library web + ERP OPAC).\",\n    library_facilities_seating: \"Three air-conditioned reading halls; total reading seating ~400; reprography (photocopy) & book-bank facilities; extended hours during exams (regular circulation 9:00 AMâ€“4:00 PM; reading hall 8:00 AMâ€“5:00 PM â€” typically).\",\n    \n    labs_total: \"19 well-equipped laboratories across departments (Zoology, Mathematics, Chemistry, Computer, Geography, Physics, etc.).\",\n    labs_special: \"Includes a language lab and departmental labs for practicals and research.\",\n    \n    sports_outdoor: \"Large stadium with 8-lane grassy athletic track, football ground, cricket pitches/practice nets, volleyball courts, basketball courts (with floodlights), lawn tennis court, plus courts for Kho-Kho, Kabaddi, Handball, Netball.\",\n    sports_indoor: \"Indoor stadium-cum-sports complex for table-tennis, badminton, boxing, wrestling, judo, taekwondo and a multi-gym hall.\",\n    sports_special: \"Semi-Olympic swimming pool and an international-standard 10-meter shooting range are listed on official pages. College runs trainers/coaches for certain activities.\",\n    \n    hostel_status: \"No regular hostel facility for students is indicated in the college prospectus and official documentation; earlier third-party listings claiming hostels appear to be outdated/conflicting. (College prospectus / official PDF shows residential building only for limited staff/class-IV employees). So: Hostels â€” NOT available (verify with college office for any new changes).\",\n    \n    canteen_description: \"Two separate canteens (boys & girls) plus a spacious cafeteria; food quality monitored by a faculty committee; hygiene policies enforced.\",\n    \n    medical_dispensary: \"On-campus dispensary supervised by a visiting doctor; first-aid available. College has tie-ups with nearby hospitals for emergencies.\",\n    \n    transport_local: \"College sits on Ambala Road â€” well-connected by public transport.\",\n    transport_dedicated: \"No clear evidence of a college-owned bus fleet in official documents â€” third-party claims vary. (Recommend confirming with admin if you want to list college buses).\",\n    \n    auditorium_description: \"Partially air-conditioned, sound-proof auditorium with ~500 seating capacity and AV setup.\",\n    seminar_halls: \"7 seminar halls, plus 1 conference room and 1 committee room for meetings/events.\",\n    \n    wifi_internet: \"Campus-wide free Wi-Fi access; internet provision via a leased line (noted as 4 Mbps in some sources).\",\n    smart_classrooms: \"103 Wi-Fi enabled classrooms including 13 smart classrooms equipped with modern ICT tools.\",\n    computer_labs: \"Two fully air-conditioned computer labs with up-to-date systems & software (used for teaching and practicals).\",\n    \n    security_staff: \"Round-the-clock security provided by a contracted agency.\",\n    cctv_coverage: \"~70 CCTV cameras installed at strategic locations across campus; public address system also noted.\",\n    \n    green_campus: \"Well-groomed lawns, aesthetic plantation & cleanliness drives; polythene ban and dustbins placed around campus.\",\n    solar_power: \"Solar power plant (120 KVA) installed (2018-19) to reduce carbon footprint; an additional ~43 KVA (RUSA grant) was planned/under installation in official documents (total ~163 KVA when both active). (Official phrasing: 120 KVA installed; another 43 KVA approved/going to be installed).\",\n    water_management: \"Artificial groundwater recharge systems and rainwater management measures are mentioned in college reports.\",\n    \n    additional_facilities: \"Guest House / Waiting Room for visiting faculty & student family members. Multi-gym hall with equipment and trainers.\",\n    \n    verification_notes: \"Hostel: Official prospectus shows no student hostel. If you plan to publish \\\"Hostel: No\\\" on the site, that is accurate per prospectus; confirm with admin for any 2025-26 update. Transport fleet & exact leased line bandwidth: tertiary sources give varied values â€” confirm with college admin if you need precise bus count or current internet Mbps.\",\n  });\n\n  const [isEditing, setIsEditing] = useState(false);\n\n  const { data: facilitiesData } = useQuery({\n    queryKey: [\"/api/admin/general-info/facilities-infrastructure\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info/facilities-infrastructure\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (facilitiesData) {\n      setFormData({\n        library_collection: facilitiesData.library_collection || formData.library_collection,\n        library_digital_access: facilitiesData.library_digital_access || formData.library_digital_access,\n        library_facilities_seating: facilitiesData.library_facilities_seating || formData.library_facilities_seating,\n        labs_total: facilitiesData.labs_total || formData.labs_total,\n        labs_special: facilitiesData.labs_special || formData.labs_special,\n        sports_outdoor: facilitiesData.sports_outdoor || formData.sports_outdoor,\n        sports_indoor: facilitiesData.sports_indoor || formData.sports_indoor,\n        sports_special: facilitiesData.sports_special || formData.sports_special,\n        hostel_status: facilitiesData.hostel_status || formData.hostel_status,\n        canteen_description: facilitiesData.canteen_description || formData.canteen_description,\n        medical_dispensary: facilitiesData.medical_dispensary || formData.medical_dispensary,\n        transport_local: facilitiesData.transport_local || formData.transport_local,\n        transport_dedicated: facilitiesData.transport_dedicated || formData.transport_dedicated,\n        auditorium_description: facilitiesData.auditorium_description || formData.auditorium_description,\n        seminar_halls: facilitiesData.seminar_halls || formData.seminar_halls,\n        wifi_internet: facilitiesData.wifi_internet || formData.wifi_internet,\n        smart_classrooms: facilitiesData.smart_classrooms || formData.smart_classrooms,\n        computer_labs: facilitiesData.computer_labs || formData.computer_labs,\n        security_staff: facilitiesData.security_staff || formData.security_staff,\n        cctv_coverage: facilitiesData.cctv_coverage || formData.cctv_coverage,\n        green_campus: facilitiesData.green_campus || formData.green_campus,\n        solar_power: facilitiesData.solar_power || formData.solar_power,\n        water_management: facilitiesData.water_management || formData.water_management,\n        additional_facilities: facilitiesData.additional_facilities || formData.additional_facilities,\n        verification_notes: facilitiesData.verification_notes || formData.verification_notes,\n      });\n    }\n  }, [facilitiesData]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (data: typeof formData) => {\n      const res = await fetch(\"/api/admin/general-info/facilities-infrastructure\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"Facilities & Infrastructure information updated successfully\" });\n      setIsEditing(false);\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/general-info/facilities-infrastructure\"] });\n      onUpdate();\n    },\n    onError: (error: any) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate(formData);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Facilities & Infrastructure</h2>\n          <p className=\"text-sm text-gray-600\">Manage college facilities and infrastructure details</p>\n        </div>\n        <Button\n          onClick={() => (isEditing ? handleSave() : setIsEditing(true))}\n          disabled={saveMutation.isPending}\n        >\n          {isEditing ? (\n            <>\n              <Save className=\"h-4 w-4 mr-2\" />\n              {saveMutation.isPending ? \"Saving...\" : \"Save Changes\"}\n            </>\n          ) : (\n            <>\n              <Edit className=\"h-4 w-4 mr-2\" />\n              Edit\n            </>\n          )}\n        </Button>\n      </div>\n\n      {/* Library Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <BookOpen className=\"h-5 w-5 text-blue-600\" />\n            Library\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"library_collection\">Collection</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"library_collection\"\n                value={formData.library_collection}\n                onChange={(e) => setFormData({ ...formData, library_collection: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.library_collection}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"library_digital_access\">Digital Access / OPAC</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"library_digital_access\"\n                value={formData.library_digital_access}\n                onChange={(e) => setFormData({ ...formData, library_digital_access: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.library_digital_access}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"library_facilities_seating\">Facilities & Seating</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"library_facilities_seating\"\n                value={formData.library_facilities_seating}\n                onChange={(e) => setFormData({ ...formData, library_facilities_seating: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.library_facilities_seating}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Laboratories Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Building className=\"h-5 w-5 text-purple-600\" />\n            Laboratories\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"labs_total\">Total Labs</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"labs_total\"\n                value={formData.labs_total}\n                onChange={(e) => setFormData({ ...formData, labs_total: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.labs_total}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"labs_special\">Special Labs</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"labs_special\"\n                value={formData.labs_special}\n                onChange={(e) => setFormData({ ...formData, labs_special: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.labs_special}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Sports Facilities Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Dumbbell className=\"h-5 w-5 text-green-600\" />\n            Sports Facilities\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"sports_outdoor\">Outdoor</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"sports_outdoor\"\n                value={formData.sports_outdoor}\n                onChange={(e) => setFormData({ ...formData, sports_outdoor: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.sports_outdoor}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"sports_indoor\">Indoor / Complex</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"sports_indoor\"\n                value={formData.sports_indoor}\n                onChange={(e) => setFormData({ ...formData, sports_indoor: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.sports_indoor}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"sports_special\">Special Facilities</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"sports_special\"\n                value={formData.sports_special}\n                onChange={(e) => setFormData({ ...formData, sports_special: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.sports_special}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Hostel / Accommodation Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Home className=\"h-5 w-5 text-indigo-600\" />\n            Hostel / Accommodation\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div>\n            <Label htmlFor=\"hostel_status\">Current Status</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"hostel_status\"\n                value={formData.hostel_status}\n                onChange={(e) => setFormData({ ...formData, hostel_status: e.target.value })}\n                rows={4}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.hostel_status}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Canteen / Cafeteria Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Utensils className=\"h-5 w-5 text-orange-600\" />\n            Canteen / Cafeteria\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div>\n            <Label htmlFor=\"canteen_description\">Separate Canteens</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"canteen_description\"\n                value={formData.canteen_description}\n                onChange={(e) => setFormData({ ...formData, canteen_description: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.canteen_description}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Medical / Health Centre Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Heart className=\"h-5 w-5 text-red-600\" />\n            Medical / Health Centre\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div>\n            <Label htmlFor=\"medical_dispensary\">Functional Dispensary</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"medical_dispensary\"\n                value={formData.medical_dispensary}\n                onChange={(e) => setFormData({ ...formData, medical_dispensary: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.medical_dispensary}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Transport & Local Access Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Bus className=\"h-5 w-5 text-blue-600\" />\n            Transport & Local Access\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"transport_local\">Local Connectivity</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"transport_local\"\n                value={formData.transport_local}\n                onChange={(e) => setFormData({ ...formData, transport_local: e.target.value })}\n                rows={1}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.transport_local}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"transport_dedicated\">Dedicated Transport</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"transport_dedicated\"\n                value={formData.transport_dedicated}\n                onChange={(e) => setFormData({ ...formData, transport_dedicated: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.transport_dedicated}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Auditorium / Seminar Halls Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Users className=\"h-5 w-5 text-purple-600\" />\n            Auditorium / Seminar Halls / Conference Rooms\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"auditorium_description\">Auditorium</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"auditorium_description\"\n                value={formData.auditorium_description}\n                onChange={(e) => setFormData({ ...formData, auditorium_description: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.auditorium_description}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"seminar_halls\">Seminar Halls</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"seminar_halls\"\n                value={formData.seminar_halls}\n                onChange={(e) => setFormData({ ...formData, seminar_halls: e.target.value })}\n                rows={1}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.seminar_halls}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Wi-Fi / Internet / IT Labs Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Wifi className=\"h-5 w-5 text-cyan-600\" />\n            Wi-Fi / Internet / IT Labs / Smart Classrooms\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"wifi_internet\">Campus Wi-Fi</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"wifi_internet\"\n                value={formData.wifi_internet}\n                onChange={(e) => setFormData({ ...formData, wifi_internet: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.wifi_internet}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"smart_classrooms\">Smart Classrooms</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"smart_classrooms\"\n                value={formData.smart_classrooms}\n                onChange={(e) => setFormData({ ...formData, smart_classrooms: e.target.value })}\n                rows={1}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.smart_classrooms}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"computer_labs\">Computer Labs</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"computer_labs\"\n                value={formData.computer_labs}\n                onChange={(e) => setFormData({ ...formData, computer_labs: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.computer_labs}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Campus Security / CCTV Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Camera className=\"h-5 w-5 text-gray-600\" />\n            Campus Security / CCTV\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"security_staff\">Security Staff</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"security_staff\"\n                value={formData.security_staff}\n                onChange={(e) => setFormData({ ...formData, security_staff: e.target.value })}\n                rows={1}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.security_staff}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"cctv_coverage\">CCTV Coverage</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"cctv_coverage\"\n                value={formData.cctv_coverage}\n                onChange={(e) => setFormData({ ...formData, cctv_coverage: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.cctv_coverage}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Clean & Green Campus / Sustainability Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Leaf className=\"h-5 w-5 text-green-600\" />\n            Clean & Green Campus / Sustainability\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"green_campus\">Green Campus</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"green_campus\"\n                value={formData.green_campus}\n                onChange={(e) => setFormData({ ...formData, green_campus: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.green_campus}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"solar_power\">Solar Power</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"solar_power\"\n                value={formData.solar_power}\n                onChange={(e) => setFormData({ ...formData, solar_power: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.solar_power}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"water_management\">Water Management</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"water_management\"\n                value={formData.water_management}\n                onChange={(e) => setFormData({ ...formData, water_management: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.water_management}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Additional / Miscellaneous Facilities Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Building className=\"h-5 w-5 text-gray-600\" />\n            Additional / Miscellaneous Facilities\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div>\n            <Label htmlFor=\"additional_facilities\">Other Facilities</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"additional_facilities\"\n                value={formData.additional_facilities}\n                onChange={(e) => setFormData({ ...formData, additional_facilities: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.additional_facilities}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Verification Notes / Caveats Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-sm text-amber-700\">Verification Notes / Caveats</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div>\n            <Label htmlFor=\"verification_notes\" className=\"text-xs text-amber-600\">Notes</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"verification_notes\"\n                value={formData.verification_notes}\n                onChange={(e) => setFormData({ ...formData, verification_notes: e.target.value })}\n                rows={3}\n                className=\"mt-1 text-xs\"\n              />\n            ) : (\n              <p className=\"text-xs text-amber-700 mt-1 bg-amber-50 p-3 rounded\">{formData.verification_notes}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {facilitiesData && (\n        <div className=\"text-xs text-gray-500 text-right\">\n          Last updated: {new Date(facilitiesData.updated_at || Date.now()).toLocaleString()}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":28013},"client/src/components/admin/general-info-sections/TechnicalDigitalResourcesSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { Edit, Save, Globe, CreditCard, BookOpen, UserCheck, GraduationCap, Wifi, Server, ExternalLink } from \"lucide-react\";\n\ninterface TechnicalDigitalResourcesSectionProps {\n  data: any;\n  onUpdate: () => void;\n}\n\nexport function TechnicalDigitalResourcesSection({ data, onUpdate }: TechnicalDigitalResourcesSectionProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const token = localStorage.getItem(\"adminToken\");\n  \n  const [formData, setFormData] = useState({\n    overview: \"RKSD College maintains a modern digital ecosystem centered on an in-house ERP portal, web OPAC for the library, campus Wi-Fi & smart classrooms, online fee payment, and an institutional e-repository / e-resources (NLIST/NDL links). The ERP also hosts student/employee logins, library records, fee & bus pass applications and attendance/records modules.\",\n    \n    erp_url: \"https://erp.rksdcollege.com\",\n    erp_capabilities: \"Student and Employee login, Search Library Books, Apply for Bus Pass, Pay College Fee Online, Alumni Registration etc. ERP Capabilities (documented): Student/employee database, library integration, attendance & exam records, alumni, fee modules â€” screenshots and description published in the college AQAR/ERP PDF.\",\n    \n    online_fee_url: \"https://online.rksdcollege.com/Fee/PayFee\",\n    online_fee_description: \"Students can pay fees online; after payment a form is downloadable which must be submitted to college office. ERP home also links to \\\"Pay College Fee Online\\\".\",\n    \n    opac_url: \"https://erp.rksdcollege.com/Admin/Library/SearchBook\",\n    opac_description: \"Library OPAC available (SearchBook â€” erp.rksdcollege.com/Admin/Library/SearchBook) and campus web OPAC mirrors (campus OPAC pages). Students can search holdings online.\",\n    eresources_description: \"College provides e-resources via N-LIST / NDL style access and hosts an institutional repository / teacher e-content (AQAR / Library pages).\",\n    \n    attendance_system: \"Attendance module: ERP contains attendance/recording modules (shown in ERP screenshots). For related institutes in the RKSD group (e.g., Pharmacy), a Biometric Attendance System is explicitly mentioned â€” indicating use or readiness for biometric integration across campus systems. Recommend confirming exact hardware (fingerprint/face) with admin if needed.\",\n    \n    lms_status: \"LMS status: RKSD publishes e-content & institutional repository (teacher-made content, uploaded resources). There is no separate branded LMS (like Moodle/Canvas) publicly advertised â€” learning content appears to be shared via the institutional repository / ERP / library links. If you need a full LMS entry, mark as \\\"Institutional e-repository; LMS = Not publicly listed (confirm with admin)\\\".\",\n    \n    smart_classrooms_it: \"Smart Classrooms / Wi-Fi: College lists 103 Wi-Fi enabled classrooms including 13 smart classrooms with ICT tools; campus-wide free Wi-Fi and computer labs support teaching. (See infrastructure & prospectus pages.)\",\n    computer_labs_it: \"Computer Labs: Two (fully AC) computer labs with up-to-date systems & software (used for practicals).\",\n    \n    data_backup: \"Data & backup: ERP screenshots and AQAR describe centralized record keeping (student/employee/library). Specific backup/DR policy isn't published publicly â€” recommend asking the college IT/admin for details if required.\",\n    \n    library_resources_url: \"https://rksdcollege.ac.in/library-resources/\",\n  });\n\n  const [isEditing, setIsEditing] = useState(false);\n\n  const { data: technicalData } = useQuery({\n    queryKey: [\"/api/admin/general-info/technical-digital-resources\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info/technical-digital-resources\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (technicalData) {\n      setFormData({\n        overview: technicalData.overview || formData.overview,\n        erp_url: technicalData.erp_url || formData.erp_url,\n        erp_capabilities: technicalData.erp_capabilities || formData.erp_capabilities,\n        online_fee_url: technicalData.online_fee_url || formData.online_fee_url,\n        online_fee_description: technicalData.online_fee_description || formData.online_fee_description,\n        opac_url: technicalData.opac_url || formData.opac_url,\n        opac_description: technicalData.opac_description || formData.opac_description,\n        eresources_description: technicalData.eresources_description || formData.eresources_description,\n        attendance_system: technicalData.attendance_system || formData.attendance_system,\n        lms_status: technicalData.lms_status || formData.lms_status,\n        smart_classrooms_it: technicalData.smart_classrooms_it || formData.smart_classrooms_it,\n        computer_labs_it: technicalData.computer_labs_it || formData.computer_labs_it,\n        data_backup: technicalData.data_backup || formData.data_backup,\n        library_resources_url: technicalData.library_resources_url || formData.library_resources_url,\n      });\n    }\n  }, [technicalData]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (data: typeof formData) => {\n      const res = await fetch(\"/api/admin/general-info/technical-digital-resources\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"Technical & Digital Resources information updated successfully\" });\n      setIsEditing(false);\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/general-info/technical-digital-resources\"] });\n      onUpdate();\n    },\n    onError: (error: any) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate(formData);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Technical & Digital Resources</h2>\n          <p className=\"text-sm text-gray-600\">Manage digital infrastructure and online resources</p>\n        </div>\n        <Button\n          onClick={() => (isEditing ? handleSave() : setIsEditing(true))}\n          disabled={saveMutation.isPending}\n        >\n          {isEditing ? (\n            <>\n              <Save className=\"h-4 w-4 mr-2\" />\n              {saveMutation.isPending ? \"Saving...\" : \"Save Changes\"}\n            </>\n          ) : (\n            <>\n              <Edit className=\"h-4 w-4 mr-2\" />\n              Edit\n            </>\n          )}\n        </Button>\n      </div>\n\n      {/* Overview Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Globe className=\"h-5 w-5 text-blue-600\" />\n            Overview\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div>\n            <Label htmlFor=\"overview\">System Overview</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"overview\"\n                value={formData.overview}\n                onChange={(e) => setFormData({ ...formData, overview: e.target.value })}\n                rows={4}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.overview}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Official ERP / Student Portal Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Server className=\"h-5 w-5 text-purple-600\" />\n            Official ERP / Student Portal\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"erp_url\">ERP URL / Student Login</Label>\n            {isEditing ? (\n              <div className=\"space-y-2\">\n                <Input\n                  id=\"erp_url\"\n                  value={formData.erp_url}\n                  onChange={(e) => setFormData({ ...formData, erp_url: e.target.value })}\n                  placeholder=\"https://erp.rksdcollege.com\"\n                  className=\"mt-1\"\n                />\n              </div>\n            ) : (\n              <div className=\"mt-1 flex items-center gap-2\">\n                <a \n                  href={formData.erp_url} \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"text-sm text-blue-600 hover:underline flex items-center gap-1\"\n                >\n                  {formData.erp_url}\n                  <ExternalLink className=\"h-3 w-3\" />\n                </a>\n              </div>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"erp_capabilities\">ERP Capabilities</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"erp_capabilities\"\n                value={formData.erp_capabilities}\n                onChange={(e) => setFormData({ ...formData, erp_capabilities: e.target.value })}\n                rows={4}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.erp_capabilities}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Online Fee Payment Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <CreditCard className=\"h-5 w-5 text-green-600\" />\n            Online Fee Payment\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"online_fee_url\">Online Fee Portal</Label>\n            {isEditing ? (\n              <Input\n                id=\"online_fee_url\"\n                value={formData.online_fee_url}\n                onChange={(e) => setFormData({ ...formData, online_fee_url: e.target.value })}\n                placeholder=\"https://online.rksdcollege.com/Fee/PayFee\"\n                className=\"mt-1\"\n              />\n            ) : (\n              <div className=\"mt-1 flex items-center gap-2\">\n                <a \n                  href={formData.online_fee_url} \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"text-sm text-blue-600 hover:underline flex items-center gap-1\"\n                >\n                  {formData.online_fee_url}\n                  <ExternalLink className=\"h-3 w-3\" />\n                </a>\n              </div>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"online_fee_description\">Description</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"online_fee_description\"\n                value={formData.online_fee_description}\n                onChange={(e) => setFormData({ ...formData, online_fee_description: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.online_fee_description}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Library OPAC & E-Resources Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <BookOpen className=\"h-5 w-5 text-indigo-600\" />\n            Library OPAC & E-Resources / E-Repository\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"opac_url\">Web OPAC / SearchBook</Label>\n            {isEditing ? (\n              <Input\n                id=\"opac_url\"\n                value={formData.opac_url}\n                onChange={(e) => setFormData({ ...formData, opac_url: e.target.value })}\n                placeholder=\"https://erp.rksdcollege.com/Admin/Library/SearchBook\"\n                className=\"mt-1\"\n              />\n            ) : (\n              <div className=\"mt-1 flex items-center gap-2\">\n                <a \n                  href={formData.opac_url} \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"text-sm text-blue-600 hover:underline flex items-center gap-1\"\n                >\n                  {formData.opac_url}\n                  <ExternalLink className=\"h-3 w-3\" />\n                </a>\n              </div>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"opac_description\">OPAC Description</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"opac_description\"\n                value={formData.opac_description}\n                onChange={(e) => setFormData({ ...formData, opac_description: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.opac_description}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"eresources_description\">E-Resources & Institutional Repository</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"eresources_description\"\n                value={formData.eresources_description}\n                onChange={(e) => setFormData({ ...formData, eresources_description: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.eresources_description}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Attendance / Biometric / Exam Records Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <UserCheck className=\"h-5 w-5 text-orange-600\" />\n            Attendance / Biometric / Exam Records\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div>\n            <Label htmlFor=\"attendance_system\">Attendance Module</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"attendance_system\"\n                value={formData.attendance_system}\n                onChange={(e) => setFormData({ ...formData, attendance_system: e.target.value })}\n                rows={4}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.attendance_system}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Learning Management / E-Learning Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <GraduationCap className=\"h-5 w-5 text-cyan-600\" />\n            Learning Management / E-Learning\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div>\n            <Label htmlFor=\"lms_status\">LMS Status</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"lms_status\"\n                value={formData.lms_status}\n                onChange={(e) => setFormData({ ...formData, lms_status: e.target.value })}\n                rows={4}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.lms_status}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Smart Classrooms, IT Labs & Connectivity Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Wifi className=\"h-5 w-5 text-blue-600\" />\n            Smart Classrooms, IT Labs & Connectivity\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"smart_classrooms_it\">Smart Classrooms / Wi-Fi</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"smart_classrooms_it\"\n                value={formData.smart_classrooms_it}\n                onChange={(e) => setFormData({ ...formData, smart_classrooms_it: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.smart_classrooms_it}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"computer_labs_it\">Computer Labs</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"computer_labs_it\"\n                value={formData.computer_labs_it}\n                onChange={(e) => setFormData({ ...formData, computer_labs_it: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.computer_labs_it}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Security, Backups & IT Support Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Server className=\"h-5 w-5 text-gray-600\" />\n            Security, Backups & IT Support\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div>\n            <Label htmlFor=\"data_backup\">Data & Backup</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"data_backup\"\n                value={formData.data_backup}\n                onChange={(e) => setFormData({ ...formData, data_backup: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.data_backup}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Useful Links Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <ExternalLink className=\"h-5 w-5 text-blue-600\" />\n            Useful Links (Direct)\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-3\">\n          <div className=\"grid grid-cols-1 gap-2\">\n            <div className=\"flex items-center justify-between p-2 bg-gray-50 rounded\">\n              <span className=\"text-sm font-medium\">ERP / Student Login</span>\n              <a \n                href={formData.erp_url} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\"\n                className=\"text-xs text-blue-600 hover:underline flex items-center gap-1\"\n              >\n                Visit <ExternalLink className=\"h-3 w-3\" />\n              </a>\n            </div>\n            <div className=\"flex items-center justify-between p-2 bg-gray-50 rounded\">\n              <span className=\"text-sm font-medium\">Library OPAC / SearchBook</span>\n              <a \n                href={formData.opac_url} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\"\n                className=\"text-xs text-blue-600 hover:underline flex items-center gap-1\"\n              >\n                Visit <ExternalLink className=\"h-3 w-3\" />\n              </a>\n            </div>\n            <div className=\"flex items-center justify-between p-2 bg-gray-50 rounded\">\n              <span className=\"text-sm font-medium\">Online Fee Payment</span>\n              <a \n                href={formData.online_fee_url} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\"\n                className=\"text-xs text-blue-600 hover:underline flex items-center gap-1\"\n              >\n                Visit <ExternalLink className=\"h-3 w-3\" />\n              </a>\n            </div>\n            <div className=\"flex items-center justify-between p-2 bg-gray-50 rounded\">\n              <span className=\"text-sm font-medium\">Library Resources</span>\n              {isEditing ? (\n                <Input\n                  value={formData.library_resources_url}\n                  onChange={(e) => setFormData({ ...formData, library_resources_url: e.target.value })}\n                  className=\"ml-2 h-8 text-xs w-64\"\n                />\n              ) : (\n                <a \n                  href={formData.library_resources_url} \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"text-xs text-blue-600 hover:underline flex items-center gap-1\"\n                >\n                  Visit <ExternalLink className=\"h-3 w-3\" />\n                </a>\n              )}\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {technicalData && (\n        <div className=\"text-xs text-gray-500 text-right\">\n          Last updated: {new Date(technicalData.updated_at || Date.now()).toLocaleString()}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":21494},"client/src/components/admin/general-info-sections/CampusEnvironmentSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { Edit, Save, TreePine, Sun, Shield, AlertTriangle, Building2, Droplets } from \"lucide-react\";\n\ninterface CampusEnvironmentSectionProps {\n  data: any;\n  onUpdate: () => void;\n}\n\nexport function CampusEnvironmentSection({ data, onUpdate }: CampusEnvironmentSectionProps) {\n  const { toast } = useToast();\n  const token = localStorage.getItem(\"adminToken\");\n  \n  const [formData, setFormData] = useState({\n    total_area: \"11.52 acres of land\",\n    built_up_area: \"11,701 sq. m\",\n    green_area: \"34,918 sq. m\",\n    total_classrooms: \"103 classrooms\",\n    departmental_offices: \"17 departmental offices\",\n    infrastructure_blocks: \"Separate blocks for Arts, Science, Commerce, and Postgraduate departments\",\n    main_building_description: \"The iconic main building reflects the college's rich heritage and academic excellence since its inception.\",\n    pg_block_description: \"A two-storey Postgraduate Block was added in 2004 during the college's Diamond Jubilee year.\",\n    smart_classrooms: \"In 2018, a modern extension was constructed with 30 smart rooms to facilitate ICT-based teaching.\",\n    sports_infrastructure: \"A large indoor and outdoor stadium within the campus supports various athletic and fitness activities.\",\n    \n    solar_power_plants: \"Two solar installations (120 KVA and 43 KVA) reduce the college's carbon footprint and support clean energy goals â€” the second was funded under the RUSA 2.0 grant.\",\n    water_conservation: \"Rainwater harvesting systems divert run-off to recharge borewells and prevent flooding during heavy rains.\",\n    plantation_drives: \"The Eco Club, NCC and NSS volunteers organize plantation and environment-awareness campaigns regularly.\",\n    waste_management: \"The college follows the 'Reduce, Reuse, Recycle' policy and has dustbins at regular intervals across campus.\",\n    eco_friendly_campus: \"RKSD College maintains a clean, green, plastic-free, and tobacco-free environment.\",\n    \n    security_247: \"A professional security agency monitors the campus round the clock.\",\n    cctv_surveillance: \"Over 70 CCTV cameras cover key locations including classrooms, corridors, and entry points.\",\n    female_entrance: \"A dedicated entry and security checkpoint ensure female safety and comfort.\",\n    identity_regulations: \"Entry without college ID is restricted; ragging is strictly prohibited; parking is allowed only in designated zones.\",\n    \n    medical_assistance: \"A dispensary and first-aid center are available for students and staff on campus.\",\n    emergency_support: \"Tied arrangements exist with nearby hospitals and nursing homes for urgent medical care.\",\n    welfare_schemes: \"Staff benefit from emergency advance schemes for critical needs.\",\n    green_audit: \"The college has successfully completed a comprehensive Environmental and Green Campus Audit certification.\",\n    fire_safety: \"Basic fire extinguishers and emergency procedures are in place as per institutional safety norms.\",\n  });\n\n  const [isEditing, setIsEditing] = useState(false);\n\n  const { data: campusData } = useQuery({\n    queryKey: [\"/api/admin/general-info/campus-environment\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info/campus-environment\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (campusData) {\n      setFormData({\n        total_area: campusData.total_area || formData.total_area,\n        built_up_area: campusData.built_up_area || formData.built_up_area,\n        green_area: campusData.green_area || formData.green_area,\n        total_classrooms: campusData.total_classrooms || formData.total_classrooms,\n        departmental_offices: campusData.departmental_offices || formData.departmental_offices,\n        infrastructure_blocks: campusData.infrastructure_blocks || formData.infrastructure_blocks,\n        main_building_description: campusData.main_building_description || formData.main_building_description,\n        pg_block_description: campusData.pg_block_description || formData.pg_block_description,\n        smart_classrooms: campusData.smart_classrooms || formData.smart_classrooms,\n        sports_infrastructure: campusData.sports_infrastructure || formData.sports_infrastructure,\n        solar_power_plants: campusData.solar_power_plants || formData.solar_power_plants,\n        water_conservation: campusData.water_conservation || formData.water_conservation,\n        plantation_drives: campusData.plantation_drives || formData.plantation_drives,\n        waste_management: campusData.waste_management || formData.waste_management,\n        eco_friendly_campus: campusData.eco_friendly_campus || formData.eco_friendly_campus,\n        security_247: campusData.security_247 || formData.security_247,\n        cctv_surveillance: campusData.cctv_surveillance || formData.cctv_surveillance,\n        female_entrance: campusData.female_entrance || formData.female_entrance,\n        identity_regulations: campusData.identity_regulations || formData.identity_regulations,\n        medical_assistance: campusData.medical_assistance || formData.medical_assistance,\n        emergency_support: campusData.emergency_support || formData.emergency_support,\n        welfare_schemes: campusData.welfare_schemes || formData.welfare_schemes,\n        green_audit: campusData.green_audit || formData.green_audit,\n        fire_safety: campusData.fire_safety || formData.fire_safety,\n      });\n    }\n  }, [campusData]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (data: typeof formData) => {\n      const res = await fetch(\"/api/admin/general-info/campus-environment\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"Campus & Environment information updated successfully\" });\n      setIsEditing(false);\n      onUpdate();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate(formData);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Campus & Environment</h2>\n          <p className=\"text-sm text-gray-600\">Manage campus area, green initiatives, safety and emergency measures</p>\n        </div>\n        <Button\n          onClick={() => (isEditing ? handleSave() : setIsEditing(true))}\n          disabled={saveMutation.isPending}\n        >\n          {isEditing ? (\n            <>\n              <Save className=\"h-4 w-4 mr-2\" />\n              {saveMutation.isPending ? \"Saving...\" : \"Save Changes\"}\n            </>\n          ) : (\n            <>\n              <Edit className=\"h-4 w-4 mr-2\" />\n              Edit\n            </>\n          )}\n        </Button>\n      </div>\n\n      {/* Campus Area & Buildings */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Building2 className=\"h-5 w-5 text-blue-600\" />\n            Campus Area & Buildings\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"total_area\">Total Campus Area</Label>\n              {isEditing ? (\n                <Input\n                  id=\"total_area\"\n                  value={formData.total_area}\n                  onChange={(e) => setFormData({ ...formData, total_area: e.target.value })}\n                  className=\"mt-1\"\n                />\n              ) : (\n                <p className=\"text-sm text-gray-700 mt-1\">{formData.total_area}</p>\n              )}\n            </div>\n            <div>\n              <Label htmlFor=\"built_up_area\">Built-up Area</Label>\n              {isEditing ? (\n                <Input\n                  id=\"built_up_area\"\n                  value={formData.built_up_area}\n                  onChange={(e) => setFormData({ ...formData, built_up_area: e.target.value })}\n                  className=\"mt-1\"\n                />\n              ) : (\n                <p className=\"text-sm text-gray-700 mt-1\">{formData.built_up_area}</p>\n              )}\n            </div>\n            <div>\n              <Label htmlFor=\"green_area\">Green Area</Label>\n              {isEditing ? (\n                <Input\n                  id=\"green_area\"\n                  value={formData.green_area}\n                  onChange={(e) => setFormData({ ...formData, green_area: e.target.value })}\n                  className=\"mt-1\"\n                />\n              ) : (\n                <p className=\"text-sm text-gray-700 mt-1\">{formData.green_area}</p>\n              )}\n            </div>\n            <div>\n              <Label htmlFor=\"total_classrooms\">Total Classrooms</Label>\n              {isEditing ? (\n                <Input\n                  id=\"total_classrooms\"\n                  value={formData.total_classrooms}\n                  onChange={(e) => setFormData({ ...formData, total_classrooms: e.target.value })}\n                  className=\"mt-1\"\n                />\n              ) : (\n                <p className=\"text-sm text-gray-700 mt-1\">{formData.total_classrooms}</p>\n              )}\n            </div>\n            <div>\n              <Label htmlFor=\"departmental_offices\">Departmental Offices</Label>\n              {isEditing ? (\n                <Input\n                  id=\"departmental_offices\"\n                  value={formData.departmental_offices}\n                  onChange={(e) => setFormData({ ...formData, departmental_offices: e.target.value })}\n                  className=\"mt-1\"\n                />\n              ) : (\n                <p className=\"text-sm text-gray-700 mt-1\">{formData.departmental_offices}</p>\n              )}\n            </div>\n          </div>\n          \n          <div>\n            <Label htmlFor=\"infrastructure_blocks\">Infrastructure Blocks</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"infrastructure_blocks\"\n                value={formData.infrastructure_blocks}\n                onChange={(e) => setFormData({ ...formData, infrastructure_blocks: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.infrastructure_blocks}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"main_building_description\">Main Building</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"main_building_description\"\n                value={formData.main_building_description}\n                onChange={(e) => setFormData({ ...formData, main_building_description: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.main_building_description}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"pg_block_description\">PG Block</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"pg_block_description\"\n                value={formData.pg_block_description}\n                onChange={(e) => setFormData({ ...formData, pg_block_description: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.pg_block_description}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"smart_classrooms\">Smart Classrooms</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"smart_classrooms\"\n                value={formData.smart_classrooms}\n                onChange={(e) => setFormData({ ...formData, smart_classrooms: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.smart_classrooms}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"sports_infrastructure\">Sports Infrastructure</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"sports_infrastructure\"\n                value={formData.sports_infrastructure}\n                onChange={(e) => setFormData({ ...formData, sports_infrastructure: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.sports_infrastructure}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Green Initiatives & Sustainability */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <TreePine className=\"h-5 w-5 text-green-600\" />\n            Green Initiatives & Sustainability\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"solar_power_plants\">\n              <Sun className=\"inline h-4 w-4 mr-1 text-yellow-600\" />\n              Solar Power Plants\n            </Label>\n            {isEditing ? (\n              <Textarea\n                id=\"solar_power_plants\"\n                value={formData.solar_power_plants}\n                onChange={(e) => setFormData({ ...formData, solar_power_plants: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.solar_power_plants}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"water_conservation\">\n              <Droplets className=\"inline h-4 w-4 mr-1 text-blue-600\" />\n              Water Conservation\n            </Label>\n            {isEditing ? (\n              <Textarea\n                id=\"water_conservation\"\n                value={formData.water_conservation}\n                onChange={(e) => setFormData({ ...formData, water_conservation: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.water_conservation}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"plantation_drives\">Plantation Drives & Eco Club</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"plantation_drives\"\n                value={formData.plantation_drives}\n                onChange={(e) => setFormData({ ...formData, plantation_drives: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.plantation_drives}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"waste_management\">Waste Management</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"waste_management\"\n                value={formData.waste_management}\n                onChange={(e) => setFormData({ ...formData, waste_management: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.waste_management}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"eco_friendly_campus\">Eco-Friendly Campus</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"eco_friendly_campus\"\n                value={formData.eco_friendly_campus}\n                onChange={(e) => setFormData({ ...formData, eco_friendly_campus: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.eco_friendly_campus}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Safety & Security Measures */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Shield className=\"h-5 w-5 text-purple-600\" />\n            Safety & Security Measures\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"security_247\">24/7 Security</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"security_247\"\n                value={formData.security_247}\n                onChange={(e) => setFormData({ ...formData, security_247: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.security_247}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"cctv_surveillance\">CCTV Surveillance</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"cctv_surveillance\"\n                value={formData.cctv_surveillance}\n                onChange={(e) => setFormData({ ...formData, cctv_surveillance: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.cctv_surveillance}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"female_entrance\">Separate Entrance for Female Students</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"female_entrance\"\n                value={formData.female_entrance}\n                onChange={(e) => setFormData({ ...formData, female_entrance: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.female_entrance}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"identity_regulations\">Identity & Regulations</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"identity_regulations\"\n                value={formData.identity_regulations}\n                onChange={(e) => setFormData({ ...formData, identity_regulations: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.identity_regulations}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Fire & Emergency Preparedness */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <AlertTriangle className=\"h-5 w-5 text-red-600\" />\n            Fire & Emergency Preparedness\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"medical_assistance\">Medical Assistance</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"medical_assistance\"\n                value={formData.medical_assistance}\n                onChange={(e) => setFormData({ ...formData, medical_assistance: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.medical_assistance}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"emergency_support\">Emergency Support</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"emergency_support\"\n                value={formData.emergency_support}\n                onChange={(e) => setFormData({ ...formData, emergency_support: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.emergency_support}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"welfare_schemes\">Welfare Schemes</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"welfare_schemes\"\n                value={formData.welfare_schemes}\n                onChange={(e) => setFormData({ ...formData, welfare_schemes: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.welfare_schemes}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"green_audit\">Environment & Green Audit</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"green_audit\"\n                value={formData.green_audit}\n                onChange={(e) => setFormData({ ...formData, green_audit: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.green_audit}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"fire_safety\">Fire Safety</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"fire_safety\"\n                value={formData.fire_safety}\n                onChange={(e) => setFormData({ ...formData, fire_safety: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.fire_safety}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":22344},"client/src/components/admin/general-info-sections/RulesRegulationsSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { Edit, Save, Clock, FileText, ShirtIcon, Home as HomeIcon, AlertCircle, Plus, Trash2 } from \"lucide-react\";\n\ninterface RulesRegulationsSectionProps {\n  data: any;\n  onUpdate: () => void;\n}\n\ninterface AttendanceTier {\n  id: string;\n  range: string;\n  marks: string;\n  condition?: string;\n}\n\nexport function RulesRegulationsSection({ data, onUpdate }: RulesRegulationsSectionProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const token = localStorage.getItem(\"adminToken\");\n  \n  const [formData, setFormData] = useState({\n    mandatory_attendance: \"A minimum of 75% attendance in theory classes is required for students to be eligible to appear in the final examinations.\",\n    punctuality: \"Students must be punctual for all classes. Late entries may be restricted by the faculty.\",\n    \n    internal_assessment_description: \"20% internal assessment is conducted for all theory papers, distributed as follows: Two handwritten assignments (10%), One class test (5%), and Attendance (5%).\",\n    seating_capacity: \"The college has dedicated examination blocks, each with a seating capacity of 800 students.\",\n    cctv_surveillance: \"Examination rooms and corridors are monitored by CCTV cameras to ensure fair and transparent conduct.\",\n    verification: \"During examinations, students must produce their admit card and college identity card at the entry gate.\",\n    parental_communication: \"Mid-term exam notices and important updates are regularly published, and parents are kept informed about exam-related matters.\",\n    \n    dress_code_description: \"To maintain academic decorum, students are required to wear decent and appropriate clothes at all times.\",\n    dress_code_enforcement: \"The dress code is strictly enforced to promote a respectful and focused learning environment.\",\n    \n    hostel_facility: \"The college does not provide on-campus hostel accommodation.\",\n    nearby_options: \"Several PGs and private accommodations are conveniently located near the campus.\",\n    \n    identity_card_rule: \"All students must carry their college identity card and produce it upon request. Entry without a valid ID card is prohibited.\",\n    ragging_ban: \"Ragging is strictly prohibited. Any student found involved in ragging will face severe disciplinary action in accordance with college and UGC norms.\",\n    general_conduct: \"Students must not create disturbances and are expected to maintain discipline within the campus. Littering is forbidden; cleanliness must be maintained. Permission from the Principal is mandatory before using the college name or premises for any external activity or event.\",\n    safety_rules: \"Vehicles must be parked in designated areas only. Wearing a helmet is compulsory for all riders.\",\n    prohibited_activities: \"Political or antisocial activities are strictly banned on campus.\",\n    grievance_discipline: \"The college has a Discipline Committee and a Grievance Redressal Cell to resolve student concerns and maintain a positive academic environment.\",\n  });\n\n  const [attendanceTiers, setAttendanceTiers] = useState<AttendanceTier[]>([\n    { id: \"1\", range: \"91% and above\", marks: \"5 marks\", condition: \"\" },\n    { id: \"2\", range: \"81% to 90%\", marks: \"4 marks\", condition: \"\" },\n    { id: \"3\", range: \"75% to 80%\", marks: \"3 marks\", condition: \"\" },\n    { id: \"4\", range: \"70% to 74%\", marks: \"2 marks\", condition: \"Exceptions may be made for students participating in college-related co-curricular activities, with prior approval of the Principal\" },\n    { id: \"5\", range: \"65% to 69%\", marks: \"1 mark\", condition: \"For students with valid medical grounds, approved by the Principal\" },\n  ]);\n\n  const [newTier, setNewTier] = useState({ range: \"\", marks: \"\", condition: \"\" });\n  const [isEditing, setIsEditing] = useState(false);\n\n  const { data: rulesData } = useQuery({\n    queryKey: [\"/api/admin/general-info/rules-regulations\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info/rules-regulations\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (rulesData) {\n      setFormData({\n        mandatory_attendance: rulesData.mandatory_attendance || formData.mandatory_attendance,\n        punctuality: rulesData.punctuality || formData.punctuality,\n        internal_assessment_description: rulesData.internal_assessment_description || formData.internal_assessment_description,\n        seating_capacity: rulesData.seating_capacity || formData.seating_capacity,\n        cctv_surveillance: rulesData.cctv_surveillance || formData.cctv_surveillance,\n        verification: rulesData.verification || formData.verification,\n        parental_communication: rulesData.parental_communication || formData.parental_communication,\n        dress_code_description: rulesData.dress_code_description || formData.dress_code_description,\n        dress_code_enforcement: rulesData.dress_code_enforcement || formData.dress_code_enforcement,\n        hostel_facility: rulesData.hostel_facility || formData.hostel_facility,\n        nearby_options: rulesData.nearby_options || formData.nearby_options,\n        identity_card_rule: rulesData.identity_card_rule || formData.identity_card_rule,\n        ragging_ban: rulesData.ragging_ban || formData.ragging_ban,\n        general_conduct: rulesData.general_conduct || formData.general_conduct,\n        safety_rules: rulesData.safety_rules || formData.safety_rules,\n        prohibited_activities: rulesData.prohibited_activities || formData.prohibited_activities,\n        grievance_discipline: rulesData.grievance_discipline || formData.grievance_discipline,\n      });\n      if (rulesData.attendance_tiers) {\n        setAttendanceTiers(rulesData.attendance_tiers);\n      }\n    }\n  }, [rulesData]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(\"/api/admin/general-info/rules-regulations\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"Rules & Regulations information updated successfully\" });\n      setIsEditing(false);\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/general-info/rules-regulations\"] });\n      onUpdate();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate({\n      ...formData,\n      attendance_tiers: attendanceTiers,\n    });\n  };\n\n  const addAttendanceTier = () => {\n    if (newTier.range.trim() && newTier.marks.trim()) {\n      setAttendanceTiers([...attendanceTiers, { \n        id: Date.now().toString(), \n        range: newTier.range, \n        marks: newTier.marks,\n        condition: newTier.condition\n      }]);\n      setNewTier({ range: \"\", marks: \"\", condition: \"\" });\n    }\n  };\n\n  const removeAttendanceTier = (id: string) => {\n    setAttendanceTiers(attendanceTiers.filter(t => t.id !== id));\n  };\n\n  const updateAttendanceTier = (id: string, field: keyof AttendanceTier, value: string) => {\n    setAttendanceTiers(attendanceTiers.map(t => \n      t.id === id ? { ...t, [field]: value } : t\n    ));\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Rules & Regulations</h2>\n          <p className=\"text-sm text-gray-600\">Manage attendance rules, examination policy, dress code and disciplinary policies</p>\n        </div>\n        <Button\n          onClick={() => (isEditing ? handleSave() : setIsEditing(true))}\n          disabled={saveMutation.isPending}\n        >\n          {isEditing ? (\n            <>\n              <Save className=\"h-4 w-4 mr-2\" />\n              {saveMutation.isPending ? \"Saving...\" : \"Save Changes\"}\n            </>\n          ) : (\n            <>\n              <Edit className=\"h-4 w-4 mr-2\" />\n              Edit\n            </>\n          )}\n        </Button>\n      </div>\n\n      {/* Attendance Rules */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Clock className=\"h-5 w-5 text-blue-600\" />\n            Attendance Rules\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"mandatory_attendance\">Mandatory Attendance</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"mandatory_attendance\"\n                value={formData.mandatory_attendance}\n                onChange={(e) => setFormData({ ...formData, mandatory_attendance: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.mandatory_attendance}</p>\n            )}\n          </div>\n\n          <div>\n            <Label className=\"mb-2 block\">Internal Marks Distribution (Attendance-based)</Label>\n            <div className=\"space-y-2\">\n              {attendanceTiers.map((tier) => (\n                <Card key={tier.id} className=\"bg-gray-50\">\n                  <CardContent className=\"p-3\">\n                    {isEditing ? (\n                      <div className=\"space-y-2\">\n                        <div className=\"grid grid-cols-2 gap-2\">\n                          <Input\n                            placeholder=\"Range (e.g., 91% and above)\"\n                            value={tier.range}\n                            onChange={(e) => updateAttendanceTier(tier.id, 'range', e.target.value)}\n                          />\n                          <Input\n                            placeholder=\"Marks (e.g., 5 marks)\"\n                            value={tier.marks}\n                            onChange={(e) => updateAttendanceTier(tier.id, 'marks', e.target.value)}\n                          />\n                        </div>\n                        <Input\n                          placeholder=\"Condition (optional)\"\n                          value={tier.condition || \"\"}\n                          onChange={(e) => updateAttendanceTier(tier.id, 'condition', e.target.value)}\n                        />\n                        <Button \n                          variant=\"destructive\" \n                          size=\"sm\"\n                          onClick={() => removeAttendanceTier(tier.id)}\n                        >\n                          <Trash2 className=\"h-3 w-3 mr-1\" />\n                          Remove\n                        </Button>\n                      </div>\n                    ) : (\n                      <div>\n                        <p className=\"font-medium text-sm\">\n                          <span className=\"text-blue-600\">{tier.range}</span>: {tier.marks}\n                        </p>\n                        {tier.condition && (\n                          <p className=\"text-xs text-gray-600 mt-1 italic\">{tier.condition}</p>\n                        )}\n                      </div>\n                    )}\n                  </CardContent>\n                </Card>\n              ))}\n\n              {isEditing && (\n                <Card className=\"bg-blue-50 border-blue-200\">\n                  <CardContent className=\"p-3\">\n                    <Label className=\"text-xs mb-2 block\">Add New Attendance Tier</Label>\n                    <div className=\"space-y-2\">\n                      <div className=\"grid grid-cols-2 gap-2\">\n                        <Input\n                          placeholder=\"Range (e.g., 91% and above)\"\n                          value={newTier.range}\n                          onChange={(e) => setNewTier({ ...newTier, range: e.target.value })}\n                          className=\"bg-white\"\n                        />\n                        <Input\n                          placeholder=\"Marks (e.g., 5 marks)\"\n                          value={newTier.marks}\n                          onChange={(e) => setNewTier({ ...newTier, marks: e.target.value })}\n                          className=\"bg-white\"\n                        />\n                      </div>\n                      <Input\n                        placeholder=\"Condition (optional)\"\n                        value={newTier.condition}\n                        onChange={(e) => setNewTier({ ...newTier, condition: e.target.value })}\n                        className=\"bg-white\"\n                      />\n                      <Button onClick={addAttendanceTier} size=\"sm\" className=\"w-full\">\n                        <Plus className=\"h-3 w-3 mr-1\" />\n                        Add Tier\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              )}\n            </div>\n          </div>\n\n          <div>\n            <Label htmlFor=\"punctuality\">Punctuality</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"punctuality\"\n                value={formData.punctuality}\n                onChange={(e) => setFormData({ ...formData, punctuality: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.punctuality}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Examination Policy */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <FileText className=\"h-5 w-5 text-purple-600\" />\n            Examination Policy\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"internal_assessment_description\">Internal Assessment</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"internal_assessment_description\"\n                value={formData.internal_assessment_description}\n                onChange={(e) => setFormData({ ...formData, internal_assessment_description: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.internal_assessment_description}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"seating_capacity\">Seating Capacity</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"seating_capacity\"\n                value={formData.seating_capacity}\n                onChange={(e) => setFormData({ ...formData, seating_capacity: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.seating_capacity}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"cctv_surveillance\">CCTV Surveillance</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"cctv_surveillance\"\n                value={formData.cctv_surveillance}\n                onChange={(e) => setFormData({ ...formData, cctv_surveillance: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.cctv_surveillance}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"verification\">Verification Requirements</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"verification\"\n                value={formData.verification}\n                onChange={(e) => setFormData({ ...formData, verification: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.verification}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"parental_communication\">Parental Communication</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"parental_communication\"\n                value={formData.parental_communication}\n                onChange={(e) => setFormData({ ...formData, parental_communication: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.parental_communication}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Dress Code */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <ShirtIcon className=\"h-5 w-5 text-green-600\" />\n            Dress Code\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"dress_code_description\">Dress Code Policy</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"dress_code_description\"\n                value={formData.dress_code_description}\n                onChange={(e) => setFormData({ ...formData, dress_code_description: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.dress_code_description}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"dress_code_enforcement\">Enforcement</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"dress_code_enforcement\"\n                value={formData.dress_code_enforcement}\n                onChange={(e) => setFormData({ ...formData, dress_code_enforcement: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.dress_code_enforcement}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Hostel Rules */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <HomeIcon className=\"h-5 w-5 text-orange-600\" />\n            Hostel Rules\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"hostel_facility\">Hostel Facility Status</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"hostel_facility\"\n                value={formData.hostel_facility}\n                onChange={(e) => setFormData({ ...formData, hostel_facility: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.hostel_facility}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"nearby_options\">Nearby Options</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"nearby_options\"\n                value={formData.nearby_options}\n                onChange={(e) => setFormData({ ...formData, nearby_options: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.nearby_options}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Disciplinary Policy */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <AlertCircle className=\"h-5 w-5 text-red-600\" />\n            Disciplinary Policy\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"identity_card_rule\">Identity Card Rule</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"identity_card_rule\"\n                value={formData.identity_card_rule}\n                onChange={(e) => setFormData({ ...formData, identity_card_rule: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.identity_card_rule}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"ragging_ban\">Ragging Ban</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"ragging_ban\"\n                value={formData.ragging_ban}\n                onChange={(e) => setFormData({ ...formData, ragging_ban: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.ragging_ban}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"general_conduct\">General Conduct</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"general_conduct\"\n                value={formData.general_conduct}\n                onChange={(e) => setFormData({ ...formData, general_conduct: e.target.value })}\n                rows={4}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.general_conduct}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"safety_rules\">Safety Rules</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"safety_rules\"\n                value={formData.safety_rules}\n                onChange={(e) => setFormData({ ...formData, safety_rules: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.safety_rules}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"prohibited_activities\">Prohibited Activities</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"prohibited_activities\"\n                value={formData.prohibited_activities}\n                onChange={(e) => setFormData({ ...formData, prohibited_activities: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.prohibited_activities}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"grievance_discipline\">Grievance & Discipline Committees</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"grievance_discipline\"\n                value={formData.grievance_discipline}\n                onChange={(e) => setFormData({ ...formData, grievance_discipline: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.grievance_discipline}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":23655},"client/src/components/admin/general-info-sections/AchievementsRecognitionsSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { Edit, Save, Award, Trophy, Star, Medal, Briefcase, GraduationCap, Users } from \"lucide-react\";\n\ninterface AchievementsRecognitionsSectionProps {\n  data: any;\n  onUpdate: () => void;\n}\n\nexport function AchievementsRecognitionsSection({ data, onUpdate }: AchievementsRecognitionsSectionProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const token = localStorage.getItem(\"adminToken\");\n  \n  const [formData, setFormData] = useState({\n    rusa_grant: \"In 2018, RKSD College was selected under the Rashtriya Uchchtar Shiksha Abhiyan (RUSA 2.0) for infrastructure and quality enhancement.\",\n    rusa_grant_amount: \"â‚¹ 2 Crore\",\n    rusa_grant_year: \"2018\",\n    rusa_funds_utilized: \"Construction of a double-storey canteen, New toilet block, Central air-conditioning for the main library. This grant significantly modernized campus facilities.\",\n    \n    environmental_initiatives: \"Two solar power plants installed for sustainable energy use â€” 120 KVA Plant (Nov 2018) and 43 KVA Plant (2019â€“20) (funded under RUSA 2.0). These initiatives reduced the college's carbon footprint and promoted eco-awareness.\",\n    solar_plant_1: \"120 KVA (November 2018)\",\n    solar_plant_2: \"43 KVA (2019-20)\",\n    \n    infrastructure_excellence: \"Campus spans 10 acres with fully air-conditioned seminar halls, rich library, modern laboratories, and an indoor sports stadium meeting international standards. Recognized under UGC Sections 2(f) and 12(b), ensuring eligibility for central funding and research grants.\",\n    \n    naac_grade: \"A\",\n    naac_cycle: \"2nd Cycle â€“ 2017\",\n    naac_description: \"Accredited with 'A' Grade by National Assessment and Accreditation Council (NAAC) in its second cycle (2017) â€” reflecting high academic and infrastructural quality.\",\n    \n    recognition_reputation: \"RKSD College is consistently acknowledged as one of Haryana's top colleges for academic excellence, discipline, and extracurricular success. Received positive mentions on higher-education ranking platforms such as UniversityKart and Shiksha.com.\",\n    \n    faculty_qualified: \"The college boasts well-qualified and dedicated faculty across streams including Commerce, Science, Arts, Education, and Computer Science.\",\n    faculty_international: \"The Department of English organized RKSD's first International Conference (2012). A research project supervised by Dr. Geeta Goyal earned an international award for innovation in education.\",\n    faculty_research: \"Multiple faculty members serve as Board of Studies Members at Kurukshetra University. Faculty such as Dr. O.P. Saini (NCERT Recognition) and Dr. Shilpy Aggarwal (Subject Expert, Hindi NCERT 2018) have earned national acknowledgments. Active participation in community service, extension, and IQAC quality initiatives.\",\n    \n    cultural_excellence_trophies: \"Inter-Zonal Youth Festival: RKSD College dominated the festival scene, winning the Overall Trophy five consecutive years (2003â€“2009).\",\n    cultural_43rd_festival: \"43rd Zonal Youth Festival (2020â€“21): Won the Overall Trophy, securing 27 medals (13 First places) in singing, dance, and drama events. Participation in 29 items demonstrated the college's cultural versatility.\",\n    cultural_state_level: \"State-Level Recognition: Consistently wins awards at Haryana's state cultural fest 'Ratnavali.'\",\n    \n    sports_university: \"Regular top performer in KUK Inter-College Championships, winning medals in Boxing, Wushu, and Judo.\",\n    sports_national_international: \"Students have represented Haryana and India, winning medals at National & International Meets.\",\n    sports_notable_athlete: \"Manisha Moun, Indian Boxer and international medalist, is a proud alumna of RKSD College.\",\n    \n    alumni_distinguished: \"RKSD alumni have excelled in government, academia, business, sports, and public service.\",\n    alumni_judiciary_1: \"Mr. Arvind Bansal - Chief Judicial Magistrate, Jind\",\n    alumni_judiciary_2: \"Mr. Rakesh Kaushik - Civil Judge, Tohana\",\n    alumni_politics: \"Mr. Leela Ram - MLA, Kaithal\",\n    alumni_police: \"Mr. Vikrant Saini - Assistant Sub Inspector, Haryana Police\",\n    alumni_defence: \"Mr. Kuldeep - Indian Army Personnel\",\n    alumni_sports: \"Manisha Moun - International Boxer, Team India\",\n    alumni_association: \"The college maintains an active alumni association, organizing annual meets, mentorship programmes, and fundraising for student welfare and scholarships.\",\n    \n    ugc_status: \"Recognized under 2(f) & 12(b)\",\n    last_verified: \"October 2025\",\n  });\n\n  const [isEditing, setIsEditing] = useState(false);\n\n  const { data: achievementsData } = useQuery({\n    queryKey: [\"/api/admin/general-info/achievements-recognitions\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info/achievements-recognitions\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (achievementsData) {\n      setFormData({\n        rusa_grant: achievementsData.rusa_grant || formData.rusa_grant,\n        rusa_grant_amount: achievementsData.rusa_grant_amount || formData.rusa_grant_amount,\n        rusa_grant_year: achievementsData.rusa_grant_year || formData.rusa_grant_year,\n        rusa_funds_utilized: achievementsData.rusa_funds_utilized || formData.rusa_funds_utilized,\n        environmental_initiatives: achievementsData.environmental_initiatives || formData.environmental_initiatives,\n        solar_plant_1: achievementsData.solar_plant_1 || formData.solar_plant_1,\n        solar_plant_2: achievementsData.solar_plant_2 || formData.solar_plant_2,\n        infrastructure_excellence: achievementsData.infrastructure_excellence || formData.infrastructure_excellence,\n        naac_grade: achievementsData.naac_grade || formData.naac_grade,\n        naac_cycle: achievementsData.naac_cycle || formData.naac_cycle,\n        naac_description: achievementsData.naac_description || formData.naac_description,\n        recognition_reputation: achievementsData.recognition_reputation || formData.recognition_reputation,\n        faculty_qualified: achievementsData.faculty_qualified || formData.faculty_qualified,\n        faculty_international: achievementsData.faculty_international || formData.faculty_international,\n        faculty_research: achievementsData.faculty_research || formData.faculty_research,\n        cultural_excellence_trophies: achievementsData.cultural_excellence_trophies || formData.cultural_excellence_trophies,\n        cultural_43rd_festival: achievementsData.cultural_43rd_festival || formData.cultural_43rd_festival,\n        cultural_state_level: achievementsData.cultural_state_level || formData.cultural_state_level,\n        sports_university: achievementsData.sports_university || formData.sports_university,\n        sports_national_international: achievementsData.sports_national_international || formData.sports_national_international,\n        sports_notable_athlete: achievementsData.sports_notable_athlete || formData.sports_notable_athlete,\n        alumni_distinguished: achievementsData.alumni_distinguished || formData.alumni_distinguished,\n        alumni_judiciary_1: achievementsData.alumni_judiciary_1 || formData.alumni_judiciary_1,\n        alumni_judiciary_2: achievementsData.alumni_judiciary_2 || formData.alumni_judiciary_2,\n        alumni_politics: achievementsData.alumni_politics || formData.alumni_politics,\n        alumni_police: achievementsData.alumni_police || formData.alumni_police,\n        alumni_defence: achievementsData.alumni_defence || formData.alumni_defence,\n        alumni_sports: achievementsData.alumni_sports || formData.alumni_sports,\n        alumni_association: achievementsData.alumni_association || formData.alumni_association,\n        ugc_status: achievementsData.ugc_status || formData.ugc_status,\n        last_verified: achievementsData.last_verified || formData.last_verified,\n      });\n    }\n  }, [achievementsData]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (data: typeof formData) => {\n      const res = await fetch(\"/api/admin/general-info/achievements-recognitions\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"Achievements & Recognitions information updated successfully\" });\n      setIsEditing(false);\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/general-info/achievements-recognitions\"] });\n      onUpdate();\n    },\n    onError: (error: any) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate(formData);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Achievements & Recognitions</h2>\n          <p className=\"text-sm text-gray-600\">Manage college awards, achievements, and notable alumni</p>\n        </div>\n        <Button\n          onClick={() => (isEditing ? handleSave() : setIsEditing(true))}\n          disabled={saveMutation.isPending}\n        >\n          {isEditing ? (\n            <>\n              <Save className=\"h-4 w-4 mr-2\" />\n              {saveMutation.isPending ? \"Saving...\" : \"Save Changes\"}\n            </>\n          ) : (\n            <>\n              <Edit className=\"h-4 w-4 mr-2\" />\n              Edit\n            </>\n          )}\n        </Button>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Award className=\"h-5 w-5 text-yellow-600\" />\n            RUSA 2.0 Grant\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"rusa_grant\">Grant Description</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"rusa_grant\"\n                value={formData.rusa_grant}\n                onChange={(e) => setFormData({ ...formData, rusa_grant: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.rusa_grant}</p>\n            )}\n          </div>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"rusa_grant_amount\">Grant Amount</Label>\n              {isEditing ? (\n                <Input\n                  id=\"rusa_grant_amount\"\n                  value={formData.rusa_grant_amount}\n                  onChange={(e) => setFormData({ ...formData, rusa_grant_amount: e.target.value })}\n                  className=\"mt-1\"\n                />\n              ) : (\n                <p className=\"text-sm text-gray-700 mt-1\">{formData.rusa_grant_amount}</p>\n              )}\n            </div>\n            <div>\n              <Label htmlFor=\"rusa_grant_year\">Year</Label>\n              {isEditing ? (\n                <Input\n                  id=\"rusa_grant_year\"\n                  value={formData.rusa_grant_year}\n                  onChange={(e) => setFormData({ ...formData, rusa_grant_year: e.target.value })}\n                  className=\"mt-1\"\n                />\n              ) : (\n                <p className=\"text-sm text-gray-700 mt-1\">{formData.rusa_grant_year}</p>\n              )}\n            </div>\n          </div>\n          <div>\n            <Label htmlFor=\"rusa_funds_utilized\">Funds Utilized For</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"rusa_funds_utilized\"\n                value={formData.rusa_funds_utilized}\n                onChange={(e) => setFormData({ ...formData, rusa_funds_utilized: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.rusa_funds_utilized}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Star className=\"h-5 w-5 text-green-600\" />\n            Environmental Initiatives\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"environmental_initiatives\">Overview</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"environmental_initiatives\"\n                value={formData.environmental_initiatives}\n                onChange={(e) => setFormData({ ...formData, environmental_initiatives: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.environmental_initiatives}</p>\n            )}\n          </div>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"solar_plant_1\">Solar Plant 1</Label>\n              {isEditing ? (\n                <Input\n                  id=\"solar_plant_1\"\n                  value={formData.solar_plant_1}\n                  onChange={(e) => setFormData({ ...formData, solar_plant_1: e.target.value })}\n                  className=\"mt-1\"\n                />\n              ) : (\n                <p className=\"text-sm text-gray-700 mt-1\">{formData.solar_plant_1}</p>\n              )}\n            </div>\n            <div>\n              <Label htmlFor=\"solar_plant_2\">Solar Plant 2</Label>\n              {isEditing ? (\n                <Input\n                  id=\"solar_plant_2\"\n                  value={formData.solar_plant_2}\n                  onChange={(e) => setFormData({ ...formData, solar_plant_2: e.target.value })}\n                  className=\"mt-1\"\n                />\n              ) : (\n                <p className=\"text-sm text-gray-700 mt-1\">{formData.solar_plant_2}</p>\n              )}\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Trophy className=\"h-5 w-5 text-blue-600\" />\n            Infrastructure Excellence\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div>\n            <Label htmlFor=\"infrastructure_excellence\">Details</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"infrastructure_excellence\"\n                value={formData.infrastructure_excellence}\n                onChange={(e) => setFormData({ ...formData, infrastructure_excellence: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.infrastructure_excellence}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Medal className=\"h-5 w-5 text-purple-600\" />\n            NAAC Grade & Rankings\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"naac_grade\">NAAC Grade</Label>\n              {isEditing ? (\n                <Input\n                  id=\"naac_grade\"\n                  value={formData.naac_grade}\n                  onChange={(e) => setFormData({ ...formData, naac_grade: e.target.value })}\n                  className=\"mt-1\"\n                />\n              ) : (\n                <p className=\"text-sm text-gray-700 mt-1\">{formData.naac_grade}</p>\n              )}\n            </div>\n            <div>\n              <Label htmlFor=\"naac_cycle\">Cycle</Label>\n              {isEditing ? (\n                <Input\n                  id=\"naac_cycle\"\n                  value={formData.naac_cycle}\n                  onChange={(e) => setFormData({ ...formData, naac_cycle: e.target.value })}\n                  className=\"mt-1\"\n                />\n              ) : (\n                <p className=\"text-sm text-gray-700 mt-1\">{formData.naac_cycle}</p>\n              )}\n            </div>\n          </div>\n          <div>\n            <Label htmlFor=\"naac_description\">Description</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"naac_description\"\n                value={formData.naac_description}\n                onChange={(e) => setFormData({ ...formData, naac_description: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.naac_description}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"recognition_reputation\">Recognition & Reputation</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"recognition_reputation\"\n                value={formData.recognition_reputation}\n                onChange={(e) => setFormData({ ...formData, recognition_reputation: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.recognition_reputation}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <GraduationCap className=\"h-5 w-5 text-indigo-600\" />\n            Faculty Achievements\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"faculty_qualified\">Highly Qualified Faculty</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"faculty_qualified\"\n                value={formData.faculty_qualified}\n                onChange={(e) => setFormData({ ...formData, faculty_qualified: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.faculty_qualified}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"faculty_international\">International Recognition</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"faculty_international\"\n                value={formData.faculty_international}\n                onChange={(e) => setFormData({ ...formData, faculty_international: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.faculty_international}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"faculty_research\">Research & Outreach</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"faculty_research\"\n                value={formData.faculty_research}\n                onChange={(e) => setFormData({ ...formData, faculty_research: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.faculty_research}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Trophy className=\"h-5 w-5 text-pink-600\" />\n            Student Achievements - Cultural Excellence\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"cultural_excellence_trophies\">Inter-Zonal Youth Festival</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"cultural_excellence_trophies\"\n                value={formData.cultural_excellence_trophies}\n                onChange={(e) => setFormData({ ...formData, cultural_excellence_trophies: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.cultural_excellence_trophies}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"cultural_43rd_festival\">43rd Zonal Youth Festival (2020-21)</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"cultural_43rd_festival\"\n                value={formData.cultural_43rd_festival}\n                onChange={(e) => setFormData({ ...formData, cultural_43rd_festival: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.cultural_43rd_festival}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"cultural_state_level\">State-Level Recognition</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"cultural_state_level\"\n                value={formData.cultural_state_level}\n                onChange={(e) => setFormData({ ...formData, cultural_state_level: e.target.value })}\n                rows={1}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.cultural_state_level}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Medal className=\"h-5 w-5 text-orange-600\" />\n            Student Achievements - Sports Success\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"sports_university\">University Level</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"sports_university\"\n                value={formData.sports_university}\n                onChange={(e) => setFormData({ ...formData, sports_university: e.target.value })}\n                rows={1}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.sports_university}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"sports_national_international\">National & International</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"sports_national_international\"\n                value={formData.sports_national_international}\n                onChange={(e) => setFormData({ ...formData, sports_national_international: e.target.value })}\n                rows={1}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.sports_national_international}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"sports_notable_athlete\">Notable Athlete</Label>\n            {isEditing ? (\n              <Input\n                id=\"sports_notable_athlete\"\n                value={formData.sports_notable_athlete}\n                onChange={(e) => setFormData({ ...formData, sports_notable_athlete: e.target.value })}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.sports_notable_athlete}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Users className=\"h-5 w-5 text-teal-600\" />\n            Alumni Highlights\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"alumni_distinguished\">Distinguished Network</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"alumni_distinguished\"\n                value={formData.alumni_distinguished}\n                onChange={(e) => setFormData({ ...formData, alumni_distinguished: e.target.value })}\n                rows={1}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.alumni_distinguished}</p>\n            )}\n          </div>\n          \n          <div className=\"space-y-3\">\n            <Label>Notable Alumni</Label>\n            <div className=\"grid grid-cols-1 gap-3\">\n              <div>\n                <Label htmlFor=\"alumni_judiciary_1\" className=\"text-xs text-gray-600\">Judiciary 1</Label>\n                {isEditing ? (\n                  <Input\n                    id=\"alumni_judiciary_1\"\n                    value={formData.alumni_judiciary_1}\n                    onChange={(e) => setFormData({ ...formData, alumni_judiciary_1: e.target.value })}\n                    className=\"mt-1\"\n                  />\n                ) : (\n                  <p className=\"text-sm text-gray-700 mt-1\">{formData.alumni_judiciary_1}</p>\n                )}\n              </div>\n              <div>\n                <Label htmlFor=\"alumni_judiciary_2\" className=\"text-xs text-gray-600\">Judiciary 2</Label>\n                {isEditing ? (\n                  <Input\n                    id=\"alumni_judiciary_2\"\n                    value={formData.alumni_judiciary_2}\n                    onChange={(e) => setFormData({ ...formData, alumni_judiciary_2: e.target.value })}\n                    className=\"mt-1\"\n                  />\n                ) : (\n                  <p className=\"text-sm text-gray-700 mt-1\">{formData.alumni_judiciary_2}</p>\n                )}\n              </div>\n              <div>\n                <Label htmlFor=\"alumni_politics\" className=\"text-xs text-gray-600\">Politics</Label>\n                {isEditing ? (\n                  <Input\n                    id=\"alumni_politics\"\n                    value={formData.alumni_politics}\n                    onChange={(e) => setFormData({ ...formData, alumni_politics: e.target.value })}\n                    className=\"mt-1\"\n                  />\n                ) : (\n                  <p className=\"text-sm text-gray-700 mt-1\">{formData.alumni_politics}</p>\n                )}\n              </div>\n              <div>\n                <Label htmlFor=\"alumni_police\" className=\"text-xs text-gray-600\">Police</Label>\n                {isEditing ? (\n                  <Input\n                    id=\"alumni_police\"\n                    value={formData.alumni_police}\n                    onChange={(e) => setFormData({ ...formData, alumni_police: e.target.value })}\n                    className=\"mt-1\"\n                  />\n                ) : (\n                  <p className=\"text-sm text-gray-700 mt-1\">{formData.alumni_police}</p>\n                )}\n              </div>\n              <div>\n                <Label htmlFor=\"alumni_defence\" className=\"text-xs text-gray-600\">Defence</Label>\n                {isEditing ? (\n                  <Input\n                    id=\"alumni_defence\"\n                    value={formData.alumni_defence}\n                    onChange={(e) => setFormData({ ...formData, alumni_defence: e.target.value })}\n                    className=\"mt-1\"\n                  />\n                ) : (\n                  <p className=\"text-sm text-gray-700 mt-1\">{formData.alumni_defence}</p>\n                )}\n              </div>\n              <div>\n                <Label htmlFor=\"alumni_sports\" className=\"text-xs text-gray-600\">Sports</Label>\n                {isEditing ? (\n                  <Input\n                    id=\"alumni_sports\"\n                    value={formData.alumni_sports}\n                    onChange={(e) => setFormData({ ...formData, alumni_sports: e.target.value })}\n                    className=\"mt-1\"\n                  />\n                ) : (\n                  <p className=\"text-sm text-gray-700 mt-1\">{formData.alumni_sports}</p>\n                )}\n              </div>\n            </div>\n          </div>\n\n          <div>\n            <Label htmlFor=\"alumni_association\">Alumni Association</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"alumni_association\"\n                value={formData.alumni_association}\n                onChange={(e) => setFormData({ ...formData, alumni_association: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.alumni_association}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Star className=\"h-5 w-5 text-amber-600\" />\n            Additional Information\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"ugc_status\">UGC Status</Label>\n              {isEditing ? (\n                <Input\n                  id=\"ugc_status\"\n                  value={formData.ugc_status}\n                  onChange={(e) => setFormData({ ...formData, ugc_status: e.target.value })}\n                  className=\"mt-1\"\n                />\n              ) : (\n                <p className=\"text-sm text-gray-700 mt-1\">{formData.ugc_status}</p>\n              )}\n            </div>\n            <div>\n              <Label htmlFor=\"last_verified\">Last Verified</Label>\n              {isEditing ? (\n                <Input\n                  id=\"last_verified\"\n                  value={formData.last_verified}\n                  onChange={(e) => setFormData({ ...formData, last_verified: e.target.value })}\n                  className=\"mt-1\"\n                />\n              ) : (\n                <p className=\"text-sm text-gray-700 mt-1\">{formData.last_verified}</p>\n              )}\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {achievementsData?.updated_at && (\n        <div className=\"text-xs text-gray-500 text-right\">\n          Last updated: {new Date(achievementsData.updated_at).toLocaleString()}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":30808},"client/src/components/admin/general-info-sections/StudentSupportServicesSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { Edit, Save, Users, Phone, Award, Shield, UserCheck, Heart, HandHeart, Flag, Activity } from \"lucide-react\";\n\ninterface StudentSupportServicesSectionProps {\n  data: any;\n  onUpdate: () => void;\n}\n\nexport function StudentSupportServicesSection({ data, onUpdate }: StudentSupportServicesSectionProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const token = localStorage.getItem(\"adminToken\");\n  \n  const [formData, setFormData] = useState({\n    overview: \"RKSD College runs multiple student support structures â€” Career Guidance & Counseling Cell, Grievance Redressal Cell, Anti-Ragging Committee, Women Cell / Internal Complaints Committee (ICC), SC/ST / Minority Cell, Placement Cell, Alumni Association, plus extension units like NSS / NCC â€” all aimed at student welfare, protection and employability.\",\n    \n    career_guidance_purpose: \"Career planning, pre-placement training, soft-skills workshops, one-to-one counselling and employer connects.\",\n    career_guidance_activities: \"Workshops, panel discussions, placement drives (e.g., collaboration with NIIT for Axis Bank drive, May 31, 2025), mock interviews, resume clinics and campus recruitment facilitation.\",\n    career_guidance_access: \"Attend notices issued on college website/noticeboard or approach the Career Cell office during working hours. College maintains a record of placement events on its 'Placement' tag.\",\n    \n    placement_cell_role: \"Liaisons with industry, organises placement drives, skill-development tie-ups and tracks placement outcomes.\",\n    placement_cell_activity: \"Campus placement drives recorded (local employers, banks); historical placement rate data on public portals shows modest placement activity â€” some reports list placement rate â‰ˆ20% and packages in local ranges (example portal data). For authoritative figures always use Placement Cell's yearly report.\",\n    \n    grievance_mandate: \"Address student complaints (academic, infrastructure, harassment, financial) through an institutional grievance policy; grievances are to be submitted to the Principal/Cell and addressed per the policy timeline. Process and policy document available on college website.\",\n    \n    anti_ragging_mandate: \"Ensure ragging-free campus in line with UGC regulations. Committee members and convener names are published in staff committees documents. Complaints are handled immediately and per UGC norms.\",\n    \n    women_cell_mandate: \"Prevent and redress sexual harassment; gender-sensitivity programs; women's empowerment activities. ICC / Women Cell constituted and documented in Gender Audit and related files. Students can approach ICC / Women Cell as per the internal complaint mechanism.\",\n    \n    scst_minority_mandate: \"Monitor implementation of welfare schemes, scholarship facilitation, academic support and special grievance redressal for reserved categories. Committees and nodal officers are listed in the Staff-Committees PDF.\",\n    \n    alumni_activity: \"Active alumni network â€” regular alumni meets (e.g., Alumni Meet 19 Oct 2024) and contributions to college activities, mentorship and donor scholarships. Alumni committee exists and annual events are posted on the college site.\",\n    \n    nss_ncc_mandate: \"Extension activities (tree plantation, road safety), National Service Scheme (NSS), NCC and cultural clubs which support personality development and community outreach; details appear in AQAR / Yearly Status Reports.\",\n    \n    access_process_career: \"Follow notices on website â†’ register with Career Cell â†’ attend drives/trainings.\",\n    access_process_grievance: \"Submit written complaint to the Grievance Cell/Principal as per the Grievance Policy PDF.\",\n    access_process_anti_ragging: \"Report immediately to Anti-Ragging Committee (names/contacts on Staff-Committees PDF).\",\n    access_process_women: \"Approach ICC convener or Women Cell members â€” Gender Audit and ICC guidelines available on site.\",\n    access_process_scst: \"Contact the SC/ST/Minority Nodal Officer listed in Staff Committees PDF.\",\n  });\n\n  const [isEditing, setIsEditing] = useState(false);\n\n  const { data: studentSupportData } = useQuery({\n    queryKey: [\"/api/admin/general-info/student-support-services\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info/student-support-services\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (studentSupportData) {\n      setFormData({\n        overview: studentSupportData.overview || formData.overview,\n        career_guidance_purpose: studentSupportData.career_guidance_purpose || formData.career_guidance_purpose,\n        career_guidance_activities: studentSupportData.career_guidance_activities || formData.career_guidance_activities,\n        career_guidance_access: studentSupportData.career_guidance_access || formData.career_guidance_access,\n        placement_cell_role: studentSupportData.placement_cell_role || formData.placement_cell_role,\n        placement_cell_activity: studentSupportData.placement_cell_activity || formData.placement_cell_activity,\n        grievance_mandate: studentSupportData.grievance_mandate || formData.grievance_mandate,\n        anti_ragging_mandate: studentSupportData.anti_ragging_mandate || formData.anti_ragging_mandate,\n        women_cell_mandate: studentSupportData.women_cell_mandate || formData.women_cell_mandate,\n        scst_minority_mandate: studentSupportData.scst_minority_mandate || formData.scst_minority_mandate,\n        alumni_activity: studentSupportData.alumni_activity || formData.alumni_activity,\n        nss_ncc_mandate: studentSupportData.nss_ncc_mandate || formData.nss_ncc_mandate,\n        access_process_career: studentSupportData.access_process_career || formData.access_process_career,\n        access_process_grievance: studentSupportData.access_process_grievance || formData.access_process_grievance,\n        access_process_anti_ragging: studentSupportData.access_process_anti_ragging || formData.access_process_anti_ragging,\n        access_process_women: studentSupportData.access_process_women || formData.access_process_women,\n        access_process_scst: studentSupportData.access_process_scst || formData.access_process_scst,\n      });\n    }\n  }, [studentSupportData]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (data: typeof formData) => {\n      const res = await fetch(\"/api/admin/general-info/student-support-services\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"Student Support & Services information updated successfully\" });\n      setIsEditing(false);\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/general-info/student-support-services\"] });\n      onUpdate();\n    },\n    onError: (error: any) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate(formData);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Student Support & Services</h2>\n          <p className=\"text-sm text-gray-600\">Manage student welfare, counseling, and support services</p>\n        </div>\n        <Button\n          onClick={() => (isEditing ? handleSave() : setIsEditing(true))}\n          disabled={saveMutation.isPending}\n        >\n          {isEditing ? (\n            <>\n              <Save className=\"h-4 w-4 mr-2\" />\n              {saveMutation.isPending ? \"Saving...\" : \"Save Changes\"}\n            </>\n          ) : (\n            <>\n              <Edit className=\"h-4 w-4 mr-2\" />\n              Edit\n            </>\n          )}\n        </Button>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Users className=\"h-5 w-5 text-blue-600\" />\n            Overview\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div>\n            <Label htmlFor=\"overview\">Overview</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"overview\"\n                value={formData.overview}\n                onChange={(e) => setFormData({ ...formData, overview: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.overview}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Award className=\"h-5 w-5 text-purple-600\" />\n            Career Guidance & Counseling Cell\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"career_guidance_purpose\">Purpose</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"career_guidance_purpose\"\n                value={formData.career_guidance_purpose}\n                onChange={(e) => setFormData({ ...formData, career_guidance_purpose: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.career_guidance_purpose}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"career_guidance_activities\">Activities</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"career_guidance_activities\"\n                value={formData.career_guidance_activities}\n                onChange={(e) => setFormData({ ...formData, career_guidance_activities: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.career_guidance_activities}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"career_guidance_access\">How Students Apply</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"career_guidance_access\"\n                value={formData.career_guidance_access}\n                onChange={(e) => setFormData({ ...formData, career_guidance_access: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.career_guidance_access}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Activity className=\"h-5 w-5 text-green-600\" />\n            Placement Cell\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"placement_cell_role\">Role</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"placement_cell_role\"\n                value={formData.placement_cell_role}\n                onChange={(e) => setFormData({ ...formData, placement_cell_role: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.placement_cell_role}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"placement_cell_activity\">Recent Activity & Metrics</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"placement_cell_activity\"\n                value={formData.placement_cell_activity}\n                onChange={(e) => setFormData({ ...formData, placement_cell_activity: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.placement_cell_activity}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Phone className=\"h-5 w-5 text-orange-600\" />\n            Grievance Redressal Cell\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div>\n            <Label htmlFor=\"grievance_mandate\">Mandate</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"grievance_mandate\"\n                value={formData.grievance_mandate}\n                onChange={(e) => setFormData({ ...formData, grievance_mandate: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.grievance_mandate}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Shield className=\"h-5 w-5 text-red-600\" />\n            Anti-Ragging Committee & Squad\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div>\n            <Label htmlFor=\"anti_ragging_mandate\">Mandate</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"anti_ragging_mandate\"\n                value={formData.anti_ragging_mandate}\n                onChange={(e) => setFormData({ ...formData, anti_ragging_mandate: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.anti_ragging_mandate}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Heart className=\"h-5 w-5 text-pink-600\" />\n            Women Cell / ICC & Gender Sensitization\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div>\n            <Label htmlFor=\"women_cell_mandate\">Mandate</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"women_cell_mandate\"\n                value={formData.women_cell_mandate}\n                onChange={(e) => setFormData({ ...formData, women_cell_mandate: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.women_cell_mandate}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <UserCheck className=\"h-5 w-5 text-indigo-600\" />\n            SC/ST / Minority / Other Welfare Cells\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div>\n            <Label htmlFor=\"scst_minority_mandate\">Mandate</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"scst_minority_mandate\"\n                value={formData.scst_minority_mandate}\n                onChange={(e) => setFormData({ ...formData, scst_minority_mandate: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.scst_minority_mandate}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <HandHeart className=\"h-5 w-5 text-teal-600\" />\n            Alumni Association\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div>\n            <Label htmlFor=\"alumni_activity\">Activity</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"alumni_activity\"\n                value={formData.alumni_activity}\n                onChange={(e) => setFormData({ ...formData, alumni_activity: e.target.value })}\n                rows={2}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.alumni_activity}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Flag className=\"h-5 w-5 text-amber-600\" />\n            NSS / NCC / Student Clubs & Extra-Curricular Support\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div>\n            <Label htmlFor=\"nss_ncc_mandate\">Mandate</Label>\n            {isEditing ? (\n              <Textarea\n                id=\"nss_ncc_mandate\"\n                value={formData.nss_ncc_mandate}\n                onChange={(e) => setFormData({ ...formData, nss_ncc_mandate: e.target.value })}\n                rows={3}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.nss_ncc_mandate}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Phone className=\"h-5 w-5 text-blue-600\" />\n            How to Access / File Requests\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"access_process_career\">Career/Placement</Label>\n            {isEditing ? (\n              <Input\n                id=\"access_process_career\"\n                value={formData.access_process_career}\n                onChange={(e) => setFormData({ ...formData, access_process_career: e.target.value })}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.access_process_career}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"access_process_grievance\">Grievance</Label>\n            {isEditing ? (\n              <Input\n                id=\"access_process_grievance\"\n                value={formData.access_process_grievance}\n                onChange={(e) => setFormData({ ...formData, access_process_grievance: e.target.value })}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.access_process_grievance}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"access_process_anti_ragging\">Anti-Ragging</Label>\n            {isEditing ? (\n              <Input\n                id=\"access_process_anti_ragging\"\n                value={formData.access_process_anti_ragging}\n                onChange={(e) => setFormData({ ...formData, access_process_anti_ragging: e.target.value })}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.access_process_anti_ragging}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"access_process_women\">Women/ICC</Label>\n            {isEditing ? (\n              <Input\n                id=\"access_process_women\"\n                value={formData.access_process_women}\n                onChange={(e) => setFormData({ ...formData, access_process_women: e.target.value })}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.access_process_women}</p>\n            )}\n          </div>\n          <div>\n            <Label htmlFor=\"access_process_scst\">SC/ST/Minority Support</Label>\n            {isEditing ? (\n              <Input\n                id=\"access_process_scst\"\n                value={formData.access_process_scst}\n                onChange={(e) => setFormData({ ...formData, access_process_scst: e.target.value })}\n                className=\"mt-1\"\n              />\n            ) : (\n              <p className=\"text-sm text-gray-700 mt-1\">{formData.access_process_scst}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {studentSupportData?.updated_at && (\n        <div className=\"text-xs text-gray-500 text-right\">\n          Last updated: {new Date(studentSupportData.updated_at).toLocaleString()}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":21057},"client/src/components/admin/general-info-sections/MiscellaneousInfoSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { Edit, Save, Phone, Mail, MapPin, Calendar, ShirtIcon, MessageSquare, Package, Plus, Trash2 } from \"lucide-react\";\n\ninterface MiscellaneousInfoSectionProps {\n  data: any;\n  onUpdate: () => void;\n}\n\ninterface EmergencyContact {\n  id: string;\n  type: string;\n  value: string;\n}\n\ninterface HolidayEvent {\n  id: string;\n  name: string;\n  date: string;\n  description: string;\n}\n\nexport function MiscellaneousInfoSection({ data, onUpdate }: MiscellaneousInfoSectionProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const token = localStorage.getItem(\"adminToken\");\n  \n  const [formData, setFormData] = useState({\n    emergency_location: \"Ambala Road, Kaithal â€“ 136027, Haryana\",\n    \n    holiday_description: \"The college follows the academic calendar and holiday list set by Kurukshetra University, Kurukshetra.\",\n    holiday_download_info: \"Students can download past academic calendars from the 'Academic Calendar' section on the college website.\",\n    holiday_current_session: \"The official academic calendar for the current session is available on the Kurukshetra University website.\",\n    \n    dress_code_policy: \"Students are required to wear 'decent clothes' to maintain an academic environment.\",\n    dress_code_details: \"No specific uniform is mandated, but overly casual, revealing, or inappropriate attire is not allowed.\",\n    dress_code_events: \"For formal events and functions, students must dress appropriately as per college guidelines.\",\n    \n    feedback_mechanism: \"The college provides a feedback mechanism for students, alumni, employers, and faculty.\",\n    feedback_submission_process: \"Students can submit suggestions via their department heads, contact the Grievance Cell, or approach the Principal's office directly.\",\n    feedback_reports_access: \"Feedback reports may be accessed on the college website.\",\n    \n    lost_found_description: \"No dedicated Lost & Found desk is mentioned online.\",\n    lost_found_contact_info: \"Students who lose or find items should contact college administration or campus security personnel.\",\n    lost_found_announcements: \"Announcements regarding found items are typically posted on student notice boards.\",\n  });\n\n  const [emergencyContacts, setEmergencyContacts] = useState<EmergencyContact[]>([\n    { id: \"1\", type: \"College Phone Number\", value: \"01746 222368\" },\n    { id: \"2\", type: \"College Email\", value: \"rksdcollegektl@yahoo.com\" },\n    { id: \"3\", type: \"Principal Email\", value: \"principal@rksdcollege.ac.in\" },\n  ]);\n\n  const [holidayEvents, setHolidayEvents] = useState<HolidayEvent[]>([\n    { id: \"1\", name: \"Republic Day\", date: \"26 January 2025\", description: \"National Holiday\" },\n    { id: \"2\", name: \"Independence Day\", date: \"15 August 2025\", description: \"National Holiday\" },\n  ]);\n\n  const [newContact, setNewContact] = useState({ type: \"\", value: \"\" });\n  const [newHoliday, setNewHoliday] = useState({ name: \"\", date: \"\", description: \"\" });\n  const [isEditing, setIsEditing] = useState(false);\n\n  const { data: miscInfoData } = useQuery({\n    queryKey: [\"/api/admin/general-info/miscellaneous\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/general-info/miscellaneous\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (miscInfoData && Object.keys(miscInfoData).length > 0) {\n      setFormData({\n        emergency_location: miscInfoData.emergency_location || formData.emergency_location,\n        holiday_description: miscInfoData.holiday_description || formData.holiday_description,\n        holiday_download_info: miscInfoData.holiday_download_info || formData.holiday_download_info,\n        holiday_current_session: miscInfoData.holiday_current_session || formData.holiday_current_session,\n        dress_code_policy: miscInfoData.dress_code_policy || formData.dress_code_policy,\n        dress_code_details: miscInfoData.dress_code_details || formData.dress_code_details,\n        dress_code_events: miscInfoData.dress_code_events || formData.dress_code_events,\n        feedback_mechanism: miscInfoData.feedback_mechanism || formData.feedback_mechanism,\n        feedback_submission_process: miscInfoData.feedback_submission_process || formData.feedback_submission_process,\n        feedback_reports_access: miscInfoData.feedback_reports_access || formData.feedback_reports_access,\n        lost_found_description: miscInfoData.lost_found_description || formData.lost_found_description,\n        lost_found_contact_info: miscInfoData.lost_found_contact_info || formData.lost_found_contact_info,\n        lost_found_announcements: miscInfoData.lost_found_announcements || formData.lost_found_announcements,\n      });\n\n      if (miscInfoData.emergency_contacts && miscInfoData.emergency_contacts.length > 0) {\n        setEmergencyContacts(miscInfoData.emergency_contacts);\n      }\n\n      if (miscInfoData.holiday_events && miscInfoData.holiday_events.length > 0) {\n        setHolidayEvents(miscInfoData.holiday_events);\n      }\n    }\n  }, [miscInfoData]);\n\n  const saveMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(\"/api/admin/general-info/miscellaneous\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Success\", description: \"Miscellaneous information updated successfully\" });\n      setIsEditing(false);\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/general-info/miscellaneous\"] });\n      onUpdate();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate({\n      ...formData,\n      emergency_contacts: emergencyContacts,\n      holiday_events: holidayEvents,\n    });\n  };\n\n  const addEmergencyContact = () => {\n    if (newContact.type.trim() && newContact.value.trim()) {\n      setEmergencyContacts([...emergencyContacts, { \n        id: Date.now().toString(), \n        type: newContact.type, \n        value: newContact.value \n      }]);\n      setNewContact({ type: \"\", value: \"\" });\n    }\n  };\n\n  const removeEmergencyContact = (id: string) => {\n    setEmergencyContacts(emergencyContacts.filter(c => c.id !== id));\n  };\n\n  const updateEmergencyContact = (id: string, field: keyof EmergencyContact, value: string) => {\n    setEmergencyContacts(emergencyContacts.map(c => \n      c.id === id ? { ...c, [field]: value } : c\n    ));\n  };\n\n  const addHolidayEvent = () => {\n    if (newHoliday.name.trim() && newHoliday.date.trim()) {\n      setHolidayEvents([...holidayEvents, { \n        id: Date.now().toString(), \n        name: newHoliday.name, \n        date: newHoliday.date,\n        description: newHoliday.description\n      }]);\n      setNewHoliday({ name: \"\", date: \"\", description: \"\" });\n    }\n  };\n\n  const removeHolidayEvent = (id: string) => {\n    setHolidayEvents(holidayEvents.filter(h => h.id !== id));\n  };\n\n  const updateHolidayEvent = (id: string, field: keyof HolidayEvent, value: string) => {\n    setHolidayEvents(holidayEvents.map(h => \n      h.id === id ? { ...h, [field]: value } : h\n    ));\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Other / Miscellaneous Information</h2>\n          <p className=\"text-sm text-gray-600\">Manage emergency contacts, calendar, dress code, feedback and lost & found information</p>\n        </div>\n        <Button\n          onClick={() => (isEditing ? handleSave() : setIsEditing(true))}\n          disabled={saveMutation.isPending}\n        >\n          {isEditing ? (\n            <>\n              <Save className=\"h-4 w-4 mr-2\" />\n              {saveMutation.isPending ? \"Saving...\" : \"Save Changes\"}\n            </>\n          ) : (\n            <>\n              <Edit className=\"h-4 w-4 mr-2\" />\n              Edit\n            </>\n          )}\n        </Button>\n      </div>\n\n      {/* Emergency Contacts Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Phone className=\"h-5 w-5 text-red-600\" />\n            Emergency Contacts\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"emergency_location\">College Location</Label>\n            <Textarea\n              id=\"emergency_location\"\n              value={formData.emergency_location}\n              onChange={(e) => setFormData({ ...formData, emergency_location: e.target.value })}\n              disabled={!isEditing}\n              rows={2}\n              placeholder=\"Ambala Road, Kaithal â€“ 136027, Haryana\"\n            />\n          </div>\n\n          <div className=\"space-y-3\">\n            <Label>Contact Details</Label>\n            {emergencyContacts.map((contact) => (\n              <div key={contact.id} className=\"flex gap-2 items-start p-3 border rounded-lg\">\n                <div className=\"flex-1 space-y-2\">\n                  <Input\n                    value={contact.type}\n                    onChange={(e) => updateEmergencyContact(contact.id, \"type\", e.target.value)}\n                    disabled={!isEditing}\n                    placeholder=\"Contact Type (e.g., College Phone)\"\n                  />\n                  <Input\n                    value={contact.value}\n                    onChange={(e) => updateEmergencyContact(contact.id, \"value\", e.target.value)}\n                    disabled={!isEditing}\n                    placeholder=\"Contact Value\"\n                  />\n                </div>\n                {isEditing && (\n                  <Button\n                    variant=\"destructive\"\n                    size=\"icon\"\n                    onClick={() => removeEmergencyContact(contact.id)}\n                  >\n                    <Trash2 className=\"h-4 w-4\" />\n                  </Button>\n                )}\n              </div>\n            ))}\n\n            {isEditing && (\n              <div className=\"flex gap-2 items-start p-3 border-2 border-dashed rounded-lg\">\n                <div className=\"flex-1 space-y-2\">\n                  <Input\n                    value={newContact.type}\n                    onChange={(e) => setNewContact({ ...newContact, type: e.target.value })}\n                    placeholder=\"Contact Type\"\n                  />\n                  <Input\n                    value={newContact.value}\n                    onChange={(e) => setNewContact({ ...newContact, value: e.target.value })}\n                    placeholder=\"Contact Value\"\n                  />\n                </div>\n                <Button onClick={addEmergencyContact} size=\"icon\">\n                  <Plus className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Holiday List / Academic Calendar Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Calendar className=\"h-5 w-5 text-blue-600\" />\n            Holiday List / Academic Calendar\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"holiday_description\">Calendar Overview</Label>\n            <Textarea\n              id=\"holiday_description\"\n              value={formData.holiday_description}\n              onChange={(e) => setFormData({ ...formData, holiday_description: e.target.value })}\n              disabled={!isEditing}\n              rows={2}\n            />\n          </div>\n          \n          <div>\n            <Label htmlFor=\"holiday_download_info\">Past Calendars Download Information</Label>\n            <Textarea\n              id=\"holiday_download_info\"\n              value={formData.holiday_download_info}\n              onChange={(e) => setFormData({ ...formData, holiday_download_info: e.target.value })}\n              disabled={!isEditing}\n              rows={2}\n            />\n          </div>\n          \n          <div>\n            <Label htmlFor=\"holiday_current_session\">Current Session Calendar</Label>\n            <Textarea\n              id=\"holiday_current_session\"\n              value={formData.holiday_current_session}\n              onChange={(e) => setFormData({ ...formData, holiday_current_session: e.target.value })}\n              disabled={!isEditing}\n              rows={2}\n            />\n          </div>\n\n          <div className=\"space-y-3\">\n            <Label>Holiday & Important Events</Label>\n            {holidayEvents.map((event) => (\n              <div key={event.id} className=\"flex gap-2 items-start p-3 border rounded-lg\">\n                <div className=\"flex-1 space-y-2\">\n                  <Input\n                    value={event.name}\n                    onChange={(e) => updateHolidayEvent(event.id, \"name\", e.target.value)}\n                    disabled={!isEditing}\n                    placeholder=\"Event Name\"\n                  />\n                  <Input\n                    value={event.date}\n                    onChange={(e) => updateHolidayEvent(event.id, \"date\", e.target.value)}\n                    disabled={!isEditing}\n                    placeholder=\"Date\"\n                  />\n                  <Input\n                    value={event.description}\n                    onChange={(e) => updateHolidayEvent(event.id, \"description\", e.target.value)}\n                    disabled={!isEditing}\n                    placeholder=\"Description (optional)\"\n                  />\n                </div>\n                {isEditing && (\n                  <Button\n                    variant=\"destructive\"\n                    size=\"icon\"\n                    onClick={() => removeHolidayEvent(event.id)}\n                  >\n                    <Trash2 className=\"h-4 w-4\" />\n                  </Button>\n                )}\n              </div>\n            ))}\n\n            {isEditing && (\n              <div className=\"flex gap-2 items-start p-3 border-2 border-dashed rounded-lg\">\n                <div className=\"flex-1 space-y-2\">\n                  <Input\n                    value={newHoliday.name}\n                    onChange={(e) => setNewHoliday({ ...newHoliday, name: e.target.value })}\n                    placeholder=\"Event Name\"\n                  />\n                  <Input\n                    value={newHoliday.date}\n                    onChange={(e) => setNewHoliday({ ...newHoliday, date: e.target.value })}\n                    placeholder=\"Date\"\n                  />\n                  <Input\n                    value={newHoliday.description}\n                    onChange={(e) => setNewHoliday({ ...newHoliday, description: e.target.value })}\n                    placeholder=\"Description (optional)\"\n                  />\n                </div>\n                <Button onClick={addHolidayEvent} size=\"icon\">\n                  <Plus className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Dress Code Info Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <ShirtIcon className=\"h-5 w-5 text-purple-600\" />\n            Dress Code Information\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"dress_code_policy\">Dress Code Policy</Label>\n            <Textarea\n              id=\"dress_code_policy\"\n              value={formData.dress_code_policy}\n              onChange={(e) => setFormData({ ...formData, dress_code_policy: e.target.value })}\n              disabled={!isEditing}\n              rows={2}\n            />\n          </div>\n          \n          <div>\n            <Label htmlFor=\"dress_code_details\">Dress Code Details</Label>\n            <Textarea\n              id=\"dress_code_details\"\n              value={formData.dress_code_details}\n              onChange={(e) => setFormData({ ...formData, dress_code_details: e.target.value })}\n              disabled={!isEditing}\n              rows={2}\n            />\n          </div>\n          \n          <div>\n            <Label htmlFor=\"dress_code_events\">Formal Events Requirements</Label>\n            <Textarea\n              id=\"dress_code_events\"\n              value={formData.dress_code_events}\n              onChange={(e) => setFormData({ ...formData, dress_code_events: e.target.value })}\n              disabled={!isEditing}\n              rows={2}\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Feedback / Suggestion Form Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <MessageSquare className=\"h-5 w-5 text-green-600\" />\n            Feedback / Suggestion Form\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"feedback_mechanism\">Feedback Mechanism</Label>\n            <Textarea\n              id=\"feedback_mechanism\"\n              value={formData.feedback_mechanism}\n              onChange={(e) => setFormData({ ...formData, feedback_mechanism: e.target.value })}\n              disabled={!isEditing}\n              rows={2}\n            />\n          </div>\n          \n          <div>\n            <Label htmlFor=\"feedback_submission_process\">Submission Process</Label>\n            <Textarea\n              id=\"feedback_submission_process\"\n              value={formData.feedback_submission_process}\n              onChange={(e) => setFormData({ ...formData, feedback_submission_process: e.target.value })}\n              disabled={!isEditing}\n              rows={3}\n            />\n          </div>\n          \n          <div>\n            <Label htmlFor=\"feedback_reports_access\">Feedback Reports Access</Label>\n            <Textarea\n              id=\"feedback_reports_access\"\n              value={formData.feedback_reports_access}\n              onChange={(e) => setFormData({ ...formData, feedback_reports_access: e.target.value })}\n              disabled={!isEditing}\n              rows={2}\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Lost & Found Desk Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Package className=\"h-5 w-5 text-orange-600\" />\n            Lost & Found Desk\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"lost_found_description\">Lost & Found Information</Label>\n            <Textarea\n              id=\"lost_found_description\"\n              value={formData.lost_found_description}\n              onChange={(e) => setFormData({ ...formData, lost_found_description: e.target.value })}\n              disabled={!isEditing}\n              rows={2}\n            />\n          </div>\n          \n          <div>\n            <Label htmlFor=\"lost_found_contact_info\">Contact Information</Label>\n            <Textarea\n              id=\"lost_found_contact_info\"\n              value={formData.lost_found_contact_info}\n              onChange={(e) => setFormData({ ...formData, lost_found_contact_info: e.target.value })}\n              disabled={!isEditing}\n              rows={3}\n            />\n          </div>\n          \n          <div>\n            <Label htmlFor=\"lost_found_announcements\">Announcements</Label>\n            <Textarea\n              id=\"lost_found_announcements\"\n              value={formData.lost_found_announcements}\n              onChange={(e) => setFormData({ ...formData, lost_found_announcements: e.target.value })}\n              disabled={!isEditing}\n              rows={2}\n            />\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":20602},"COMPLETE_UPDATE_SUMMARY.md":{"content":"# âœ… Complete Update Summary - Admin Panel General Information\n\n## ðŸŽ‰ Kya-Kya Update Kiya Gaya\n\n### 1. **Miscellaneous Information Section** \n**Location**: Admin Panel â†’ General Information â†’ \"Other / Miscellaneous Information\"\n\n#### âž• Add New Functionality Added:\n- **Emergency Contacts**: Ab aap multiple contacts add kar sakte ho\n  - Type (e.g., \"College Phone\", \"Principal Email\")\n  - Value (actual contact)\n  - Add/Delete buttons available during Edit mode\n\n- **Holiday & Important Events**: Ab aap holidays/events add kar sakte ho\n  - Event Name\n  - Date\n  - Description (optional)\n  - Add/Delete buttons available during Edit mode\n\n#### ðŸ“ Text Fields (Direct Edit):\n- College Location\n- Holiday Description\n- Dress Code Policy & Details\n- Feedback Mechanism & Submission Process\n- Lost & Found Information\n\n### 2. **Backend API Endpoints Created**\n\nSabhi sections ke liye proper endpoints add kiye gaye:\n\nâœ… `/api/admin/general-info/miscellaneous` (GET/POST)\nâœ… `/api/admin/general-info/rules-regulations` (GET/POST)\nâœ… `/api/admin/general-info/campus-environment` (GET/POST)\n\n### 3. **Data Persistence Fix**\n\nSabhi sections mein proper save/load logic hai:\n- Data JSON format mein save hota hai\n- Reload karne par data properly load hota hai\n- Arrays/Lists maintain ho jati hain\n\n## ðŸ”§ How to Use (Step by Step)\n\n### Adding New Items:\n\n1. **Login** to Admin Panel\n2. Click **\"General Information\"** tab\n3. Find **\"Other / Miscellaneous Information\"** card (orange icon)\n4. Click to open the section\n5. Click **\"Edit\"** button (top right)\n6. Now you can:\n   - Edit existing text fields\n   - **Add new Emergency Contacts**: Fill the form in dashed box â†’ Click âž• button\n   - **Add new Holiday Events**: Fill the form in dashed box â†’ Click âž• button\n   - **Delete items**: Click ðŸ—‘ï¸ button next to any item\n7. Click **\"Save Changes\"** button\n8. Data will save aur persist hoga!\n\n### Other Sections with Add Functionality:\n\n#### Administration / Management:\n- âž• Add Committees\n- âž• Add Department Heads\n\n#### Admission & Eligibility:\n- âž• Add Admission Steps\n- âž• Add Eligibility Criteria\n- âž• Add Required Documents\n- âž• Add Fee Structures\n- âž• Add Admission Timeline\n\n#### Scholarships & Financial Aid:\n- âž• Add Donor Scholarships\n- âž• Add Government Scholarships\n- âž• Add Application Steps\n\n#### Student Support & Services:\n- âž• Add Career Services\n- âž• Add Student Activities\n\n#### Achievements & Recognitions:\n- âž• Add College Awards\n- âž• Add Faculty Achievements\n- âž• Add Student Achievements\n- âž• Add Notable Alumni\n\n## ðŸ› Bug Fixes\n\n### Save Data Persistence Issue:\n**Problem**: Data save karne ke baad gayab ho jata tha when section reopen karte the\n\n**Solution**:\n1. Backend properly JSON parse/stringify kar raha hai\n2. Frontend properly arrays load kar raha hai\n3. useEffect dependency array correct hai\n4. Default values fallback properly set hai\n\n### Verification:\n- All sections ab properly save kar rahe hain\n- Data reload par persist ho raha hai\n- Arrays maintain ho rahi hain\n\n## ðŸ“Š Technical Details\n\n### Data Structure (JSON in Database):\n```json\n{\n  \"emergency_location\": \"Ambala Road, Kaithal...\",\n  \"emergency_contacts\": [\n    {\"id\": \"1\", \"type\": \"College Phone\", \"value\": \"01746 222368\"},\n    {\"id\": \"2\", \"type\": \"College Email\", \"value\": \"rksdcollegektl@yahoo.com\"}\n  ],\n  \"holiday_events\": [\n    {\"id\": \"1\", \"name\": \"Republic Day\", \"date\": \"26 Jan 2025\", \"description\": \"National Holiday\"}\n  ],\n  \"dress_code_policy\": \"Students are required...\",\n  ...\n}\n```\n\n### Database Storage:\n- Table: `college_settings`\n- Key: `general_info_miscellaneous`\n- Value: JSON (automatically stringified/parsed)\n\n## âœ¨ Key Features:\n\nâœ… **Add/Delete/Edit** functionality in all major sections\nâœ… **Real-time save** - Data turant save hota hai\nâœ… **Data persistence** - Reload karne par data wapas aa jata hai\nâœ… **Array handling** - Lists properly maintain hoti hain\nâœ… **Default values** - Agar data nahi hai to default values show hoti hain\nâœ… **Edit mode toggle** - Edit/View mode easily switch kar sakte ho\nâœ… **Loading states** - Save hote time \"Saving...\" show hota hai\nâœ… **Error handling** - Agar error aaye to toast notification dikhe\nâœ… **Search enabled** - New section searchable hai\n\n## ðŸŽ¯ All 13 General Information Sections:\n\n1. âœ… **Basic Details** - Text fields\n2. âœ… **About / History / Overview** - Text fields + Lists\n3. âœ… **Administration / Management** - âž• Add Committees, Department Heads\n4. âœ… **Admission & Eligibility** - âž• Add Steps, Criteria, Documents, Fees\n5. âœ… **Scholarships & Financial Aid** - âž• Add Scholarships, Steps\n6. âœ… **Facilities & Infrastructure** - Text fields\n7. âœ… **Technical & Digital Resources** - Text fields + Lists\n8. âœ… **Student Support & Services** - âž• Add Services\n9. âœ… **Achievements & Recognitions** - âž• Add Achievements, Alumni\n10. âœ… **Campus & Environment** - Text fields + Lists\n11. âœ… **Rules & Regulations** - Text fields + Attendance Tiers\n12. âœ… **Other / Miscellaneous Information** - âž• Add Contacts, Events (NEW!)\n13. âœ… **Additional Information** - âž• Add Custom Entries\n\n## ðŸš€ Ready to Use!\n\nSab kuch functional hai! Aap ab:\n- Kisi bhi section mein jaake Edit kar sakte ho\n- New items add kar sakte ho\n- Save karke data persist kar sakte ho\n- Reload karne par sab data wapas mil jayega\n\nTest kar ke dekho aur bataiye agar koi issue ho! ðŸŽ‰\n","size_bytes":5413},"IMPLEMENTATION_SUMMARY.md":{"content":"# Other / Miscellaneous Information Section - Implementation Summary\n\n## âœ… Successfully Added to Admin Panel\n\n### What Was Added:\n\n#### 1. **New Admin Section Component**\n   - File: `client/src/components/admin/general-info-sections/MiscellaneousInfoSection.tsx`\n   - Contains 5 major subsections with all fields:\n\n##### ðŸ†˜ Emergency Contacts\n   - College Phone Number: `01746 222368`\n   - College Email: `rksdcollegektl@yahoo.com`\n   - Principal Email: `principal@rksdcollege.ac.in`\n   - College Location: `Ambala Road, Kaithal â€“ 136027, Haryana`\n\n##### ðŸ“… Holiday List / Academic Calendar\n   - Calendar Overview\n   - Past Calendars Download Information\n   - Current Session Calendar\n\n##### ðŸ‘” Dress Code Information\n   - Dress Code Policy\n   - Dress Code Details\n   - Formal Events Requirements\n\n##### ðŸ“ Feedback / Suggestion Form\n   - Feedback Mechanism\n   - Submission Process\n   - Feedback Reports Access\n\n##### ðŸ” Lost & Found Desk\n   - Lost & Found Information\n   - Contact Information\n   - Announcements\n\n### 2. **Backend API Endpoints Created**\n   - GET `/api/admin/general-info/miscellaneous` - Fetch miscellaneous info\n   - POST `/api/admin/general-info/miscellaneous` - Save miscellaneous info\n   \n   **Also Added Missing Endpoints:**\n   - GET/POST `/api/admin/general-info/rules-regulations`\n   - GET/POST `/api/admin/general-info/campus-environment`\n\n### 3. **Database Integration**\n   - Data stored in `college_settings` table\n   - Key: `general_info_miscellaneous`\n   - Automatic real-time updates via Supabase\n\n### 4. **Updated Features**\n   - âœ… Added to General Information section grid\n   - âœ… Icon: Info icon with orange color scheme\n   - âœ… Search functionality enabled\n   - âœ… Edit/Save functionality\n   - âœ… Real-time synchronization\n\n## How to Use:\n\n1. Login to Admin Panel at `/admin`\n2. Click on \"General Information\" tab\n3. Find \"Other / Miscellaneous Information\" card (orange icon)\n4. Click to open and edit all sections\n5. Click \"Edit\" to modify fields\n6. Click \"Save Changes\" to save\n\n## Technical Details:\n\n- **Frontend**: React + TypeScript + shadcn/ui\n- **Backend**: Express.js + Supabase\n- **State Management**: TanStack Query (React Query)\n- **Real-time Updates**: Supabase Realtime subscriptions\n\n## Position in Admin Panel:\nLocated after \"Rules & Regulations\" and before \"Additional Information\" in the General Information section.\n\nAll fields are fully functional and can be edited by the admin!\n","size_bytes":2456},"server/query-analyzer.ts":{"content":"/**\n * Smart Query Analyzer - NLU Module\n * Analyzes user queries to determine what data to fetch from database\n */\n\nexport interface QueryTopics {\n  courses: boolean;\n  staff: boolean;\n  events: boolean;\n  notices: boolean;\n  departments: boolean;\n  fees: boolean;\n  facilities: boolean;\n  admissions: boolean;\n  general: boolean;\n  greeting: boolean;\n}\n\nexport interface QueryAnalysis {\n  topics: QueryTopics;\n  entityMentions: {\n    courseName?: string;\n    staffName?: string;\n    departmentName?: string;\n    dateReference?: string;\n  };\n  needsDetailedInfo: boolean;\n}\n\n/**\n * Analyzes user query and returns what topics/data are relevant\n */\nexport function analyzeQueryTopics(query: string): QueryAnalysis {\n  const lowerQuery = query.toLowerCase();\n  \n  // Initialize all topics as false\n  const topics: QueryTopics = {\n    courses: false,\n    staff: false,\n    events: false,\n    notices: false,\n    departments: false,\n    fees: false,\n    facilities: false,\n    admissions: false,\n    general: false,\n    greeting: false\n  };\n\n  const entityMentions: any = {};\n\n  // Greeting detection\n  const greetingPatterns = ['hello', 'hi', 'namaste', 'namaskar', 'hey', 'good morning', 'good evening', 'hii', 'hiii'];\n  if (greetingPatterns.some(pattern => lowerQuery.includes(pattern)) && lowerQuery.length < 30) {\n    topics.greeting = true;\n    return { topics, entityMentions, needsDetailedInfo: false };\n  }\n\n  // Courses detection\n  const courseKeywords = ['course', 'courses', 'degree', 'ba', 'bsc', 'bcom', 'ma', 'msc', 'mcom', 'bba', 'bca', 'program', 'programme', 'stream', 'subject', 'à¤ªà¤¾à¤ à¥à¤¯à¤•à¥à¤°à¤®', 'à¤•à¥‹à¤°à¥à¤¸'];\n  if (courseKeywords.some(keyword => lowerQuery.includes(keyword))) {\n    topics.courses = true;\n  }\n\n  // Staff detection\n  const staffKeywords = ['teacher', 'professor', 'staff', 'faculty', 'principal', 'hod', 'head', 'lecturer', 'sir', 'madam', 'à¤¶à¤¿à¤•à¥à¤·à¤•', 'à¤Ÿà¥€à¤šà¤°'];\n  if (staffKeywords.some(keyword => lowerQuery.includes(keyword))) {\n    topics.staff = true;\n  }\n\n  // Events detection\n  const eventKeywords = ['event', 'fest', 'festival', 'function', 'celebration', 'program', 'activity', 'competition', 'seminar', 'workshop', 'à¤•à¤¾à¤°à¥à¤¯à¤•à¥à¤°à¤®', 'à¤‡à¤µà¥‡à¤‚à¤Ÿ'];\n  if (eventKeywords.some(keyword => lowerQuery.includes(keyword))) {\n    topics.events = true;\n  }\n\n  // Notices detection\n  const noticeKeywords = ['notice', 'notification', 'announcement', 'update', 'circular', 'à¤¸à¥‚à¤šà¤¨à¤¾', 'à¤¨à¥‹à¤Ÿà¤¿à¤¸'];\n  if (noticeKeywords.some(keyword => lowerQuery.includes(keyword))) {\n    topics.notices = true;\n  }\n\n  // Departments detection\n  const deptKeywords = ['department', 'dept', 'à¤µà¤¿à¤­à¤¾à¤—'];\n  if (deptKeywords.some(keyword => lowerQuery.includes(keyword))) {\n    topics.departments = true;\n  }\n\n  // Fees detection\n  const feeKeywords = ['fee', 'fees', 'cost', 'price', 'charge', 'payment', 'à¤«à¥€à¤¸', 'à¤¶à¥à¤²à¥à¤•'];\n  if (feeKeywords.some(keyword => lowerQuery.includes(keyword))) {\n    topics.fees = true;\n    topics.courses = true; // Fees usually related to courses\n  }\n\n  // Facilities detection\n  const facilityKeywords = ['library', 'lab', 'laboratory', 'canteen', 'hostel', 'bus', 'transport', 'ground', 'playground', 'facility', 'facilities', 'à¤¸à¥à¤µà¤¿à¤§à¤¾'];\n  if (facilityKeywords.some(keyword => lowerQuery.includes(keyword))) {\n    topics.facilities = true;\n  }\n\n  // Admissions detection\n  const admissionKeywords = ['admission', 'apply', 'application', 'registration', 'enroll', 'join', 'à¤ªà¥à¤°à¤µà¥‡à¤¶', 'à¤à¤¡à¤®à¤¿à¤¶à¤¨'];\n  if (admissionKeywords.some(keyword => lowerQuery.includes(keyword))) {\n    topics.admissions = true;\n    topics.courses = true; // Admissions usually need course info\n  }\n\n  // If no specific topic detected, mark as general\n  const hasAnyTopic = Object.entries(topics).some(([key, value]) => key !== 'general' && key !== 'greeting' && value);\n  if (!hasAnyTopic) {\n    topics.general = true;\n  }\n\n  // Determine if detailed info is needed\n  const detailKeywords = ['detail', 'explain', 'tell me about', 'information', 'batao', 'à¤¬à¤¤à¤¾à¤“', 'à¤µà¤¿à¤¸à¥à¤¤à¤¾à¤°'];\n  const needsDetailedInfo = detailKeywords.some(keyword => lowerQuery.includes(keyword)) || lowerQuery.length > 50;\n\n  return {\n    topics,\n    entityMentions,\n    needsDetailedInfo\n  };\n}\n\n/**\n * Get data fetch strategy based on query analysis\n */\nexport function getDataFetchStrategy(analysis: QueryAnalysis): {\n  fetchCourses: boolean;\n  fetchStaff: boolean;\n  fetchEvents: boolean;\n  fetchNotices: boolean;\n  fetchDepartments: boolean;\n  fetchSettings: boolean;\n  fetchDepartmentData: boolean;\n  coursesLimit?: number;\n  staffLimit?: number;\n  eventsLimit?: number;\n  noticesLimit?: number;\n} {\n  const strategy = {\n    fetchCourses: false,\n    fetchStaff: false,\n    fetchEvents: false,\n    fetchNotices: false,\n    fetchDepartments: false,\n    fetchSettings: false,\n    fetchDepartmentData: false\n  };\n\n  // For greetings, fetch minimal data\n  if (analysis.topics.greeting) {\n    return { ...strategy, fetchSettings: true };\n  }\n\n  // For general queries, fetch basic info\n  if (analysis.topics.general) {\n    return {\n      ...strategy,\n      fetchCourses: true,\n      fetchDepartments: true,\n      fetchSettings: true,\n      coursesLimit: 50,  // Fetch more courses for general queries\n    };\n  }\n\n  // Fetch based on detected topics\n  if (analysis.topics.courses || analysis.topics.fees || analysis.topics.admissions) {\n    strategy.fetchCourses = true;\n  }\n\n  if (analysis.topics.staff) {\n    strategy.fetchStaff = true;\n  }\n\n  if (analysis.topics.events) {\n    strategy.fetchEvents = true;\n  }\n\n  if (analysis.topics.notices) {\n    strategy.fetchNotices = true;\n  }\n\n  if (analysis.topics.departments) {\n    strategy.fetchDepartments = true;\n    strategy.fetchDepartmentData = true;\n  }\n\n  if (analysis.topics.facilities) {\n    strategy.fetchSettings = true;\n    strategy.fetchDepartmentData = true;\n  }\n\n  // Set appropriate limits based on query detail level\n  // OPTIMIZED: Fetch ALL data for comprehensive responses\n  const limits: any = {};\n  if (analysis.needsDetailedInfo) {\n    limits.coursesLimit = 100;  // Fetch all courses\n    limits.staffLimit = 50;     // Fetch all staff\n    limits.eventsLimit = 30;    // Fetch all events\n    limits.noticesLimit = 30;   // Fetch all notices\n  } else {\n    // Even for non-detailed queries, fetch more data for better context\n    limits.coursesLimit = 50;\n    limits.staffLimit = 30;\n    limits.eventsLimit = 15;\n    limits.noticesLimit = 15;\n  }\n\n  return { ...strategy, ...limits };\n}\n","size_bytes":6582},"client/src/components/HyperspeedCSS.css":{"content":".hyperspeed-css-container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background: linear-gradient(180deg, #000000 0%, #0a0a0a 50%, #000000 100%);\n  perspective: 1000px;\n}\n\n.road-lines {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  gap: 80px;\n  transform-style: preserve-3d;\n}\n\n.road-line {\n  position: absolute;\n  width: 8px;\n  height: 60px;\n  background: linear-gradient(180deg, transparent, rgba(0, 229, 255, 0.3), transparent);\n  border-radius: 4px;\n  animation: roadLineMove 2s linear infinite;\n  top: -100px;\n  left: 50%;\n  transform: translateX(-50%);\n  box-shadow: 0 0 10px rgba(0, 229, 255, 0.3);\n}\n\n@keyframes roadLineMove {\n  0% {\n    top: -100px;\n    opacity: 0;\n    transform: translateX(-50%) translateZ(0) scale(0.3);\n  }\n  10% {\n    opacity: 1;\n  }\n  90% {\n    opacity: 1;\n  }\n  100% {\n    top: 100%;\n    opacity: 0;\n    transform: translateX(-50%) translateZ(200px) scale(1.5);\n  }\n}\n\n.car-lights {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n.car-lights.left {\n  left: 0;\n}\n\n.car-lights.right {\n  right: 0;\n}\n\n.car-light {\n  position: absolute;\n  width: 4px;\n  height: 40px;\n  border-radius: 2px;\n  top: -50px;\n  animation: carLightMove 3s linear infinite;\n}\n\n.car-lights.left .car-light {\n  background: linear-gradient(180deg, transparent, rgba(214, 86, 191, 0.8), rgba(103, 80, 162, 0.6));\n  box-shadow: 0 0 15px rgba(214, 86, 191, 0.6);\n}\n\n.car-lights.right .car-light {\n  background: linear-gradient(180deg, transparent, rgba(3, 179, 195, 0.8), rgba(14, 94, 165, 0.6));\n  box-shadow: 0 0 15px rgba(3, 179, 195, 0.6);\n}\n\n@keyframes carLightMove {\n  0% {\n    top: -50px;\n    opacity: 0;\n    transform: translateZ(0) scale(0.5);\n  }\n  10% {\n    opacity: 1;\n  }\n  90% {\n    opacity: 1;\n  }\n  100% {\n    top: 100%;\n    opacity: 0;\n    transform: translateZ(150px) scale(1.2);\n  }\n}\n\n.side-lights {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n.side-lights.left {\n  left: 5%;\n}\n\n.side-lights.right {\n  right: 5%;\n}\n\n.side-light {\n  position: absolute;\n  width: 3px;\n  height: 30px;\n  background: linear-gradient(180deg, transparent, rgba(0, 229, 255, 0.4), transparent);\n  border-radius: 1.5px;\n  top: -40px;\n  animation: sideLightMove 4s linear infinite;\n  box-shadow: 0 0 8px rgba(0, 229, 255, 0.4);\n}\n\n@keyframes sideLightMove {\n  0% {\n    top: -40px;\n    opacity: 0;\n    transform: translateZ(0) scale(0.4);\n  }\n  10% {\n    opacity: 1;\n  }\n  90% {\n    opacity: 1;\n  }\n  100% {\n    top: 100%;\n    opacity: 0;\n    transform: translateZ(100px) scale(1);\n  }\n}\n","size_bytes":2635},"client/src/components/Hyperspeed.tsx":{"content":"import { useEffect, useRef, FC } from 'react';\r\nimport * as THREE from 'three';\r\nimport { BloomEffect, EffectComposer, EffectPass, RenderPass, SMAAEffect, SMAAPreset } from 'postprocessing';\r\n\r\nimport './Hyperspeed.css';\r\n\r\ninterface Distortion {\r\n  uniforms: Record<string, { value: any }>;\r\n  getDistortion: string;\r\n  getJS?: (progress: number, time: number) => THREE.Vector3;\r\n}\r\n\r\ninterface Distortions {\r\n  [key: string]: Distortion;\r\n}\r\n\r\ninterface Colors {\r\n  roadColor: number;\r\n  islandColor: number;\r\n  background: number;\r\n  shoulderLines: number;\r\n  brokenLines: number;\r\n  leftCars: number[];\r\n  rightCars: number[];\r\n  sticks: number;\r\n}\r\n\r\ninterface HyperspeedOptions {\r\n  onSpeedUp?: (ev: MouseEvent | TouchEvent) => void;\r\n  onSlowDown?: (ev: MouseEvent | TouchEvent) => void;\r\n  distortion?: string | Distortion;\r\n  length: number;\r\n  roadWidth: number;\r\n  islandWidth: number;\r\n  lanesPerRoad: number;\r\n  fov: number;\r\n  fovSpeedUp: number;\r\n  speedUp: number;\r\n  carLightsFade: number;\r\n  totalSideLightSticks: number;\r\n  lightPairsPerRoadWay: number;\r\n  shoulderLinesWidthPercentage: number;\r\n  brokenLinesWidthPercentage: number;\r\n  brokenLinesLengthPercentage: number;\r\n  lightStickWidth: [number, number];\r\n  lightStickHeight: [number, number];\r\n  movingAwaySpeed: [number, number];\r\n  movingCloserSpeed: [number, number];\r\n  carLightsLength: [number, number];\r\n  carLightsRadius: [number, number];\r\n  carWidthPercentage: [number, number];\r\n  carShiftX: [number, number];\r\n  carFloorSeparation: [number, number];\r\n  colors: Colors;\r\n  isHyper?: boolean;\r\n}\r\n\r\ninterface HyperspeedProps {\r\n  effectOptions?: Partial<HyperspeedOptions>;\r\n}\r\n\r\nconst defaultOptions: HyperspeedOptions = {\r\n  onSpeedUp: () => {},\r\n  onSlowDown: () => {},\r\n  distortion: 'turbulentDistortion',\r\n  length: 400,\r\n  roadWidth: 10,\r\n  islandWidth: 2,\r\n  lanesPerRoad: 4,\r\n  fov: 90,\r\n  fovSpeedUp: 150,\r\n  speedUp: 2,\r\n  carLightsFade: 0.4,\r\n  totalSideLightSticks: 20,\r\n  lightPairsPerRoadWay: 40,\r\n  shoulderLinesWidthPercentage: 0.05,\r\n  brokenLinesWidthPercentage: 0.1,\r\n  brokenLinesLengthPercentage: 0.5,\r\n  lightStickWidth: [0.12, 0.5],\r\n  lightStickHeight: [1.3, 1.7],\r\n  movingAwaySpeed: [60, 80],\r\n  movingCloserSpeed: [-120, -160],\r\n  carLightsLength: [400 * 0.03, 400 * 0.2],\r\n  carLightsRadius: [0.05, 0.14],\r\n  carWidthPercentage: [0.3, 0.5],\r\n  carShiftX: [-0.8, 0.8],\r\n  carFloorSeparation: [0, 5],\r\n  colors: {\r\n    roadColor: 0x080808,\r\n    islandColor: 0x0a0a0a,\r\n    background: 0x000000,\r\n    shoulderLines: 0xffffff,\r\n    brokenLines: 0xffffff,\r\n    leftCars: [0xd856bf, 0x6750a2, 0xc247ac],\r\n    rightCars: [0x03b3c3, 0x0e5ea5, 0x324555],\r\n    sticks: 0x03b3c3\r\n  }\r\n};\r\n\r\nfunction nsin(val: number) {\r\n  return Math.sin(val) * 0.5 + 0.5;\r\n}\r\n\r\nconst mountainUniforms = {\r\n  uFreq: { value: new THREE.Vector3(3, 6, 10) },\r\n  uAmp: { value: new THREE.Vector3(30, 30, 20) }\r\n};\r\n\r\nconst xyUniforms = {\r\n  uFreq: { value: new THREE.Vector2(5, 2) },\r\n  uAmp: { value: new THREE.Vector2(25, 15) }\r\n};\r\n\r\nconst LongRaceUniforms = {\r\n  uFreq: { value: new THREE.Vector2(2, 3) },\r\n  uAmp: { value: new THREE.Vector2(35, 10) }\r\n};\r\n\r\nconst turbulentUniforms = {\r\n  uFreq: { value: new THREE.Vector4(4, 8, 8, 1) },\r\n  uAmp: { value: new THREE.Vector4(25, 5, 10, 10) }\r\n};\r\n\r\nconst deepUniforms = {\r\n  uFreq: { value: new THREE.Vector2(4, 8) },\r\n  uAmp: { value: new THREE.Vector2(10, 20) },\r\n  uPowY: { value: new THREE.Vector2(20, 2) }\r\n};\r\n\r\nconst distortions: Distortions = {\r\n  mountainDistortion: {\r\n    uniforms: mountainUniforms,\r\n    getDistortion: `\r\n      uniform vec3 uAmp;\r\n      uniform vec3 uFreq;\r\n      #define PI 3.14159265358979\r\n      float nsin(float val){\r\n        return sin(val) * 0.5 + 0.5;\r\n      }\r\n      vec3 getDistortion(float progress){\r\n        float movementProgressFix = 0.02;\r\n        return vec3( \r\n          cos(progress * PI * uFreq.x + uTime) * uAmp.x - cos(movementProgressFix * PI * uFreq.x + uTime) * uAmp.x,\r\n          nsin(progress * PI * uFreq.y + uTime) * uAmp.y - nsin(movementProgressFix * PI * uFreq.y + uTime) * uAmp.y,\r\n          nsin(progress * PI * uFreq.z + uTime) * uAmp.z - nsin(movementProgressFix * PI * uFreq.z + uTime) * uAmp.z\r\n        );\r\n      }\r\n    `,\r\n    getJS: (progress: number, time: number) => {\r\n      const movementProgressFix = 0.02;\r\n      const uFreq = mountainUniforms.uFreq.value;\r\n      const uAmp = mountainUniforms.uAmp.value;\r\n      const distortion = new THREE.Vector3(\r\n        Math.cos(progress * Math.PI * uFreq.x + time) * uAmp.x -\r\n          Math.cos(movementProgressFix * Math.PI * uFreq.x + time) * uAmp.x,\r\n        nsin(progress * Math.PI * uFreq.y + time) * uAmp.y -\r\n          nsin(movementProgressFix * Math.PI * uFreq.y + time) * uAmp.y,\r\n        nsin(progress * Math.PI * uFreq.z + time) * uAmp.z -\r\n          nsin(movementProgressFix * Math.PI * uFreq.z + time) * uAmp.z\r\n      );\r\n      const lookAtAmp = new THREE.Vector3(2, 2, 2);\r\n      const lookAtOffset = new THREE.Vector3(0, 0, -5);\r\n      return distortion.multiply(lookAtAmp).add(lookAtOffset);\r\n    }\r\n  },\r\n  xyDistortion: {\r\n    uniforms: xyUniforms,\r\n    getDistortion: `\r\n      uniform vec2 uFreq;\r\n      uniform vec2 uAmp;\r\n      #define PI 3.14159265358979\r\n      vec3 getDistortion(float progress){\r\n        float movementProgressFix = 0.02;\r\n        return vec3( \r\n          cos(progress * PI * uFreq.x + uTime) * uAmp.x - cos(movementProgressFix * PI * uFreq.x + uTime) * uAmp.x,\r\n          sin(progress * PI * uFreq.y + PI/2. + uTime) * uAmp.y - sin(movementProgressFix * PI * uFreq.y + PI/2. + uTime) * uAmp.y,\r\n          0.\r\n        );\r\n      }\r\n    `,\r\n    getJS: (progress: number, time: number) => {\r\n      const movementProgressFix = 0.02;\r\n      const uFreq = xyUniforms.uFreq.value;\r\n      const uAmp = xyUniforms.uAmp.value;\r\n      const distortion = new THREE.Vector3(\r\n        Math.cos(progress * Math.PI * uFreq.x + time) * uAmp.x -\r\n          Math.cos(movementProgressFix * Math.PI * uFreq.x + time) * uAmp.x,\r\n        Math.sin(progress * Math.PI * uFreq.y + time + Math.PI / 2) * uAmp.y -\r\n          Math.sin(movementProgressFix * Math.PI * uFreq.y + time + Math.PI / 2) * uAmp.y,\r\n        0\r\n      );\r\n      const lookAtAmp = new THREE.Vector3(2, 0.4, 1);\r\n      const lookAtOffset = new THREE.Vector3(0, 0, -3);\r\n      return distortion.multiply(lookAtAmp).add(lookAtOffset);\r\n    }\r\n  },\r\n  LongRaceDistortion: {\r\n    uniforms: LongRaceUniforms,\r\n    getDistortion: `\r\n      uniform vec2 uFreq;\r\n      uniform vec2 uAmp;\r\n      #define PI 3.14159265358979\r\n      vec3 getDistortion(float progress){\r\n        float camProgress = 0.0125;\r\n        return vec3( \r\n          sin(progress * PI * uFreq.x + uTime) * uAmp.x - sin(camProgress * PI * uFreq.x + uTime) * uAmp.x,\r\n          sin(progress * PI * uFreq.y + uTime) * uAmp.y - sin(camProgress * PI * uFreq.y + uTime) * uAmp.y,\r\n          0.\r\n        );\r\n      }\r\n    `,\r\n    getJS: (progress: number, time: number) => {\r\n      const camProgress = 0.0125;\r\n      const uFreq = LongRaceUniforms.uFreq.value;\r\n      const uAmp = LongRaceUniforms.uAmp.value;\r\n      const distortion = new THREE.Vector3(\r\n        Math.sin(progress * Math.PI * uFreq.x + time) * uAmp.x -\r\n          Math.sin(camProgress * Math.PI * uFreq.x + time) * uAmp.x,\r\n        Math.sin(progress * Math.PI * uFreq.y + time) * uAmp.y -\r\n          Math.sin(camProgress * Math.PI * uFreq.y + time) * uAmp.y,\r\n        0\r\n      );\r\n      const lookAtAmp = new THREE.Vector3(1, 1, 0);\r\n      const lookAtOffset = new THREE.Vector3(0, 0, -5);\r\n      return distortion.multiply(lookAtAmp).add(lookAtOffset);\r\n    }\r\n  },\r\n  turbulentDistortion: {\r\n    uniforms: turbulentUniforms,\r\n    getDistortion: `\r\n      uniform vec4 uFreq;\r\n      uniform vec4 uAmp;\r\n      float nsin(float val){\r\n        return sin(val) * 0.5 + 0.5;\r\n      }\r\n      #define PI 3.14159265358979\r\n      float getDistortionX(float progress){\r\n        return (\r\n          cos(PI * progress * uFreq.r + uTime) * uAmp.r +\r\n          pow(cos(PI * progress * uFreq.g + uTime * (uFreq.g / uFreq.r)), 2. ) * uAmp.g\r\n        );\r\n      }\r\n      float getDistortionY(float progress){\r\n        return (\r\n          -nsin(PI * progress * uFreq.b + uTime) * uAmp.b +\r\n          -pow(nsin(PI * progress * uFreq.a + uTime / (uFreq.b / uFreq.a)), 5.) * uAmp.a\r\n        );\r\n      }\r\n      vec3 getDistortion(float progress){\r\n        return vec3(\r\n          getDistortionX(progress) - getDistortionX(0.0125),\r\n          getDistortionY(progress) - getDistortionY(0.0125),\r\n          0.\r\n        );\r\n      }\r\n    `,\r\n    getJS: (progress: number, time: number) => {\r\n      const uFreq = turbulentUniforms.uFreq.value;\r\n      const uAmp = turbulentUniforms.uAmp.value;\r\n\r\n      const getX = (p: number) =>\r\n        Math.cos(Math.PI * p * uFreq.x + time) * uAmp.x +\r\n        Math.pow(Math.cos(Math.PI * p * uFreq.y + time * (uFreq.y / uFreq.x)), 2) * uAmp.y;\r\n\r\n      const getY = (p: number) =>\r\n        -nsin(Math.PI * p * uFreq.z + time) * uAmp.z -\r\n        Math.pow(nsin(Math.PI * p * uFreq.w + time / (uFreq.z / uFreq.w)), 5) * uAmp.w;\r\n\r\n      const distortion = new THREE.Vector3(\r\n        getX(progress) - getX(progress + 0.007),\r\n        getY(progress) - getY(progress + 0.007),\r\n        0\r\n      );\r\n      const lookAtAmp = new THREE.Vector3(-2, -5, 0);\r\n      const lookAtOffset = new THREE.Vector3(0, 0, -10);\r\n      return distortion.multiply(lookAtAmp).add(lookAtOffset);\r\n    }\r\n  },\r\n  turbulentDistortionStill: {\r\n    uniforms: turbulentUniforms,\r\n    getDistortion: `\r\n      uniform vec4 uFreq;\r\n      uniform vec4 uAmp;\r\n      float nsin(float val){\r\n        return sin(val) * 0.5 + 0.5;\r\n      }\r\n      #define PI 3.14159265358979\r\n      float getDistortionX(float progress){\r\n        return (\r\n          cos(PI * progress * uFreq.r) * uAmp.r +\r\n          pow(cos(PI * progress * uFreq.g * (uFreq.g / uFreq.r)), 2. ) * uAmp.g\r\n        );\r\n      }\r\n      float getDistortionY(float progress){\r\n        return (\r\n          -nsin(PI * progress * uFreq.b) * uAmp.b +\r\n          -pow(nsin(PI * progress * uFreq.a / (uFreq.b / uFreq.a)), 5.) * uAmp.a\r\n        );\r\n      }\r\n      vec3 getDistortion(float progress){\r\n        return vec3(\r\n          getDistortionX(progress) - getDistortionX(0.02),\r\n          getDistortionY(progress) - getDistortionY(0.02),\r\n          0.\r\n        );\r\n      }\r\n    `\r\n  },\r\n  deepDistortionStill: {\r\n    uniforms: deepUniforms,\r\n    getDistortion: `\r\n      uniform vec4 uFreq;\r\n      uniform vec4 uAmp;\r\n      uniform vec2 uPowY;\r\n      float nsin(float val){\r\n        return sin(val) * 0.5 + 0.5;\r\n      }\r\n      #define PI 3.14159265358979\r\n      float getDistortionX(float progress){\r\n        return (\r\n          sin(progress * PI * uFreq.x) * uAmp.x * 2.\r\n        );\r\n      }\r\n      float getDistortionY(float progress){\r\n        return (\r\n          pow(abs(progress * uPowY.x), uPowY.y) + sin(progress * PI * uFreq.y) * uAmp.y\r\n        );\r\n      }\r\n      vec3 getDistortion(float progress){\r\n        return vec3(\r\n          getDistortionX(progress) - getDistortionX(0.02),\r\n          getDistortionY(progress) - getDistortionY(0.05),\r\n          0.\r\n        );\r\n      }\r\n    `\r\n  },\r\n  deepDistortion: {\r\n    uniforms: deepUniforms,\r\n    getDistortion: `\r\n      uniform vec4 uFreq;\r\n      uniform vec4 uAmp;\r\n      uniform vec2 uPowY;\r\n      float nsin(float val){\r\n        return sin(val) * 0.5 + 0.5;\r\n      }\r\n      #define PI 3.14159265358979\r\n      float getDistortionX(float progress){\r\n        return (\r\n          sin(progress * PI * uFreq.x + uTime) * uAmp.x\r\n        );\r\n      }\r\n      float getDistortionY(float progress){\r\n        return (\r\n          pow(abs(progress * uPowY.x), uPowY.y) + sin(progress * PI * uFreq.y + uTime) * uAmp.y\r\n        );\r\n      }\r\n      vec3 getDistortion(float progress){\r\n        return vec3(\r\n          getDistortionX(progress) - getDistortionX(0.02),\r\n          getDistortionY(progress) - getDistortionY(0.02),\r\n          0.\r\n        );\r\n      }\r\n    `,\r\n    getJS: (progress: number, time: number) => {\r\n      const uFreq = deepUniforms.uFreq.value;\r\n      const uAmp = deepUniforms.uAmp.value;\r\n      const uPowY = deepUniforms.uPowY.value;\r\n\r\n      const getX = (p: number) => Math.sin(p * Math.PI * uFreq.x + time) * uAmp.x;\r\n      const getY = (p: number) => Math.pow(p * uPowY.x, uPowY.y) + Math.sin(p * Math.PI * uFreq.y + time) * uAmp.y;\r\n\r\n      const distortion = new THREE.Vector3(\r\n        getX(progress) - getX(progress + 0.01),\r\n        getY(progress) - getY(progress + 0.01),\r\n        0\r\n      );\r\n      const lookAtAmp = new THREE.Vector3(-2, -4, 0);\r\n      const lookAtOffset = new THREE.Vector3(0, 0, -10);\r\n      return distortion.multiply(lookAtAmp).add(lookAtOffset);\r\n    }\r\n  }\r\n};\r\n\r\nconst distortion_uniforms = {\r\n  uDistortionX: { value: new THREE.Vector2(80, 3) },\r\n  uDistortionY: { value: new THREE.Vector2(-40, 2.5) }\r\n};\r\n\r\nconst distortion_vertex = `\r\n  #define PI 3.14159265358979\r\n  uniform vec2 uDistortionX;\r\n  uniform vec2 uDistortionY;\r\n  float nsin(float val){\r\n    return sin(val) * 0.5 + 0.5;\r\n  }\r\n  vec3 getDistortion(float progress){\r\n    progress = clamp(progress, 0., 1.);\r\n    float xAmp = uDistortionX.r;\r\n    float xFreq = uDistortionX.g;\r\n    float yAmp = uDistortionY.r;\r\n    float yFreq = uDistortionY.g;\r\n    return vec3( \r\n      xAmp * nsin(progress * PI * xFreq - PI / 2.),\r\n      yAmp * nsin(progress * PI * yFreq - PI / 2.),\r\n      0.\r\n    );\r\n  }\r\n`;\r\n\r\nfunction random(base: number | [number, number]): number {\r\n  if (Array.isArray(base)) {\r\n    return Math.random() * (base[1] - base[0]) + base[0];\r\n  }\r\n  return Math.random() * base;\r\n}\r\n\r\nfunction pickRandom<T>(arr: T | T[]): T {\r\n  if (Array.isArray(arr)) {\r\n    return arr[Math.floor(Math.random() * arr.length)];\r\n  }\r\n  return arr;\r\n}\r\n\r\nfunction lerp(current: number, target: number, speed = 0.1, limit = 0.001): number {\r\n  let change = (target - current) * speed;\r\n  if (Math.abs(change) < limit) {\r\n    change = target - current;\r\n  }\r\n  return change;\r\n}\r\n\r\nclass CarLights {\r\n  webgl: App;\r\n  options: HyperspeedOptions;\r\n  colors: number[] | THREE.Color;\r\n  speed: [number, number];\r\n  fade: THREE.Vector2;\r\n  mesh!: THREE.Mesh<THREE.InstancedBufferGeometry, THREE.ShaderMaterial>;\r\n\r\n  constructor(\r\n    webgl: App,\r\n    options: HyperspeedOptions,\r\n    colors: number[] | THREE.Color,\r\n    speed: [number, number],\r\n    fade: THREE.Vector2\r\n  ) {\r\n    this.webgl = webgl;\r\n    this.options = options;\r\n    this.colors = colors;\r\n    this.speed = speed;\r\n    this.fade = fade;\r\n  }\r\n\r\n  init() {\r\n    const options = this.options;\r\n    const curve = new THREE.LineCurve3(new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, 0, -1));\r\n    const geometry = new THREE.TubeGeometry(curve, 40, 1, 8, false);\r\n\r\n    const instanced = new THREE.InstancedBufferGeometry().copy(geometry as any) as THREE.InstancedBufferGeometry;\r\n    instanced.instanceCount = options.lightPairsPerRoadWay * 2;\r\n\r\n    const laneWidth = options.roadWidth / options.lanesPerRoad;\r\n\r\n    const aOffset: number[] = [];\r\n    const aMetrics: number[] = [];\r\n    const aColor: number[] = [];\r\n\r\n    let colorArray: THREE.Color[];\r\n    if (Array.isArray(this.colors)) {\r\n      colorArray = this.colors.map(c => new THREE.Color(c));\r\n    } else {\r\n      colorArray = [new THREE.Color(this.colors)];\r\n    }\r\n\r\n    for (let i = 0; i < options.lightPairsPerRoadWay; i++) {\r\n      const radius = random(options.carLightsRadius);\r\n      const length = random(options.carLightsLength);\r\n      const spd = random(this.speed);\r\n\r\n      const carLane = i % options.lanesPerRoad;\r\n      let laneX = carLane * laneWidth - options.roadWidth / 2 + laneWidth / 2;\r\n\r\n      const carWidth = random(options.carWidthPercentage) * laneWidth;\r\n      const carShiftX = random(options.carShiftX) * laneWidth;\r\n      laneX += carShiftX;\r\n\r\n      const offsetY = random(options.carFloorSeparation) + radius * 1.3;\r\n      const offsetZ = -random(options.length);\r\n\r\n      aOffset.push(laneX - carWidth / 2);\r\n      aOffset.push(offsetY);\r\n      aOffset.push(offsetZ);\r\n\r\n      aOffset.push(laneX + carWidth / 2);\r\n      aOffset.push(offsetY);\r\n      aOffset.push(offsetZ);\r\n\r\n      aMetrics.push(radius);\r\n      aMetrics.push(length);\r\n      aMetrics.push(spd);\r\n\r\n      aMetrics.push(radius);\r\n      aMetrics.push(length);\r\n      aMetrics.push(spd);\r\n\r\n      const color = pickRandom<THREE.Color>(colorArray);\r\n      aColor.push(color.r);\r\n      aColor.push(color.g);\r\n      aColor.push(color.b);\r\n\r\n      aColor.push(color.r);\r\n      aColor.push(color.g);\r\n      aColor.push(color.b);\r\n    }\r\n\r\n    instanced.setAttribute('aOffset', new THREE.InstancedBufferAttribute(new Float32Array(aOffset), 3, false));\r\n    instanced.setAttribute('aMetrics', new THREE.InstancedBufferAttribute(new Float32Array(aMetrics), 3, false));\r\n    instanced.setAttribute('aColor', new THREE.InstancedBufferAttribute(new Float32Array(aColor), 3, false));\r\n\r\n    const material = new THREE.ShaderMaterial({\r\n      fragmentShader: carLightsFragment,\r\n      vertexShader: carLightsVertex,\r\n      transparent: true,\r\n      uniforms: Object.assign(\r\n        {\r\n          uTime: { value: 0 },\r\n          uTravelLength: { value: options.length },\r\n          uFade: { value: this.fade }\r\n        },\r\n        this.webgl.fogUniforms,\r\n        (typeof this.options.distortion === 'object' ? this.options.distortion.uniforms : {}) || {}\r\n      )\r\n    });\r\n\r\n    material.onBeforeCompile = shader => {\r\n      shader.vertexShader = shader.vertexShader.replace(\r\n        '#include <getDistortion_vertex>',\r\n        typeof this.options.distortion === 'object' ? this.options.distortion.getDistortion : ''\r\n      );\r\n    };\r\n\r\n    const mesh = new THREE.Mesh(instanced, material);\r\n    mesh.frustumCulled = false;\r\n    this.webgl.scene.add(mesh);\r\n    this.mesh = mesh;\r\n  }\r\n\r\n  update(time: number) {\r\n    if (this.mesh.material.uniforms.uTime) {\r\n      this.mesh.material.uniforms.uTime.value = time;\r\n    }\r\n  }\r\n}\r\n\r\nconst carLightsFragment = `\r\n  #define USE_FOG;\r\n  ${THREE.ShaderChunk['fog_pars_fragment']}\r\n  varying vec3 vColor;\r\n  varying vec2 vUv; \r\n  uniform vec2 uFade;\r\n  void main() {\r\n    vec3 color = vec3(vColor);\r\n    float alpha = smoothstep(uFade.x, uFade.y, vUv.x);\r\n    gl_FragColor = vec4(color, alpha);\r\n    if (gl_FragColor.a < 0.0001) discard;\r\n    ${THREE.ShaderChunk['fog_fragment']}\r\n  }\r\n`;\r\n\r\nconst carLightsVertex = `\r\n  #define USE_FOG;\r\n  ${THREE.ShaderChunk['fog_pars_vertex']}\r\n  attribute vec3 aOffset;\r\n  attribute vec3 aMetrics;\r\n  attribute vec3 aColor;\r\n  uniform float uTravelLength;\r\n  uniform float uTime;\r\n  varying vec2 vUv; \r\n  varying vec3 vColor; \r\n  #include <getDistortion_vertex>\r\n  void main() {\r\n    vec3 transformed = position.xyz;\r\n    float radius = aMetrics.r;\r\n    float myLength = aMetrics.g;\r\n    float speed = aMetrics.b;\r\n\r\n    transformed.xy *= radius;\r\n    transformed.z *= myLength;\r\n\r\n    transformed.z += myLength - mod(uTime * speed + aOffset.z, uTravelLength);\r\n    transformed.xy += aOffset.xy;\r\n\r\n    float progress = abs(transformed.z / uTravelLength);\r\n    transformed.xyz += getDistortion(progress);\r\n\r\n    vec4 mvPosition = modelViewMatrix * vec4(transformed, 1.);\r\n    gl_Position = projectionMatrix * mvPosition;\r\n    vUv = uv;\r\n    vColor = aColor;\r\n    ${THREE.ShaderChunk['fog_vertex']}\r\n  }\r\n`;\r\n\r\nclass LightsSticks {\r\n  webgl: App;\r\n  options: HyperspeedOptions;\r\n  mesh!: THREE.Mesh<THREE.InstancedBufferGeometry, THREE.ShaderMaterial>;\r\n\r\n  constructor(webgl: App, options: HyperspeedOptions) {\r\n    this.webgl = webgl;\r\n    this.options = options;\r\n  }\r\n\r\n  init() {\r\n    const options = this.options;\r\n    const geometry = new THREE.PlaneGeometry(1, 1);\r\n    const instanced = new THREE.InstancedBufferGeometry().copy(geometry as any) as THREE.InstancedBufferGeometry;\r\n    const totalSticks = options.totalSideLightSticks;\r\n    instanced.instanceCount = totalSticks;\r\n\r\n    const stickoffset = options.length / (totalSticks - 1);\r\n    const aOffset: number[] = [];\r\n    const aColor: number[] = [];\r\n    const aMetrics: number[] = [];\r\n\r\n    let colorArray: THREE.Color[];\r\n    if (Array.isArray(options.colors.sticks)) {\r\n      colorArray = options.colors.sticks.map(c => new THREE.Color(c));\r\n    } else {\r\n      colorArray = [new THREE.Color(options.colors.sticks)];\r\n    }\r\n\r\n    for (let i = 0; i < totalSticks; i++) {\r\n      const width = random(options.lightStickWidth);\r\n      const height = random(options.lightStickHeight);\r\n      aOffset.push((i - 1) * stickoffset * 2 + stickoffset * Math.random());\r\n\r\n      const color = pickRandom<THREE.Color>(colorArray);\r\n      aColor.push(color.r);\r\n      aColor.push(color.g);\r\n      aColor.push(color.b);\r\n\r\n      aMetrics.push(width);\r\n      aMetrics.push(height);\r\n    }\r\n\r\n    instanced.setAttribute('aOffset', new THREE.InstancedBufferAttribute(new Float32Array(aOffset), 1, false));\r\n    instanced.setAttribute('aColor', new THREE.InstancedBufferAttribute(new Float32Array(aColor), 3, false));\r\n    instanced.setAttribute('aMetrics', new THREE.InstancedBufferAttribute(new Float32Array(aMetrics), 2, false));\r\n\r\n    const material = new THREE.ShaderMaterial({\r\n      fragmentShader: sideSticksFragment,\r\n      vertexShader: sideSticksVertex,\r\n      side: THREE.DoubleSide,\r\n      uniforms: Object.assign(\r\n        {\r\n          uTravelLength: { value: options.length },\r\n          uTime: { value: 0 }\r\n        },\r\n        this.webgl.fogUniforms,\r\n        (typeof options.distortion === 'object' ? options.distortion.uniforms : {}) || {}\r\n      )\r\n    });\r\n\r\n    material.onBeforeCompile = shader => {\r\n      shader.vertexShader = shader.vertexShader.replace(\r\n        '#include <getDistortion_vertex>',\r\n        typeof this.options.distortion === 'object' ? this.options.distortion.getDistortion : ''\r\n      );\r\n    };\r\n\r\n    const mesh = new THREE.Mesh(instanced, material);\r\n    mesh.frustumCulled = false;\r\n    this.webgl.scene.add(mesh);\r\n    this.mesh = mesh;\r\n  }\r\n\r\n  update(time: number) {\r\n    if (this.mesh.material.uniforms.uTime) {\r\n      this.mesh.material.uniforms.uTime.value = time;\r\n    }\r\n  }\r\n}\r\n\r\nconst sideSticksVertex = `\r\n  #define USE_FOG;\r\n  ${THREE.ShaderChunk['fog_pars_vertex']}\r\n  attribute float aOffset;\r\n  attribute vec3 aColor;\r\n  attribute vec2 aMetrics;\r\n  uniform float uTravelLength;\r\n  uniform float uTime;\r\n  varying vec3 vColor;\r\n  mat4 rotationY( in float angle ) {\r\n    return mat4(\r\n      cos(angle),\t\t0,\t\tsin(angle),\t0,\r\n      0,\t\t        1.0,\t0,\t\t\t0,\r\n      -sin(angle),\t    0,\t\tcos(angle),\t0,\r\n      0, \t\t        0,\t\t0,\t\t\t1\r\n    );\r\n  }\r\n  #include <getDistortion_vertex>\r\n  void main(){\r\n    vec3 transformed = position.xyz;\r\n    float width = aMetrics.x;\r\n    float height = aMetrics.y;\r\n\r\n    transformed.xy *= vec2(width, height);\r\n    float time = mod(uTime * 60. * 2. + aOffset, uTravelLength);\r\n\r\n    transformed = (rotationY(3.14/2.) * vec4(transformed,1.)).xyz;\r\n    transformed.z += - uTravelLength + time;\r\n\r\n    float progress = abs(transformed.z / uTravelLength);\r\n    transformed.xyz += getDistortion(progress);\r\n\r\n    transformed.y += height / 2.;\r\n    transformed.x += -width / 2.;\r\n    vec4 mvPosition = modelViewMatrix * vec4(transformed, 1.);\r\n    gl_Position = projectionMatrix * mvPosition;\r\n    vColor = aColor;\r\n    ${THREE.ShaderChunk['fog_vertex']}\r\n  }\r\n`;\r\n\r\nconst sideSticksFragment = `\r\n  #define USE_FOG;\r\n  ${THREE.ShaderChunk['fog_pars_fragment']}\r\n  varying vec3 vColor;\r\n  void main(){\r\n    vec3 color = vec3(vColor);\r\n    gl_FragColor = vec4(color,1.);\r\n    ${THREE.ShaderChunk['fog_fragment']}\r\n  }\r\n`;\r\n\r\nclass Road {\r\n  webgl: App;\r\n  options: HyperspeedOptions;\r\n  uTime: { value: number };\r\n  leftRoadWay!: THREE.Mesh;\r\n  rightRoadWay!: THREE.Mesh;\r\n  island!: THREE.Mesh;\r\n\r\n  constructor(webgl: App, options: HyperspeedOptions) {\r\n    this.webgl = webgl;\r\n    this.options = options;\r\n    this.uTime = { value: 0 };\r\n  }\r\n\r\n  createPlane(side: number, width: number, isRoad: boolean) {\r\n    const options = this.options;\r\n    const segments = 100;\r\n    const geometry = new THREE.PlaneGeometry(\r\n      isRoad ? options.roadWidth : options.islandWidth,\r\n      options.length,\r\n      20,\r\n      segments\r\n    );\r\n\r\n    let uniforms: Record<string, { value: any }> = {\r\n      uTravelLength: { value: options.length },\r\n      uColor: {\r\n        value: new THREE.Color(isRoad ? options.colors.roadColor : options.colors.islandColor)\r\n      },\r\n      uTime: this.uTime\r\n    };\r\n\r\n    if (isRoad) {\r\n      uniforms = Object.assign(uniforms, {\r\n        uLanes: { value: options.lanesPerRoad },\r\n        uBrokenLinesColor: {\r\n          value: new THREE.Color(options.colors.brokenLines)\r\n        },\r\n        uShoulderLinesColor: {\r\n          value: new THREE.Color(options.colors.shoulderLines)\r\n        },\r\n        uShoulderLinesWidthPercentage: {\r\n          value: options.shoulderLinesWidthPercentage\r\n        },\r\n        uBrokenLinesLengthPercentage: {\r\n          value: options.brokenLinesLengthPercentage\r\n        },\r\n        uBrokenLinesWidthPercentage: {\r\n          value: options.brokenLinesWidthPercentage\r\n        }\r\n      });\r\n    }\r\n\r\n    const material = new THREE.ShaderMaterial({\r\n      fragmentShader: isRoad ? roadFragment : islandFragment,\r\n      vertexShader: roadVertex,\r\n      side: THREE.DoubleSide,\r\n      uniforms: Object.assign(\r\n        uniforms,\r\n        this.webgl.fogUniforms,\r\n        (typeof options.distortion === 'object' ? options.distortion.uniforms : {}) || {}\r\n      )\r\n    });\r\n\r\n    material.onBeforeCompile = shader => {\r\n      shader.vertexShader = shader.vertexShader.replace(\r\n        '#include <getDistortion_vertex>',\r\n        typeof this.options.distortion === 'object' ? this.options.distortion.getDistortion : ''\r\n      );\r\n    };\r\n\r\n    const mesh = new THREE.Mesh(geometry, material);\r\n    mesh.rotation.x = -Math.PI / 2;\r\n    mesh.position.z = -options.length / 2;\r\n    mesh.position.x += (this.options.islandWidth / 2 + options.roadWidth / 2) * side;\r\n\r\n    this.webgl.scene.add(mesh);\r\n    return mesh;\r\n  }\r\n\r\n  init() {\r\n    this.leftRoadWay = this.createPlane(-1, this.options.roadWidth, true);\r\n    this.rightRoadWay = this.createPlane(1, this.options.roadWidth, true);\r\n    this.island = this.createPlane(0, this.options.islandWidth, false);\r\n  }\r\n\r\n  update(time: number) {\r\n    this.uTime.value = time;\r\n  }\r\n}\r\n\r\nconst roadBaseFragment = `\r\n  #define USE_FOG;\r\n  varying vec2 vUv; \r\n  uniform vec3 uColor;\r\n  uniform float uTime;\r\n  #include <roadMarkings_vars>\r\n  ${THREE.ShaderChunk['fog_pars_fragment']}\r\n  void main() {\r\n    vec2 uv = vUv;\r\n    vec3 color = vec3(uColor);\r\n    #include <roadMarkings_fragment>\r\n    gl_FragColor = vec4(color, 1.);\r\n    ${THREE.ShaderChunk['fog_fragment']}\r\n  }\r\n`;\r\n\r\nconst islandFragment = roadBaseFragment\r\n  .replace('#include <roadMarkings_fragment>', '')\r\n  .replace('#include <roadMarkings_vars>', '');\r\n\r\nconst roadMarkings_vars = `\r\n  uniform float uLanes;\r\n  uniform vec3 uBrokenLinesColor;\r\n  uniform vec3 uShoulderLinesColor;\r\n  uniform float uShoulderLinesWidthPercentage;\r\n  uniform float uBrokenLinesWidthPercentage;\r\n  uniform float uBrokenLinesLengthPercentage;\r\n  highp float random(vec2 co) {\r\n    highp float a = 12.9898;\r\n    highp float b = 78.233;\r\n    highp float c = 43758.5453;\r\n    highp float dt = dot(co.xy, vec2(a, b));\r\n    highp float sn = mod(dt, 3.14);\r\n    return fract(sin(sn) * c);\r\n  }\r\n`;\r\n\r\nconst roadMarkings_fragment = `\r\n  uv.y = mod(uv.y + uTime * 0.05, 1.);\r\n  float laneWidth = 1.0 / uLanes;\r\n  float brokenLineWidth = laneWidth * uBrokenLinesWidthPercentage;\r\n  float laneEmptySpace = 1. - uBrokenLinesLengthPercentage;\r\n\r\n  float brokenLines = step(1.0 - brokenLineWidth, fract(uv.x * 2.0)) * step(laneEmptySpace, fract(uv.y * 10.0));\r\n  float sideLines = step(1.0 - brokenLineWidth, fract((uv.x - laneWidth * (uLanes - 1.0)) * 2.0)) + step(brokenLineWidth, uv.x);\r\n\r\n  brokenLines = mix(brokenLines, sideLines, uv.x);\r\n`;\r\n\r\nconst roadFragment = roadBaseFragment\r\n  .replace('#include <roadMarkings_fragment>', roadMarkings_fragment)\r\n  .replace('#include <roadMarkings_vars>', roadMarkings_vars);\r\n\r\nconst roadVertex = `\r\n  #define USE_FOG;\r\n  uniform float uTime;\r\n  ${THREE.ShaderChunk['fog_pars_vertex']}\r\n  uniform float uTravelLength;\r\n  varying vec2 vUv; \r\n  #include <getDistortion_vertex>\r\n  void main() {\r\n    vec3 transformed = position.xyz;\r\n    vec3 distortion = getDistortion((transformed.y + uTravelLength / 2.) / uTravelLength);\r\n    transformed.x += distortion.x;\r\n    transformed.z += distortion.y;\r\n    transformed.y += -1. * distortion.z;  \r\n    \r\n    vec4 mvPosition = modelViewMatrix * vec4(transformed, 1.);\r\n    gl_Position = projectionMatrix * mvPosition;\r\n    vUv = uv;\r\n    ${THREE.ShaderChunk['fog_vertex']}\r\n  }\r\n`;\r\n\r\nfunction resizeRendererToDisplaySize(\r\n  renderer: THREE.WebGLRenderer,\r\n  setSize: (width: number, height: number, updateStyle: boolean) => void\r\n) {\r\n  const canvas = renderer.domElement;\r\n  const width = canvas.clientWidth;\r\n  const height = canvas.clientHeight;\r\n  const needResize = canvas.width !== width || canvas.height !== height;\r\n  if (needResize) {\r\n    setSize(width, height, false);\r\n  }\r\n  return needResize;\r\n}\r\n\r\nclass App {\r\n  container: HTMLElement;\r\n  options: HyperspeedOptions;\r\n  renderer: THREE.WebGLRenderer;\r\n  composer: EffectComposer;\r\n  camera: THREE.PerspectiveCamera;\r\n  scene: THREE.Scene;\r\n  renderPass!: RenderPass;\r\n  bloomPass!: EffectPass;\r\n  clock: THREE.Clock;\r\n  assets: Record<string, any>;\r\n  disposed: boolean;\r\n  road: Road;\r\n  leftCarLights: CarLights;\r\n  rightCarLights: CarLights;\r\n  leftSticks: LightsSticks;\r\n  fogUniforms: Record<string, { value: any }>;\r\n  fovTarget: number;\r\n  speedUpTarget: number;\r\n  speedUp: number;\r\n  timeOffset: number;\r\n\r\n  constructor(container: HTMLElement, options: HyperspeedOptions) {\r\n    this.options = options;\r\n    if (!this.options.distortion) {\r\n      this.options.distortion = {\r\n        uniforms: distortion_uniforms,\r\n        getDistortion: distortion_vertex\r\n      };\r\n    }\r\n    this.container = container;\r\n\r\n    this.renderer = new THREE.WebGLRenderer({\r\n      antialias: false,\r\n      alpha: true\r\n    });\r\n    this.renderer.setSize(container.offsetWidth, container.offsetHeight, false);\r\n    this.renderer.setPixelRatio(window.devicePixelRatio);\r\n\r\n    this.composer = new EffectComposer(this.renderer);\r\n    container.appendChild(this.renderer.domElement);\r\n\r\n    this.camera = new THREE.PerspectiveCamera(options.fov, container.offsetWidth / container.offsetHeight, 0.1, 10000);\r\n    this.camera.position.z = -5;\r\n    this.camera.position.y = 8;\r\n    this.camera.position.x = 0;\r\n\r\n    this.scene = new THREE.Scene();\r\n    this.scene.background = null;\r\n\r\n    const fog = new THREE.Fog(options.colors.background, options.length * 0.2, options.length * 500);\r\n    this.scene.fog = fog;\r\n\r\n    this.fogUniforms = {\r\n      fogColor: { value: fog.color },\r\n      fogNear: { value: fog.near },\r\n      fogFar: { value: fog.far }\r\n    };\r\n\r\n    this.clock = new THREE.Clock();\r\n    this.assets = {};\r\n    this.disposed = false;\r\n\r\n    this.road = new Road(this, options);\r\n    this.leftCarLights = new CarLights(\r\n      this,\r\n      options,\r\n      options.colors.leftCars,\r\n      options.movingAwaySpeed,\r\n      new THREE.Vector2(0, 1 - options.carLightsFade)\r\n    );\r\n    this.rightCarLights = new CarLights(\r\n      this,\r\n      options,\r\n      options.colors.rightCars,\r\n      options.movingCloserSpeed,\r\n      new THREE.Vector2(1, 0 + options.carLightsFade)\r\n    );\r\n    this.leftSticks = new LightsSticks(this, options);\r\n\r\n    this.fovTarget = options.fov;\r\n    this.speedUpTarget = 0;\r\n    this.speedUp = 0;\r\n    this.timeOffset = 0;\r\n\r\n    this.tick = this.tick.bind(this);\r\n    this.init = this.init.bind(this);\r\n    this.setSize = this.setSize.bind(this);\r\n    this.onMouseDown = this.onMouseDown.bind(this);\r\n    this.onMouseUp = this.onMouseUp.bind(this);\r\n\r\n    this.onTouchStart = this.onTouchStart.bind(this);\r\n    this.onTouchEnd = this.onTouchEnd.bind(this);\r\n    this.onContextMenu = this.onContextMenu.bind(this);\r\n\r\n    window.addEventListener('resize', this.onWindowResize.bind(this));\r\n  }\r\n\r\n  onWindowResize() {\r\n    const width = this.container.offsetWidth;\r\n    const height = this.container.offsetHeight;\r\n\r\n    this.renderer.setSize(width, height);\r\n    this.camera.aspect = width / height;\r\n    this.camera.updateProjectionMatrix();\r\n    this.composer.setSize(width, height);\r\n  }\r\n\r\n  initPasses() {\r\n    this.renderPass = new RenderPass(this.scene, this.camera);\r\n    this.bloomPass = new EffectPass(\r\n      this.camera,\r\n      new BloomEffect({\r\n        luminanceThreshold: 0.2,\r\n        luminanceSmoothing: 0,\r\n        resolutionScale: 1\r\n      })\r\n    );\r\n\r\n    const smaaPass = new EffectPass(\r\n      this.camera,\r\n      new SMAAEffect({\r\n        preset: SMAAPreset.MEDIUM\r\n      })\r\n    );\r\n    this.renderPass.renderToScreen = false;\r\n    this.bloomPass.renderToScreen = false;\r\n    smaaPass.renderToScreen = true;\r\n\r\n    this.composer.addPass(this.renderPass);\r\n    this.composer.addPass(this.bloomPass);\r\n    this.composer.addPass(smaaPass);\r\n  }\r\n\r\n  loadAssets(): Promise<void> {\r\n    const assets = this.assets;\r\n    return new Promise(resolve => {\r\n      const manager = new THREE.LoadingManager(resolve);\r\n\r\n      const searchImage = new Image();\r\n      const areaImage = new Image();\r\n      assets.smaa = {};\r\n\r\n      searchImage.addEventListener('load', function () {\r\n        assets.smaa.search = this;\r\n        manager.itemEnd('smaa-search');\r\n      });\r\n\r\n      areaImage.addEventListener('load', function () {\r\n        assets.smaa.area = this;\r\n        manager.itemEnd('smaa-area');\r\n      });\r\n\r\n      manager.itemStart('smaa-search');\r\n      manager.itemStart('smaa-area');\r\n\r\n      searchImage.src = SMAAEffect.searchImageDataURL;\r\n      areaImage.src = SMAAEffect.areaImageDataURL;\r\n    });\r\n  }\r\n\r\n  init() {\r\n    this.initPasses();\r\n    const options = this.options;\r\n    this.road.init();\r\n    this.leftCarLights.init();\r\n    this.leftCarLights.mesh.position.setX(-options.roadWidth / 2 - options.islandWidth / 2);\r\n\r\n    this.rightCarLights.init();\r\n    this.rightCarLights.mesh.position.setX(options.roadWidth / 2 + options.islandWidth / 2);\r\n\r\n    this.leftSticks.init();\r\n    this.leftSticks.mesh.position.setX(-(options.roadWidth + options.islandWidth / 2));\r\n\r\n    this.container.addEventListener('mousedown', this.onMouseDown);\r\n    this.container.addEventListener('mouseup', this.onMouseUp);\r\n    this.container.addEventListener('mouseout', this.onMouseUp);\r\n\r\n    this.container.addEventListener('touchstart', this.onTouchStart, { passive: true });\r\n    this.container.addEventListener('touchend', this.onTouchEnd, { passive: true });\r\n    this.container.addEventListener('touchcancel', this.onTouchEnd, { passive: true });\r\n    this.container.addEventListener('contextmenu', this.onContextMenu);\r\n\r\n    this.tick();\r\n  }\r\n\r\n  onMouseDown(ev: MouseEvent) {\r\n    if (this.options.onSpeedUp) this.options.onSpeedUp(ev);\r\n    this.fovTarget = this.options.fovSpeedUp;\r\n    this.speedUpTarget = this.options.speedUp;\r\n  }\r\n\r\n  onMouseUp(ev: MouseEvent) {\r\n    if (this.options.onSlowDown) this.options.onSlowDown(ev);\r\n    this.fovTarget = this.options.fov;\r\n    this.speedUpTarget = 0;\r\n  }\r\n\r\n  onTouchStart(ev: TouchEvent) {\r\n    if (this.options.onSpeedUp) this.options.onSpeedUp(ev);\r\n    this.fovTarget = this.options.fovSpeedUp;\r\n    this.speedUpTarget = this.options.speedUp;\r\n  }\r\n\r\n  onTouchEnd(ev: TouchEvent) {\r\n    if (this.options.onSlowDown) this.options.onSlowDown(ev);\r\n    this.fovTarget = this.options.fov;\r\n    this.speedUpTarget = 0;\r\n  }\r\n\r\n  onContextMenu(ev: MouseEvent) {\r\n    ev.preventDefault();\r\n  }\r\n\r\n  update(delta: number) {\r\n    const lerpPercentage = Math.exp(-(-60 * Math.log2(1 - 0.1)) * delta);\r\n    this.speedUp += lerp(this.speedUp, this.speedUpTarget, lerpPercentage, 0.00001);\r\n    this.timeOffset += this.speedUp * delta;\r\n    const time = this.clock.elapsedTime + this.timeOffset;\r\n\r\n    this.rightCarLights.update(time);\r\n    this.leftCarLights.update(time);\r\n    this.leftSticks.update(time);\r\n    this.road.update(time);\r\n\r\n    let updateCamera = false;\r\n    const fovChange = lerp(this.camera.fov, this.fovTarget, lerpPercentage);\r\n    if (fovChange !== 0) {\r\n      this.camera.fov += fovChange * delta * 6;\r\n      updateCamera = true;\r\n    }\r\n\r\n    if (typeof this.options.distortion === 'object' && this.options.distortion.getJS) {\r\n      const distortion = this.options.distortion.getJS(0.025, time);\r\n      this.camera.lookAt(\r\n        new THREE.Vector3(\r\n          this.camera.position.x + distortion.x,\r\n          this.camera.position.y + distortion.y,\r\n          this.camera.position.z + distortion.z\r\n        )\r\n      );\r\n      updateCamera = true;\r\n    }\r\n\r\n    if (updateCamera) {\r\n      this.camera.updateProjectionMatrix();\r\n    }\r\n  }\r\n\r\n  render(delta: number) {\r\n    this.composer.render(delta);\r\n  }\r\n\r\n  dispose() {\r\n    this.disposed = true;\r\n\r\n    if (this.renderer) {\r\n      this.renderer.dispose();\r\n    }\r\n    if (this.composer) {\r\n      this.composer.dispose();\r\n    }\r\n    if (this.scene) {\r\n      this.scene.clear();\r\n    }\r\n\r\n    window.removeEventListener('resize', this.onWindowResize.bind(this));\r\n    if (this.container) {\r\n      this.container.removeEventListener('mousedown', this.onMouseDown);\r\n      this.container.removeEventListener('mouseup', this.onMouseUp);\r\n      this.container.removeEventListener('mouseout', this.onMouseUp);\r\n\r\n      this.container.removeEventListener('touchstart', this.onTouchStart);\r\n      this.container.removeEventListener('touchend', this.onTouchEnd);\r\n      this.container.removeEventListener('touchcancel', this.onTouchEnd);\r\n      this.container.removeEventListener('contextmenu', this.onContextMenu);\r\n    }\r\n  }\r\n\r\n  setSize(width: number, height: number, updateStyles: boolean) {\r\n    this.composer.setSize(width, height, updateStyles);\r\n  }\r\n\r\n  tick() {\r\n    if (this.disposed || !this) return;\r\n    if (resizeRendererToDisplaySize(this.renderer, this.setSize)) {\r\n      const canvas = this.renderer.domElement;\r\n      this.camera.aspect = canvas.clientWidth / canvas.clientHeight;\r\n      this.camera.updateProjectionMatrix();\r\n    }\r\n    const delta = this.clock.getDelta();\r\n    this.render(delta);\r\n    this.update(delta);\r\n    requestAnimationFrame(this.tick);\r\n  }\r\n}\r\n\r\nconst Hyperspeed: FC<HyperspeedProps> = ({ effectOptions = {} }) => {\r\n  const mergedOptions: HyperspeedOptions = {\r\n    ...defaultOptions,\r\n    ...effectOptions\r\n  };\r\n  const hyperspeed = useRef<HTMLDivElement>(null);\r\n  const appRef = useRef<App | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (appRef.current) {\r\n      appRef.current.dispose();\r\n      const container = document.getElementById('lights');\r\n      if (container) {\r\n        while (container.firstChild) {\r\n          container.removeChild(container.firstChild);\r\n        }\r\n      }\r\n    }\r\n\r\n    const container = hyperspeed.current;\r\n    if (!container) return;\r\n\r\n    const options = { ...mergedOptions };\r\n    if (typeof options.distortion === 'string') {\r\n      options.distortion = distortions[options.distortion];\r\n    }\r\n\r\n    const myApp = new App(container, options);\r\n    appRef.current = myApp;\r\n    myApp.loadAssets().then(myApp.init);\r\n\r\n    return () => {\r\n      if (appRef.current) {\r\n        appRef.current.dispose();\r\n      }\r\n    };\r\n  }, [mergedOptions]);\r\n\r\n  return <div id=\"lights\" ref={hyperspeed}></div>;\r\n};\r\n\r\nexport default Hyperspeed;\r\n","size_bytes":39576},"client/src/components/HyperspeedCSS.tsx":{"content":"import './HyperspeedCSS.css';\n\nconst HyperspeedCSS = () => {\n  return (\n    <div className=\"hyperspeed-css-container\">\n      <div className=\"road-lines\">\n        {[...Array(20)].map((_, i) => (\n          <div key={i} className=\"road-line\" style={{ animationDelay: `${i * 0.1}s` }} />\n        ))}\n      </div>\n      <div className=\"car-lights left\">\n        {[...Array(15)].map((_, i) => (\n          <div \n            key={i} \n            className=\"car-light\" \n            style={{ \n              animationDelay: `${i * 0.3}s`,\n              left: `${20 + Math.random() * 10}%`\n            }} \n          />\n        ))}\n      </div>\n      <div className=\"car-lights right\">\n        {[...Array(15)].map((_, i) => (\n          <div \n            key={i} \n            className=\"car-light\" \n            style={{ \n              animationDelay: `${i * 0.3}s`,\n              right: `${20 + Math.random() * 10}%`\n            }} \n          />\n        ))}\n      </div>\n      <div className=\"side-lights left\">\n        {[...Array(10)].map((_, i) => (\n          <div key={i} className=\"side-light\" style={{ animationDelay: `${i * 0.5}s` }} />\n        ))}\n      </div>\n      <div className=\"side-lights right\">\n        {[...Array(10)].map((_, i) => (\n          <div key={i} className=\"side-light\" style={{ animationDelay: `${i * 0.5}s` }} />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default HyperspeedCSS;\n","size_bytes":1402},"client/src/components/Hyperspeed.css":{"content":".hyperspeed-container {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  overflow: hidden;\n}\n\n.hyperspeed-container canvas {\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n","size_bytes":203},"client/src/components/SplitText.tsx":{"content":"import React, { useRef, useEffect, useState } from 'react';\nimport { gsap } from 'gsap';\nimport { ScrollTrigger } from 'gsap/ScrollTrigger';\nimport { SplitText as GSAPSplitText } from 'gsap/SplitText';\nimport { useGSAP } from '@gsap/react';\n\ngsap.registerPlugin(ScrollTrigger, GSAPSplitText, useGSAP);\n\nexport interface SplitTextProps {\n  text: string;\n  className?: string;\n  delay?: number;\n  duration?: number;\n  ease?: string | ((t: number) => number);\n  splitType?: 'chars' | 'words' | 'lines' | 'words, chars';\n  from?: gsap.TweenVars;\n  to?: gsap.TweenVars;\n  threshold?: number;\n  rootMargin?: string;\n  tag?: 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6' | 'p' | 'span';\n  textAlign?: React.CSSProperties['textAlign'];\n  onLetterAnimationComplete?: () => void;\n}\n\nconst SplitText: React.FC<SplitTextProps> = ({\n  text,\n  className = '',\n  delay = 100,\n  duration = 0.6,\n  ease = 'power3.out',\n  splitType = 'chars',\n  from = { opacity: 0, y: 40 },\n  to = { opacity: 1, y: 0 },\n  threshold = 0.1,\n  rootMargin = '-100px',\n  textAlign = 'center',\n  tag = 'p',\n  onLetterAnimationComplete\n}) => {\n  const ref = useRef<HTMLParagraphElement>(null);\n  const animationCompletedRef = useRef(false);\n  const [fontsLoaded, setFontsLoaded] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (document.fonts.status === 'loaded') {\n      setFontsLoaded(true);\n    } else {\n      document.fonts.ready.then(() => {\n        setFontsLoaded(true);\n      });\n    }\n  }, []);\n\n  useGSAP(\n    () => {\n      if (!ref.current || !text || !fontsLoaded) return;\n\n      const el = ref.current as HTMLElement & {\n        _rbsplitInstance?: GSAPSplitText;\n      };\n\n      if (el._rbsplitInstance) {\n        try {\n          el._rbsplitInstance.revert();\n        } catch (_) {}\n        el._rbsplitInstance = undefined;\n      }\n\n      const startPct = (1 - threshold) * 100;\n      const marginMatch = /^(-?\\d+(?:\\.\\d+)?)(px|em|rem|%)?$/.exec(rootMargin);\n      const marginValue = marginMatch ? parseFloat(marginMatch[1]) : 0;\n      const marginUnit = marginMatch ? marginMatch[2] || 'px' : 'px';\n      const sign =\n        marginValue === 0\n          ? ''\n          : marginValue < 0\n            ? `-=${Math.abs(marginValue)}${marginUnit}`\n            : `+=${marginValue}${marginUnit}`;\n      const start = `top ${startPct}%${sign}`;\n      let targets: Element[] = [];\n      const assignTargets = (self: GSAPSplitText) => {\n        if (splitType.includes('chars') && self.chars.length) targets = self.chars;\n        if (!targets.length && splitType.includes('words') && self.words.length) targets = self.words;\n        if (!targets.length && splitType.includes('lines') && self.lines.length) targets = self.lines;\n        if (!targets.length) targets = self.chars || self.words || self.lines;\n      };\n      const splitInstance = new GSAPSplitText(el, {\n        type: splitType,\n        smartWrap: true,\n        autoSplit: splitType === 'lines',\n        linesClass: 'split-line',\n        wordsClass: 'split-word',\n        charsClass: 'split-char',\n        reduceWhiteSpace: false,\n        onSplit: (self: GSAPSplitText) => {\n          assignTargets(self);\n          return gsap.fromTo(\n            targets,\n            { ...from },\n            {\n              ...to,\n              duration,\n              ease,\n              stagger: delay / 1000,\n              scrollTrigger: {\n                trigger: el,\n                start,\n                once: true,\n                fastScrollEnd: true,\n                anticipatePin: 0.4\n              },\n              onComplete: () => {\n                animationCompletedRef.current = true;\n                onLetterAnimationComplete?.();\n              },\n              willChange: 'transform, opacity',\n              force3D: true\n            }\n          );\n        }\n      });\n      el._rbsplitInstance = splitInstance;\n      return () => {\n        ScrollTrigger.getAll().forEach(st => {\n          if (st.trigger === el) st.kill();\n        });\n        try {\n          splitInstance.revert();\n        } catch (_) {}\n        el._rbsplitInstance = undefined;\n      };\n    },\n    {\n      dependencies: [\n        text,\n        delay,\n        duration,\n        ease,\n        splitType,\n        JSON.stringify(from),\n        JSON.stringify(to),\n        threshold,\n        rootMargin,\n        fontsLoaded,\n        onLetterAnimationComplete\n      ],\n      scope: ref\n    }\n  );\n\n  const renderTag = () => {\n    const style: React.CSSProperties = {\n      textAlign,\n      overflow: 'hidden',\n      display: 'inline-block',\n      whiteSpace: 'normal',\n      wordWrap: 'break-word',\n      willChange: 'transform, opacity'\n    };\n    const classes = `split-parent ${className}`;\n    switch (tag) {\n      case 'h1':\n        return (\n          <h1 ref={ref} style={style} className={classes}>\n            {text}\n          </h1>\n        );\n      case 'h2':\n        return (\n          <h2 ref={ref} style={style} className={classes}>\n            {text}\n          </h2>\n        );\n      case 'h3':\n        return (\n          <h3 ref={ref} style={style} className={classes}>\n            {text}\n          </h3>\n        );\n      case 'h4':\n        return (\n          <h4 ref={ref} style={style} className={classes}>\n            {text}\n          </h4>\n        );\n      case 'h5':\n        return (\n          <h5 ref={ref} style={style} className={classes}>\n            {text}\n          </h5>\n        );\n      case 'h6':\n        return (\n          <h6 ref={ref} style={style} className={classes}>\n            {text}\n          </h6>\n        );\n      default:\n        return (\n          <p ref={ref} style={style} className={classes}>\n            {text}\n          </p>\n        );\n    }\n  };\n  return renderTag();\n};\n\nexport default SplitText;\n","size_bytes":5741},"client/src/components/Ballpit.tsx":{"content":"import React, { useRef, useEffect } from 'react';\nimport {\n  Clock,\n  PerspectiveCamera,\n  Scene,\n  WebGLRenderer,\n  WebGLRendererParameters,\n  SRGBColorSpace,\n  MathUtils,\n  Vector2,\n  Vector3,\n  MeshPhysicalMaterial,\n  ShaderChunk,\n  Color,\n  Object3D,\n  InstancedMesh,\n  PMREMGenerator,\n  SphereGeometry,\n  AmbientLight,\n  PointLight,\n  ACESFilmicToneMapping,\n  Raycaster,\n  Plane\n} from 'three';\nimport { RoomEnvironment } from 'three/examples/jsm/environments/RoomEnvironment.js';\nimport { Observer } from 'gsap/Observer';\nimport { gsap } from 'gsap';\n\ngsap.registerPlugin(Observer);\n\ninterface XConfig {\n  canvas?: HTMLCanvasElement;\n  id?: string;\n  rendererOptions?: Partial<WebGLRendererParameters>;\n  size?: 'parent' | { width: number; height: number };\n}\n\ninterface SizeData {\n  width: number;\n  height: number;\n  wWidth: number;\n  wHeight: number;\n  ratio: number;\n  pixelRatio: number;\n}\n\nclass X {\n  #config: XConfig;\n  #postprocessing: any;\n  #resizeObserver?: ResizeObserver;\n  #intersectionObserver?: IntersectionObserver;\n  #resizeTimer?: number;\n  #animationFrameId: number = 0;\n  #clock: Clock = new Clock();\n  #animationState = { elapsed: 0, delta: 0 };\n  #isAnimating: boolean = false;\n  #isVisible: boolean = false;\n\n  canvas!: HTMLCanvasElement;\n  camera!: PerspectiveCamera;\n  cameraMinAspect?: number;\n  cameraMaxAspect?: number;\n  cameraFov!: number;\n  maxPixelRatio?: number;\n  minPixelRatio?: number;\n  scene!: Scene;\n  renderer!: WebGLRenderer;\n  size: SizeData = {\n    width: 0,\n    height: 0,\n    wWidth: 0,\n    wHeight: 0,\n    ratio: 0,\n    pixelRatio: 0\n  };\n\n  render: () => void = this.#render.bind(this);\n  onBeforeRender: (state: { elapsed: number; delta: number }) => void = () => {};\n  onAfterRender: (state: { elapsed: number; delta: number }) => void = () => {};\n  onAfterResize: (size: SizeData) => void = () => {};\n  isDisposed: boolean = false;\n\n  constructor(config: XConfig) {\n    this.#config = { ...config };\n    this.#initCamera();\n    this.#initScene();\n    this.#initRenderer();\n    this.resize();\n    this.#initObservers();\n  }\n\n  #initCamera() {\n    this.camera = new PerspectiveCamera();\n    this.cameraFov = this.camera.fov;\n  }\n\n  #initScene() {\n    this.scene = new Scene();\n  }\n\n  #initRenderer() {\n    if (this.#config.canvas) {\n      this.canvas = this.#config.canvas;\n    } else if (this.#config.id) {\n      const elem = document.getElementById(this.#config.id);\n      if (elem instanceof HTMLCanvasElement) {\n        this.canvas = elem;\n      } else {\n        console.error('Three: Missing canvas or id parameter');\n      }\n    } else {\n      console.error('Three: Missing canvas or id parameter');\n    }\n    this.canvas!.style.display = 'block';\n    const rendererOptions: WebGLRendererParameters = {\n      canvas: this.canvas,\n      powerPreference: 'high-performance',\n      ...(this.#config.rendererOptions ?? {})\n    };\n    this.renderer = new WebGLRenderer(rendererOptions);\n    this.renderer.outputColorSpace = SRGBColorSpace;\n  }\n\n  #initObservers() {\n    if (!(this.#config.size instanceof Object)) {\n      window.addEventListener('resize', this.#onResize.bind(this));\n      if (this.#config.size === 'parent' && this.canvas.parentNode) {\n        this.#resizeObserver = new ResizeObserver(this.#onResize.bind(this));\n        this.#resizeObserver.observe(this.canvas.parentNode as Element);\n      }\n    }\n    this.#intersectionObserver = new IntersectionObserver(this.#onIntersection.bind(this), {\n      root: null,\n      rootMargin: '0px',\n      threshold: 0\n    });\n    this.#intersectionObserver.observe(this.canvas);\n    document.addEventListener('visibilitychange', this.#onVisibilityChange.bind(this));\n  }\n\n  #onResize() {\n    if (this.#resizeTimer) clearTimeout(this.#resizeTimer);\n    this.#resizeTimer = window.setTimeout(this.resize.bind(this), 100);\n  }\n\n  resize() {\n    let w: number, h: number;\n    if (this.#config.size instanceof Object) {\n      w = this.#config.size.width;\n      h = this.#config.size.height;\n    } else if (this.#config.size === 'parent' && this.canvas.parentNode) {\n      w = (this.canvas.parentNode as HTMLElement).offsetWidth;\n      h = (this.canvas.parentNode as HTMLElement).offsetHeight;\n    } else {\n      w = window.innerWidth;\n      h = window.innerHeight;\n    }\n    this.size.width = w;\n    this.size.height = h;\n    this.size.ratio = w / h;\n    this.#updateCamera();\n    this.#updateRenderer();\n    this.onAfterResize(this.size);\n  }\n\n  #updateCamera() {\n    this.camera.aspect = this.size.width / this.size.height;\n    if (this.camera.isPerspectiveCamera && this.cameraFov) {\n      if (this.cameraMinAspect && this.camera.aspect < this.cameraMinAspect) {\n        this.#adjustFov(this.cameraMinAspect);\n      } else if (this.cameraMaxAspect && this.camera.aspect > this.cameraMaxAspect) {\n        this.#adjustFov(this.cameraMaxAspect);\n      } else {\n        this.camera.fov = this.cameraFov;\n      }\n    }\n    this.camera.updateProjectionMatrix();\n    this.updateWorldSize();\n  }\n\n  #adjustFov(aspect: number) {\n    const tanFov = Math.tan(MathUtils.degToRad(this.cameraFov / 2));\n    const newTan = tanFov / (this.camera.aspect / aspect);\n    this.camera.fov = 2 * MathUtils.radToDeg(Math.atan(newTan));\n  }\n\n  updateWorldSize() {\n    if (this.camera.isPerspectiveCamera) {\n      const fovRad = (this.camera.fov * Math.PI) / 180;\n      this.size.wHeight = 2 * Math.tan(fovRad / 2) * this.camera.position.length();\n      this.size.wWidth = this.size.wHeight * this.camera.aspect;\n    } else if ((this.camera as any).isOrthographicCamera) {\n      const cam = this.camera as any;\n      this.size.wHeight = cam.top - cam.bottom;\n      this.size.wWidth = cam.right - cam.left;\n    }\n  }\n\n  #updateRenderer() {\n    this.renderer.setSize(this.size.width, this.size.height);\n    this.#postprocessing?.setSize(this.size.width, this.size.height);\n    let pr = window.devicePixelRatio;\n    if (this.maxPixelRatio && pr > this.maxPixelRatio) {\n      pr = this.maxPixelRatio;\n    } else if (this.minPixelRatio && pr < this.minPixelRatio) {\n      pr = this.minPixelRatio;\n    }\n    this.renderer.setPixelRatio(pr);\n    this.size.pixelRatio = pr;\n  }\n\n  get postprocessing() {\n    return this.#postprocessing;\n  }\n  set postprocessing(value: any) {\n    this.#postprocessing = value;\n    this.render = value.render.bind(value);\n  }\n\n  #onIntersection(entries: IntersectionObserverEntry[]) {\n    this.#isAnimating = entries[0].isIntersecting;\n    this.#isAnimating ? this.#startAnimation() : this.#stopAnimation();\n  }\n\n  #onVisibilityChange() {\n    if (this.#isAnimating) {\n      document.hidden ? this.#stopAnimation() : this.#startAnimation();\n    }\n  }\n\n  #startAnimation() {\n    if (this.#isVisible) return;\n    const animateFrame = () => {\n      this.#animationFrameId = requestAnimationFrame(animateFrame);\n      this.#animationState.delta = this.#clock.getDelta();\n      this.#animationState.elapsed += this.#animationState.delta;\n      this.onBeforeRender(this.#animationState);\n      this.render();\n      this.onAfterRender(this.#animationState);\n    };\n    this.#isVisible = true;\n    this.#clock.start();\n    animateFrame();\n  }\n\n  #stopAnimation() {\n    if (this.#isVisible) {\n      cancelAnimationFrame(this.#animationFrameId);\n      this.#isVisible = false;\n      this.#clock.stop();\n    }\n  }\n\n  #render() {\n    this.renderer.render(this.scene, this.camera);\n  }\n\n  clear() {\n    this.scene.traverse(obj => {\n      if ((obj as any).isMesh && typeof (obj as any).material === 'object' && (obj as any).material !== null) {\n        Object.keys((obj as any).material).forEach(key => {\n          const matProp = (obj as any).material[key];\n          if (matProp && typeof matProp === 'object' && typeof matProp.dispose === 'function') {\n            matProp.dispose();\n          }\n        });\n        (obj as any).material.dispose();\n        (obj as any).geometry.dispose();\n      }\n    });\n    this.scene.clear();\n  }\n\n  dispose() {\n    this.#onResizeCleanup();\n    this.#stopAnimation();\n    this.clear();\n    this.#postprocessing?.dispose();\n    this.renderer.dispose();\n    this.isDisposed = true;\n  }\n\n  #onResizeCleanup() {\n    window.removeEventListener('resize', this.#onResize.bind(this));\n    this.#resizeObserver?.disconnect();\n    this.#intersectionObserver?.disconnect();\n    document.removeEventListener('visibilitychange', this.#onVisibilityChange.bind(this));\n  }\n}\n\ninterface WConfig {\n  count: number;\n  maxX: number;\n  maxY: number;\n  maxZ: number;\n  maxSize: number;\n  minSize: number;\n  size0: number;\n  gravity: number;\n  friction: number;\n  wallBounce: number;\n  maxVelocity: number;\n  controlSphere0?: boolean;\n  followCursor?: boolean;\n}\n\nclass W {\n  config: WConfig;\n  positionData: Float32Array;\n  velocityData: Float32Array;\n  sizeData: Float32Array;\n  center: Vector3 = new Vector3();\n\n  constructor(config: WConfig) {\n    this.config = config;\n    this.positionData = new Float32Array(3 * config.count).fill(0);\n    this.velocityData = new Float32Array(3 * config.count).fill(0);\n    this.sizeData = new Float32Array(config.count).fill(1);\n    this.center = new Vector3();\n    this.#initializePositions();\n    this.setSizes();\n  }\n\n  #initializePositions() {\n    const { config, positionData } = this;\n    this.center.toArray(positionData, 0);\n    for (let i = 1; i < config.count; i++) {\n      const idx = 3 * i;\n      positionData[idx] = MathUtils.randFloatSpread(2 * config.maxX);\n      positionData[idx + 1] = MathUtils.randFloatSpread(2 * config.maxY);\n      positionData[idx + 2] = MathUtils.randFloatSpread(2 * config.maxZ);\n    }\n  }\n\n  setSizes() {\n    const { config, sizeData } = this;\n    sizeData[0] = config.size0;\n    for (let i = 1; i < config.count; i++) {\n      sizeData[i] = MathUtils.randFloat(config.minSize, config.maxSize);\n    }\n  }\n\n  update(deltaInfo: { delta: number }) {\n    const { config, center, positionData, sizeData, velocityData } = this;\n    let startIdx = 0;\n    if (config.controlSphere0) {\n      startIdx = 1;\n      const firstVec = new Vector3().fromArray(positionData, 0);\n      firstVec.lerp(center, 0.1).toArray(positionData, 0);\n      new Vector3(0, 0, 0).toArray(velocityData, 0);\n    }\n    for (let idx = startIdx; idx < config.count; idx++) {\n      const base = 3 * idx;\n      const pos = new Vector3().fromArray(positionData, base);\n      const vel = new Vector3().fromArray(velocityData, base);\n      vel.y -= deltaInfo.delta * config.gravity * sizeData[idx];\n      vel.multiplyScalar(config.friction);\n      vel.clampLength(0, config.maxVelocity);\n      pos.add(vel);\n      pos.toArray(positionData, base);\n      vel.toArray(velocityData, base);\n    }\n    for (let idx = startIdx; idx < config.count; idx++) {\n      const base = 3 * idx;\n      const pos = new Vector3().fromArray(positionData, base);\n      const vel = new Vector3().fromArray(velocityData, base);\n      const radius = sizeData[idx];\n      for (let jdx = idx + 1; jdx < config.count; jdx++) {\n        const otherBase = 3 * jdx;\n        const otherPos = new Vector3().fromArray(positionData, otherBase);\n        const otherVel = new Vector3().fromArray(velocityData, otherBase);\n        const diff = new Vector3().copy(otherPos).sub(pos);\n        const dist = diff.length();\n        const sumRadius = radius + sizeData[jdx];\n        if (dist < sumRadius) {\n          const overlap = sumRadius - dist;\n          const correction = diff.normalize().multiplyScalar(0.5 * overlap);\n          const velCorrection = correction.clone().multiplyScalar(Math.max(vel.length(), 1));\n          pos.sub(correction);\n          vel.sub(velCorrection);\n          pos.toArray(positionData, base);\n          vel.toArray(velocityData, base);\n          otherPos.add(correction);\n          otherVel.add(correction.clone().multiplyScalar(Math.max(otherVel.length(), 1)));\n          otherPos.toArray(positionData, otherBase);\n          otherVel.toArray(velocityData, otherBase);\n        }\n      }\n      if (config.controlSphere0) {\n        const diff = new Vector3().copy(new Vector3().fromArray(positionData, 0)).sub(pos);\n        const d = diff.length();\n        const sumRadius0 = radius + sizeData[0];\n        if (d < sumRadius0) {\n          const correction = diff.normalize().multiplyScalar(sumRadius0 - d);\n          const velCorrection = correction.clone().multiplyScalar(Math.max(vel.length(), 2));\n          pos.sub(correction);\n          vel.sub(velCorrection);\n        }\n      }\n      if (Math.abs(pos.x) + radius > config.maxX) {\n        pos.x = Math.sign(pos.x) * (config.maxX - radius);\n        vel.x = -vel.x * config.wallBounce;\n      }\n      if (config.gravity === 0) {\n        if (Math.abs(pos.y) + radius > config.maxY) {\n          pos.y = Math.sign(pos.y) * (config.maxY - radius);\n          vel.y = -vel.y * config.wallBounce;\n        }\n      } else if (pos.y - radius < -config.maxY) {\n        pos.y = -config.maxY + radius;\n        vel.y = -vel.y * config.wallBounce;\n      }\n      const maxBoundary = Math.max(config.maxZ, config.maxSize);\n      if (Math.abs(pos.z) + radius > maxBoundary) {\n        pos.z = Math.sign(pos.z) * (config.maxZ - radius);\n        vel.z = -vel.z * config.wallBounce;\n      }\n      pos.toArray(positionData, base);\n      vel.toArray(velocityData, base);\n    }\n  }\n}\n\nclass Y extends MeshPhysicalMaterial {\n  uniforms: { [key: string]: { value: any } } = {\n    thicknessDistortion: { value: 0.1 },\n    thicknessAmbient: { value: 0 },\n    thicknessAttenuation: { value: 0.1 },\n    thicknessPower: { value: 2 },\n    thicknessScale: { value: 10 }\n  };\n\n  constructor(params: any) {\n    super(params);\n    this.defines = { USE_UV: '' };\n    this.onBeforeCompile = shader => {\n      Object.assign(shader.uniforms, this.uniforms);\n      shader.fragmentShader =\n        `\n        uniform float thicknessPower;\n        uniform float thicknessScale;\n        uniform float thicknessDistortion;\n        uniform float thicknessAmbient;\n        uniform float thicknessAttenuation;\n        ` + shader.fragmentShader;\n      shader.fragmentShader = shader.fragmentShader.replace(\n        'void main() {',\n        `\n        void RE_Direct_Scattering(const in IncidentLight directLight, const in vec2 uv, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, inout ReflectedLight reflectedLight) {\n          vec3 scatteringHalf = normalize(directLight.direction + (geometryNormal * thicknessDistortion));\n          float scatteringDot = pow(saturate(dot(geometryViewDir, -scatteringHalf)), thicknessPower) * thicknessScale;\n          #ifdef USE_COLOR\n            vec3 scatteringIllu = (scatteringDot + thicknessAmbient) * vColor;\n          #else\n            vec3 scatteringIllu = (scatteringDot + thicknessAmbient) * diffuse;\n          #endif\n          reflectedLight.directDiffuse += scatteringIllu * thicknessAttenuation * directLight.color;\n        }\n\n        void main() {\n        `\n      );\n      const lightsChunk = ShaderChunk.lights_fragment_begin.replaceAll(\n        'RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );',\n        `\n          RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n          RE_Direct_Scattering(directLight, vUv, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, reflectedLight);\n        `\n      );\n      shader.fragmentShader = shader.fragmentShader.replace('#include <lights_fragment_begin>', lightsChunk);\n      if (this.onBeforeCompile2) this.onBeforeCompile2(shader);\n    };\n  }\n  onBeforeCompile2?: (shader: any) => void;\n}\n\nconst getResponsiveCount = () => {\n  if (typeof window === 'undefined') return 100;\n  const width = window.innerWidth;\n  if (width < 768) return 50;\n  if (width < 1024) return 75;\n  return 100;\n};\n\nconst XConfig = {\n  count: getResponsiveCount(),\n  colors: [0x00E5FF, 0x4169E1, 0x6C5CE7],\n  ambientColor: 0xffffff,\n  ambientIntensity: 1,\n  lightIntensity: 200,\n  materialParams: {\n    metalness: 0.5,\n    roughness: 0.5,\n    clearcoat: 1,\n    clearcoatRoughness: 0.15\n  },\n  minSize: 0.5,\n  maxSize: 1,\n  size0: 1,\n  gravity: 0.01,\n  friction: 0.9975,\n  wallBounce: 0.95,\n  maxVelocity: 0.15,\n  maxX: 5,\n  maxY: 5,\n  maxZ: 2,\n  controlSphere0: false,\n  followCursor: true\n};\n\nconst U = new Object3D();\n\nlet globalPointerActive = false;\nconst pointerPosition = new Vector2();\n\ninterface PointerData {\n  position: Vector2;\n  nPosition: Vector2;\n  hover: boolean;\n  touching: boolean;\n  onEnter: (data: PointerData) => void;\n  onMove: (data: PointerData) => void;\n  onClick: (data: PointerData) => void;\n  onLeave: (data: PointerData) => void;\n  dispose?: () => void;\n}\n\nconst pointerMap = new Map<HTMLElement, PointerData>();\n\nfunction createPointerData(options: Partial<PointerData> & { domElement: HTMLElement }): PointerData {\n  const defaultData: PointerData = {\n    position: new Vector2(),\n    nPosition: new Vector2(),\n    hover: false,\n    touching: false,\n    onEnter: () => {},\n    onMove: () => {},\n    onClick: () => {},\n    onLeave: () => {},\n    ...options\n  };\n  if (!pointerMap.has(options.domElement)) {\n    pointerMap.set(options.domElement, defaultData);\n    if (!globalPointerActive) {\n      document.body.addEventListener('pointermove', onPointerMove as EventListener);\n      document.body.addEventListener('pointerleave', onPointerLeave as EventListener);\n      document.body.addEventListener('click', onPointerClick as EventListener);\n\n      document.body.addEventListener('touchstart', onTouchStart as EventListener, { passive: false });\n      document.body.addEventListener('touchmove', onTouchMove as EventListener, { passive: false });\n      document.body.addEventListener('touchend', onTouchEnd as EventListener, { passive: false });\n      document.body.addEventListener('touchcancel', onTouchEnd as EventListener, { passive: false });\n      globalPointerActive = true;\n    }\n  }\n  defaultData.dispose = () => {\n    pointerMap.delete(options.domElement);\n    if (pointerMap.size === 0) {\n      document.body.removeEventListener('pointermove', onPointerMove as EventListener);\n      document.body.removeEventListener('pointerleave', onPointerLeave as EventListener);\n      document.body.removeEventListener('click', onPointerClick as EventListener);\n\n      document.body.removeEventListener('touchstart', onTouchStart as EventListener);\n      document.body.removeEventListener('touchmove', onTouchMove as EventListener);\n      document.body.removeEventListener('touchend', onTouchEnd as EventListener);\n      document.body.removeEventListener('touchcancel', onTouchEnd as EventListener);\n      globalPointerActive = false;\n    }\n  };\n  return defaultData;\n}\n\nfunction onPointerMove(e: PointerEvent) {\n  pointerPosition.set(e.clientX, e.clientY);\n  processPointerInteraction();\n}\n\nfunction processPointerInteraction() {\n  for (const [elem, data] of pointerMap) {\n    const rect = elem.getBoundingClientRect();\n    if (isInside(rect)) {\n      updatePointerData(data, rect);\n      if (!data.hover) {\n        data.hover = true;\n        data.onEnter(data);\n      }\n      data.onMove(data);\n    } else if (data.hover && !data.touching) {\n      data.hover = false;\n      data.onLeave(data);\n    }\n  }\n}\n\nfunction onTouchStart(e: TouchEvent) {\n  if (e.touches.length > 0) {\n    e.preventDefault();\n    pointerPosition.set(e.touches[0].clientX, e.touches[0].clientY);\n    for (const [elem, data] of pointerMap) {\n      const rect = elem.getBoundingClientRect();\n      if (isInside(rect)) {\n        data.touching = true;\n        updatePointerData(data, rect);\n        if (!data.hover) {\n          data.hover = true;\n          data.onEnter(data);\n        }\n        data.onMove(data);\n      }\n    }\n  }\n}\n\nfunction onTouchMove(e: TouchEvent) {\n  if (e.touches.length > 0) {\n    e.preventDefault();\n    pointerPosition.set(e.touches[0].clientX, e.touches[0].clientY);\n    for (const [elem, data] of pointerMap) {\n      const rect = elem.getBoundingClientRect();\n      updatePointerData(data, rect);\n      if (isInside(rect)) {\n        if (!data.hover) {\n          data.hover = true;\n          data.touching = true;\n          data.onEnter(data);\n        }\n        data.onMove(data);\n      } else if (data.hover && data.touching) {\n        data.onMove(data);\n      }\n    }\n  }\n}\n\nfunction onTouchEnd() {\n  for (const [, data] of pointerMap) {\n    if (data.touching) {\n      data.touching = false;\n      if (data.hover) {\n        data.hover = false;\n        data.onLeave(data);\n      }\n    }\n  }\n}\n\nfunction onPointerClick(e: PointerEvent) {\n  pointerPosition.set(e.clientX, e.clientY);\n  for (const [elem, data] of pointerMap) {\n    const rect = elem.getBoundingClientRect();\n    updatePointerData(data, rect);\n    if (isInside(rect)) data.onClick(data);\n  }\n}\n\nfunction onPointerLeave() {\n  for (const data of pointerMap.values()) {\n    if (data.hover) {\n      data.hover = false;\n      data.onLeave(data);\n    }\n  }\n}\n\nfunction updatePointerData(data: PointerData, rect: DOMRect) {\n  data.position.set(pointerPosition.x - rect.left, pointerPosition.y - rect.top);\n  data.nPosition.set((data.position.x / rect.width) * 2 - 1, (-data.position.y / rect.height) * 2 + 1);\n}\n\nfunction isInside(rect: DOMRect) {\n  return (\n    pointerPosition.x >= rect.left &&\n    pointerPosition.x <= rect.left + rect.width &&\n    pointerPosition.y >= rect.top &&\n    pointerPosition.y <= rect.top + rect.height\n  );\n}\n\nclass Z extends InstancedMesh {\n  config: typeof XConfig;\n  physics: W;\n  ambientLight: AmbientLight | undefined;\n  light: PointLight | undefined;\n\n  constructor(renderer: WebGLRenderer, params: Partial<typeof XConfig> = {}) {\n    const config = { ...XConfig, ...params };\n    const roomEnv = new RoomEnvironment();\n    const pmrem = new PMREMGenerator(renderer);\n    const envTexture = pmrem.fromScene(roomEnv).texture;\n    const geometry = new SphereGeometry();\n    const material = new Y({ envMap: envTexture, ...config.materialParams });\n    material.envMapRotation.x = -Math.PI / 2;\n    super(geometry, material, config.count);\n    this.config = config;\n    this.physics = new W(config);\n    this.#setupLights();\n    this.setColors(config.colors);\n  }\n\n  #setupLights() {\n    this.ambientLight = new AmbientLight(this.config.ambientColor, this.config.ambientIntensity);\n    this.add(this.ambientLight);\n    this.light = new PointLight(this.config.colors[0], this.config.lightIntensity);\n    this.add(this.light);\n  }\n\n  setColors(colors: number[]) {\n    if (Array.isArray(colors) && colors.length > 1) {\n      const colorUtils = (function (colorsArr: number[]) {\n        let baseColors: number[] = colorsArr;\n        let colorObjects: Color[] = [];\n        baseColors.forEach(col => {\n          colorObjects.push(new Color(col));\n        });\n        return {\n          setColors: (cols: number[]) => {\n            baseColors = cols;\n            colorObjects = [];\n            baseColors.forEach(col => {\n              colorObjects.push(new Color(col));\n            });\n          },\n          getColorAt: (ratio: number, out: Color = new Color()) => {\n            const clamped = Math.max(0, Math.min(1, ratio));\n            const scaled = clamped * (baseColors.length - 1);\n            const idx = Math.floor(scaled);\n            const start = colorObjects[idx];\n            if (idx >= baseColors.length - 1) return start.clone();\n            const alpha = scaled - idx;\n            const end = colorObjects[idx + 1];\n            out.r = start.r + alpha * (end.r - start.r);\n            out.g = start.g + alpha * (end.g - start.g);\n            out.b = start.b + alpha * (end.b - start.b);\n            return out;\n          }\n        };\n      })(colors);\n      for (let idx = 0; idx < this.count; idx++) {\n        this.setColorAt(idx, colorUtils.getColorAt(idx / this.count));\n        if (idx === 0) {\n          this.light!.color.copy(colorUtils.getColorAt(idx / this.count));\n        }\n      }\n\n      if (!this.instanceColor) return;\n      this.instanceColor.needsUpdate = true;\n    }\n  }\n\n  update(deltaInfo: { delta: number }) {\n    this.physics.update(deltaInfo);\n    for (let idx = 0; idx < this.count; idx++) {\n      U.position.fromArray(this.physics.positionData, 3 * idx);\n      if (idx === 0 && this.config.followCursor === false) {\n        U.scale.setScalar(0);\n      } else {\n        U.scale.setScalar(this.physics.sizeData[idx]);\n      }\n      U.updateMatrix();\n      this.setMatrixAt(idx, U.matrix);\n      if (idx === 0) this.light!.position.copy(U.position);\n    }\n    this.instanceMatrix.needsUpdate = true;\n  }\n}\n\ninterface CreateBallpitReturn {\n  three: X;\n  spheres: Z;\n  setCount: (count: number) => void;\n  togglePause: () => void;\n  dispose: () => void;\n}\n\nfunction createBallpit(canvas: HTMLCanvasElement, config: any = {}): CreateBallpitReturn {\n  const threeInstance = new X({\n    canvas,\n    size: 'parent',\n    rendererOptions: { antialias: true, alpha: true }\n  });\n  let spheres: Z;\n  threeInstance.renderer.toneMapping = ACESFilmicToneMapping;\n  threeInstance.camera.position.set(0, 0, 20);\n  threeInstance.camera.lookAt(0, 0, 0);\n  threeInstance.cameraMaxAspect = 1.5;\n  threeInstance.resize();\n  initialize(config);\n  const raycaster = new Raycaster();\n  const plane = new Plane(new Vector3(0, 0, 1), 0);\n  const intersectionPoint = new Vector3();\n  let isPaused = false;\n\n  canvas.style.touchAction = 'none';\n  canvas.style.userSelect = 'none';\n  (canvas.style as any).webkitUserSelect = 'none';\n\n  const pointerData = createPointerData({\n    domElement: canvas,\n    onMove() {\n      raycaster.setFromCamera(pointerData.nPosition, threeInstance.camera);\n      threeInstance.camera.getWorldDirection(plane.normal);\n      raycaster.ray.intersectPlane(plane, intersectionPoint);\n      spheres.physics.center.copy(intersectionPoint);\n      spheres.config.controlSphere0 = true;\n    },\n    onLeave() {\n      spheres.config.controlSphere0 = false;\n    }\n  });\n  function initialize(cfg: any) {\n    if (spheres) {\n      threeInstance.clear();\n      threeInstance.scene.remove(spheres);\n    }\n    spheres = new Z(threeInstance.renderer, cfg);\n    threeInstance.scene.add(spheres);\n  }\n  threeInstance.onBeforeRender = deltaInfo => {\n    if (!isPaused) spheres.update(deltaInfo);\n  };\n  threeInstance.onAfterResize = size => {\n    spheres.config.maxX = size.wWidth / 2;\n    spheres.config.maxY = size.wHeight / 2;\n  };\n  return {\n    three: threeInstance,\n    get spheres() {\n      return spheres;\n    },\n    setCount(count: number) {\n      initialize({ ...spheres.config, count });\n    },\n    togglePause() {\n      isPaused = !isPaused;\n    },\n    dispose() {\n      pointerData.dispose?.();\n      threeInstance.dispose();\n    }\n  };\n}\n\ninterface BallpitProps {\n  className?: string;\n  followCursor?: boolean;\n  [key: string]: any;\n}\n\nconst Ballpit: React.FC<BallpitProps> = ({ className = '', followCursor = true, ...props }) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const spheresInstanceRef = useRef<CreateBallpitReturn | null>(null);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    spheresInstanceRef.current = createBallpit(canvas, {\n      followCursor,\n      ...props\n    });\n\n    return () => {\n      if (spheresInstanceRef.current) {\n        spheresInstanceRef.current.dispose();\n      }\n    };\n  }, [followCursor, props]);\n\n  return <canvas className={className} ref={canvasRef} style={{ width: '100%', height: '100%' }} />;\n};\n\nexport default Ballpit;\n","size_bytes":27553},"client/src/components/CircleGallery.tsx":{"content":"import { Camera, Mesh, Plane, Program, Renderer, Texture, Transform } from 'ogl';\nimport { useEffect, useRef } from 'react';\n\ntype GL = Renderer['gl'];\n\nfunction debounce<T extends (...args: any[]) => void>(func: T, wait: number) {\n  let timeout: number;\n  return function (this: any, ...args: Parameters<T>) {\n    window.clearTimeout(timeout);\n    timeout = window.setTimeout(() => func.apply(this, args), wait);\n  };\n}\n\nfunction lerp(p1: number, p2: number, t: number): number {\n  return p1 + (p2 - p1) * t;\n}\n\nfunction autoBind(instance: any): void {\n  const proto = Object.getPrototypeOf(instance);\n  Object.getOwnPropertyNames(proto).forEach(key => {\n    if (key !== 'constructor' && typeof instance[key] === 'function') {\n      instance[key] = instance[key].bind(instance);\n    }\n  });\n}\n\nfunction getFontSize(font: string): number {\n  const match = font.match(/(\\d+)px/);\n  return match ? parseInt(match[1], 10) : 30;\n}\n\nfunction createTextTexture(\n  gl: GL,\n  text: string,\n  font: string = 'bold 30px monospace',\n  color: string = 'black'\n): { texture: Texture; width: number; height: number } {\n  const canvas = document.createElement('canvas');\n  const context = canvas.getContext('2d');\n  if (!context) throw new Error('Could not get 2d context');\n\n  context.font = font;\n  const metrics = context.measureText(text);\n  const textWidth = Math.ceil(metrics.width);\n  const fontSize = getFontSize(font);\n  const textHeight = Math.ceil(fontSize * 1.2);\n\n  canvas.width = textWidth + 20;\n  canvas.height = textHeight + 20;\n\n  context.font = font;\n  context.fillStyle = color;\n  context.textBaseline = 'middle';\n  context.textAlign = 'center';\n  context.clearRect(0, 0, canvas.width, canvas.height);\n  context.fillText(text, canvas.width / 2, canvas.height / 2);\n\n  const texture = new Texture(gl, { generateMipmaps: false });\n  texture.image = canvas;\n  return { texture, width: canvas.width, height: canvas.height };\n}\n\ninterface TitleProps {\n  gl: GL;\n  plane: Mesh;\n  renderer: Renderer;\n  text: string;\n  textColor?: string;\n  font?: string;\n}\n\nclass Title {\n  gl: GL;\n  plane: Mesh;\n  renderer: Renderer;\n  text: string;\n  textColor: string;\n  font: string;\n  mesh!: Mesh;\n\n  constructor({ gl, plane, renderer, text, textColor = '#545050', font = '30px sans-serif' }: TitleProps) {\n    autoBind(this);\n    this.gl = gl;\n    this.plane = plane;\n    this.renderer = renderer;\n    this.text = text;\n    this.textColor = textColor;\n    this.font = font;\n    this.createMesh();\n  }\n\n  createMesh() {\n    const { texture, width, height } = createTextTexture(this.gl, this.text, this.font, this.textColor);\n    const geometry = new Plane(this.gl);\n    const program = new Program(this.gl, {\n      vertex: `\n        attribute vec3 position;\n        attribute vec2 uv;\n        uniform mat4 modelViewMatrix;\n        uniform mat4 projectionMatrix;\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      `,\n      fragment: `\n        precision highp float;\n        uniform sampler2D tMap;\n        varying vec2 vUv;\n        void main() {\n          vec4 color = texture2D(tMap, vUv);\n          if (color.a < 0.1) discard;\n          gl_FragColor = color;\n        }\n      `,\n      uniforms: { tMap: { value: texture } },\n      transparent: true\n    });\n    this.mesh = new Mesh(this.gl, { geometry, program });\n    const aspect = width / height;\n    const textHeightScaled = this.plane.scale.y * 0.15;\n    const textWidthScaled = textHeightScaled * aspect;\n    this.mesh.scale.set(textWidthScaled, textHeightScaled, 1);\n    this.mesh.position.y = -this.plane.scale.y * 0.5 - textHeightScaled * 0.5 - 0.05;\n    this.mesh.setParent(this.plane);\n  }\n}\n\ninterface ScreenSize {\n  width: number;\n  height: number;\n}\n\ninterface Viewport {\n  width: number;\n  height: number;\n}\n\ninterface MediaProps {\n  geometry: Plane;\n  gl: GL;\n  image: string;\n  index: number;\n  length: number;\n  renderer: Renderer;\n  scene: Transform;\n  screen: ScreenSize;\n  text: string;\n  viewport: Viewport;\n  bend: number;\n  textColor: string;\n  borderRadius?: number;\n  font?: string;\n}\n\nclass Media {\n  extra: number = 0;\n  geometry: Plane;\n  gl: GL;\n  image: string;\n  index: number;\n  length: number;\n  renderer: Renderer;\n  scene: Transform;\n  screen: ScreenSize;\n  text: string;\n  viewport: Viewport;\n  bend: number;\n  textColor: string;\n  borderRadius: number;\n  font?: string;\n  program!: Program;\n  plane!: Mesh;\n  title!: Title;\n  scale!: number;\n  padding!: number;\n  width!: number;\n  widthTotal!: number;\n  x!: number;\n  speed: number = 0;\n  isBefore: boolean = false;\n  isAfter: boolean = false;\n\n  constructor({\n    geometry,\n    gl,\n    image,\n    index,\n    length,\n    renderer,\n    scene,\n    screen,\n    text,\n    viewport,\n    bend,\n    textColor,\n    borderRadius = 0,\n    font\n  }: MediaProps) {\n    this.geometry = geometry;\n    this.gl = gl;\n    this.image = image;\n    this.index = index;\n    this.length = length;\n    this.renderer = renderer;\n    this.scene = scene;\n    this.screen = screen;\n    this.text = text;\n    this.viewport = viewport;\n    this.bend = bend;\n    this.textColor = textColor;\n    this.borderRadius = borderRadius;\n    this.font = font;\n    this.createShader();\n    this.createMesh();\n    this.createTitle();\n    this.onResize();\n  }\n\n  createShader() {\n    const texture = new Texture(this.gl, {\n      generateMipmaps: true\n    });\n    this.program = new Program(this.gl, {\n      depthTest: false,\n      depthWrite: false,\n      vertex: `\n        precision highp float;\n        attribute vec3 position;\n        attribute vec2 uv;\n        uniform mat4 modelViewMatrix;\n        uniform mat4 projectionMatrix;\n        uniform float uTime;\n        uniform float uSpeed;\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          vec3 p = position;\n          p.z = (sin(p.x * 4.0 + uTime) * 1.5 + cos(p.y * 2.0 + uTime) * 1.5) * (0.1 + uSpeed * 0.5);\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(p, 1.0);\n        }\n      `,\n      fragment: `\n        precision highp float;\n        uniform vec2 uImageSizes;\n        uniform vec2 uPlaneSizes;\n        uniform sampler2D tMap;\n        uniform float uBorderRadius;\n        varying vec2 vUv;\n        \n        float roundedBoxSDF(vec2 p, vec2 b, float r) {\n          vec2 d = abs(p) - b;\n          return length(max(d, vec2(0.0))) + min(max(d.x, d.y), 0.0) - r;\n        }\n        \n        void main() {\n          vec2 ratio = vec2(\n            min((uPlaneSizes.x / uPlaneSizes.y) / (uImageSizes.x / uImageSizes.y), 1.0),\n            min((uPlaneSizes.y / uPlaneSizes.x) / (uImageSizes.y / uImageSizes.x), 1.0)\n          );\n          vec2 uv = vec2(\n            vUv.x * ratio.x + (1.0 - ratio.x) * 0.5,\n            vUv.y * ratio.y + (1.0 - ratio.y) * 0.5\n          );\n          vec4 color = texture2D(tMap, uv);\n          \n          float d = roundedBoxSDF(vUv - 0.5, vec2(0.5 - uBorderRadius), uBorderRadius);\n          \n          float edgeSmooth = 0.002;\n          float alpha = 1.0 - smoothstep(-edgeSmooth, edgeSmooth, d);\n          \n          gl_FragColor = vec4(color.rgb, alpha);\n        }\n      `,\n      uniforms: {\n        tMap: { value: texture },\n        uPlaneSizes: { value: [0, 0] },\n        uImageSizes: { value: [0, 0] },\n        uSpeed: { value: 0 },\n        uTime: { value: 100 * Math.random() },\n        uBorderRadius: { value: this.borderRadius }\n      },\n      transparent: true\n    });\n    const img = new Image();\n    img.crossOrigin = 'anonymous';\n    img.src = this.image;\n    img.onload = () => {\n      texture.image = img;\n      this.program.uniforms.uImageSizes.value = [img.naturalWidth, img.naturalHeight];\n    };\n  }\n\n  createMesh() {\n    this.plane = new Mesh(this.gl, {\n      geometry: this.geometry,\n      program: this.program\n    });\n    this.plane.setParent(this.scene);\n  }\n\n  createTitle() {\n    this.title = new Title({\n      gl: this.gl,\n      plane: this.plane,\n      renderer: this.renderer,\n      text: this.text,\n      textColor: this.textColor,\n      font: this.font\n    });\n  }\n\n  update(scroll: { current: number; last: number }, direction: 'right' | 'left') {\n    this.plane.position.x = this.x - scroll.current - this.extra;\n\n    const x = this.plane.position.x;\n    const H = this.viewport.width / 2;\n\n    if (this.bend === 0) {\n      this.plane.position.y = 0;\n      this.plane.rotation.z = 0;\n    } else {\n      const B_abs = Math.abs(this.bend);\n      const R = (H * H + B_abs * B_abs) / (2 * B_abs);\n      const effectiveX = Math.min(Math.abs(x), H);\n\n      const arc = R - Math.sqrt(R * R - effectiveX * effectiveX);\n      if (this.bend > 0) {\n        this.plane.position.y = -arc;\n        this.plane.rotation.z = -Math.sign(x) * Math.asin(effectiveX / R);\n      } else {\n        this.plane.position.y = arc;\n        this.plane.rotation.z = Math.sign(x) * Math.asin(effectiveX / R);\n      }\n    }\n\n    this.speed = scroll.current - scroll.last;\n    this.program.uniforms.uTime.value += 0.04;\n    this.program.uniforms.uSpeed.value = this.speed;\n\n    const planeOffset = this.plane.scale.x / 2;\n    const viewportOffset = this.viewport.width / 2;\n    this.isBefore = this.plane.position.x + planeOffset < -viewportOffset;\n    this.isAfter = this.plane.position.x - planeOffset > viewportOffset;\n    if (direction === 'right' && this.isBefore) {\n      this.extra -= this.widthTotal;\n      this.isBefore = this.isAfter = false;\n    }\n    if (direction === 'left' && this.isAfter) {\n      this.extra += this.widthTotal;\n      this.isBefore = this.isAfter = false;\n    }\n  }\n\n  onResize({ screen, viewport }: { screen?: ScreenSize; viewport?: Viewport } = {}) {\n    if (screen) this.screen = screen;\n    if (viewport) {\n      this.viewport = viewport;\n      if (this.plane.program.uniforms.uViewportSizes) {\n        this.plane.program.uniforms.uViewportSizes.value = [this.viewport.width, this.viewport.height];\n      }\n    }\n    this.scale = this.screen.height / 1500;\n    this.plane.scale.y = (this.viewport.height * (900 * this.scale)) / this.screen.height;\n    this.plane.scale.x = (this.viewport.width * (700 * this.scale)) / this.screen.width;\n    this.plane.program.uniforms.uPlaneSizes.value = [this.plane.scale.x, this.plane.scale.y];\n    this.padding = 2;\n    this.width = this.plane.scale.x + this.padding;\n    this.widthTotal = this.width * this.length;\n    this.x = this.width * this.index;\n  }\n}\n\ninterface AppConfig {\n  items?: { image: string; text: string }[];\n  bend?: number;\n  textColor?: string;\n  borderRadius?: number;\n  font?: string;\n  scrollSpeed?: number;\n  scrollEase?: number;\n  autoRotate?: boolean;\n  autoRotateSpeed?: number;\n}\n\nclass App {\n  container: HTMLElement;\n  scrollSpeed: number;\n  scroll: {\n    ease: number;\n    current: number;\n    target: number;\n    last: number;\n    position?: number;\n  };\n  onCheckDebounce: (...args: any[]) => void;\n  renderer!: Renderer;\n  gl!: GL;\n  camera!: Camera;\n  scene!: Transform;\n  planeGeometry!: Plane;\n  medias: Media[] = [];\n  mediasImages: { image: string; text: string }[] = [];\n  screen!: { width: number; height: number };\n  viewport!: { width: number; height: number };\n  raf: number = 0;\n\n  boundOnResize!: () => void;\n  boundOnWheel!: (e: Event) => void;\n  boundOnTouchDown!: (e: MouseEvent | TouchEvent) => void;\n  boundOnTouchMove!: (e: MouseEvent | TouchEvent) => void;\n  boundOnTouchUp!: () => void;\n\n  isDown: boolean = false;\n  start: number = 0;\n  autoRotate: boolean = false;\n  autoRotateSpeed: number = 0.015;\n  lastInteractionTime: number = 0;\n  autoRotateDelay: number = 2000;\n\n  constructor(\n    container: HTMLElement,\n    {\n      items,\n      bend = 1,\n      textColor = '#ffffff',\n      borderRadius = 0,\n      font = 'bold 30px Figtree',\n      scrollSpeed = 2,\n      scrollEase = 0.05,\n      autoRotate = false,\n      autoRotateSpeed = 0.015\n    }: AppConfig\n  ) {\n    document.documentElement.classList.remove('no-js');\n    this.container = container;\n    this.scrollSpeed = scrollSpeed;\n    this.scroll = { ease: scrollEase, current: 0, target: 0, last: 0 };\n    this.autoRotate = autoRotate;\n    this.autoRotateSpeed = autoRotateSpeed;\n    this.lastInteractionTime = Date.now();\n    this.onCheckDebounce = debounce(this.onCheck.bind(this), 200);\n    this.createRenderer();\n    if (!this.renderer || !this.gl) {\n      console.warn('Could not initialize CircleGallery: WebGL not available');\n      return;\n    }\n    this.createCamera();\n    this.createScene();\n    this.onResize();\n    this.createGeometry();\n    this.createMedias(items, bend, textColor, borderRadius, font);\n    this.update();\n    this.addEventListeners();\n  }\n\n  createRenderer() {\n    try {\n      this.renderer = new Renderer({\n        alpha: true,\n        antialias: true,\n        dpr: Math.min(window.devicePixelRatio || 1, 2)\n      });\n      if (!this.renderer || !this.renderer.gl) {\n        console.warn('WebGL context could not be created');\n        return;\n      }\n      this.gl = this.renderer.gl;\n      this.gl.clearColor(0, 0, 0, 0);\n      this.container.appendChild(this.renderer.gl.canvas as HTMLCanvasElement);\n    } catch (error) {\n      console.warn('Error creating WebGL renderer:', error);\n    }\n  }\n\n  createCamera() {\n    this.camera = new Camera(this.gl);\n    this.camera.fov = 45;\n    this.camera.position.z = 20;\n  }\n\n  createScene() {\n    this.scene = new Transform();\n  }\n\n  createGeometry() {\n    this.planeGeometry = new Plane(this.gl, {\n      heightSegments: 50,\n      widthSegments: 100\n    });\n  }\n\n  createMedias(\n    items: { image: string; text: string }[] | undefined,\n    bend: number = 1,\n    textColor: string,\n    borderRadius: number,\n    font: string\n  ) {\n    const defaultItems = [\n      { image: 'https://picsum.photos/seed/1/800/600?grayscale', text: 'Dashboard' }\n    ];\n    const galleryItems = items && items.length ? items : defaultItems;\n    this.mediasImages = galleryItems.concat(galleryItems);\n    this.medias = this.mediasImages.map((data, index) => {\n      return new Media({\n        geometry: this.planeGeometry,\n        gl: this.gl,\n        image: data.image,\n        index,\n        length: this.mediasImages.length,\n        renderer: this.renderer,\n        scene: this.scene,\n        screen: this.screen,\n        text: data.text,\n        viewport: this.viewport,\n        bend,\n        textColor,\n        borderRadius,\n        font\n      });\n    });\n  }\n\n  onTouchDown(e: MouseEvent | TouchEvent) {\n    this.isDown = true;\n    this.scroll.position = this.scroll.current;\n    this.start = 'touches' in e ? e.touches[0].clientX : e.clientX;\n    this.lastInteractionTime = Date.now();\n  }\n\n  onTouchMove(e: MouseEvent | TouchEvent) {\n    if (!this.isDown) return;\n    const x = 'touches' in e ? e.touches[0].clientX : e.clientX;\n    const distance = (this.start - x) * (this.scrollSpeed * 0.025);\n    this.scroll.target = (this.scroll.position ?? 0) + distance;\n  }\n\n  onTouchUp() {\n    this.isDown = false;\n    this.onCheck();\n  }\n\n  onWheel(e: Event) {\n    const wheelEvent = e as WheelEvent;\n    const delta = wheelEvent.deltaY || (wheelEvent as any).wheelDelta || (wheelEvent as any).detail;\n    this.scroll.target += (delta > 0 ? this.scrollSpeed : -this.scrollSpeed) * 0.2;\n    this.lastInteractionTime = Date.now();\n    this.onCheckDebounce();\n  }\n\n  onCheck() {\n    if (!this.medias || !this.medias[0]) return;\n    const width = this.medias[0].width;\n    const itemIndex = Math.round(Math.abs(this.scroll.target) / width);\n    const item = width * itemIndex;\n    this.scroll.target = this.scroll.target < 0 ? -item : item;\n  }\n\n  onResize() {\n    this.screen = {\n      width: this.container.clientWidth,\n      height: this.container.clientHeight\n    };\n    this.renderer.setSize(this.screen.width, this.screen.height);\n    this.camera.perspective({\n      aspect: this.screen.width / this.screen.height\n    });\n    const fov = (this.camera.fov * Math.PI) / 180;\n    const height = 2 * Math.tan(fov / 2) * this.camera.position.z;\n    const width = height * this.camera.aspect;\n    this.viewport = { width, height };\n    if (this.medias) {\n      this.medias.forEach(media => media.onResize({ screen: this.screen, viewport: this.viewport }));\n    }\n  }\n\n  update() {\n    if (!this.renderer || !this.gl) {\n      return;\n    }\n    \n    if (this.autoRotate && !this.isDown) {\n      const timeSinceInteraction = Date.now() - this.lastInteractionTime;\n      if (timeSinceInteraction > this.autoRotateDelay) {\n        this.scroll.target += this.autoRotateSpeed;\n      }\n    }\n    \n    this.scroll.current = lerp(this.scroll.current, this.scroll.target, this.scroll.ease);\n    const direction = this.scroll.current > this.scroll.last ? 'right' : 'left';\n    if (this.medias) {\n      this.medias.forEach(media => media.update(this.scroll, direction));\n    }\n    this.renderer.render({ scene: this.scene, camera: this.camera });\n    this.scroll.last = this.scroll.current;\n    this.raf = window.requestAnimationFrame(this.update.bind(this));\n  }\n\n  addEventListeners() {\n    if (!this.renderer || !this.gl) return;\n    \n    this.boundOnResize = this.onResize.bind(this);\n    this.boundOnWheel = this.onWheel.bind(this);\n    this.boundOnTouchDown = this.onTouchDown.bind(this);\n    this.boundOnTouchMove = this.onTouchMove.bind(this);\n    this.boundOnTouchUp = this.onTouchUp.bind(this);\n    window.addEventListener('resize', this.boundOnResize);\n    window.addEventListener('mousewheel', this.boundOnWheel);\n    window.addEventListener('wheel', this.boundOnWheel);\n    window.addEventListener('mousedown', this.boundOnTouchDown);\n    window.addEventListener('mousemove', this.boundOnTouchMove);\n    window.addEventListener('mouseup', this.boundOnTouchUp);\n    window.addEventListener('touchstart', this.boundOnTouchDown);\n    window.addEventListener('touchmove', this.boundOnTouchMove);\n    window.addEventListener('touchend', this.boundOnTouchUp);\n  }\n\n  destroy() {\n    window.cancelAnimationFrame(this.raf);\n    if (this.boundOnResize) window.removeEventListener('resize', this.boundOnResize);\n    if (this.boundOnWheel) {\n      window.removeEventListener('mousewheel', this.boundOnWheel);\n      window.removeEventListener('wheel', this.boundOnWheel);\n    }\n    if (this.boundOnTouchDown) {\n      window.removeEventListener('mousedown', this.boundOnTouchDown);\n      window.removeEventListener('touchstart', this.boundOnTouchDown);\n    }\n    if (this.boundOnTouchMove) {\n      window.removeEventListener('mousemove', this.boundOnTouchMove);\n      window.removeEventListener('touchmove', this.boundOnTouchMove);\n    }\n    if (this.boundOnTouchUp) {\n      window.removeEventListener('mouseup', this.boundOnTouchUp);\n      window.removeEventListener('touchend', this.boundOnTouchUp);\n    }\n    if (this.renderer && this.renderer.gl && this.renderer.gl.canvas && this.renderer.gl.canvas.parentNode) {\n      this.renderer.gl.canvas.parentNode.removeChild(this.renderer.gl.canvas as HTMLCanvasElement);\n    }\n  }\n}\n\ninterface CircularGalleryProps {\n  items?: { image: string; text: string }[];\n  bend?: number;\n  textColor?: string;\n  borderRadius?: number;\n  font?: string;\n  scrollSpeed?: number;\n  scrollEase?: number;\n  autoRotate?: boolean;\n  autoRotateSpeed?: number;\n}\n\nexport default function CircleGallery({\n  items,\n  bend = 3,\n  textColor = '#ffffff',\n  borderRadius = 0.05,\n  font = 'bold 30px Figtree',\n  scrollSpeed = 2,\n  scrollEase = 0.05,\n  autoRotate = false,\n  autoRotateSpeed = 0.015\n}: CircularGalleryProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    if (!containerRef.current) return;\n    const app = new App(containerRef.current, {\n      items,\n      bend,\n      textColor,\n      borderRadius,\n      font,\n      scrollSpeed,\n      scrollEase,\n      autoRotate,\n      autoRotateSpeed\n    });\n    return () => {\n      app.destroy();\n    };\n  }, [items, bend, textColor, borderRadius, font, scrollSpeed, scrollEase, autoRotate, autoRotateSpeed]);\n  return <div className=\"w-full h-full overflow-hidden cursor-grab active:cursor-grabbing\" ref={containerRef} />;\n}\n","size_bytes":20093},"client/src/components/DashboardGallery.tsx":{"content":"import { useEffect, useRef, useState } from 'react';\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\n\ninterface DashboardGalleryProps {\n  items: { image: string; text: string }[];\n}\n\nexport default function DashboardGallery({ items }: DashboardGalleryProps) {\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [isAutoPlaying, setIsAutoPlaying] = useState(true);\n  const timeoutRef = useRef<NodeJS.Timeout>();\n\n  const resetTimeout = () => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n  };\n\n  useEffect(() => {\n    resetTimeout();\n    if (isAutoPlaying) {\n      timeoutRef.current = setTimeout(() => {\n        setCurrentIndex((prevIndex) =>\n          prevIndex === items.length - 1 ? 0 : prevIndex + 1\n        );\n      }, 4000);\n    }\n\n    return () => {\n      resetTimeout();\n    };\n  }, [currentIndex, items.length, isAutoPlaying]);\n\n  const goToSlide = (index: number) => {\n    setCurrentIndex(index);\n    setIsAutoPlaying(false);\n    setTimeout(() => setIsAutoPlaying(true), 6000);\n  };\n\n  const goToPrevious = () => {\n    const newIndex = currentIndex === 0 ? items.length - 1 : currentIndex - 1;\n    goToSlide(newIndex);\n  };\n\n  const goToNext = () => {\n    const newIndex = currentIndex === items.length - 1 ? 0 : currentIndex + 1;\n    goToSlide(newIndex);\n  };\n\n  return (\n    <div className=\"relative w-full h-full overflow-hidden\">\n      {/* Main Gallery Container */}\n      <div className=\"relative w-full h-full flex items-center justify-center perspective-[1000px]\">\n        {items.map((item, index) => {\n          const position = index - currentIndex;\n          const isActive = position === 0;\n          const isNext = position === 1 || (currentIndex === items.length - 1 && index === 0);\n          const isPrev = position === -1 || (currentIndex === 0 && index === items.length - 1);\n\n          let transform = 'translateX(0) translateZ(-400px) scale(0.7)';\n          let opacity = 0;\n          let zIndex = 0;\n\n          if (isActive) {\n            transform = 'translateX(0) translateZ(0) scale(1)';\n            opacity = 1;\n            zIndex = 3;\n          } else if (isNext) {\n            transform = 'translateX(40%) translateZ(-200px) scale(0.85) rotateY(-15deg)';\n            opacity = 0.6;\n            zIndex = 2;\n          } else if (isPrev) {\n            transform = 'translateX(-40%) translateZ(-200px) scale(0.85) rotateY(15deg)';\n            opacity = 0.6;\n            zIndex = 2;\n          }\n\n          return (\n            <div\n              key={index}\n              className=\"absolute inset-0 flex items-center justify-center transition-all duration-700 ease-out\"\n              style={{\n                transform,\n                opacity,\n                zIndex,\n              }}\n            >\n              <div className=\"relative w-full max-w-4xl h-full flex items-center justify-center p-8\">\n                <div className=\"relative w-full h-full rounded-2xl overflow-hidden shadow-2xl border border-orange-500/30 bg-black/40 backdrop-blur-sm\">\n                  <img\n                    src={item.image}\n                    alt={item.text}\n                    className=\"w-full h-full object-contain\"\n                    onError={(e) => {\n                      const target = e.target as HTMLImageElement;\n                      target.src = 'https://via.placeholder.com/800x600/1a1a1a/f97316?text=' + encodeURIComponent(item.text);\n                    }}\n                  />\n                  <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-6\">\n                    <h3 className=\"text-2xl font-bold text-white text-center\">{item.text}</h3>\n                  </div>\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Navigation Buttons */}\n      <button\n        onClick={goToPrevious}\n        className=\"absolute left-4 top-1/2 -translate-y-1/2 z-10 p-3 rounded-full bg-orange-500/80 hover:bg-orange-500 text-white transition-all shadow-lg hover:scale-110\"\n        aria-label=\"Previous\"\n      >\n        <ChevronLeft className=\"w-6 h-6\" />\n      </button>\n      <button\n        onClick={goToNext}\n        className=\"absolute right-4 top-1/2 -translate-y-1/2 z-10 p-3 rounded-full bg-orange-500/80 hover:bg-orange-500 text-white transition-all shadow-lg hover:scale-110\"\n        aria-label=\"Next\"\n      >\n        <ChevronRight className=\"w-6 h-6\" />\n      </button>\n\n      {/* Dots Indicator */}\n      <div className=\"absolute bottom-8 left-1/2 -translate-x-1/2 z-10 flex gap-3\">\n        {items.map((_, index) => (\n          <button\n            key={index}\n            onClick={() => goToSlide(index)}\n            className={`w-3 h-3 rounded-full transition-all ${\n              index === currentIndex\n                ? 'bg-orange-500 w-8'\n                : 'bg-white/50 hover:bg-white/80'\n            }`}\n            aria-label={`Go to slide ${index + 1}`}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n","size_bytes":5018},"client/src/components/CardSwap.tsx":{"content":"import React, {\n  Children,\n  cloneElement,\n  forwardRef,\n  isValidElement,\n  ReactElement,\n  ReactNode,\n  RefObject,\n  useEffect,\n  useMemo,\n  useRef\n} from 'react';\nimport gsap from 'gsap';\n\nexport interface CardSwapProps {\n  width?: number | string;\n  height?: number | string;\n  cardDistance?: number;\n  verticalDistance?: number;\n  delay?: number;\n  pauseOnHover?: boolean;\n  onCardClick?: (idx: number) => void;\n  skewAmount?: number;\n  easing?: 'linear' | 'elastic';\n  children: ReactNode;\n}\n\nexport interface CardProps extends React.HTMLAttributes<HTMLDivElement> {\n  customClass?: string;\n}\n\nexport const Card = forwardRef<HTMLDivElement, CardProps>(({ customClass, ...rest }, ref) => (\n  <div\n    ref={ref}\n    {...rest}\n    className={`absolute top-1/2 left-1/2 rounded-xl border border-white bg-black [transform-style:preserve-3d] [will-change:transform] [backface-visibility:hidden] ${customClass ?? ''} ${rest.className ?? ''}`.trim()}\n  />\n));\nCard.displayName = 'Card';\n\ntype CardRef = RefObject<HTMLDivElement>;\ninterface Slot {\n  x: number;\n  y: number;\n  z: number;\n  zIndex: number;\n}\n\nconst makeSlot = (i: number, distX: number, distY: number, total: number): Slot => ({\n  x: i * distX,\n  y: -i * distY,\n  z: -i * distX * 1.5,\n  zIndex: total - i\n});\n\nconst placeNow = (el: HTMLElement, slot: Slot, skew: number) =>\n  gsap.set(el, {\n    x: slot.x,\n    y: slot.y,\n    z: slot.z,\n    xPercent: -50,\n    yPercent: -50,\n    skewY: skew,\n    transformOrigin: 'center center',\n    zIndex: slot.zIndex,\n    force3D: true\n  });\n\nconst CardSwap: React.FC<CardSwapProps> = ({\n  width = 500,\n  height = 400,\n  cardDistance = 60,\n  verticalDistance = 70,\n  delay = 5000,\n  pauseOnHover = false,\n  onCardClick,\n  skewAmount = 6,\n  easing = 'elastic',\n  children\n}) => {\n  const config =\n    easing === 'elastic'\n      ? {\n          ease: 'elastic.out(0.6,0.9)',\n          durDrop: 2,\n          durMove: 2,\n          durReturn: 2,\n          promoteOverlap: 0.9,\n          returnDelay: 0.05\n        }\n      : {\n          ease: 'power1.inOut',\n          durDrop: 0.8,\n          durMove: 0.8,\n          durReturn: 0.8,\n          promoteOverlap: 0.45,\n          returnDelay: 0.2\n        };\n\n  const childArr = useMemo(() => Children.toArray(children) as ReactElement<CardProps>[], [children]);\n  const refs = useMemo<CardRef[]>(() => childArr.map(() => React.createRef<HTMLDivElement>()), [childArr.length]);\n\n  const order = useRef<number[]>(Array.from({ length: childArr.length }, (_, i) => i));\n\n  const tlRef = useRef<gsap.core.Timeline | null>(null);\n  const intervalRef = useRef<number>();\n  const container = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const total = refs.length;\n    refs.forEach((r, i) => placeNow(r.current!, makeSlot(i, cardDistance, verticalDistance, total), skewAmount));\n\n    const swap = () => {\n      if (order.current.length < 2) return;\n\n      const [front, ...rest] = order.current;\n      const elFront = refs[front].current!;\n      const tl = gsap.timeline();\n      tlRef.current = tl;\n\n      tl.to(elFront, {\n        y: '+=500',\n        duration: config.durDrop,\n        ease: config.ease\n      });\n\n      tl.addLabel('promote', `-=${config.durDrop * config.promoteOverlap}`);\n      rest.forEach((idx, i) => {\n        const el = refs[idx].current!;\n        const slot = makeSlot(i, cardDistance, verticalDistance, refs.length);\n        tl.set(el, { zIndex: slot.zIndex }, 'promote');\n        tl.to(\n          el,\n          {\n            x: slot.x,\n            y: slot.y,\n            z: slot.z,\n            duration: config.durMove,\n            ease: config.ease\n          },\n          `promote+=${i * 0.15}`\n        );\n      });\n\n      const backSlot = makeSlot(refs.length - 1, cardDistance, verticalDistance, refs.length);\n      tl.addLabel('return', `promote+=${config.durMove * config.returnDelay}`);\n      tl.call(\n        () => {\n          gsap.set(elFront, { zIndex: backSlot.zIndex });\n        },\n        undefined,\n        'return'\n      );\n      tl.to(\n        elFront,\n        {\n          x: backSlot.x,\n          y: backSlot.y,\n          z: backSlot.z,\n          duration: config.durReturn,\n          ease: config.ease\n        },\n        'return'\n      );\n\n      tl.call(() => {\n        order.current = [...rest, front];\n      });\n    };\n\n    swap();\n    intervalRef.current = window.setInterval(swap, delay);\n\n    if (pauseOnHover) {\n      const node = container.current!;\n      const pause = () => {\n        tlRef.current?.pause();\n        clearInterval(intervalRef.current);\n      };\n      const resume = () => {\n        tlRef.current?.play();\n        intervalRef.current = window.setInterval(swap, delay);\n      };\n      node.addEventListener('mouseenter', pause);\n      node.addEventListener('mouseleave', resume);\n      return () => {\n        node.removeEventListener('mouseenter', pause);\n        node.removeEventListener('mouseleave', resume);\n        clearInterval(intervalRef.current);\n      };\n    }\n    return () => clearInterval(intervalRef.current);\n  }, [cardDistance, verticalDistance, delay, pauseOnHover, skewAmount, easing]);\n\n  const rendered = childArr.map((child, i) =>\n    isValidElement<CardProps>(child)\n      ? cloneElement(child, {\n          key: i,\n          ref: refs[i],\n          style: { width, height, ...(child.props.style ?? {}) },\n          onClick: e => {\n            child.props.onClick?.(e as React.MouseEvent<HTMLDivElement>);\n            onCardClick?.(i);\n          }\n        } as CardProps & React.RefAttributes<HTMLDivElement>)\n      : child\n  );\n\n  return (\n    <div\n      ref={container}\n      className=\"absolute bottom-0 right-0 transform translate-x-[5%] translate-y-[20%] origin-bottom-right perspective-[900px] overflow-visible max-[768px]:translate-x-[25%] max-[768px]:translate-y-[25%] max-[768px]:scale-[0.75] max-[480px]:translate-x-[25%] max-[480px]:translate-y-[25%] max-[480px]:scale-[0.55]\"\n      style={{ width, height }}\n    >\n      {rendered}\n    </div>\n  );\n};\n\nexport default CardSwap;\n","size_bytes":6012},"LANDING_PAGE_UPDATES.md":{"content":"# Landing Page Updates - WayFinder.Ai Navigation\n\n## Summary\nSuccessfully added professional assistant and dashboard images to the landing page, plus auto-rotation for the circular gallery.\n\n## Images Created\n\n### Voice Assistant Images (CardSwap Section)\nLocated in: `client/public/images/`\n\n1. **assistant1.png** (1009KB)\n   - College voice assistant interface\n   - Modern blue/white UI design\n   - Shows chat messages for college queries\n   - Clean material design\n\n2. **assistant2.png** (894KB)\n   - Court legal assistant interface\n   - Gold and navy blue professional theme\n   - **Includes live map at bottom showing turn-by-turn navigation**\n   - Court-related queries displayed\n\n3. **assistant3.png** (1.3MB)\n   - Corporate institution voice assistant\n   - Purple and silver gradient design\n   - Enterprise-level professional interface\n   - Shows institutional queries\n\n### Dashboard/Admin Panel Images (Circular Gallery Section)\nLocated in: `client/public/images/`\n\n1. **dashboard1.png** (1.1MB)\n   - Court Admin Dashboard Panel\n   - Dark theme with gold accents\n   - Legal case management system\n   - Shows courtroom occupancy, schedules, statistics\n\n2. **dashboard2.png** (1.1MB)\n   - College Management Dashboard\n   - Blue and white theme\n   - Educational institution control panel\n   - Student attendance, faculty schedules, campus tracking\n\n3. **dashboard3.png** (828KB)\n   - Enterprise Institution Control Panel\n   - Dark theme with purple/cyan accents\n   - Comprehensive facility management\n   - Department analytics, visitor management, IoT monitoring\n\n## Features Added\n\n### Auto-Rotating Circular Gallery\nThe circular gallery now automatically rotates slowly and smoothly:\n- **Auto-rotation enabled** with configurable speed\n- **Pauses on user interaction** (mouse/touch)\n- **Resumes after 2 seconds** of inactivity\n- **Smooth transitions** using ease animations\n- **Customizable speed** (currently set to 0.02)\n\n### Implementation Details\n- Modified `CircleGallery.tsx` component\n- Added props: `autoRotate` and `autoRotateSpeed`\n- Tracks user interaction timing\n- Graceful WebGL error handling for headless environments\n\n## Updated Labels\nCircular gallery items now show:\n- \"Court Admin Panel\"\n- \"College Dashboard\"  \n- \"Institution Control\"\n\n## Technical Notes\n- All images optimized and properly sized\n- CardSwap animation cycles through assistant images every 3 seconds\n- Circular gallery auto-rotates continuously when not being interacted with\n- WebGL context errors handled gracefully (will work perfectly in real browsers)\n- Images use absolute paths from `/images/` directory\n\n## Testing\nThe landing page is now live at port 5000 with all images integrated and auto-rotation working smoothly. The circular gallery will display properly in real browsers with GPU/WebGL support.\n","size_bytes":2805},"client/src/hooks/use-court-tts.tsx":{"content":"import { useState, useCallback } from \"react\";\n\ninterface TTSOptions {\n  onStart?: () => void;\n  onEnd?: () => void;\n  onError?: (error: string) => void;\n  voice?: string;\n  speed?: number;\n}\n\ninterface UseCourtTTSReturn {\n  speak: (text: string, options?: TTSOptions) => Promise<void>;\n  stop: () => void;\n  isSpeaking: boolean;\n  isLoading: boolean;\n}\n\nexport function useCourtTTS(): UseCourtTTSReturn {\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [currentAudio, setCurrentAudio] = useState<HTMLAudioElement | null>(null);\n\n  const speak = useCallback(async (text: string, options: TTSOptions = {}) => {\n    console.log('Court TTS: Starting OpenAI speech for:', text.substring(0, 50));\n\n    try {\n      setIsLoading(true);\n\n      // Stop any current audio\n      if (currentAudio) {\n        currentAudio.pause();\n        currentAudio.currentTime = 0;\n      }\n\n      // Call OpenAI TTS endpoint\n      const response = await fetch(`${import.meta.env.VITE_API_BASE_URL || ''}/api/court/tts`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          text: text,\n          voice: options.voice || \"alloy\", // OpenAI voices: alloy, echo, fable, onyx, nova, shimmer\n          speed: options.speed || 1.0\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error(`TTS API error: ${response.status}`);\n      }\n\n      const audioBlob = await response.blob();\n      const audioUrl = URL.createObjectURL(audioBlob);\n      const audio = new Audio(audioUrl);\n\n      audio.onloadeddata = () => {\n        console.log('Court TTS: Audio loaded, starting playback');\n        setIsLoading(false);\n        setIsSpeaking(true);\n        if (options.onStart) options.onStart();\n      };\n\n      audio.onended = () => {\n        console.log('Court TTS: Playback ended');\n        setIsSpeaking(false);\n        URL.revokeObjectURL(audioUrl);\n        if (options.onEnd) options.onEnd();\n      };\n\n      audio.onerror = (e) => {\n        console.error('Court TTS: Audio playback error', e);\n        setIsSpeaking(false);\n        setIsLoading(false);\n        if (options.onError) options.onError('Audio playback failed');\n      };\n\n      setCurrentAudio(audio);\n      await audio.play();\n\n    } catch (error) {\n      console.error('Court TTS: Error generating speech:', error);\n      setIsLoading(false);\n      setIsSpeaking(false);\n      \n      if (options.onError) {\n        options.onError(error instanceof Error ? error.message : 'Speech generation failed');\n      }\n\n      // Fallback to browser TTS\n      try {\n        console.log('Court TTS: Falling back to browser speech synthesis');\n        const utterance = new SpeechSynthesisUtterance(text);\n        utterance.lang = 'en-IN';\n        utterance.rate = options.speed || 1.0;\n        \n        utterance.onstart = () => {\n          setIsSpeaking(true);\n          if (options.onStart) options.onStart();\n        };\n        \n        utterance.onend = () => {\n          setIsSpeaking(false);\n          if (options.onEnd) options.onEnd();\n        };\n        \n        window.speechSynthesis.speak(utterance);\n      } catch (fallbackError) {\n        console.error('Court TTS: Browser TTS also failed:', fallbackError);\n      }\n    }\n  }, [currentAudio]);\n\n  const stop = useCallback(() => {\n    if (currentAudio) {\n      currentAudio.pause();\n      currentAudio.currentTime = 0;\n      setIsSpeaking(false);\n    }\n    // Also stop browser TTS if it's running\n    if (window.speechSynthesis.speaking) {\n      window.speechSynthesis.cancel();\n      setIsSpeaking(false);\n    }\n  }, [currentAudio]);\n\n  return {\n    speak,\n    stop,\n    isSpeaking,\n    isLoading,\n  };\n}\n","size_bytes":3760},"client/src/pages/court-assistant.tsx":{"content":"import { useState, useCallback, useEffect, useRef } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useVoice } from \"@/hooks/use-voice\";\nimport { useCourtThreeTierTTS } from \"@/hooks/use-court-three-tier-tts\";\nimport { WaveformAnimation } from \"@/components/WaveformAnimation\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  Scale, \n  Mic, \n  Play, \n  Building2, \n  FileText, \n  Users, \n  MapPin,\n  Send,\n  X\n} from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\n// API request helper\nasync function apiRequest(method: string, url: string, data?: any) {\n  const options: RequestInit = {\n    method,\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n  \n  if (data) {\n    options.body = JSON.stringify(data);\n  }\n  \n  const apiUrl = `${import.meta.env.VITE_API_BASE_URL || ''}${url}`;\n  const response = await fetch(apiUrl, options);\n  if (!response.ok) {\n    throw new Error(`HTTP error! status: ${response.status}`);\n  }\n  return response;\n}\n\n// Format message to render emojis and basic markdown\nconst formatMessage = (message: string) => {\n  const lines = message.split('\\n');\n\n  return lines.map((line, index) => {\n    // Handle table headers and rows\n    if (line.includes('|') && line.includes('-')) {\n      return (\n        <div key={index} className=\"my-2 overflow-x-auto\">\n          <table className=\"w-full text-xs border-collapse\">\n            <tbody>\n              <tr className=\"border-b\">\n                {line.split('|').filter(cell => cell.trim()).map((cell, cellIndex) => (\n                  <td key={cellIndex} className=\"p-1 border-r last:border-r-0 font-medium\">\n                    {cell.trim()}\n                  </td>\n                ))}\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      );\n    }\n\n    // Handle regular table rows\n    if (line.includes('|') && !line.includes('-')) {\n      return (\n        <div key={index} className=\"my-1 overflow-x-auto\">\n          <table className=\"w-full text-xs border-collapse\">\n            <tbody>\n              <tr>\n                {line.split('|').filter(cell => cell.trim()).map((cell, cellIndex) => (\n                  <td key={cellIndex} className=\"p-1 border-r last:border-r-0\">\n                    {cell.trim()}\n                  </td>\n                ))}\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      );\n    }\n\n    // Handle section headers with emojis\n    if (line.includes('âš–ï¸') || line.includes('ðŸ“Œ') || line.includes('â°') || line.includes('ðŸ“ž')) {\n      return (\n        <div key={index} className=\"font-semibold text-gray-900 my-2\">\n          {line}\n        </div>\n      );\n    }\n\n    // Handle horizontal rules\n    if (line.trim() === '---') {\n      return <hr key={index} className=\"my-2 border-gray-200\" />;\n    }\n\n    // Regular lines with emojis preserved\n    if (line.trim()) {\n      return (\n        <div key={index} className=\"my-1\">\n          {line}\n        </div>\n      );\n    }\n\n    return <br key={index} />;\n  });\n};\n\nexport default function CourtAssistant() {\n  const [showListening, setShowListening] = useState(false);\n  const [currentResponse, setCurrentResponse] = useState(\"\");\n  const [liveTranscript, setLiveTranscript] = useState(\"\");\n  const [textInput, setTextInput] = useState(\"\");\n  const [chatStarted, setChatStarted] = useState(false);\n  const [chatHistory, setChatHistory] = useState<Array<{\n    type: 'user' | 'assistant',\n    message: string,\n    id: string,\n    buildingImages?: Array<{\n      id: string;\n      title: string;\n      description?: string;\n      image_url: string;\n      room_number?: string;\n      building_name?: string;\n    }>\n  }>>([]);\n  const [isTyping, setIsTyping] = useState(false);\n  const [isPreparingSpeech, setIsPreparingSpeech] = useState(false);\n  const [pendingAssistantMessage, setPendingAssistantMessage] = useState<{id: string, text: string} | null>(null);\n  const [sessionId, setSessionId] = useState<string | undefined>(undefined);\n  const [modalImage, setModalImage] = useState<{url: string, title: string} | null>(null);\n  const requestIdRef = useRef(0);\n  const chatAreaRef = useRef<HTMLDivElement>(null);\n  const { toast } = useToast();\n\n  // Voice input\n  const {\n    isListening,\n    startListening,\n    stopListening,\n    transcript,\n    browserSupported,\n    resetTranscript,\n  } = useVoice();\n\n  // Three-tier TTS (OpenAI -> Cartesia -> Browser)\n  const { speak, stop: stopSpeaking, isSpeaking, isLoading: isTTSLoading } = useCourtThreeTierTTS();\n\n  // Send message mutation\n  const sendMessageMutation = useMutation({\n    mutationFn: async (data: { message: string; sessionId?: string }) => {\n      setIsTyping(true);\n      const response = await apiRequest(\"POST\", \"/api/court/ask\", data);\n      return response.json();\n    },\n    onSuccess: async (data) => {\n      setShowListening(false);\n      setIsTyping(false);\n      \n      if (data.sessionId) {\n        setSessionId(data.sessionId);\n      }\n      \n      if (data.response) {\n        const assistantMessageId = `assistant-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n        const currentRequestId = ++requestIdRef.current;\n\n        // Keep typing animation and prepare speech first\n        setIsPreparingSpeech(true);\n        setPendingAssistantMessage({id: assistantMessageId, text: data.response});\n\n        // Start preparing speech with onStart callback for precise sync\n        speak(data.response, {\n          onStart: () => {\n            if (currentRequestId === requestIdRef.current) {\n              // Voice started, now show text synchronized with audio\n              setChatHistory(prev => [...prev, {\n                type: 'assistant', \n                message: data.response, \n                id: assistantMessageId,\n                buildingImages: data.buildingImages\n              }]);\n              setIsPreparingSpeech(false);\n              setPendingAssistantMessage(null);\n            }\n          },\n          onEnd: () => {\n            console.log('Court speech completed');\n          },\n          onError: (error) => {\n            console.error('Court speech failed:', error);\n            if (currentRequestId === requestIdRef.current) {\n              // On error, show text immediately\n              setChatHistory(prev => [...prev, {\n                type: 'assistant', \n                message: data.response, \n                id: assistantMessageId,\n                buildingImages: data.buildingImages\n              }]);\n              setIsPreparingSpeech(false);\n              setPendingAssistantMessage(null);\n              toast({\n                title: \"Voice playback unavailable\",\n                description: \"Using fallback speech system\",\n                variant: \"default\",\n              });\n            }\n          }\n        });\n      }\n    },\n    onError: (error) => {\n      console.error(\"Court query error:\", error);\n      setIsTyping(false);\n      setShowListening(false);\n      setIsPreparingSpeech(false);\n      setPendingAssistantMessage(null);\n      toast({\n        title: \"Error\",\n        description: \"Failed to process your question. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Send message function\n  const sendMessage = useCallback((message: string) => {\n    if (!message.trim()) return;\n\n    console.log(`Court: Sending message: \"${message}\"`);\n    setChatStarted(true);\n\n    // Add user message to chat\n    const userMessageId = `user-${Date.now()}`;\n    setChatHistory(prev => [...prev, {type: 'user', message, id: userMessageId}]);\n\n    // Send to API\n    sendMessageMutation.mutate({ \n      message,\n      sessionId\n    });\n\n    // Reset input\n    setTextInput(\"\");\n    resetTranscript();\n  }, [sendMessageMutation, sessionId, resetTranscript]);\n\n  // Handle voice input\n  const handleVoiceToggle = () => {\n    if (isListening) {\n      stopListening();\n    } else {\n      startListening();\n      setShowListening(true);\n      toast({\n        title: \"Listening...\",\n        description: \"Speak your question clearly\",\n      });\n    }\n  };\n\n  // Handle text input submission\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (textInput.trim()) {\n      sendMessage(textInput);\n    }\n  };\n\n  // Handle replay of assistant message\n  const handleSpeak = (text: string) => {\n    speak(text);\n  };\n\n  // When transcript changes and listening stops, send message\n  useEffect(() => {\n    if (!isListening && transcript && transcript.trim().length > 0) {\n      sendMessage(transcript);\n    }\n  }, [transcript, isListening, sendMessage]);\n\n  // Update live transcript while listening\n  useEffect(() => {\n    if (isListening) {\n      setLiveTranscript(transcript);\n    }\n  }, [transcript, isListening]);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    if (chatAreaRef.current) {\n      chatAreaRef.current.scrollTop = chatAreaRef.current.scrollHeight;\n    }\n  }, [chatHistory, isTyping, isPreparingSpeech]);\n\n  const quickActions = [\n    {\n      id: \"courtrooms\",\n      icon: Building2,\n      title: \"Find Courtroom\",\n      subtitle: \"Locate courtrooms\",\n      query: \"How do I find courtroom number 5 in Kaithal District Court?\"\n    },\n    {\n      id: \"files\",\n      icon: FileText,\n      title: \"Track Files\",\n      subtitle: \"Case file status\",\n      query: \"Where can I track my case file and who handles it?\"\n    },\n    {\n      id: \"staff\",\n      icon: Users,\n      title: \"Staff Directory\",\n      subtitle: \"Find staff members\",\n      query: \"How can I contact the registry office staff?\"\n    },\n    {\n      id: \"directions\",\n      icon: MapPin,\n      title: \"Directions\",\n      subtitle: \"Navigate court\",\n      query: \"Give me directions to the judge's chambers\"\n    }\n  ];\n\n  return (\n    <div className=\"w-full bg-gradient-to-br from-purple-50 via-violet-50 to-indigo-50 text-gray-900 flex flex-col relative overflow-hidden\"\n         style={{ \n           maxWidth: '100vw', \n           height: '100vh',\n           minHeight: '100vh',\n           maxHeight: '100vh'\n         }}>\n      {/* Background decoration */}\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute top-20 left-10 w-32 h-32 bg-gradient-to-br from-purple-400/10 to-violet-400/10 rounded-full blur-3xl\"></div>\n        <div className=\"absolute top-40 right-16 w-24 h-24 bg-gradient-to-br from-indigo-400/10 to-purple-400/10 rounded-full blur-2xl\"></div>\n        <div className=\"absolute bottom-32 left-20 w-40 h-40 bg-gradient-to-br from-violet-400/10 to-purple-400/10 rounded-full blur-3xl\"></div>\n        <div className=\"absolute bottom-20 right-10 w-28 h-28 bg-gradient-to-br from-purple-400/10 to-indigo-400/10 rounded-full blur-2xl\"></div>\n      </div>\n\n      {/* Enhanced Header with Professional Branding */}\n      <header className=\"flex items-center justify-between px-4 pt-[env(safe-area-inset-top)] h-16 bg-white/20 backdrop-blur-md border-b border-white/10\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"relative\">\n            <div className=\"w-10 h-10 bg-gradient-to-br from-purple-600 to-violet-600 rounded-xl flex items-center justify-center shadow-lg\">\n              <Scale className=\"text-white w-5 h-5\" />\n            </div>\n            <div className=\"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full border-2 border-white animate-pulse\"></div>\n          </div>\n          <div>\n            <h1 className=\"font-bold text-xl text-gray-900\">Kaithal District Court</h1>\n            <p className=\"text-xs text-gray-600 font-medium\">AI Legal Navigation Assistant</p>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"px-3 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded-full border border-green-200\">\n            â— Online\n          </div>\n        </div>\n      </header>\n\n      {/* Chat Interface - Full Screen Layout */}\n      <div className=\"flex-1 flex flex-col min-h-0 px-4 sm:px-5 relative z-10\">\n        <AnimatePresence>\n          {chatStarted ? (\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.4, ease: \"easeOut\" }}\n              className=\"flex-1 flex flex-col min-h-0\"\n            >\n              {/* Voice Assistant Animation - Always Visible */}\n              <div \n                className=\"flex justify-center py-4 h-[100px] items-center overflow-hidden\" \n                style={{ \n                  contain: 'layout style',\n                  willChange: 'auto',\n                  transform: 'translateZ(0)'\n                }}\n              >\n                <div style={{ contain: 'layout', transform: 'translateZ(0)' }}>\n                  <WaveformAnimation \n                    isListening={isListening} \n                    isSpeaking={isSpeaking} \n                    isActive={isListening || sendMessageMutation.isPending || isTyping || isSpeaking}\n                  />\n                </div>\n              </div>\n\n              {/* Chat Messages Area - Scrollable - Centered like ChatGPT */}\n              <div\n                ref={chatAreaRef}\n                className=\"flex-1 overflow-y-auto pb-20 px-2 sm:px-4\"\n              >\n                <div className=\"max-w-3xl mx-auto space-y-4\">\n                  {chatHistory.map((chat) => (\n                    <motion.div\n                      key={chat.id}\n                      initial={{ opacity: 0, y: 30 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      transition={{ duration: 0.35, ease: \"easeOut\" }}\n                      className=\"w-full\"\n                    >\n                      <div\n                        className={`inline-block px-5 py-3 rounded-2xl max-w-full shadow-md\n                        ${chat.type === 'user'\n                          ? 'bg-purple-600 text-white rounded-tr-sm float-right clear-both'\n                          : 'bg-white text-gray-900 rounded-tl-sm border border-gray-200 float-left clear-both'\n                        }`}\n                        style={{ maxWidth: '85%' }}\n                      >\n                        {chat.buildingImages && chat.buildingImages.length > 0 && (\n                          <div className=\"mb-3 space-y-2\">\n                            {chat.buildingImages.map((img, imgIndex) => (\n                              <div \n                                key={imgIndex} \n                                className=\"bg-gray-50 rounded-lg overflow-hidden shadow-sm border border-gray-200 cursor-pointer hover:shadow-md transition-shadow\"\n                                onClick={() => setModalImage({url: img.image_url, title: img.title || 'Building location'})}\n                              >\n                                <div className=\"bg-white p-1.5\">\n                                  <img \n                                    src={img.image_url} \n                                    alt={img.title || 'Building location'} \n                                    className=\"w-full h-28 sm:h-32 object-contain rounded\"\n                                    loading=\"lazy\"\n                                  />\n                                </div>\n                                {img.title && (\n                                  <div className=\"p-2.5 sm:p-3 bg-white\">\n                                    <div className=\"font-semibold text-sm sm:text-base text-gray-900\">{img.title}</div>\n                                    {img.description && (\n                                      <div className=\"text-xs sm:text-sm text-gray-700 mt-1 leading-relaxed\">{img.description}</div>\n                                    )}\n                                    {img.room_number && (\n                                      <div className=\"text-xs sm:text-sm text-gray-600 mt-1.5 font-medium\">Room: {img.room_number}</div>\n                                    )}\n                                  </div>\n                                )}\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                        <div className=\"text-[15px] leading-relaxed\" style={{ fontFamily: \"'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif\" }}>\n                          {formatMessage(chat.message)}\n                        </div>\n\n                        {/* Replay button for assistant */}\n                        {chat.type === 'assistant' && (\n                          <button\n                            onClick={() => handleSpeak(chat.message)}\n                            className=\"mt-2 inline-flex items-center gap-1 text-purple-600 hover:text-purple-700 transition-colors\"\n                          >\n                            <Play size={12} />\n                            <span className=\"text-xs font-medium\">Replay</span>\n                          </button>\n                        )}\n                      </div>\n                      <div className=\"clear-both\"></div>\n                    </motion.div>\n                  ))}\n\n                  {/* Typing Indicator */}\n                  {(isTyping || isPreparingSpeech) && (\n                    <motion.div\n                      initial={{ opacity: 0 }}\n                      animate={{ opacity: 1 }}\n                      exit={{ opacity: 0 }}\n                      transition={{ duration: 0.2 }}\n                      className=\"w-full\"\n                    >\n                      <div className=\"inline-flex items-center gap-2 px-4 py-2 rounded-2xl bg-white border border-gray-200 shadow-md float-left clear-both\">\n                        <span className=\"text-sm text-gray-600\">\n                          {isTyping ? \"Soch raha hoon...\" : \"Tayyar ho raha hai...\"}\n                        </span>\n                        <div className=\"flex gap-1\">\n                          <span className=\"w-2 h-2 bg-purple-600 rounded-full animate-bounce\"></span>\n                          <span className=\"w-2 h-2 bg-purple-600 rounded-full animate-bounce delay-150\"></span>\n                          <span className=\"w-2 h-2 bg-purple-600 rounded-full animate-bounce delay-300\"></span>\n                        </div>\n                      </div>\n                      <div className=\"clear-both\"></div>\n                    </motion.div>\n                  )}\n\n                  {/* Live transcript during listening */}\n                  {liveTranscript && showListening && (\n                    <motion.div\n                      initial={{ opacity: 0, scale: 0.9 }}\n                      animate={{ opacity: 1, scale: 1 }}\n                      transition={{ duration: 0.2 }}\n                      className=\"w-full\"\n                    >\n                      <div className=\"p-3 bg-white/80 backdrop-blur-sm rounded-2xl border border-purple-200 shadow-md text-center max-w-[80%] sm:max-w-xs mx-auto\">\n                        <p className=\"text-sm text-gray-600\">\n                          \"{liveTranscript}\"\n                        </p>\n                      </div>\n                    </motion.div>\n                  )}\n                </div>\n              </div>\n            </motion.div>\n          ) : (\n            <motion.div\n              initial={{ opacity: 1, y: 0 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.4, ease: \"easeInOut\" }}\n              className=\"flex-1 flex flex-col overflow-y-auto\"\n            >\n              {/* Voice Assistant Animation - Always Visible */}\n              <div \n                className=\"flex justify-center py-4 h-[100px] items-center overflow-hidden flex-shrink-0\" \n                style={{ \n                  contain: 'layout style',\n                  willChange: 'auto',\n                  transform: 'translateZ(0)'\n                }}\n              >\n                <div style={{ contain: 'layout', transform: 'translateZ(0)' }}>\n                  <WaveformAnimation \n                    isListening={isListening} \n                    isSpeaking={isSpeaking} \n                    isActive={isListening || sendMessageMutation.isPending || isTyping || isSpeaking}\n                  />\n                </div>\n              </div>\n\n              {/* Enhanced Welcome Section */}\n              <div className=\"py-4 sm:py-6 text-center flex-shrink-0\">\n                <div className=\"mb-3 sm:mb-4\">\n                  <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-white/40 backdrop-blur-sm rounded-full border border-white/20 shadow-sm\">\n                    <div className=\"w-2 h-2 bg-green-400 rounded-full animate-pulse\"></div>\n                    <span className=\"text-sm font-medium text-gray-900\">AI Assistant Ready</span>\n                  </div>\n                </div>\n                <h1 className=\"text-xl sm:text-2xl md:text-3xl font-bold mb-2 px-4\">\n                  <span className=\"bg-gradient-to-r from-purple-600 to-violet-600 bg-clip-text text-transparent\">\n                    Welcome to Kaithal Court AI\n                  </span>\n                  <span className=\"ml-2\">âš–ï¸</span>\n                </h1>\n                <p className=\"text-gray-700 text-base sm:text-lg font-medium px-4\">\n                  How can I assist you today?\n                </p>\n                <p className=\"text-xs sm:text-sm text-gray-600 mt-2 opacity-80 px-4\">\n                  Ask me about courtrooms, case files, staff, or directions\n                </p>\n              </div>\n\n              {/* Quick Actions Grid - Mobile Responsive with proper spacing */}\n              <div className=\"grid grid-cols-2 sm:grid-cols-2 gap-2 sm:gap-3 max-w-lg mx-auto w-full px-3 sm:px-2 pb-24 sm:pb-28 md:pb-32\">\n                {quickActions.map((action) => (\n                  <button\n                    key={action.id}\n                    onClick={() => {\n                      sendMessage(action.query);\n                    }}\n                    className=\"flex flex-col items-center gap-1.5 sm:gap-2 p-3 sm:p-4 bg-white/60 backdrop-blur-sm rounded-xl border border-white/30 shadow-sm hover:shadow-md hover:bg-white/80 transition-all duration-200 active:scale-95\"\n                  >\n                    <div className=\"w-9 h-9 sm:w-10 sm:h-10 bg-gradient-to-br from-purple-500 to-violet-500 rounded-full flex items-center justify-center flex-shrink-0\">\n                      <action.icon className=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" />\n                    </div>\n                    <div className=\"text-center\">\n                      <h3 className=\"text-xs sm:text-sm font-semibold text-gray-900 leading-tight\">{action.title}</h3>\n                      <p className=\"text-[10px] sm:text-xs text-gray-600 mt-0.5 leading-tight\">{action.subtitle}</p>\n                    </div>\n                  </button>\n                ))}\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n\n      {/* Bottom Input Bar - Fixed with safe area support */}\n      <div className=\"px-4 pb-[max(1rem,env(safe-area-inset-bottom))] pt-2 sm:pt-3 bg-gradient-to-t from-purple-50/90 to-transparent backdrop-blur-sm flex-shrink-0\">\n        <form onSubmit={handleSubmit} className=\"flex items-center gap-2 max-w-2xl mx-auto\">\n          <div className=\"flex-1 relative\">\n            <input\n              type=\"text\"\n              value={textInput}\n              onChange={(e) => setTextInput(e.target.value)}\n              placeholder=\"Type your question...\"\n              className=\"w-full px-4 py-2.5 sm:py-3 pr-12 rounded-full bg-white border border-gray-200 shadow-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm sm:text-base\"\n              disabled={sendMessageMutation.isPending || isTyping}\n            />\n          </div>\n          \n          <Button\n            type=\"button\"\n            onClick={handleVoiceToggle}\n            size=\"icon\"\n            className={`rounded-full w-11 h-11 sm:w-12 sm:h-12 flex-shrink-0 transition-all duration-200 shadow-md ${\n              isListening \n                ? 'bg-red-500 hover:bg-red-600 animate-pulse' \n                : 'bg-gradient-to-br from-purple-500 to-violet-500 hover:from-purple-600 hover:to-violet-600'\n            }`}\n            disabled={!browserSupported || sendMessageMutation.isPending}\n          >\n            <Mic className=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" />\n          </Button>\n\n          <Button\n            type=\"submit\"\n            size=\"icon\"\n            className=\"rounded-full w-11 h-11 sm:w-12 sm:h-12 flex-shrink-0 bg-gradient-to-br from-purple-500 to-violet-500 hover:from-purple-600 hover:to-violet-600 shadow-md\"\n            disabled={!textInput.trim() || sendMessageMutation.isPending || isTyping}\n          >\n            <Send className=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" />\n          </Button>\n        </form>\n      </div>\n\n      {/* Full-Screen Image Modal */}\n      <AnimatePresence>\n        {modalImage && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            onClick={() => setModalImage(null)}\n            className=\"fixed inset-0 z-50 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4\"\n          >\n            <motion.div\n              initial={{ scale: 0.8, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.8, opacity: 0 }}\n              transition={{ type: \"spring\", damping: 25, stiffness: 300 }}\n              onClick={(e) => e.stopPropagation()}\n              className=\"relative max-w-6xl w-full bg-white rounded-2xl shadow-2xl overflow-hidden\"\n            >\n              <button\n                onClick={() => setModalImage(null)}\n                className=\"absolute top-4 right-4 z-10 w-10 h-10 bg-black/50 hover:bg-black/70 rounded-full flex items-center justify-center transition-colors backdrop-blur-sm\"\n              >\n                <X className=\"w-6 h-6 text-white\" />\n              </button>\n              \n              <div className=\"p-4 sm:p-6\">\n                <img\n                  src={modalImage.url}\n                  alt={modalImage.title}\n                  className=\"w-full h-auto max-h-[80vh] object-contain rounded-lg\"\n                />\n              </div>\n              \n              <div className=\"px-4 sm:px-6 pb-4 sm:pb-6 bg-gradient-to-t from-gray-50 to-transparent\">\n                <h3 className=\"text-lg sm:text-xl font-semibold text-gray-900 text-center\">\n                  {modalImage.title}\n                </h3>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n","size_bytes":26832},"server/court-session-manager.ts":{"content":"/**\n * Court Session Management for Conversation Memory\n * Maintains conversation history per session for Court Assistant\n * Completely separate from Campus AI session manager\n */\n\ninterface Message {\n  role: 'user' | 'assistant' | 'system';\n  content: string;\n  timestamp: number;\n}\n\ninterface CourtSession {\n  id: string;\n  messages: Message[];\n  lastActivity: number;\n}\n\nclass CourtSessionManager {\n  private sessions: Map<string, CourtSession>;\n  private readonly MAX_MESSAGES = 30;\n  private readonly SESSION_TIMEOUT = 15 * 60 * 1000; // 15 minutes\n  private cleanupInterval: NodeJS.Timeout | null = null;\n\n  constructor() {\n    this.sessions = new Map();\n    this.startCleanupTask();\n  }\n\n  generateSessionId(): string {\n    return `court_session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  getOrCreateSession(sessionId?: string): { sessionId: string; session: CourtSession } {\n    if (sessionId && this.sessions.has(sessionId)) {\n      const session = this.sessions.get(sessionId)!;\n      session.lastActivity = Date.now();\n      return { sessionId, session };\n    }\n\n    const newSessionId = this.generateSessionId();\n    const newSession: CourtSession = {\n      id: newSessionId,\n      messages: [],\n      lastActivity: Date.now()\n    };\n    this.sessions.set(newSessionId, newSession);\n    console.log(`Court session created: ${newSessionId}`);\n    return { sessionId: newSessionId, session: newSession };\n  }\n\n  addMessage(sessionId: string, role: 'user' | 'assistant', content: string): void {\n    const session = this.sessions.get(sessionId);\n    if (!session) {\n      console.warn(`Court session not found: ${sessionId}`);\n      return;\n    }\n\n    session.messages.push({\n      role,\n      content,\n      timestamp: Date.now()\n    });\n\n    if (session.messages.length > this.MAX_MESSAGES) {\n      session.messages = session.messages.slice(-this.MAX_MESSAGES);\n    }\n\n    session.lastActivity = Date.now();\n  }\n\n  getConversationHistory(sessionId: string, systemPrompt: string): Array<{ role: string; content: string }> {\n    const session = this.sessions.get(sessionId);\n    if (!session) {\n      return [{ role: 'system', content: systemPrompt }];\n    }\n\n    return [\n      { role: 'system', content: systemPrompt },\n      ...session.messages.map(msg => ({\n        role: msg.role,\n        content: msg.content\n      }))\n    ];\n  }\n\n  private startCleanupTask(): void {\n    this.cleanupInterval = setInterval(() => {\n      const now = Date.now();\n      let cleanedCount = 0;\n\n      for (const [sessionId, session] of this.sessions.entries()) {\n        if (now - session.lastActivity > this.SESSION_TIMEOUT) {\n          this.sessions.delete(sessionId);\n          cleanedCount++;\n        }\n      }\n\n      if (cleanedCount > 0) {\n        console.log(`Court sessions cleaned up: ${cleanedCount} inactive sessions removed`);\n      }\n    }, 5 * 60 * 1000); // Every 5 minutes\n  }\n\n  destroy(): void {\n    if (this.cleanupInterval) {\n      clearInterval(this.cleanupInterval);\n    }\n    this.sessions.clear();\n  }\n}\n\nexport const courtSessionManager = new CourtSessionManager();\n","size_bytes":3108},"server/court-query-analyzer.ts":{"content":"/**\n * Court Query Analyzer\n * Analyzes user queries to determine court-specific data needs\n */\n\nexport interface CourtQueryTopics {\n  courtrooms: boolean;\n  buildings: boolean;\n  staff: boolean;\n  files: boolean;\n  procedures: boolean;\n  timings: boolean;\n  directions: boolean;\n  buildingImages: boolean;\n  general: boolean;\n  greeting: boolean;\n}\n\nexport interface CourtQueryAnalysis {\n  topics: CourtQueryTopics;\n  entityMentions: {\n    roomNumber?: string;\n    buildingName?: string;\n    staffName?: string;\n    fileNumber?: string;\n    designation?: string;\n  };\n  needsDetailedInfo: boolean;\n}\n\nexport function analyzeCourtQuery(query: string): CourtQueryAnalysis {\n  const lowerQuery = query.toLowerCase();\n  \n  const topics: CourtQueryTopics = {\n    courtrooms: false,\n    buildings: false,\n    staff: false,\n    files: false,\n    procedures: false,\n    timings: false,\n    directions: false,\n    buildingImages: false,\n    general: false,\n    greeting: false\n  };\n\n  const entityMentions: any = {};\n\n  // Greeting detection\n  const greetingPatterns = ['hello', 'hi', 'namaste', 'namaskar', 'hey', 'good morning', 'good evening'];\n  if (greetingPatterns.some(pattern => lowerQuery.includes(pattern)) && lowerQuery.length < 30) {\n    topics.greeting = true;\n    return { topics, entityMentions, needsDetailedInfo: false };\n  }\n\n  // Courtroom detection\n  const courtroomKeywords = ['courtroom', 'court room', 'room', 'court number', 'à¤•à¥‹à¤°à¥à¤Ÿà¤°à¥‚à¤®', 'à¤•à¤®à¤°à¤¾'];\n  if (courtroomKeywords.some(kw => lowerQuery.includes(kw))) {\n    topics.courtrooms = true;\n  }\n\n  // Room number extraction\n  const roomNumberMatch = lowerQuery.match(/room\\s*(?:number|no\\.?|#)?\\s*(\\d+)/i) ||\n                         lowerQuery.match(/courtroom\\s*(\\d+)/i) ||\n                         lowerQuery.match(/à¤•à¤®à¤°à¤¾\\s*(?:à¤¸à¤‚à¤–à¥à¤¯à¤¾)?\\s*(\\d+)/i);\n  if (roomNumberMatch) {\n    entityMentions.roomNumber = roomNumberMatch[1];\n    topics.courtrooms = true;\n  }\n\n  // Building detection\n  const buildingKeywords = ['building', 'block', 'bhawan', 'à¤­à¤µà¤¨', 'à¤‡à¤®à¤¾à¤°à¤¤'];\n  if (buildingKeywords.some(kw => lowerQuery.includes(kw))) {\n    topics.buildings = true;\n  }\n\n  // Staff detection\n  const staffKeywords = ['judge', 'clerk', 'officer', 'registry', 'typist', 'staff', 'advocate', 'lawyer', 'à¤œà¤œ', 'à¤…à¤§à¤¿à¤•à¤¾à¤°à¥€', 'à¤•à¤°à¥à¤®à¤šà¤¾à¤°à¥€'];\n  if (staffKeywords.some(kw => lowerQuery.includes(kw))) {\n    topics.staff = true;\n  }\n\n  // File detection\n  const fileKeywords = ['file', 'case', 'document', 'petition', 'application', 'à¤«à¤¾à¤‡à¤²', 'à¤•à¥‡à¤¸', 'à¤®à¤¾à¤®à¤²à¤¾'];\n  if (fileKeywords.some(kw => lowerQuery.includes(kw))) {\n    topics.files = true;\n  }\n\n  // Procedures detection\n  const procedureKeywords = ['procedure', 'process', 'how to', 'steps', 'filing', 'submit', 'à¤ªà¥à¤°à¤•à¥à¤°à¤¿à¤¯à¤¾', 'à¤•à¥ˆà¤¸à¥‡'];\n  if (procedureKeywords.some(kw => lowerQuery.includes(kw))) {\n    topics.procedures = true;\n  }\n\n  // Timings detection\n  const timingKeywords = ['timing', 'time', 'schedule', 'hours', 'open', 'close', 'à¤¸à¤®à¤¯', 'à¤–à¥à¤²à¤¨à¥‡'];\n  if (timingKeywords.some(kw => lowerQuery.includes(kw))) {\n    topics.timings = true;\n  }\n\n  // Directions detection\n  const directionKeywords = ['where', 'location', 'find', 'navigate', 'direction', 'way', 'kaha', 'à¤•à¤¹à¤¾à¤‚', 'à¤•à¥ˆà¤¸à¥‡ à¤œà¤¾à¤à¤‚'];\n  if (directionKeywords.some(kw => lowerQuery.includes(kw))) {\n    topics.directions = true;\n  }\n\n  // Building Images detection - for location/navigation queries that need visual context\n  const imageKeywords = ['show', 'image', 'photo', 'picture', 'look like', 'dikhao', 'à¤¦à¤¿à¤–à¤¾à¤“', 'à¤«à¥‹à¤Ÿà¥‹', 'à¤¤à¤¸à¥à¤µà¥€à¤°'];\n  const locationImageKeywords = ['submit', 'file', 'registry', 'counter', 'office', 'desk', 'department', 'section'];\n  \n  if (imageKeywords.some(kw => lowerQuery.includes(kw)) || \n     (topics.directions && locationImageKeywords.some(kw => lowerQuery.includes(kw)))) {\n    topics.buildingImages = true;\n  }\n\n  // General query\n  if (!Object.values(topics).some(v => v === true)) {\n    topics.general = true;\n  }\n\n  const needsDetailedInfo = topics.courtrooms || topics.buildings || topics.staff || topics.files;\n\n  return {\n    topics,\n    entityMentions,\n    needsDetailedInfo\n  };\n}\n\nexport function getCourtDataFetchStrategy(analysis: CourtQueryAnalysis) {\n  const { topics } = analysis;\n\n  return {\n    shouldFetchRooms: topics.courtrooms || topics.directions,\n    shouldFetchBuildings: topics.buildings || topics.directions,\n    shouldFetchStaff: topics.staff,\n    shouldFetchFiles: topics.files,\n    shouldFetchTimings: topics.timings,\n    shouldFetchSettings: topics.general || topics.procedures,\n    shouldFetchBuildingImages: topics.buildingImages || topics.directions,\n    \n    // Limits\n    roomsLimit: topics.courtrooms ? 50 : 20,\n    buildingsLimit: topics.buildings ? 10 : 5,\n    staffLimit: topics.staff ? 30 : 10,\n    filesLimit: topics.files ? 20 : 5,\n    buildingImagesLimit: topics.buildingImages ? 10 : 5\n  };\n}\n\n// Extract search keywords for building images\nexport function extractImageSearchKeywords(query: string): string[] {\n  const lowerQuery = query.toLowerCase();\n  const keywords: string[] = [];\n  \n  // Location-specific keywords\n  const locationMap: { [key: string]: string[] } = {\n    'registry': ['registry', 'à¤°à¤œà¤¿à¤¸à¥à¤Ÿà¥à¤°à¥€'],\n    'counter': ['counter', 'à¤•à¤¾à¤‰à¤‚à¤Ÿà¤°'],\n    'file': ['file submission', 'filing', 'à¤«à¤¾à¤‡à¤²'],\n    'courtroom': ['courtroom', 'à¤•à¥‹à¤°à¥à¤Ÿà¤°à¥‚à¤®'],\n    'office': ['office', 'à¤•à¤¾à¤°à¥à¤¯à¤¾à¤²à¤¯'],\n    'entrance': ['entrance', 'entry', 'gate', 'à¤ªà¥à¤°à¤µà¥‡à¤¶'],\n    'parking': ['parking', 'à¤ªà¤¾à¤°à¥à¤•à¤¿à¤‚à¤—'],\n    'cafeteria': ['cafeteria', 'canteen', 'à¤•à¥ˆà¤‚à¤Ÿà¥€à¤¨'],\n    'restroom': ['toilet', 'restroom', 'washroom', 'à¤¶à¥Œà¤šà¤¾à¤²à¤¯'],\n    'library': ['library', 'à¤²à¤¾à¤‡à¤¬à¥à¤°à¥‡à¤°à¥€']\n  };\n\n  for (const [category, patterns] of Object.entries(locationMap)) {\n    if (patterns.some(pattern => lowerQuery.includes(pattern))) {\n      keywords.push(category);\n    }\n  }\n\n  return keywords;\n}\n","size_bytes":6117},"server/routes-court.ts":{"content":"import { Express } from \"express\";\nimport { z } from \"zod\";\nimport { courtSessionManager } from \"./court-session-manager\";\nimport { analyzeCourtQuery, getCourtDataFetchStrategy, extractImageSearchKeywords } from \"./court-query-analyzer\";\nimport { supabase } from \"./supabase\";\nimport OpenAI from \"openai\";\nimport Groq from \"groq-sdk\";\nimport { normalizeTextForTTS } from \"./text-normalizer\";\nimport { lookupCourtInfo } from \"./court-static-data\";\n\nconst askSchema = z.object({\n  message: z.string().min(1),\n  sessionId: z.string().optional(),\n});\n\nconst ttsSchema = z.object({\n  text: z.string().min(1),\n  voice: z.string().optional(),\n  speed: z.number().optional(),\n});\n\nexport async function registerCourtRoutes(app: Express) {\n  // Court AI Assistant - Main Query Endpoint\n  app.post(\"/api/court/ask\", async (req, res) => {\n    try {\n      const { message, sessionId } = askSchema.parse(req.body);\n      \n      console.log(`\\nðŸ›ï¸ Court Assistant Query: \"${message}\"`);\n\n      // Get or create session\n      const { sessionId: activeSessionId, session } = courtSessionManager.getOrCreateSession(sessionId);\n\n      // Analyze query\n      const analysis = analyzeCourtQuery(message);\n      const strategy = getCourtDataFetchStrategy(analysis);\n\n      console.log('Court Query Analysis:', {\n        topics: analysis.topics,\n        entities: analysis.entityMentions,\n        strategy\n      });\n\n      // PRIORITY: Try static lookup first for instant deterministic responses\n      const staticLookup = lookupCourtInfo(message);\n      \n      if (staticLookup.matched) {\n        console.log(`âœ… Static lookup matched! Type: ${staticLookup.type}, Room: ${staticLookup.roomNumber || 'N/A'}`);\n        \n        // Build building image response structure\n        const buildingImages = staticLookup.buildingData ? [{\n          id: `static-${staticLookup.building}`,\n          title: staticLookup.buildingData.name,\n          description: staticLookup.buildingData.description,\n          image_url: staticLookup.imageUrl || staticLookup.buildingData.image,\n          room_number: staticLookup.roomNumber?.toString(),\n          building_name: staticLookup.buildingData.name\n        }] : [];\n        \n        const assistantResponse = staticLookup.responseText || \"\";\n        \n        // Save conversation\n        courtSessionManager.addMessage(activeSessionId, 'user', message);\n        courtSessionManager.addMessage(activeSessionId, 'assistant', assistantResponse);\n        \n        console.log(`âœ… Court Assistant Response (Static Lookup) - ${assistantResponse.length} chars`);\n        \n        return res.json({\n          response: assistantResponse,\n          sessionId: activeSessionId,\n          buildingImages: buildingImages,\n          metadata: {\n            hasRoomInfo: !!staticLookup.roomNumber,\n            hasBuildingInfo: !!staticLookup.building,\n            hasStaffInfo: false,\n            hasBuildingImages: buildingImages.length > 0,\n            isStaticLookup: true\n          }\n        });\n      }\n      \n      console.log('No static lookup match, proceeding with AI-powered response...');\n\n      // Fetch relevant court data from Supabase\n      let contextData: any = {\n        rooms: [],\n        buildings: [],\n        staff: [],\n        files: [],\n        timings: [],\n        settings: {},\n        buildingImages: []\n      };\n\n      try {\n        // Fetch courtrooms\n        if (strategy.shouldFetchRooms) {\n          const { data: rooms, error } = await supabase\n            .from('court_rooms')\n            .select('*')\n            .eq('is_active', true)\n            .limit(strategy.roomsLimit);\n          \n          if (!error && rooms) contextData.rooms = rooms;\n        }\n\n        // Fetch buildings\n        if (strategy.shouldFetchBuildings) {\n          const { data: buildings, error } = await supabase\n            .from('court_buildings')\n            .select('*')\n            .eq('is_active', true)\n            .limit(strategy.buildingsLimit);\n          \n          if (!error && buildings) contextData.buildings = buildings;\n        }\n\n        // Fetch staff\n        if (strategy.shouldFetchStaff) {\n          const { data: staff, error } = await supabase\n            .from('court_staff')\n            .select('*')\n            .eq('is_active', true)\n            .limit(strategy.staffLimit);\n          \n          if (!error && staff) contextData.staff = staff;\n        }\n\n        // Fetch files\n        if (strategy.shouldFetchFiles) {\n          const { data: files, error } = await supabase\n            .from('court_files')\n            .select('*')\n            .eq('status', 'active')\n            .limit(strategy.filesLimit);\n          \n          if (!error && files) contextData.files = files;\n        }\n\n        // Fetch timings\n        if (strategy.shouldFetchTimings) {\n          const { data: timings, error } = await supabase\n            .from('court_timings')\n            .select('*')\n            .limit(10);\n          \n          if (!error && timings) contextData.timings = timings;\n        }\n\n        // Fetch court settings\n        if (strategy.shouldFetchSettings) {\n          const { data: settings, error } = await supabase\n            .from('court_settings')\n            .select('*')\n            .limit(10);\n          \n          if (!error && settings) {\n            contextData.settings = settings.reduce((acc: any, setting: any) => {\n              acc[setting.key] = setting.value;\n              return acc;\n            }, {});\n          }\n        }\n\n        // Fetch building images for location/navigation queries\n        if (strategy.shouldFetchBuildingImages) {\n          const searchKeywords = extractImageSearchKeywords(message);\n          console.log('Building image search keywords:', searchKeywords);\n\n          if (searchKeywords.length > 0) {\n            // Search building images by matching keywords in title, description, or room_number\n            const { data: buildingImages, error } = await supabase\n              .from('court_building_images')\n              .select('*')\n              .limit(strategy.buildingImagesLimit);\n\n            if (!error && buildingImages) {\n              // Filter images based on keywords\n              const matchingImages = buildingImages.filter((img: any) => {\n                const searchableText = `${img.title} ${img.description} ${img.room_number} ${img.building_name} ${img.department}`.toLowerCase();\n                return searchKeywords.some(keyword => searchableText.includes(keyword.toLowerCase()));\n              });\n\n              contextData.buildingImages = matchingImages.length > 0 ? matchingImages : buildingImages.slice(0, 3);\n            }\n          } else {\n            // If no specific keywords, fetch a few general images\n            const { data: buildingImages, error } = await supabase\n              .from('court_building_images')\n              .select('*')\n              .limit(3);\n            \n            if (!error && buildingImages) contextData.buildingImages = buildingImages;\n          }\n        }\n      } catch (dbError) {\n        console.error('Court database fetch error:', dbError);\n      }\n\n      // Build professional system prompt for Court AI\n      const systemPrompt = buildCourtSystemPrompt(contextData);\n\n      // Get conversation history\n      const messages = courtSessionManager.getConversationHistory(activeSessionId, systemPrompt);\n\n      // Add current user message\n      messages.push({ role: 'user', content: message });\n\n      // LLM with Fallback: OpenAI GPT-4o â†’ Groq Llama\n      let assistantResponse = \"\";\n      \n      try {\n        // PRIMARY: Try OpenAI GPT-4o first\n        console.log('ðŸ¤– Court Assistant: Trying OpenAI GPT-4o...');\n        const openai = new OpenAI({\n          apiKey: process.env.OPENAI_API_KEY,\n        });\n\n        const completion = await openai.chat.completions.create({\n          model: \"gpt-4o\",\n          messages: messages as any[],\n          temperature: 0.7,\n          max_completion_tokens: 1000,\n        });\n\n        assistantResponse = completion.choices[0]?.message?.content || \"\";\n        console.log('âœ… OpenAI GPT-4o Success');\n\n      } catch (openaiError: any) {\n        // FALLBACK: Use Groq if OpenAI fails\n        console.warn('âš ï¸ OpenAI GPT-4o failed, falling back to Groq...', openaiError.message);\n        \n        try {\n          const groq = new Groq({\n            apiKey: process.env.GROQ_API_KEY, // Assistant Groq key\n          });\n\n          const groqCompletion = await groq.chat.completions.create({\n            model: \"llama-3.3-70b-versatile\",\n            messages: messages as any[],\n            temperature: 0.7,\n            max_tokens: 1000,\n          });\n\n          assistantResponse = groqCompletion.choices[0]?.message?.content || \"\";\n          console.log('âœ… Groq Llama Success (Fallback)');\n\n        } catch (groqError: any) {\n          console.error('âŒ Both OpenAI and Groq failed:', groqError.message);\n          assistantResponse = \"I apologize, but I'm experiencing technical difficulties. Please try again in a moment.\";\n        }\n      }\n\n      if (!assistantResponse) {\n        assistantResponse = \"I apologize, but I couldn't process your request. Please try again.\";\n      }\n\n      // Save conversation\n      courtSessionManager.addMessage(activeSessionId, 'user', message);\n      courtSessionManager.addMessage(activeSessionId, 'assistant', assistantResponse);\n\n      console.log(`âœ… Court Assistant Response Generated (${assistantResponse.length} chars)`);\n\n      res.json({\n        response: assistantResponse,\n        sessionId: activeSessionId,\n        buildingImages: contextData.buildingImages || [],\n        metadata: {\n          hasRoomInfo: contextData.rooms.length > 0,\n          hasBuildingInfo: contextData.buildings.length > 0,\n          hasStaffInfo: contextData.staff.length > 0,\n          hasBuildingImages: (contextData.buildingImages || []).length > 0\n        }\n      });\n\n    } catch (error: any) {\n      console.error('Court assistant error:', error);\n      res.status(500).json({\n        response: \"I apologize for the inconvenience. There was an error processing your request. Please try again.\",\n        error: error.message\n      });\n    }\n  });\n\n  // ElevenLabs TTS Endpoint for Court Assistant (Hinglish optimized)\n  app.post(\"/api/court/tts\", async (req, res) => {\n    try {\n      const { text, voice, speed } = ttsSchema.parse(req.body);\n\n      if (!text || text.trim().length === 0) {\n        return res.status(400).json({\n          message: \"Text cannot be empty\",\n          error: \"EMPTY_TEXT\"\n        });\n      }\n\n      console.log(`ðŸ”Š Court TTS Request (ElevenLabs): ${text.substring(0, 50)}...`);\n\n      const elevenlabsApiKey = process.env.ELEVENLABS_API_KEY;\n      \n      if (!elevenlabsApiKey || elevenlabsApiKey === 'your_elevenlabs_api_key_here') {\n        console.error('âŒ ElevenLabs API key not configured');\n        return res.status(500).json({\n          message: \"TTS service not configured\",\n          error: \"ELEVENLABS_KEY_MISSING\"\n        });\n      }\n\n      // Comprehensive text cleaning for TTS - remove ALL markdown and special formatting\n      const cleanTextForSpeech = (text: string) => {\n        return text\n          .replace(/\\|/g, ' ')\n          .replace(/---+/g, '. ')\n          .replace(/#{1,6}\\s+/g, '')\n          // Remove triple asterisks first (before double)\n          .replace(/\\*\\*\\*(.*?)\\*\\*\\*/g, '$1')\n          // Remove double asterisks (bold)\n          .replace(/\\*\\*(.*?)\\*\\*/g, '$1')\n          // Remove single asterisks (italic)\n          .replace(/\\*(.*?)\\*/g, '$1')\n          // Remove underscores (bold/italic)\n          .replace(/__(.*?)__/g, '$1')\n          .replace(/_(.*?)_/g, '$1')\n          // Remove inline code\n          .replace(/`(.*?)`/g, '$1')\n          // Remove markdown links [text](url) - keep only text\n          .replace(/\\[(.*?)\\]\\(.*?\\)/g, '$1')\n          // Remove standalone URLs in parentheses\n          .replace(/\\(https?:\\/\\/[^\\)]+\\)/g, '')\n          // Remove emojis\n          .replace(/ðŸ“Š|ðŸ“Œ|ðŸŽ“|â°|ðŸ“ž|âš–ï¸|âœ…|âŒ|ðŸ”Š|ðŸŽ¯|ðŸ“§|ðŸ“/g, '')\n          // Clean up multiple spaces\n          .replace(/\\s+/g, ' ')\n          .trim();\n      };\n\n      const cleanedText = cleanTextForSpeech(text);\n      \n      // Apply text normalization for proper pronunciation of times, phone numbers, emails, etc.\n      const normalizedText = normalizeTextForTTS(cleanedText);\n      const textToSpeak = normalizedText;\n\n      console.log(`Court TTS: Processing text (${textToSpeak.length} characters)...`);\n      console.log(`Court TTS: Normalized text preview: \"${textToSpeak.substring(0, 100)}...\"`);\n\n      // ElevenLabs has a ~5000 character limit - enforce safe limit to avoid API errors\n      const MAX_CHAR_LIMIT = 4500;\n      let finalText = textToSpeak;\n      \n      if (textToSpeak.length > MAX_CHAR_LIMIT) {\n        console.warn(`âš ï¸ Court TTS: Text exceeds ${MAX_CHAR_LIMIT} chars (${textToSpeak.length}). Truncating to fit ElevenLabs limit...`);\n        \n        // Intelligent truncation: find last complete sentence within limit\n        finalText = textToSpeak.substring(0, MAX_CHAR_LIMIT);\n        const lastPeriod = finalText.lastIndexOf('.');\n        const lastQuestion = finalText.lastIndexOf('?');\n        const lastExclamation = finalText.lastIndexOf('!');\n        \n        const lastSentenceEnd = Math.max(lastPeriod, lastQuestion, lastExclamation);\n        if (lastSentenceEnd > MAX_CHAR_LIMIT * 0.8) {\n          // If we found a sentence end in the last 20%, use it\n          finalText = textToSpeak.substring(0, lastSentenceEnd + 1);\n        }\n        \n        console.log(`Court TTS: Truncated to ${finalText.length} characters at sentence boundary`);\n      }\n\n      // ElevenLabs multilingual voice for Hinglish\n      // Using custom voice ID with optimized settings for smooth natural speech\n      const voiceId = voice || \"3AMU7jXQuQa3oRvRqUmb\"; // Custom voice for Hinglish\n      const modelId = \"eleven_multilingual_v2\"; // Best for Hinglish\n\n      // Process entire text in one go for smooth continuous speech (no chunking!)\n      const requestBody = {\n        text: finalText,\n        model_id: modelId,\n        voice_settings: {\n          stability: 0.5,\n          similarity_boost: 0.75,\n          style: 0.3,\n          use_speaker_boost: true\n        }\n      };\n\n      const response = await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${voiceId}`, {\n        method: 'POST',\n        headers: {\n          'Accept': 'audio/mpeg',\n          'Content-Type': 'application/json',\n          'xi-api-key': elevenlabsApiKey\n        },\n        body: JSON.stringify(requestBody)\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        let errorDetails = errorText;\n        \n        try {\n          const errorJson = JSON.parse(errorText);\n          errorDetails = errorJson.detail || errorJson.message || errorText;\n        } catch {\n          // Keep original errorText if not JSON\n        }\n        \n        console.error(`âŒ Court TTS failed (${response.status}):`, errorDetails);\n        \n        // Provide specific error messages for common issues\n        if (response.status === 413 || errorDetails.includes('too long')) {\n          throw new Error(`Text too long for TTS provider (max ~5000 chars)`);\n        } else if (response.status === 401 || response.status === 403) {\n          throw new Error(`TTS authentication failed - check API key`);\n        } else if (response.status === 429) {\n          throw new Error(`TTS rate limit exceeded - please try again`);\n        } else {\n          throw new Error(`ElevenLabs API error (${response.status}): ${errorDetails}`);\n        }\n      }\n\n      const audioBuffer = await response.arrayBuffer();\n      const finalAudio = Buffer.from(audioBuffer);\n\n      console.log(`âœ… Court TTS: Complete! Generated ${finalAudio.length} bytes of continuous audio`);\n\n      res.set({\n        'Content-Type': 'audio/mpeg',\n        'Content-Length': finalAudio.length,\n        'X-TTS-Provider': 'elevenlabs',\n        'X-TTS-Mode': 'continuous'\n      });\n\n      res.send(finalAudio);\n\n    } catch (error: any) {\n      console.error('âŒ Court TTS error:', error);\n      res.status(500).json({\n        message: \"TTS generation failed\",\n        error: error.message\n      });\n    }\n  });\n\n  // OpenAI TTS Endpoint for Court Assistant (Fallback with \"ash\" voice)\n  app.post(\"/api/court/tts-openai\", async (req, res) => {\n    try {\n      const { text } = ttsSchema.parse(req.body);\n\n      if (!text || text.trim().length === 0) {\n        return res.status(400).json({\n          message: \"Text cannot be empty\",\n          error: \"EMPTY_TEXT\"\n        });\n      }\n\n      console.log(`ðŸ”Š Court TTS Request (OpenAI - ash voice): ${text.substring(0, 50)}...`);\n\n      const openaiApiKey = process.env.OPENAI_API_KEY;\n      \n      if (!openaiApiKey) {\n        console.error('âŒ OpenAI API key not configured');\n        return res.status(500).json({\n          message: \"OpenAI TTS service not configured\",\n          error: \"OPENAI_KEY_MISSING\"\n        });\n      }\n\n      // Comprehensive text cleaning for TTS - remove ALL markdown and special formatting\n      const cleanTextForSpeech = (text: string) => {\n        return text\n          .replace(/\\|/g, ' ')\n          .replace(/---+/g, '. ')\n          .replace(/#{1,6}\\s+/g, '')\n          // Remove triple asterisks first (before double)\n          .replace(/\\*\\*\\*(.*?)\\*\\*\\*/g, '$1')\n          // Remove double asterisks (bold)\n          .replace(/\\*\\*(.*?)\\*\\*/g, '$1')\n          // Remove single asterisks (italic)\n          .replace(/\\*(.*?)\\*/g, '$1')\n          // Remove underscores (bold/italic)\n          .replace(/__(.*?)__/g, '$1')\n          .replace(/_(.*?)_/g, '$1')\n          // Remove inline code\n          .replace(/`(.*?)`/g, '$1')\n          // Remove markdown links [text](url) - keep only text\n          .replace(/\\[(.*?)\\]\\(.*?\\)/g, '$1')\n          // Remove standalone URLs in parentheses\n          .replace(/\\(https?:\\/\\/[^\\)]+\\)/g, '')\n          // Remove emojis\n          .replace(/ðŸ“Š|ðŸ“Œ|ðŸŽ“|â°|ðŸ“ž|âš–ï¸|âœ…|âŒ|ðŸ”Š|ðŸŽ¯|ðŸ“§|ðŸ“/g, '')\n          // Clean up multiple spaces\n          .replace(/\\s+/g, ' ')\n          .trim();\n      };\n\n      const cleanedText = cleanTextForSpeech(text);\n      \n      // Apply text normalization for proper pronunciation of times, phone numbers, emails, etc.\n      const normalizedText = normalizeTextForTTS(cleanedText);\n\n      console.log(`Court TTS (OpenAI): Processing text (${normalizedText.length} characters)...`);\n      console.log(`Court TTS (OpenAI): Normalized text preview: \"${normalizedText.substring(0, 100)}...\"`);\n\n      // OpenAI TTS has a 4096 character limit\n      const MAX_CHAR_LIMIT = 4000;\n      let finalText = normalizedText;\n      \n      if (normalizedText.length > MAX_CHAR_LIMIT) {\n        console.warn(`âš ï¸ Court TTS (OpenAI): Text exceeds ${MAX_CHAR_LIMIT} chars. Truncating...`);\n        \n        finalText = normalizedText.substring(0, MAX_CHAR_LIMIT);\n        const lastPeriod = finalText.lastIndexOf('.');\n        const lastQuestion = finalText.lastIndexOf('?');\n        const lastExclamation = finalText.lastIndexOf('!');\n        \n        const lastSentenceEnd = Math.max(lastPeriod, lastQuestion, lastExclamation);\n        if (lastSentenceEnd > MAX_CHAR_LIMIT * 0.8) {\n          finalText = normalizedText.substring(0, lastSentenceEnd + 1);\n        }\n      }\n\n      // OpenAI TTS API Call - using \"ash\" voice for natural, smooth speech\n      const response = await fetch('https://api.openai.com/v1/audio/speech', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${openaiApiKey}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          model: 'tts-1',\n          input: finalText,\n          voice: 'ash',\n          speed: 1.0\n        })\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error(`âŒ OpenAI TTS failed (${response.status}):`, errorText);\n        throw new Error(`OpenAI TTS API error (${response.status})`);\n      }\n\n      const audioBuffer = await response.arrayBuffer();\n      const finalAudio = Buffer.from(audioBuffer);\n\n      console.log(`âœ… Court TTS (OpenAI): Complete! Generated ${finalAudio.length} bytes with ash voice`);\n\n      res.set({\n        'Content-Type': 'audio/mpeg',\n        'Content-Length': finalAudio.length,\n        'X-TTS-Provider': 'openai',\n        'X-TTS-Voice': 'ash',\n        'X-TTS-Mode': 'continuous'\n      });\n\n      res.send(finalAudio);\n\n    } catch (error: any) {\n      console.error('âŒ Court TTS (OpenAI) error:', error);\n      res.status(500).json({\n        message: \"OpenAI TTS generation failed\",\n        error: error.message\n      });\n    }\n  });\n}\n\nfunction buildCourtSystemPrompt(contextData: any): string {\n  const { rooms, buildings, staff, files, timings, settings, buildingImages } = contextData;\n\n  let prompt = `You are the Kaithal District Court AI Assistant - a professional, helpful, and knowledgeable virtual guide for the Kaithal District Court in Haryana, India.\n\n**YOUR ROLE:**\n- Guide visitors, lawyers, litigants, and staff through the court premises\n- Provide accurate information about courtroom locations, file tracking, and staff directories\n- Help users navigate the court complex efficiently\n- Answer questions about court procedures, timings, and facilities\n- Maintain a professional, respectful, and courteous tone at all times\n\n**LANGUAGE & COMMUNICATION STYLE:**\n- **PRIMARY LANGUAGE**: Always respond in Hinglish (Hindi + English mix) by default\n- Use Hindi words mixed with English naturally, like people speak in India: \"Courtroom number 5 main hall ke left side par hai\"\n- Examples of Hinglish responses:\n  * \"Ji haan, main aapki madad kar sakta hoon. Courtroom 5 ground floor par hai.\"\n  * \"File tracking ke liye aapko registry office jana hoga jo building A mein hai.\"\n  * \"Staff directory dekhne ke liye main aapko details de sakta hoon.\"\n- **ENGLISH MODE**: If user specifically asks in pure English or says \"speak in English\", then respond in pure English\n- Be professional yet approachable\n- Use simple, clear language that anyone can understand\n- Be concise but comprehensive\n- Always be respectful and helpful\n- Use bullet points for clarity when providing multiple details\n- When giving directions, be specific about building, floor, and room numbers\n\n**CRITICAL FORMATTING RULES - MUST FOLLOW:**\n- NEVER use ANY markdown formatting: no **, ***, *, __, [], (), etc.\n- NEVER use bold, italic, or links in your responses\n- Keep responses simple and plain text only\n- Use simple dashes (-) for lists, nothing else\n- DO NOT wrap text in asterisks or any special characters\n\n**CORRECT FORMAT (Use this):**\n\"Court ka email hai kaithalcourt@gov.in aur phone number hai +91-1746-234567\"\n\"Email: kaithalcourt@gov.in\"\n\"Reception: +91-1746-234567\"\n\n**WRONG FORMAT (Never use this):**\n\"**Email:** kaithalcourt@gov.in\" âŒ\n\"[website](https://example.com)\" âŒ\n\"***Important:*** Contact us\" âŒ\n\nThis is essential for voice assistant - markdown breaks text-to-speech!\n\n**CURRENT COURT DATA:**\\n\\n`;\n\n  // Add court settings\n  if (settings && Object.keys(settings).length > 0) {\n    prompt += `**Court Information:**\\n`;\n    Object.entries(settings).forEach(([key, value]) => {\n      prompt += `- ${key}: ${JSON.stringify(value)}\\n`;\n    });\n    prompt += `\\n`;\n  }\n\n  // Add buildings info\n  if (buildings && buildings.length > 0) {\n    prompt += `**Court Buildings:**\\n`;\n    buildings.forEach((building: any) => {\n      prompt += `- ${building.building_name} (${building.building_code || 'N/A'})\\n`;\n      if (building.description) prompt += `  Description: ${building.description}\\n`;\n      if (building.total_floors) prompt += `  Floors: ${building.total_floors}\\n`;\n      if (building.location_details) prompt += `  Location: ${building.location_details}\\n`;\n    });\n    prompt += `\\n`;\n  }\n\n  // Add rooms info\n  if (rooms && rooms.length > 0) {\n    prompt += `**Courtrooms & Offices:**\\n`;\n    rooms.slice(0, 30).forEach((room: any) => {\n      prompt += `- Room ${room.room_number}: ${room.room_name || room.room_type}\\n`;\n      if (room.room_purpose) prompt += `  Purpose: ${room.room_purpose}\\n`;\n      if (room.floor_number) prompt += `  Floor: ${room.floor_number}\\n`;\n      if (room.incharge_name) prompt += `  In-charge: ${room.incharge_name}\\n`;\n      if (room.timings) prompt += `  Timings: ${room.timings}\\n`;\n    });\n    prompt += `\\n`;\n  }\n\n  // Add staff info\n  if (staff && staff.length > 0) {\n    prompt += `**Court Staff:**\\n`;\n    staff.slice(0, 20).forEach((person: any) => {\n      prompt += `- ${person.staff_name} - ${person.designation}\\n`;\n      if (person.department) prompt += `  Department: ${person.department}\\n`;\n      if (person.specialization) prompt += `  Specialization: ${person.specialization}\\n`;\n      if (person.office_hours) prompt += `  Office Hours: ${person.office_hours}\\n`;\n    });\n    prompt += `\\n`;\n  }\n\n  // Add timings\n  if (timings && timings.length > 0) {\n    prompt += `**Court Timings:**\\n`;\n    timings.forEach((timing: any) => {\n      prompt += `- ${timing.facility_name}: ${timing.opening_time} - ${timing.closing_time}\\n`;\n      if (timing.days) prompt += `  Days: ${timing.days.join(', ')}\\n`;\n      if (timing.special_notes) prompt += `  Note: ${timing.special_notes}\\n`;\n    });\n    prompt += `\\n`;\n  }\n\n  // Add file tracking info if available\n  if (files && files.length > 0) {\n    prompt += `**Recent File Locations:**\\n`;\n    files.slice(0, 10).forEach((file: any) => {\n      prompt += `- File ${file.file_number}: ${file.current_location}\\n`;\n      if (file.file_type) prompt += `  Type: ${file.file_type}\\n`;\n      if (file.status) prompt += `  Status: ${file.status}\\n`;\n    });\n    prompt += `\\n`;\n  }\n\n  // Add building images for visual context\n  if (buildingImages && buildingImages.length > 0) {\n    prompt += `**Available Building Images (for location/navigation help):**\\n`;\n    buildingImages.forEach((img: any) => {\n      prompt += `- ${img.title}\\n`;\n      if (img.description) prompt += `  Description: ${img.description}\\n`;\n      if (img.room_number) prompt += `  Room: ${img.room_number}\\n`;\n      if (img.building_name) prompt += `  Building: ${img.building_name}\\n`;\n      if (img.department) prompt += `  Department: ${img.department}\\n`;\n      if (img.contact_person) prompt += `  Contact: ${img.contact_person}\\n`;\n      prompt += `  Image available: Yes (will be shown to user)\\n`;\n    });\n    prompt += `\\n`;\n    prompt += `**NOTE**: When answering location/navigation questions, if there's a relevant building image available, mention that an image is being shown to help them visualize the location.\\n\\n`;\n  }\n\n  prompt += `**IMPORTANT GUIDELINES:**\n- If a user asks about a specific file, room, or staff member, provide complete details including location, timings, and contact information\n- When describing locations, always mention: Building name â†’ Floor â†’ Room number\n- If you don't have specific information, politely inform the user and suggest they contact the court office\n- For legal procedures, provide general guidance but advise consulting with court staff or legal professionals for specific cases\n- Always maintain confidentiality and professionalism\n\nRemember: You are here to help people navigate the court system easily and efficiently. Be patient, clear, and helpful!`;\n\n  return prompt;\n}\n","size_bytes":27520},"server/routes-court-admin-simple.ts":{"content":"import express from 'express';\nimport type { Express, Request, Response } from 'express';\n\nconst router = express.Router();\n\n// Simple placeholder routes - Database will be connected when Supabase is configured\n// For now, return empty data to prevent server crashes\n\n// ============================================================================\n// COURTROOMS ROUTES\n// ============================================================================\n\nrouter.get('/courtrooms', async (req: Request, res: Response) => {\n  res.json({ success: true, data: [] });\n});\n\nrouter.get('/courtrooms/:id', async (req: Request, res: Response) => {\n  res.json({ success: true, data: null });\n});\n\nrouter.post('/courtrooms', async (req: Request, res: Response) => {\n  res.json({ success: true, data: req.body });\n});\n\nrouter.put('/courtrooms/:id', async (req: Request, res: Response) => {\n  res.json({ success: true, data: req.body });\n});\n\nrouter.delete('/courtrooms/:id', async (req: Request, res: Response) => {\n  res.json({ success: true, data: { id: req.params.id } });\n});\n\n// ============================================================================\n// BUILDINGS ROUTES\n// ============================================================================\n\nrouter.get('/buildings', async (req: Request, res: Response) => {\n  res.json({ success: true, data: [] });\n});\n\nrouter.post('/buildings', async (req: Request, res: Response) => {\n  res.json({ success: true, data: req.body });\n});\n\nrouter.put('/buildings/:id', async (req: Request, res: Response) => {\n  res.json({ success: true, data: req.body });\n});\n\nrouter.delete('/buildings/:id', async (req: Request, res: Response) => {\n  res.json({ success: true, data: { id: req.params.id } });\n});\n\n// ============================================================================\n// STAFF ROUTES\n// ============================================================================\n\nrouter.get('/staff', async (req: Request, res: Response) => {\n  res.json({ success: true, data: [] });\n});\n\nrouter.post('/staff', async (req: Request, res: Response) => {\n  res.json({ success: true, data: req.body });\n});\n\nrouter.put('/staff/:id', async (req: Request, res: Response) => {\n  res.json({ success: true, data: req.body });\n});\n\nrouter.delete('/staff/:id', async (req: Request, res: Response) => {\n  res.json({ success: true, data: { id: req.params.id } });\n});\n\n// ============================================================================\n// FILES ROUTES\n// ============================================================================\n\nrouter.get('/files', async (req: Request, res: Response) => {\n  res.json({ success: true, data: [] });\n});\n\nrouter.post('/files', async (req: Request, res: Response) => {\n  res.json({ success: true, data: req.body });\n});\n\nrouter.put('/files/:id', async (req: Request, res: Response) => {\n  res.json({ success: true, data: req.body });\n});\n\nrouter.delete('/files/:id', async (req: Request, res: Response) => {\n  res.json({ success: true, data: { id: req.params.id } });\n});\n\n// ============================================================================\n// BUILDING IMAGES ROUTES\n// ============================================================================\n\nrouter.get('/building-images', async (req: Request, res: Response) => {\n  res.json({ success: true, data: [] });\n});\n\nrouter.post('/building-images/search', async (req: Request, res: Response) => {\n  res.json({ success: true, data: [] });\n});\n\nrouter.post('/building-images', async (req: Request, res: Response) => {\n  // For now, just return success - will implement file upload later\n  res.json({ success: true, data: { ...req.body, image_url: '/uploads/placeholder.jpg' } });\n});\n\nrouter.put('/building-images/:id', async (req: Request, res: Response) => {\n  res.json({ success: true, data: req.body });\n});\n\nrouter.delete('/building-images/:id', async (req: Request, res: Response) => {\n  res.json({ success: true, data: { id: req.params.id } });\n});\n\n// ============================================================================\n// STATS ROUTE\n// ============================================================================\n\nrouter.get('/stats', async (req: Request, res: Response) => {\n  const stats = {\n    courtrooms: 0,\n    buildings: 0,\n    staff: 0,\n    files: 0\n  };\n  res.json({ success: true, data: stats });\n});\n\nexport function registerCourtAdminRoutes(app: Express) {\n  app.use('/api/court-admin', router);\n  console.log('âœ… Court Admin routes registered at /api/court-admin (placeholder mode)');\n}\n","size_bytes":4546},"client/src/hooks/use-court-three-tier-tts.tsx":{"content":"import { useState, useCallback } from \"react\";\n\ninterface TTSOptions {\n  onStart?: () => void;\n  onEnd?: () => void;\n  onError?: (error: string) => void;\n  voice?: string;\n  speed?: number;\n}\n\ninterface UseCourtThreeTierTTSReturn {\n  speak: (text: string, options?: TTSOptions) => Promise<void>;\n  stop: () => void;\n  isSpeaking: boolean;\n  isLoading: boolean;\n}\n\nexport function useCourtThreeTierTTS(): UseCourtThreeTierTTSReturn {\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [currentAudio, setCurrentAudio] = useState<HTMLAudioElement | null>(null);\n\n  const speak = useCallback(async (text: string, options: TTSOptions = {}) => {\n    console.log('Court TTS: Starting three-tier speech (ElevenLabs â†’ OpenAI \"ash\" â†’ Browser)');\n\n    let callbacksFired = false;\n\n    try {\n      setIsLoading(true);\n\n      // Stop any current audio\n      if (currentAudio) {\n        currentAudio.pause();\n        currentAudio.currentTime = 0;\n      }\n\n      // TIER 1: Try ElevenLabs TTS first (multilingual for Hinglish)\n      try {\n        console.log('Court TTS: Trying ElevenLabs TTS (Tier 1)...');\n        const response = await fetch(`${import.meta.env.VITE_API_BASE_URL || ''}/api/court/tts`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            text: text,\n            voice: options.voice || \"3AMU7jXQuQa3oRvRqUmb\",\n            speed: options.speed || 1.0\n          })\n        });\n\n        if (response.ok) {\n          const audioBlob = await response.blob();\n          const audioUrl = URL.createObjectURL(audioBlob);\n          const audio = new Audio(audioUrl);\n\n          audio.onloadeddata = () => {\n            console.log('Court TTS: ElevenLabs audio loaded successfully');\n            setIsLoading(false);\n            setIsSpeaking(true);\n            if (!callbacksFired && options.onStart) {\n              callbacksFired = true;\n              options.onStart();\n            }\n          };\n\n          audio.onended = () => {\n            console.log('Court TTS: ElevenLabs playback ended');\n            setIsSpeaking(false);\n            URL.revokeObjectURL(audioUrl);\n            if (options.onEnd) options.onEnd();\n          };\n\n          audio.onerror = (e) => {\n            console.error('Court TTS: ElevenLabs audio playback error', e);\n            setIsSpeaking(false);\n            setIsLoading(false);\n            URL.revokeObjectURL(audioUrl);\n            if (!callbacksFired && options.onError) {\n              callbacksFired = true;\n              options.onError('ElevenLabs audio playback failed');\n            }\n          };\n\n          setCurrentAudio(audio);\n          await audio.play();\n          return; // Success with ElevenLabs\n        } else {\n          throw new Error(`ElevenLabs TTS failed: ${response.status}`);\n        }\n      } catch (elevenlabsError) {\n        console.warn('Court TTS: ElevenLabs failed, trying OpenAI TTS with \"ash\" voice (Tier 2)...', elevenlabsError);\n        \n        // TIER 2: Fallback to OpenAI TTS with \"ash\" voice\n        try {\n          const response = await fetch(`${import.meta.env.VITE_API_BASE_URL || ''}/api/court/tts-openai`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n              text: text\n            })\n          });\n\n          if (response.ok) {\n            const audioBlob = await response.blob();\n            const audioUrl = URL.createObjectURL(audioBlob);\n            const audio = new Audio(audioUrl);\n\n            audio.onloadeddata = () => {\n              console.log('Court TTS: OpenAI (ash) audio loaded successfully');\n              setIsLoading(false);\n              setIsSpeaking(true);\n              if (!callbacksFired && options.onStart) {\n                callbacksFired = true;\n                options.onStart();\n              }\n            };\n\n            audio.onended = () => {\n              console.log('Court TTS: OpenAI (ash) playback ended');\n              setIsSpeaking(false);\n              URL.revokeObjectURL(audioUrl);\n              if (options.onEnd) options.onEnd();\n            };\n\n            audio.onerror = () => {\n              console.error('Court TTS: OpenAI (ash) audio playback failed');\n              setIsSpeaking(false);\n              setIsLoading(false);\n              URL.revokeObjectURL(audioUrl);\n              if (!callbacksFired && options.onError) {\n                callbacksFired = true;\n                options.onError('OpenAI TTS audio playback failed');\n              }\n            };\n\n            setCurrentAudio(audio);\n            await audio.play();\n            return; // Success with OpenAI TTS\n          } else {\n            throw new Error(`OpenAI TTS failed: ${response.status}`);\n          }\n        } catch (openaiError) {\n          console.warn('Court TTS: OpenAI TTS failed, using Browser speech (Tier 3)...', openaiError);\n        }\n      }\n\n      // TIER 3: Final fallback to Browser Speech API\n      setIsLoading(false);\n      \n      if (!callbacksFired && options.onError) {\n        callbacksFired = true;\n        options.onError('API providers unavailable, using browser fallback');\n      }\n\n      console.log('Court TTS: Using browser Speech Synthesis');\n      const utterance = new SpeechSynthesisUtterance(text);\n      utterance.lang = 'en-IN';\n      utterance.rate = options.speed || 1.0;\n\n      utterance.onstart = () => {\n        setIsSpeaking(true);\n        // Don't fire onStart again if already fired\n      };\n\n      utterance.onend = () => {\n        setIsSpeaking(false);\n        if (options.onEnd) options.onEnd();\n      };\n\n      utterance.onerror = (error) => {\n        console.error('Court TTS: Browser speech also failed:', error);\n        setIsSpeaking(false);\n      };\n\n      window.speechSynthesis.speak(utterance);\n\n    } catch (error) {\n      console.error('Court TTS: Complete failure:', error);\n      setIsLoading(false);\n      setIsSpeaking(false);\n      \n      if (!callbacksFired && options.onError) {\n        callbacksFired = true;\n        options.onError(error instanceof Error ? error.message : 'Speech generation failed');\n      }\n    }\n  }, [currentAudio]);\n\n  const stop = useCallback(() => {\n    if (currentAudio) {\n      currentAudio.pause();\n      currentAudio.currentTime = 0;\n      setCurrentAudio(null);\n    }\n    window.speechSynthesis.cancel();\n    setIsSpeaking(false);\n  }, [currentAudio]);\n\n  return { speak, stop, isSpeaking, isLoading };\n}\n","size_bytes":6608},"server/routes-court-admin.ts":{"content":"import type { Express, Request, Response } from \"express\";\nimport { supabase } from \"./supabase\";\nimport { z } from \"zod\";\nimport bcrypt from \"bcryptjs\";\n\n// ============================================================================\n// VALIDATION SCHEMAS\n// ============================================================================\n\nconst buildingSchema = z.object({\n  name: z.string().min(1),\n  building_code: z.string().min(1),\n  description: z.string().optional(),\n  landmark: z.string().optional(),\n  directional_notes: z.string().optional(),\n  number_of_floors: z.number().optional(),\n  photo_url: z.string().optional(),\n});\n\nconst roomSchema = z.object({\n  room_number: z.string().min(1),\n  room_name: z.string().optional(),\n  building_id: z.string().uuid(),\n  floor: z.number().optional(),\n  purpose: z.string().optional(),\n  in_charge_staff_id: z.string().uuid().optional().nullable(),\n  timing: z.string().optional(),\n  status: z.string().optional(),\n  photo_url: z.string().optional(),\n  notes: z.string().optional(),\n});\n\nconst staffSchema = z.object({\n  full_name: z.string().min(1),\n  employee_id: z.string().min(1),\n  department_id: z.string().uuid().optional().nullable(),\n  designation: z.string().min(1),\n  role: z.string().optional(),\n  email: z.string().email().optional(),\n  phone: z.string().optional(),\n  assigned_building_id: z.string().uuid().optional().nullable(),\n  assigned_room_id: z.string().uuid().optional().nullable(),\n  photo_url: z.string().optional(),\n});\n\nconst departmentSchema = z.object({\n  name: z.string().min(1),\n  slug: z.string().min(1),\n  department_code: z.string().min(1),\n  head_name: z.string().optional(),\n  head_designation: z.string().optional(),\n  contact_email: z.string().email().optional(),\n  contact_phone: z.string().optional(),\n  description: z.string().optional(),\n});\n\nconst faqSchema = z.object({\n  question: z.string().min(1),\n  answer: z.string().min(1),\n  category: z.string().min(1),\n  department_id: z.string().uuid().optional().nullable(),\n  is_head_editable: z.boolean().optional(),\n  priority: z.number().optional(),\n});\n\nconst ticketSchema = z.object({\n  question: z.string().min(1),\n  source: z.string().optional(),\n  status: z.string().optional(),\n  assigned_to: z.string().uuid().optional().nullable(),\n  resolution_notes: z.string().optional(),\n});\n\nconst miniAdminSchema = z.object({\n  name: z.string().min(1),\n  username: z.string().min(3),\n  password: z.string().min(6).optional(),\n  role: z.string().min(1),\n  scope_type: z.string().optional(),\n  scope_value: z.string().optional(),\n  email: z.string().email().optional(),\n  permissions: z.any().optional(),\n});\n\nconst announcementSchema = z.object({\n  title: z.string().min(1),\n  message: z.string().min(1),\n  priority: z.string().optional(),\n  is_pinned: z.boolean().optional(),\n  expiry_date: z.string().optional().nullable(),\n  department_id: z.string().uuid().optional().nullable(),\n});\n\n// ============================================================================\n// HELPER FUNCTIONS\n// ============================================================================\n\nfunction generateSlug(name: string): string {\n  return name.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');\n}\n\nfunction generateCode(prefix: string, length: number = 3): string {\n  const random = Math.floor(Math.random() * Math.pow(10, length));\n  return `${prefix}-${String(random).padStart(length, '0')}`;\n}\n\nfunction generatePassword(length: number = 12): string {\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$';\n  let password = '';\n  for (let i = 0; i < length; i++) {\n    password += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  return password;\n}\n\n// ============================================================================\n// MAIN ROUTES FUNCTION\n// ============================================================================\n\nexport function registerCourtAdminRoutes(app: Express) {\n  \n  // ============================================================================\n  // AUTHENTICATION\n  // ============================================================================\n  \n  app.post(\"/api/court-admin/login\", async (req: Request, res: Response) => {\n    try {\n      const { username, password } = req.body;\n      \n      const { data: admin, error } = await supabase\n        .from('court_main_admin')\n        .select('*')\n        .eq('username', username)\n        .single();\n      \n      if (error || !admin) {\n        return res.status(401).json({ message: 'Invalid credentials' });\n      }\n      \n      const isValid = await bcrypt.compare(password, admin.password);\n      if (!isValid) {\n        return res.status(401).json({ message: 'Invalid credentials' });\n      }\n      \n      res.json({ \n        success: true, \n        admin: {\n          id: admin.id,\n          username: admin.username,\n          full_name: admin.full_name,\n          email: admin.email\n        }\n      });\n    } catch (error: any) {\n      console.error('Login error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  // ============================================================================\n  // DASHBOARD STATS\n  // ============================================================================\n  \n  app.get(\"/api/court-admin/stats\", async (req: Request, res: Response) => {\n    try {\n      const [buildings, rooms, staff, departments, tickets, faqs] = await Promise.all([\n        supabase.from('court_buildings').select('id', { count: 'exact', head: true }),\n        supabase.from('court_rooms').select('id', { count: 'exact', head: true }),\n        supabase.from('court_staff').select('id', { count: 'exact', head: true }),\n        supabase.from('court_departments').select('id', { count: 'exact', head: true }),\n        supabase.from('court_tickets').select('id', { count: 'exact', head: true }).eq('status', 'Pending'),\n        supabase.from('court_faqs').select('id', { count: 'exact', head: true }),\n      ]);\n      \n      res.json({\n        buildings: buildings.count || 0,\n        rooms: rooms.count || 0,\n        staff: staff.count || 0,\n        departments: departments.count || 0,\n        pending_tickets: tickets.count || 0,\n        faqs: faqs.count || 0,\n      });\n    } catch (error: any) {\n      console.error('Stats error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  // ============================================================================\n  // GENERAL INFO (COURT SETTINGS)\n  // ============================================================================\n  \n  app.get(\"/api/court-admin/general-info\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('court_settings')\n        .select('*')\n        .eq('key', 'court_basic_info')\n        .single();\n      \n      if (error && error.code !== 'PGRST116') throw error;\n      res.json({ data: data?.value || {} });\n    } catch (error: any) {\n      console.error('General info error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.post(\"/api/court-admin/general-info\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('court_settings')\n        .upsert({\n          key: 'court_basic_info',\n          value: req.body,\n          updated_at: new Date().toISOString(),\n        })\n        .select()\n        .single();\n      \n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Update general info error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  // ============================================================================\n  // BUILDINGS\n  // ============================================================================\n  \n  app.get(\"/api/court-admin/buildings\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('court_buildings')\n        .select('*')\n        .order('created_at', { ascending: false });\n      \n      if (error) throw error;\n      res.json({ buildings: data || [] });\n    } catch (error: any) {\n      console.error('Get buildings error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.post(\"/api/court-admin/buildings\", async (req: Request, res: Response) => {\n    try {\n      const validated = buildingSchema.parse(req.body);\n      \n      const { data, error } = await supabase\n        .from('court_buildings')\n        .insert({\n          ...validated,\n          is_active: true\n        })\n        .select()\n        .single();\n      \n      if (error) throw error;\n      res.json({ success: true, building: data });\n    } catch (error: any) {\n      console.error('Create building error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.put(\"/api/court-admin/buildings/:id\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n      const validated = buildingSchema.parse(req.body);\n      \n      const { data, error } = await supabase\n        .from('court_buildings')\n        .update(validated)\n        .eq('id', id)\n        .select()\n        .single();\n      \n      if (error) throw error;\n      res.json({ success: true, building: data });\n    } catch (error: any) {\n      console.error('Update building error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.delete(\"/api/court-admin/buildings/:id\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n      \n      const { error } = await supabase\n        .from('court_buildings')\n        .delete()\n        .eq('id', id);\n      \n      if (error) throw error;\n      res.json({ success: true });\n    } catch (error: any) {\n      console.error('Delete building error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  // ============================================================================\n  // ROOMS\n  // ============================================================================\n  \n  app.get(\"/api/court-admin/rooms\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('court_rooms')\n        .select(`\n          *,\n          building:court_buildings(id, name, building_code),\n          in_charge:court_staff(id, full_name, designation)\n        `)\n        .order('created_at', { ascending: false });\n      \n      if (error) throw error;\n      res.json({ rooms: data || [] });\n    } catch (error: any) {\n      console.error('Get rooms error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.post(\"/api/court-admin/rooms\", async (req: Request, res: Response) => {\n    try {\n      const validated = roomSchema.parse(req.body);\n      \n      const { data, error } = await supabase\n        .from('court_rooms')\n        .insert({\n          ...validated,\n          is_active: true\n        })\n        .select()\n        .single();\n      \n      if (error) throw error;\n      res.json({ success: true, room: data });\n    } catch (error: any) {\n      console.error('Create room error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.put(\"/api/court-admin/rooms/:id\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n      const validated = roomSchema.parse(req.body);\n      \n      const { data, error } = await supabase\n        .from('court_rooms')\n        .update(validated)\n        .eq('id', id)\n        .select()\n        .single();\n      \n      if (error) throw error;\n      res.json({ success: true, room: data });\n    } catch (error: any) {\n      console.error('Update room error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.delete(\"/api/court-admin/rooms/:id\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n      \n      const { error } = await supabase\n        .from('court_rooms')\n        .delete()\n        .eq('id', id);\n      \n      if (error) throw error;\n      res.json({ success: true });\n    } catch (error: any) {\n      console.error('Delete room error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  // ============================================================================\n  // STAFF\n  // ============================================================================\n  \n  app.get(\"/api/court-admin/staff\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('court_staff')\n        .select(`\n          *,\n          department:court_departments(id, name),\n          building:court_buildings(id, name),\n          room:court_rooms(id, room_number, room_name)\n        `)\n        .order('created_at', { ascending: false });\n      \n      if (error) throw error;\n      res.json({ staff: data || [] });\n    } catch (error: any) {\n      console.error('Get staff error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.post(\"/api/court-admin/staff\", async (req: Request, res: Response) => {\n    try {\n      let validated = staffSchema.parse(req.body);\n      \n      // Check for existing employee_id and generate unique one if needed\n      const { data: existing } = await supabase\n        .from('court_staff')\n        .select('employee_id')\n        .eq('employee_id', validated.employee_id)\n        .single();\n      \n      if (existing) {\n        const { data: allStaff } = await supabase\n          .from('court_staff')\n          .select('employee_id')\n          .order('created_at', { ascending: false });\n        \n        const maxNumber = (allStaff || []).reduce((max, staff) => {\n          const match = staff.employee_id.match(/EMP-(\\d+)/);\n          if (match) {\n            const num = parseInt(match[1]);\n            return num > max ? num : max;\n          }\n          return max;\n        }, 0);\n        \n        validated.employee_id = `EMP-${String(maxNumber + 1).padStart(3, '0')}`;\n      }\n      \n      const { data, error } = await supabase\n        .from('court_staff')\n        .insert({\n          ...validated,\n          is_active: true\n        })\n        .select()\n        .single();\n      \n      if (error) throw error;\n      res.json({ success: true, staff: data });\n    } catch (error: any) {\n      console.error('Create staff error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.put(\"/api/court-admin/staff/:id\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n      const validated = staffSchema.parse(req.body);\n      \n      const { data, error } = await supabase\n        .from('court_staff')\n        .update(validated)\n        .eq('id', id)\n        .select()\n        .single();\n      \n      if (error) throw error;\n      res.json({ success: true, staff: data });\n    } catch (error: any) {\n      console.error('Update staff error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.delete(\"/api/court-admin/staff/:id\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n      \n      const { error } = await supabase\n        .from('court_staff')\n        .delete()\n        .eq('id', id);\n      \n      if (error) throw error;\n      res.json({ success: true });\n    } catch (error: any) {\n      console.error('Delete staff error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  // ============================================================================\n  // DEPARTMENTS\n  // ============================================================================\n  \n  app.get(\"/api/court-admin/departments\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('court_departments')\n        .select('*')\n        .order('created_at', { ascending: false });\n      \n      if (error) throw error;\n      res.json({ departments: data || [] });\n    } catch (error: any) {\n      console.error('Get departments error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.post(\"/api/court-admin/departments\", async (req: Request, res: Response) => {\n    try {\n      const validated = departmentSchema.parse(req.body);\n      \n      const { data, error } = await supabase\n        .from('court_departments')\n        .insert({\n          ...validated,\n          is_active: true\n        })\n        .select()\n        .single();\n      \n      if (error) throw error;\n      res.json({ success: true, department: data });\n    } catch (error: any) {\n      console.error('Create department error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.put(\"/api/court-admin/departments/:id\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n      const validated = departmentSchema.parse(req.body);\n      \n      const { data, error } = await supabase\n        .from('court_departments')\n        .update(validated)\n        .eq('id', id)\n        .select()\n        .single();\n      \n      if (error) throw error;\n      res.json({ success: true, department: data });\n    } catch (error: any) {\n      console.error('Update department error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.delete(\"/api/court-admin/departments/:id\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n      \n      const { error } = await supabase\n        .from('court_departments')\n        .delete()\n        .eq('id', id);\n      \n      if (error) throw error;\n      res.json({ success: true });\n    } catch (error: any) {\n      console.error('Delete department error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  // ============================================================================\n  // FAQs\n  // ============================================================================\n  \n  app.get(\"/api/court-admin/faqs\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('court_faqs')\n        .select(`\n          *,\n          department:court_departments(id, name)\n        `)\n        .order('priority', { ascending: false })\n        .order('created_at', { ascending: false });\n      \n      if (error) throw error;\n      res.json({ faqs: data || [] });\n    } catch (error: any) {\n      console.error('Get FAQs error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.post(\"/api/court-admin/faqs\", async (req: Request, res: Response) => {\n    try {\n      const validated = faqSchema.parse(req.body);\n      \n      const { data, error } = await supabase\n        .from('court_faqs')\n        .insert({\n          ...validated,\n          is_active: true\n        })\n        .select()\n        .single();\n      \n      if (error) throw error;\n      res.json({ success: true, faq: data });\n    } catch (error: any) {\n      console.error('Create FAQ error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.put(\"/api/court-admin/faqs/:id\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n      const validated = faqSchema.parse(req.body);\n      \n      const { data, error } = await supabase\n        .from('court_faqs')\n        .update(validated)\n        .eq('id', id)\n        .select()\n        .single();\n      \n      if (error) throw error;\n      res.json({ success: true, faq: data });\n    } catch (error: any) {\n      console.error('Update FAQ error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.delete(\"/api/court-admin/faqs/:id\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n      \n      const { error } = await supabase\n        .from('court_faqs')\n        .delete()\n        .eq('id', id);\n      \n      if (error) throw error;\n      res.json({ success: true });\n    } catch (error: any) {\n      console.error('Delete FAQ error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  // ============================================================================\n  // TICKETS (UNANSWERED QUERIES)\n  // ============================================================================\n  \n  app.get(\"/api/court-admin/tickets\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('court_tickets')\n        .select(`\n          *,\n          assigned:court_mini_admins(id, name)\n        `)\n        .order('created_at', { ascending: false });\n      \n      if (error) throw error;\n      res.json({ tickets: data || [] });\n    } catch (error: any) {\n      console.error('Get tickets error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.post(\"/api/court-admin/tickets\", async (req: Request, res: Response) => {\n    try {\n      const validated = ticketSchema.parse(req.body);\n      \n      const { data, error } = await supabase\n        .from('court_tickets')\n        .insert(validated)\n        .select()\n        .single();\n      \n      if (error) throw error;\n      res.json({ success: true, ticket: data });\n    } catch (error: any) {\n      console.error('Create ticket error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.put(\"/api/court-admin/tickets/:id\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n      const validated = ticketSchema.parse(req.body);\n      \n      // If marking as resolved, set resolved_at\n      if (validated.status === 'Resolved' && !req.body.resolved_at) {\n        (validated as any).resolved_at = new Date().toISOString();\n      }\n      \n      const { data, error } = await supabase\n        .from('court_tickets')\n        .update(validated)\n        .eq('id', id)\n        .select()\n        .single();\n      \n      if (error) throw error;\n      res.json({ success: true, ticket: data });\n    } catch (error: any) {\n      console.error('Update ticket error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.delete(\"/api/court-admin/tickets/:id\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n      \n      const { error } = await supabase\n        .from('court_tickets')\n        .delete()\n        .eq('id', id);\n      \n      if (error) throw error;\n      res.json({ success: true });\n    } catch (error: any) {\n      console.error('Delete ticket error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  // ============================================================================\n  // MINI ADMINS\n  // ============================================================================\n  \n  app.get(\"/api/court-admin/mini-admins\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('court_mini_admins')\n        .select('id, name, username, role, scope_type, scope_value, panel_link, email, is_active, created_at')\n        .order('created_at', { ascending: false });\n      \n      if (error) throw error;\n      res.json({ miniAdmins: data || [] });\n    } catch (error: any) {\n      console.error('Get mini admins error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.post(\"/api/court-admin/mini-admins\", async (req: Request, res: Response) => {\n    try {\n      const validated = miniAdminSchema.parse(req.body);\n      \n      const password = validated.password || generatePassword();\n      const hashedPassword = await bcrypt.hash(password, 10);\n      const panelLink = `/court-mini-admin/${validated.username}`;\n      \n      const { data, error } = await supabase\n        .from('court_mini_admins')\n        .insert({\n          ...validated,\n          password: hashedPassword,\n          panel_link: panelLink,\n          is_active: true\n        })\n        .select()\n        .single();\n      \n      if (error) throw error;\n      \n      res.json({ \n        success: true, \n        miniAdmin: data,\n        credentials: {\n          username: validated.username,\n          password: password,\n          panel_link: panelLink\n        }\n      });\n    } catch (error: any) {\n      console.error('Create mini admin error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.post(\"/api/court-admin/mini-admins/:id/regenerate\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n      const { adminPassword } = req.body;\n      \n      // Verify main admin password\n      const { data: admin } = await supabase\n        .from('court_main_admin')\n        .select('password')\n        .eq('username', 'admin')\n        .single();\n      \n      if (!admin || !(await bcrypt.compare(adminPassword, admin.password))) {\n        return res.status(401).json({ message: 'Invalid admin password' });\n      }\n      \n      const newPassword = generatePassword();\n      const hashedPassword = await bcrypt.hash(newPassword, 10);\n      \n      const { data, error } = await supabase\n        .from('court_mini_admins')\n        .update({ password: hashedPassword })\n        .eq('id', id)\n        .select()\n        .single();\n      \n      if (error) throw error;\n      \n      res.json({ \n        success: true,\n        newPassword: newPassword\n      });\n    } catch (error: any) {\n      console.error('Regenerate password error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.delete(\"/api/court-admin/mini-admins/:id\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n      \n      const { error } = await supabase\n        .from('court_mini_admins')\n        .delete()\n        .eq('id', id);\n      \n      if (error) throw error;\n      res.json({ success: true });\n    } catch (error: any) {\n      console.error('Delete mini admin error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  // ============================================================================\n  // ANNOUNCEMENTS\n  // ============================================================================\n  \n  app.get(\"/api/court-admin/announcements\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('court_announcements')\n        .select(`\n          *,\n          department:court_departments(id, name)\n        `)\n        .order('is_pinned', { ascending: false })\n        .order('created_at', { ascending: false });\n      \n      if (error) throw error;\n      res.json({ announcements: data || [] });\n    } catch (error: any) {\n      console.error('Get announcements error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.post(\"/api/court-admin/announcements\", async (req: Request, res: Response) => {\n    try {\n      const validated = announcementSchema.parse(req.body);\n      \n      const { data, error } = await supabase\n        .from('court_announcements')\n        .insert({\n          ...validated,\n          is_active: true\n        })\n        .select()\n        .single();\n      \n      if (error) throw error;\n      res.json({ success: true, announcement: data });\n    } catch (error: any) {\n      console.error('Create announcement error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.put(\"/api/court-admin/announcements/:id\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n      const validated = announcementSchema.parse(req.body);\n      \n      const { data, error } = await supabase\n        .from('court_announcements')\n        .update(validated)\n        .eq('id', id)\n        .select()\n        .single();\n      \n      if (error) throw error;\n      res.json({ success: true, announcement: data });\n    } catch (error: any) {\n      console.error('Update announcement error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.delete(\"/api/court-admin/announcements/:id\", async (req: Request, res: Response) => {\n    try {\n      const { id } = req.params;\n      \n      const { error } = await supabase\n        .from('court_announcements')\n        .delete()\n        .eq('id', id);\n      \n      if (error) throw error;\n      res.json({ success: true });\n    } catch (error: any) {\n      console.error('Delete announcement error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // ============================================================================\n  // HOLIDAYS (for Calendar)\n  // ============================================================================\n  \n  app.get(\"/api/court-admin/holidays\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('court_settings')\n        .select('*')\n        .eq('key', 'court_holidays')\n        .single();\n      \n      if (error && error.code !== 'PGRST116') throw error;\n      \n      const parsedValue = data?.value ? (typeof data.value === 'string' ? JSON.parse(data.value) : data.value) : { holidays: [] };\n      res.json(parsedValue);\n    } catch (error: any) {\n      console.error('Get holidays error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.post(\"/api/court-admin/holidays\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('court_settings')\n        .upsert({\n          key: 'court_holidays',\n          value: JSON.stringify(req.body),\n          updated_at: new Date().toISOString(),\n        }, {\n          onConflict: 'key'\n        })\n        .select()\n        .single();\n      \n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Save holidays error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // ============================================================================\n  // ADDITIONAL INFORMATION\n  // ============================================================================\n  \n  app.get(\"/api/court-admin/additional-info\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('court_settings')\n        .select('*')\n        .eq('key', 'court_additional_info')\n        .single();\n      \n      if (error && error.code !== 'PGRST116') throw error;\n      \n      const parsedValue = data?.value ? (typeof data.value === 'string' ? JSON.parse(data.value) : data.value) : { entries: [] };\n      res.json(parsedValue);\n    } catch (error: any) {\n      console.error('Get additional info error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n  \n  app.post(\"/api/court-admin/additional-info\", async (req: Request, res: Response) => {\n    try {\n      const { data, error } = await supabase\n        .from('court_settings')\n        .upsert({\n          key: 'court_additional_info',\n          value: JSON.stringify(req.body),\n          updated_at: new Date().toISOString(),\n        }, {\n          onConflict: 'key'\n        })\n        .select()\n        .single();\n      \n      if (error) throw error;\n      res.json({ success: true, data });\n    } catch (error: any) {\n      console.error('Save additional info error:', error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // ============================================================================\n  // AI GENERATION (for Additional Information)\n  // ============================================================================\n  \n  app.post(\"/api/court-admin/ai-generate\", async (req: Request, res: Response) => {\n    try {\n      const { prompt, type } = req.body;\n\n      if (!prompt) {\n        return res.status(400).json({ message: \"Prompt is required\" });\n      }\n\n      // Get API key from environment - using the same key as RKSD admin\n      const groqApiKey = process.env.GROQ_API_KEY;\n      if (!groqApiKey) {\n        return res.status(500).json({ \n          message: \"AI generation is not configured. Please contact administrator.\" \n        });\n      }\n\n      // Construct system prompt for court information\n      let systemPrompt = \"\";\n      if (type === \"court_additional_info\") {\n        systemPrompt = `You are an AI assistant helping court administrators add structured information to their court management system.\n\nWhen given a description of one or more pieces of information to add, you must extract and structure it into the following JSON format:\n{\n  \"entries\": [\n    {\n      \"title\": \"Clear, concise title for the information\",\n      \"category\": \"Category (e.g., Procedures, Services, Guidelines, Timings, etc.)\",\n      \"content\": \"Detailed, well-formatted content describing the information. Make it professional and clear.\"\n    }\n  ]\n}\n\nGuidelines:\n- If MULTIPLE pieces of information are mentioned, create SEPARATE entries for EACH in the \"entries\" array\n- If ONLY ONE piece of information is mentioned, still return an array with one entry\n- Keep titles short and descriptive (max 50 characters)\n- Choose appropriate categories based on the content\n- Make content clear, professional, and detailed\n- Use proper grammar and formatting\n- If timings are mentioned, format them properly (e.g., 12:00 PM, 9:00 AM)\n\nEXAMPLES:\nUser: \"Add visiting hours and security protocols\"\nResponse: {\"entries\": [{\"title\": \"Visiting Hours\", \"category\": \"Timings\", ...}, {\"title\": \"Security Protocols\", \"category\": \"Guidelines\", ...}]}\n\nReturn ONLY the JSON object, no additional text or explanation.`;\n      } else {\n        systemPrompt = `You are an AI assistant helping to generate structured court-related information.\nGenerate information based on the user's description in this JSON format:\n{\n  \"entries\": [\n    {\n      \"title\": \"Title of the information\",\n      \"category\": \"Category (optional)\",\n      \"content\": \"Detailed content\"\n    }\n  ]\n}\n\nReturn ONLY the JSON object.`;\n      }\n\n      const response = await fetch(\"https://api.groq.com/openai/v1/chat/completions\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${groqApiKey}`,\n        },\n        body: JSON.stringify({\n          model: \"llama-3.3-70b-versatile\",\n          messages: [\n            { role: \"system\", content: systemPrompt },\n            { role: \"user\", content: prompt }\n          ],\n          temperature: 0.7,\n          max_tokens: 2500,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Groq API error:', errorText);\n        return res.status(500).json({ message: 'Failed to generate information with AI' });\n      }\n\n      const data = await response.json();\n      const generatedText = data.choices[0]?.message?.content;\n\n      if (!generatedText) {\n        return res.status(500).json({ message: 'No response from AI' });\n      }\n\n      // Parse the JSON response\n      let parsedData;\n      try {\n        // Extract JSON from markdown code blocks if present\n        const jsonMatch = generatedText.match(/```(?:json)?\\s*([\\s\\S]*?)\\s*```/) || generatedText.match(/\\{[\\s\\S]*\\}/);\n        const jsonStr = jsonMatch ? (jsonMatch[1] || jsonMatch[0]) : generatedText;\n        parsedData = JSON.parse(jsonStr.trim());\n      } catch (parseError) {\n        console.error('JSON parse error:', parseError, 'Raw text:', generatedText);\n        return res.status(500).json({ message: 'Failed to parse AI response' });\n      }\n\n      res.json(parsedData);\n    } catch (error: any) {\n      console.error('AI generate error:', error);\n      res.status(500).json({ message: error.message || 'AI generation failed' });\n    }\n  });\n}\n","size_bytes":36092},"client/src/pages/court-admin.tsx":{"content":"import { useState } from 'react';\nimport { \n  Building2, \n  Users, \n  FileText, \n  Image, \n  LayoutDashboard,\n  DoorOpen,\n  LogOut,\n  Plus,\n  Edit,\n  Trash2,\n  Upload,\n  Search,\n  X\n} from 'lucide-react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\n\ntype SectionType = 'dashboard' | 'courtrooms' | 'buildings' | 'staff' | 'files' | 'images';\n\ninterface Building {\n  id: string;\n  building_name: string;\n  building_code: string;\n  building_type: string;\n  description: string;\n  total_floors: number;\n  is_active: boolean;\n}\n\ninterface Room {\n  id: string;\n  room_number: string;\n  room_name: string;\n  building_id: string;\n  floor_number: number;\n  room_type: string;\n  room_purpose: string;\n  incharge_name: string;\n  incharge_contact: string;\n  is_active: boolean;\n}\n\ninterface Staff {\n  id: string;\n  staff_name: string;\n  employee_id: string;\n  designation: string;\n  department: string;\n  contact_phone: string;\n  contact_email: string;\n  is_active: boolean;\n}\n\ninterface CourtFile {\n  id: string;\n  file_number: string;\n  file_type: string;\n  case_type: string;\n  current_location: string;\n  status: string;\n}\n\ninterface BuildingImage {\n  id: string;\n  title: string;\n  description: string;\n  room_number: string;\n  building_name: string;\n  department: string;\n  contact_person: string;\n  floor_number: number;\n  image_url: string;\n  keywords: string[];\n  is_active: boolean;\n}\n\nexport default function CourtAdminPanel() {\n  const [activeSection, setActiveSection] = useState<SectionType>('dashboard');\n  const [searchQuery, setSearchQuery] = useState('');\n  const queryClient = useQueryClient();\n\n  const menuItems = [\n    { id: 'dashboard', icon: LayoutDashboard, label: 'Dashboard' },\n    { id: 'courtrooms', icon: DoorOpen, label: 'Courtrooms' },\n    { id: 'buildings', icon: Building2, label: 'Buildings' },\n    { id: 'staff', icon: Users, label: 'Staff Directory' },\n    { id: 'files', icon: FileText, label: 'Files Tracking' },\n    { id: 'images', icon: Image, label: 'Building Images' },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-white to-violet-50\">\n      <div className=\"flex h-screen\">\n        {/* Sidebar */}\n        <div className=\"w-64 bg-gradient-to-b from-purple-900 to-violet-900 text-white shadow-2xl\">\n          {/* Header */}\n          <div className=\"p-6 border-b border-purple-700\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 bg-white rounded-full flex items-center justify-center\">\n                <Building2 className=\"w-6 h-6 text-purple-900\" />\n              </div>\n              <div>\n                <h1 className=\"font-bold text-lg\">Court Admin</h1>\n                <p className=\"text-xs text-purple-200\">Kaithal District Court</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Navigation */}\n          <nav className=\"p-4 space-y-2\">\n            {menuItems.map((item) => (\n              <button\n                key={item.id}\n                onClick={() => setActiveSection(item.id as SectionType)}\n                className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${\n                  activeSection === item.id\n                    ? 'bg-white text-purple-900 shadow-lg'\n                    : 'text-purple-100 hover:bg-purple-800'\n                }`}\n              >\n                <item.icon size={20} />\n                <span className=\"font-medium\">{item.label}</span>\n              </button>\n            ))}\n          </nav>\n\n          {/* Logout */}\n          <div className=\"absolute bottom-0 w-64 p-4 border-t border-purple-700\">\n            <button className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-purple-100 hover:bg-purple-800 transition-all\">\n              <LogOut size={20} />\n              <span className=\"font-medium\">Logout</span>\n            </button>\n          </div>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"flex-1 overflow-y-auto\">\n          {/* Top Bar */}\n          <div className=\"bg-white border-b border-gray-200 px-8 py-4 shadow-sm\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h2 className=\"text-2xl font-bold text-gray-900\">\n                  {menuItems.find(i => i.id === activeSection)?.label}\n                </h2>\n                <p className=\"text-sm text-gray-600 mt-1\">\n                  Manage court data and information\n                </p>\n              </div>\n              <div className=\"flex items-center gap-4\">\n                <div className=\"relative\">\n                  <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={18} />\n                  <input\n                    type=\"text\"\n                    placeholder=\"Search...\"\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    className=\"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Content Area */}\n          <div className=\"p-8\">\n            {activeSection === 'dashboard' && <DashboardSection />}\n            {activeSection === 'courtrooms' && <CourtroomsSection searchQuery={searchQuery} />}\n            {activeSection === 'buildings' && <BuildingsSection searchQuery={searchQuery} />}\n            {activeSection === 'staff' && <StaffSection searchQuery={searchQuery} />}\n            {activeSection === 'files' && <FilesSection searchQuery={searchQuery} />}\n            {activeSection === 'images' && <BuildingImagesSection searchQuery={searchQuery} />}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Dashboard Section\nfunction DashboardSection() {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n      <StatCard title=\"Total Courtrooms\" value=\"12\" icon={DoorOpen} color=\"purple\" />\n      <StatCard title=\"Buildings\" value=\"5\" icon={Building2} color=\"violet\" />\n      <StatCard title=\"Staff Members\" value=\"45\" icon={Users} color=\"indigo\" />\n      <StatCard title=\"Active Files\" value=\"1,234\" icon={FileText} color=\"blue\" />\n    </div>\n  );\n}\n\nfunction StatCard({ title, value, icon: Icon, color }: { title: string; value: string; icon: any; color: string }) {\n  const colorClasses = {\n    purple: { border: 'border-purple-500', bg: 'bg-purple-100', text: 'text-purple-600' },\n    violet: { border: 'border-violet-500', bg: 'bg-violet-100', text: 'text-violet-600' },\n    indigo: { border: 'border-indigo-500', bg: 'bg-indigo-100', text: 'text-indigo-600' },\n    blue: { border: 'border-blue-500', bg: 'bg-blue-100', text: 'text-blue-600' },\n  };\n  \n  const classes = colorClasses[color as keyof typeof colorClasses];\n  \n  return (\n    <div className={`bg-white rounded-xl shadow-md p-6 border-l-4 ${classes.border}`}>\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <p className=\"text-sm text-gray-600 font-medium\">{title}</p>\n          <p className=\"text-3xl font-bold text-gray-900 mt-2\">{value}</p>\n        </div>\n        <div className={`w-12 h-12 ${classes.bg} rounded-lg flex items-center justify-center`}>\n          <Icon className={classes.text} size={24} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Courtrooms Section\nfunction CourtroomsSection({ searchQuery }: { searchQuery: string }) {\n  const [showAddModal, setShowAddModal] = useState(false);\n\n  return (\n    <div>\n      <div className=\"flex justify-between items-center mb-6\">\n        <h3 className=\"text-xl font-bold text-gray-900\">Courtrooms Management</h3>\n        <button\n          onClick={() => setShowAddModal(true)}\n          className=\"flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors\"\n        >\n          <Plus size={18} />\n          Add Courtroom\n        </button>\n      </div>\n\n      <div className=\"bg-white rounded-xl shadow-md overflow-hidden\">\n        <table className=\"w-full\">\n          <thead className=\"bg-gray-50 border-b border-gray-200\">\n            <tr>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Room Number</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Room Name</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Building</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Floor</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Type</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">In-charge</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Actions</th>\n            </tr>\n          </thead>\n          <tbody className=\"divide-y divide-gray-200\">\n            <tr>\n              <td colSpan={7} className=\"px-6 py-12 text-center text-gray-500\">\n                No courtrooms data available. Click \"Add Courtroom\" to get started.\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\n// Buildings Section\nfunction BuildingsSection({ searchQuery }: { searchQuery: string }) {\n  const [showAddModal, setShowAddModal] = useState(false);\n\n  return (\n    <div>\n      <div className=\"flex justify-between items-center mb-6\">\n        <h3 className=\"text-xl font-bold text-gray-900\">Buildings Management</h3>\n        <button\n          onClick={() => setShowAddModal(true)}\n          className=\"flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors\"\n        >\n          <Plus size={18} />\n          Add Building\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        <div className=\"bg-white rounded-xl shadow-md p-6 text-center text-gray-500\">\n          No buildings data available. Click \"Add Building\" to get started.\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Staff Section\nfunction StaffSection({ searchQuery }: { searchQuery: string }) {\n  const [showAddModal, setShowAddModal] = useState(false);\n\n  return (\n    <div>\n      <div className=\"flex justify-between items-center mb-6\">\n        <h3 className=\"text-xl font-bold text-gray-900\">Staff Directory</h3>\n        <button\n          onClick={() => setShowAddModal(true)}\n          className=\"flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors\"\n        >\n          <Plus size={18} />\n          Add Staff Member\n        </button>\n      </div>\n\n      <div className=\"bg-white rounded-xl shadow-md overflow-hidden\">\n        <table className=\"w-full\">\n          <thead className=\"bg-gray-50 border-b border-gray-200\">\n            <tr>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Name</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Employee ID</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Designation</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Department</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Contact</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Actions</th>\n            </tr>\n          </thead>\n          <tbody className=\"divide-y divide-gray-200\">\n            <tr>\n              <td colSpan={6} className=\"px-6 py-12 text-center text-gray-500\">\n                No staff data available. Click \"Add Staff Member\" to get started.\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\n// Files Section\nfunction FilesSection({ searchQuery }: { searchQuery: string }) {\n  const [showAddModal, setShowAddModal] = useState(false);\n\n  return (\n    <div>\n      <div className=\"flex justify-between items-center mb-6\">\n        <h3 className=\"text-xl font-bold text-gray-900\">Files Tracking</h3>\n        <button\n          onClick={() => setShowAddModal(true)}\n          className=\"flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors\"\n        >\n          <Plus size={18} />\n          Add File\n        </button>\n      </div>\n\n      <div className=\"bg-white rounded-xl shadow-md overflow-hidden\">\n        <table className=\"w-full\">\n          <thead className=\"bg-gray-50 border-b border-gray-200\">\n            <tr>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">File Number</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">File Type</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Case Type</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Current Location</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Status</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Actions</th>\n            </tr>\n          </thead>\n          <tbody className=\"divide-y divide-gray-200\">\n            <tr>\n              <td colSpan={6} className=\"px-6 py-12 text-center text-gray-500\">\n                No files data available. Click \"Add File\" to get started.\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\n// Building Images Section - NEW!\nfunction BuildingImagesSection({ searchQuery }: { searchQuery: string }) {\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [selectedImage, setSelectedImage] = useState<File | null>(null);\n  const [imagePreview, setImagePreview] = useState<string>('');\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    room_number: '',\n    building_name: '',\n    department: '',\n    contact_person: '',\n    floor_number: 1,\n    keywords: ''\n  });\n\n  const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setSelectedImage(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setImagePreview(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleSubmit = async () => {\n    // Will implement upload functionality\n    console.log('Uploading:', { formData, selectedImage });\n    setShowAddModal(false);\n  };\n\n  return (\n    <div>\n      <div className=\"flex justify-between items-center mb-6\">\n        <div>\n          <h3 className=\"text-xl font-bold text-gray-900\">Building Images & Location Guide</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">\n            Upload images of buildings/rooms to help users visually locate places\n          </p>\n        </div>\n        <button\n          onClick={() => setShowAddModal(true)}\n          className=\"flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors\"\n        >\n          <Plus size={18} />\n          Add Image\n        </button>\n      </div>\n\n      {/* Image Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        <div className=\"bg-white rounded-xl shadow-md p-6 text-center text-gray-500\">\n          No building images available. Click \"Add Image\" to upload location images with metadata.\n        </div>\n      </div>\n\n      {/* Add Image Modal */}\n      {showAddModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white\">\n              <h3 className=\"text-2xl font-bold text-gray-900\">Add Building Image</h3>\n              <button onClick={() => setShowAddModal(false)} className=\"text-gray-400 hover:text-gray-600\">\n                <X size={24} />\n              </button>\n            </div>\n\n            <div className=\"p-6 space-y-6\">\n              {/* Image Upload */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Building/Room Image</label>\n                <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-purple-500 transition-colors\">\n                  {imagePreview ? (\n                    <div className=\"space-y-4\">\n                      <img src={imagePreview} alt=\"Preview\" className=\"max-h-64 mx-auto rounded-lg\" />\n                      <button\n                        onClick={() => {\n                          setSelectedImage(null);\n                          setImagePreview('');\n                        }}\n                        className=\"text-red-600 hover:text-red-700 text-sm font-medium\"\n                      >\n                        Remove Image\n                      </button>\n                    </div>\n                  ) : (\n                    <label className=\"cursor-pointer\">\n                      <Upload className=\"mx-auto text-gray-400 mb-2\" size={48} />\n                      <p className=\"text-gray-600 mb-2\">Click to upload or drag and drop</p>\n                      <p className=\"text-xs text-gray-500\">PNG, JPG up to 10MB</p>\n                      <input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        onChange={handleImageChange}\n                        className=\"hidden\"\n                      />\n                    </label>\n                  )}\n                </div>\n              </div>\n\n              {/* Form Fields */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Title *</label>\n                  <input\n                    type=\"text\"\n                    value={formData.title}\n                    onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                    placeholder=\"e.g., Case Study Building - Room 23\"\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Building Name *</label>\n                  <input\n                    type=\"text\"\n                    value={formData.building_name}\n                    onChange={(e) => setFormData({ ...formData, building_name: e.target.value })}\n                    placeholder=\"e.g., Main Judicial Block\"\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Room Number</label>\n                  <input\n                    type=\"text\"\n                    value={formData.room_number}\n                    onChange={(e) => setFormData({ ...formData, room_number: e.target.value })}\n                    placeholder=\"e.g., 23, 101A\"\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Floor Number</label>\n                  <input\n                    type=\"number\"\n                    value={formData.floor_number}\n                    onChange={(e) => setFormData({ ...formData, floor_number: parseInt(e.target.value) })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Department</label>\n                  <input\n                    type=\"text\"\n                    value={formData.department}\n                    onChange={(e) => setFormData({ ...formData, department: e.target.value })}\n                    placeholder=\"e.g., Registry, Civil Court\"\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Contact Person</label>\n                  <input\n                    type=\"text\"\n                    value={formData.contact_person}\n                    onChange={(e) => setFormData({ ...formData, contact_person: e.target.value })}\n                    placeholder=\"e.g., Ajay Kumar (Registry Officer)\"\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Description</label>\n                <textarea\n                  value={formData.description}\n                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                  placeholder=\"Detailed description: File submission room, submit to Ajay Sir...\"\n                  rows={3}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Keywords (comma separated)</label>\n                <input\n                  type=\"text\"\n                  value={formData.keywords}\n                  onChange={(e) => setFormData({ ...formData, keywords: e.target.value })}\n                  placeholder=\"e.g., file submission, registry, documents, civil cases\"\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                />\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  Add keywords to help users find this image when asking questions\n                </p>\n              </div>\n\n              {/* Submit Buttons */}\n              <div className=\"flex gap-3 pt-4\">\n                <button\n                  onClick={handleSubmit}\n                  disabled={!selectedImage || !formData.title || !formData.building_name}\n                  className=\"flex-1 bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors font-medium\"\n                >\n                  Upload Image\n                </button>\n                <button\n                  onClick={() => setShowAddModal(false)}\n                  className=\"px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":23857},"client/src/pages/court-admin-main.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { supabase } from \"@/lib/supabase\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Sheet, SheetContent, SheetTrigger } from \"@/components/ui/sheet\";\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { \n  Home, \n  Building2, \n  DoorOpen,\n  Menu,\n  LogOut,\n  Info,\n  Users,\n  UserCog,\n  MessageSquare,\n  Ticket,\n  Megaphone,\n  Settings,\n  Building\n} from \"lucide-react\";\nimport { DashboardSection } from \"@/components/court-admin/DashboardSection\";\nimport { GeneralInfoSection } from \"@/components/court-admin/GeneralInfoSection\";\nimport { BuildingsSection } from \"@/components/court-admin/BuildingsSection\";\nimport { RoomsSection } from \"@/components/court-admin/RoomsSection\";\nimport { DepartmentsSection } from \"@/components/court-admin/DepartmentsSection\";\nimport { StaffSection } from \"@/components/court-admin/StaffSection\";\nimport { MiniAdminsSection } from \"@/components/court-admin/MiniAdminsSection\";\nimport { FAQsSection } from \"@/components/court-admin/FAQsSection\";\nimport { TicketsSection } from \"@/components/court-admin/TicketsSection\";\nimport { AnnouncementsSection } from \"@/components/court-admin/AnnouncementsSection\";\nimport { SettingsSection } from \"@/components/court-admin/SettingsSection\";\n\nconst navItems = [\n  { id: \"dashboard\", label: \"Dashboard\", icon: Home },\n  { id: \"general\", label: \"General Info\", icon: Info },\n  { id: \"buildings\", label: \"Buildings\", icon: Building },\n  { id: \"rooms\", label: \"Rooms & Courtrooms\", icon: DoorOpen },\n  { id: \"departments\", label: \"Departments\", icon: Building2 },\n  { id: \"staff\", label: \"Staff Directory\", icon: Users },\n  { id: \"mini-admins\", label: \"Mini-Admins\", icon: UserCog },\n  { id: \"faqs\", label: \"FAQs & Content\", icon: MessageSquare },\n  { id: \"tickets\", label: \"Unanswered Queries\", icon: Ticket },\n  { id: \"announcements\", label: \"Announcements\", icon: Megaphone },\n  { id: \"settings\", label: \"Settings\", icon: Settings },\n];\n\nexport default function CourtAdminMain() {\n  const [activeTab, setActiveTab] = useState(\"dashboard\");\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const [, setLocation] = useLocation();\n  const queryClient = useQueryClient();\n\n  const adminId = localStorage.getItem(\"courtAdminId\");\n  const adminUsername = localStorage.getItem(\"courtAdminUsername\");\n\n  useEffect(() => {\n    if (!adminId) {\n      setLocation(\"/court-admin-login\");\n    }\n  }, [adminId, setLocation]);\n\n  // Real-time subscription for updates (like RKSD)\n  useEffect(() => {\n    const channels = [\n      supabase.channel('court-buildings-changes')\n        .on('postgres_changes', { event: '*', schema: 'public', table: 'court_buildings' }, () => {\n          queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/buildings\"] });\n          queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/stats\"] });\n        })\n        .subscribe(),\n      \n      supabase.channel('court-rooms-changes')\n        .on('postgres_changes', { event: '*', schema: 'public', table: 'court_rooms' }, () => {\n          queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/rooms\"] });\n          queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/stats\"] });\n        })\n        .subscribe(),\n      \n      supabase.channel('court-staff-changes')\n        .on('postgres_changes', { event: '*', schema: 'public', table: 'court_staff' }, () => {\n          queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/staff\"] });\n          queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/stats\"] });\n        })\n        .subscribe(),\n      \n      supabase.channel('court-departments-changes')\n        .on('postgres_changes', { event: '*', schema: 'public', table: 'court_departments' }, () => {\n          queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/departments\"] });\n          queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/stats\"] });\n        })\n        .subscribe(),\n\n      supabase.channel('court-faqs-changes')\n        .on('postgres_changes', { event: '*', schema: 'public', table: 'court_faqs' }, () => {\n          queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/faqs\"] });\n        })\n        .subscribe(),\n\n      supabase.channel('court-tickets-changes')\n        .on('postgres_changes', { event: '*', schema: 'public', table: 'court_tickets' }, () => {\n          queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/tickets\"] });\n          queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/stats\"] });\n        })\n        .subscribe(),\n\n      supabase.channel('court-announcements-changes')\n        .on('postgres_changes', { event: '*', schema: 'public', table: 'court_announcements' }, () => {\n          queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/announcements\"] });\n        })\n        .subscribe(),\n    ];\n\n    return () => {\n      channels.forEach(channel => channel.unsubscribe());\n    };\n  }, [queryClient]);\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"courtAdminId\");\n    localStorage.removeItem(\"courtAdminUsername\");\n    setLocation(\"/court-admin-login\");\n  };\n\n  const NavContent = () => (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"p-6 border-b border-purple-700\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-10 h-10 bg-white rounded-full flex items-center justify-center\">\n            <Building2 className=\"w-6 h-6 text-purple-900\" />\n          </div>\n          <div>\n            <h1 className=\"font-bold text-lg text-white\">Court Admin</h1>\n            <p className=\"text-xs text-purple-200\">Kaithal District Court</p>\n          </div>\n        </div>\n      </div>\n\n      <ScrollArea className=\"flex-1 px-4 py-4\">\n        <nav className=\"space-y-2\">\n          {navItems.map((item) => (\n            <button\n              key={item.id}\n              onClick={() => {\n                setActiveTab(item.id);\n                setMobileMenuOpen(false);\n              }}\n              className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${\n                activeTab === item.id\n                  ? 'bg-white text-purple-900 shadow-lg'\n                  : 'text-purple-100 hover:bg-purple-800'\n              }`}\n            >\n              <item.icon size={20} />\n              <span className=\"font-medium text-sm\">{item.label}</span>\n            </button>\n          ))}\n        </nav>\n      </ScrollArea>\n\n      <div className=\"p-4 border-t border-purple-700\">\n        <div className=\"mb-3 px-4 py-2 bg-purple-800 rounded-lg\">\n          <p className=\"text-xs text-purple-200\">Logged in as:</p>\n          <p className=\"text-sm text-white font-medium\">{adminUsername}</p>\n        </div>\n        <button\n          onClick={handleLogout}\n          className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-purple-100 hover:bg-purple-800 transition-all\"\n        >\n          <LogOut size={20} />\n          <span className=\"font-medium\">Logout</span>\n        </button>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-white to-violet-50\">\n      <div className=\"flex h-screen\">\n        {/* Desktop Sidebar */}\n        <div className=\"hidden md:flex w-64 bg-gradient-to-b from-purple-900 to-violet-900 text-white shadow-2xl flex-col\">\n          <NavContent />\n        </div>\n\n        {/* Mobile Sidebar */}\n        <Sheet open={mobileMenuOpen} onOpenChange={setMobileMenuOpen}>\n          <SheetTrigger asChild className=\"md:hidden fixed top-4 left-4 z-40\">\n            <Button size=\"icon\" variant=\"outline\">\n              <Menu />\n            </Button>\n          </SheetTrigger>\n          <SheetContent side=\"left\" className=\"w-64 p-0 bg-gradient-to-b from-purple-900 to-violet-900 text-white\">\n            <NavContent />\n          </SheetContent>\n        </Sheet>\n\n        {/* Main Content */}\n        <div className=\"flex-1 overflow-y-auto\">\n          {/* Top Bar */}\n          <div className=\"bg-white border-b border-gray-200 px-4 md:px-8 py-4 shadow-sm\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-4\">\n                <Sheet open={mobileMenuOpen} onOpenChange={setMobileMenuOpen}>\n                  <SheetTrigger asChild className=\"md:hidden\">\n                    <Button size=\"icon\" variant=\"ghost\">\n                      <Menu />\n                    </Button>\n                  </SheetTrigger>\n                </Sheet>\n                <div>\n                  <h2 className=\"text-xl md:text-2xl font-bold text-gray-900\">\n                    {navItems.find(i => i.id === activeTab)?.label}\n                  </h2>\n                  <p className=\"text-xs md:text-sm text-gray-600 mt-1\">\n                    Manage court data and information\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Content Area */}\n          <div className=\"p-4 md:p-8\">\n            {activeTab === 'dashboard' && <DashboardSection />}\n            {activeTab === 'general' && <GeneralInfoSection />}\n            {activeTab === 'buildings' && <BuildingsSection />}\n            {activeTab === 'rooms' && <RoomsSection />}\n            {activeTab === 'departments' && <DepartmentsSection />}\n            {activeTab === 'staff' && <StaffSection />}\n            {activeTab === 'mini-admins' && <MiniAdminsSection />}\n            {activeTab === 'faqs' && <FAQsSection />}\n            {activeTab === 'tickets' && <TicketsSection />}\n            {activeTab === 'announcements' && <AnnouncementsSection />}\n            {activeTab === 'settings' && <SettingsSection />}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":9885},"client/src/components/court-admin/BuildingsSection.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Plus, Edit, Trash2, Building } from \"lucide-react\";\n\ninterface BuildingData {\n  id?: string;\n  name: string;\n  building_code: string;\n  description?: string;\n  landmark?: string;\n  directional_notes?: string;\n  number_of_floors?: number;\n  photo_url?: string;\n}\n\nexport function BuildingsSection() {\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\n  const [editingBuilding, setEditingBuilding] = useState<BuildingData | null>(null);\n  const [formData, setFormData] = useState<BuildingData>({\n    name: \"\",\n    building_code: \"\",\n    description: \"\",\n    landmark: \"\",\n    directional_notes: \"\",\n    number_of_floors: 1,\n    photo_url: \"\",\n  });\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: buildingsData } = useQuery({\n    queryKey: [\"/api/court-admin/buildings\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/buildings\");\n      if (!res.ok) throw new Error(\"Failed to fetch buildings\");\n      return await res.json();\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: BuildingData) => {\n      const res = await fetch(\"/api/court-admin/buildings\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to create building\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/buildings\"] });\n      toast({ title: \"Success\", description: \"Building created successfully\" });\n      resetForm();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, ...data }: BuildingData & { id: string }) => {\n      const res = await fetch(`/api/court-admin/buildings/${id}`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to update building\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/buildings\"] });\n      toast({ title: \"Success\", description: \"Building updated successfully\" });\n      resetForm();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const res = await fetch(`/api/court-admin/buildings/${id}`, { method: \"DELETE\" });\n      if (!res.ok) throw new Error(\"Failed to delete building\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/buildings\"] });\n      toast({ title: \"Success\", description: \"Building deleted successfully\" });\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      name: \"\",\n      building_code: \"\",\n      description: \"\",\n      landmark: \"\",\n      directional_notes: \"\",\n      number_of_floors: 1,\n      photo_url: \"\",\n    });\n    setIsCreateOpen(false);\n    setEditingBuilding(null);\n  };\n\n  const handleSubmit = () => {\n    if (editingBuilding?.id) {\n      updateMutation.mutate({ ...formData, id: editingBuilding.id });\n    } else {\n      createMutation.mutate(formData);\n    }\n  };\n\n  const handleEdit = (building: any) => {\n    setEditingBuilding(building);\n    setFormData({\n      name: building.name,\n      building_code: building.building_code,\n      description: building.description || \"\",\n      landmark: building.landmark || \"\",\n      directional_notes: building.directional_notes || \"\",\n      number_of_floors: building.number_of_floors || 1,\n      photo_url: building.photo_url || \"\",\n    });\n    setIsCreateOpen(true);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h3 className=\"text-xl font-bold text-gray-900\">Buildings Management</h3>\n        <Button onClick={() => setIsCreateOpen(true)}>\n          <Plus className=\"mr-2 h-4 w-4\" />\n          Add Building\n        </Button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {buildingsData?.buildings?.map((building: any) => (\n          <Card key={building.id}>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center\">\n                    <Building className=\"w-6 h-6 text-purple-600\" />\n                  </div>\n                  <div>\n                    <h4 className=\"font-bold text-gray-900\">{building.name}</h4>\n                    <p className=\"text-sm text-gray-600\">{building.building_code}</p>\n                  </div>\n                </div>\n              </div>\n              \n              {building.description && (\n                <p className=\"text-sm text-gray-700 mb-3\">{building.description}</p>\n              )}\n              \n              <div className=\"space-y-2 mb-4\">\n                {building.landmark && (\n                  <p className=\"text-xs text-gray-600\">\n                    <span className=\"font-medium\">Landmark:</span> {building.landmark}\n                  </p>\n                )}\n                {building.number_of_floors && (\n                  <p className=\"text-xs text-gray-600\">\n                    <span className=\"font-medium\">Floors:</span> {building.number_of_floors}\n                  </p>\n                )}\n              </div>\n\n              <div className=\"flex gap-2\">\n                <Button size=\"sm\" variant=\"outline\" onClick={() => handleEdit(building)}>\n                  <Edit className=\"h-3 w-3 mr-1\" />\n                  Edit\n                </Button>\n                <Button\n                  size=\"sm\"\n                  variant=\"destructive\"\n                  onClick={() => deleteMutation.mutate(building.id)}\n                >\n                  <Trash2 className=\"h-3 w-3 mr-1\" />\n                  Delete\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n\n        {(!buildingsData?.buildings || buildingsData.buildings.length === 0) && (\n          <Card className=\"col-span-full\">\n            <CardContent className=\"p-12 text-center text-gray-500\">\n              No buildings found. Click \"Add Building\" to create one.\n            </CardContent>\n          </Card>\n        )}\n      </div>\n\n      <Dialog open={isCreateOpen} onOpenChange={setIsCreateOpen}>\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingBuilding ? \"Edit Building\" : \"Add New Building\"}\n            </DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>Building Name *</Label>\n                <Input\n                  value={formData.name}\n                  onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                  placeholder=\"e.g., Main Judicial Block\"\n                />\n              </div>\n              <div>\n                <Label>Building Code *</Label>\n                <Input\n                  value={formData.building_code}\n                  onChange={(e) => setFormData({ ...formData, building_code: e.target.value })}\n                  placeholder=\"e.g., BLD-001\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <Label>Description</Label>\n              <Textarea\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                placeholder=\"Enter building description\"\n                rows={3}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>Landmark</Label>\n                <Input\n                  value={formData.landmark}\n                  onChange={(e) => setFormData({ ...formData, landmark: e.target.value })}\n                  placeholder=\"e.g., Near Main Gate\"\n                />\n              </div>\n              <div>\n                <Label>Number of Floors</Label>\n                <Input\n                  type=\"number\"\n                  value={formData.number_of_floors}\n                  onChange={(e) => setFormData({ ...formData, number_of_floors: parseInt(e.target.value) || 1 })}\n                />\n              </div>\n            </div>\n\n            <div>\n              <Label>Directional Notes</Label>\n              <Textarea\n                value={formData.directional_notes}\n                onChange={(e) => setFormData({ ...formData, directional_notes: e.target.value })}\n                placeholder=\"e.g., Opposite canteen, near parking\"\n                rows={2}\n              />\n            </div>\n\n            <div className=\"flex justify-end gap-2 pt-4\">\n              <Button variant=\"outline\" onClick={resetForm}>\n                Cancel\n              </Button>\n              <Button\n                onClick={handleSubmit}\n                disabled={!formData.name || !formData.building_code || createMutation.isPending || updateMutation.isPending}\n              >\n                {createMutation.isPending || updateMutation.isPending ? \"Saving...\" : editingBuilding ? \"Update\" : \"Create\"}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":10411},"client/src/components/court-admin/FAQsSection.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Plus, Edit, Trash2, MessageSquare } from \"lucide-react\";\n\ninterface FAQData {\n  id?: string;\n  question: string;\n  answer: string;\n  category: string;\n  department_id?: string | null;\n  is_head_editable?: boolean;\n  priority?: number;\n}\n\nexport function FAQsSection() {\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\n  const [editingFAQ, setEditingFAQ] = useState<FAQData | null>(null);\n  const [formData, setFormData] = useState<FAQData>({\n    question: \"\",\n    answer: \"\",\n    category: \"General\",\n    department_id: null,\n    is_head_editable: false,\n    priority: 0,\n  });\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: faqsData } = useQuery({\n    queryKey: [\"/api/court-admin/faqs\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/faqs\");\n      if (!res.ok) throw new Error(\"Failed to fetch FAQs\");\n      return await res.json();\n    },\n  });\n\n  const { data: departmentsData } = useQuery({\n    queryKey: [\"/api/court-admin/departments\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/departments\");\n      if (!res.ok) throw new Error(\"Failed to fetch departments\");\n      return await res.json();\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: FAQData) => {\n      const res = await fetch(\"/api/court-admin/faqs\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to create FAQ\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/faqs\"] });\n      toast({ title: \"Success\", description: \"FAQ created successfully\" });\n      resetForm();\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, ...data }: FAQData & { id: string }) => {\n      const res = await fetch(`/api/court-admin/faqs/${id}`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to update FAQ\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/faqs\"] });\n      toast({ title: \"Success\", description: \"FAQ updated successfully\" });\n      resetForm();\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const res = await fetch(`/api/court-admin/faqs/${id}`, { method: \"DELETE\" });\n      if (!res.ok) throw new Error(\"Failed to delete FAQ\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/faqs\"] });\n      toast({ title: \"Success\", description: \"FAQ deleted successfully\" });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      question: \"\",\n      answer: \"\",\n      category: \"General\",\n      department_id: null,\n      is_head_editable: false,\n      priority: 0,\n    });\n    setIsCreateOpen(false);\n    setEditingFAQ(null);\n  };\n\n  const handleSubmit = () => {\n    if (editingFAQ?.id) {\n      updateMutation.mutate({ ...formData, id: editingFAQ.id });\n    } else {\n      createMutation.mutate(formData);\n    }\n  };\n\n  const handleEdit = (faq: any) => {\n    setEditingFAQ(faq);\n    setFormData({\n      question: faq.question,\n      answer: faq.answer,\n      category: faq.category,\n      department_id: faq.department_id || null,\n      is_head_editable: faq.is_head_editable || false,\n      priority: faq.priority || 0,\n    });\n    setIsCreateOpen(true);\n  };\n\n  const categories = [\"General\", \"Timings\", \"Documents\", \"Directions\", \"Procedures\", \"Announcements\"];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h3 className=\"text-xl font-bold text-gray-900\">FAQs & Content Management</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">Manage frequently asked questions for the court assistant</p>\n        </div>\n        <Button onClick={() => setIsCreateOpen(true)}>\n          <Plus className=\"mr-2 h-4 w-4\" />\n          Add FAQ\n        </Button>\n      </div>\n\n      <div className=\"space-y-4\">\n        {faqsData?.faqs?.map((faq: any) => (\n          <Card key={faq.id}>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    <MessageSquare className=\"w-5 h-5 text-purple-600\" />\n                    <span className=\"px-2 py-1 text-xs font-medium bg-purple-100 text-purple-700 rounded\">\n                      {faq.category}\n                    </span>\n                    {faq.priority > 0 && (\n                      <span className=\"px-2 py-1 text-xs font-medium bg-orange-100 text-orange-700 rounded\">\n                        Priority: {faq.priority}\n                      </span>\n                    )}\n                    {faq.is_head_editable && (\n                      <span className=\"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-700 rounded\">\n                        Head Editable\n                      </span>\n                    )}\n                  </div>\n                  <h4 className=\"font-bold text-gray-900 mb-2\">{faq.question}</h4>\n                  <p className=\"text-sm text-gray-700\">{faq.answer}</p>\n                  {faq.department && (\n                    <p className=\"text-xs text-gray-600 mt-2\">\n                      <span className=\"font-medium\">Department:</span> {faq.department.name}\n                    </p>\n                  )}\n                </div>\n                <div className=\"flex gap-2 ml-4\">\n                  <Button size=\"sm\" variant=\"ghost\" onClick={() => handleEdit(faq)}>\n                    <Edit className=\"h-4 w-4\" />\n                  </Button>\n                  <Button size=\"sm\" variant=\"ghost\" onClick={() => deleteMutation.mutate(faq.id)}>\n                    <Trash2 className=\"h-4 w-4 text-red-600\" />\n                  </Button>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n\n        {(!faqsData?.faqs || faqsData.faqs.length === 0) && (\n          <Card>\n            <CardContent className=\"p-12 text-center text-gray-500\">\n              No FAQs found. Click \"Add FAQ\" to create one.\n            </CardContent>\n          </Card>\n        )}\n      </div>\n\n      <Dialog open={isCreateOpen} onOpenChange={setIsCreateOpen}>\n        <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingFAQ ? \"Edit FAQ\" : \"Add New FAQ\"}\n            </DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div>\n              <Label>Question *</Label>\n              <Textarea\n                value={formData.question}\n                onChange={(e) => setFormData({ ...formData, question: e.target.value })}\n                placeholder=\"Enter the frequently asked question\"\n                rows={2}\n              />\n            </div>\n\n            <div>\n              <Label>Answer *</Label>\n              <Textarea\n                value={formData.answer}\n                onChange={(e) => setFormData({ ...formData, answer: e.target.value })}\n                placeholder=\"Enter the answer\"\n                rows={4}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>Category *</Label>\n                <Select value={formData.category} onValueChange={(value) => setFormData({ ...formData, category: value })}>\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {categories.map((cat) => (\n                      <SelectItem key={cat} value={cat}>\n                        {cat}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label>Priority (0-10)</Label>\n                <Input\n                  type=\"number\"\n                  min=\"0\"\n                  max=\"10\"\n                  value={formData.priority}\n                  onChange={(e) => setFormData({ ...formData, priority: parseInt(e.target.value) || 0 })}\n                />\n              </div>\n            </div>\n\n            <div>\n              <Label>Department (Optional)</Label>\n              <Select value={formData.department_id || \"\"} onValueChange={(value) => setFormData({ ...formData, department_id: value || null })}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select department\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"\">None (General)</SelectItem>\n                  {departmentsData?.departments?.map((dept: any) => (\n                    <SelectItem key={dept.id} value={dept.id}>\n                      {dept.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"flex items-center space-x-2\">\n              <Switch\n                id=\"head-editable\"\n                checked={formData.is_head_editable}\n                onCheckedChange={(checked) => setFormData({ ...formData, is_head_editable: checked })}\n              />\n              <Label htmlFor=\"head-editable\" className=\"cursor-pointer\">\n                Mark as Head-Editable Only\n              </Label>\n            </div>\n\n            <div className=\"flex justify-end gap-2 pt-4\">\n              <Button variant=\"outline\" onClick={resetForm}>Cancel</Button>\n              <Button\n                onClick={handleSubmit}\n                disabled={!formData.question || !formData.answer || createMutation.isPending || updateMutation.isPending}\n              >\n                {createMutation.isPending || updateMutation.isPending ? \"Saving...\" : editingFAQ ? \"Update\" : \"Create\"}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":10999},"client/src/components/court-admin/TicketsSection.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Ticket, Edit, Trash2, CheckCircle, MessageSquare } from \"lucide-react\";\nimport { format } from \"date-fns\";\n\ninterface TicketData {\n  id?: string;\n  question: string;\n  source?: string;\n  status?: string;\n  assigned_to?: string | null;\n  resolution_notes?: string;\n}\n\nexport function TicketsSection() {\n  const [isEditOpen, setIsEditOpen] = useState(false);\n  const [editingTicket, setEditingTicket] = useState<any>(null);\n  const [resolutionNotes, setResolutionNotes] = useState(\"\");\n  const [assignedTo, setAssignedTo] = useState<string | null>(null);\n  const [status, setStatus] = useState(\"Pending\");\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: ticketsData } = useQuery({\n    queryKey: [\"/api/court-admin/tickets\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/tickets\");\n      if (!res.ok) throw new Error(\"Failed to fetch tickets\");\n      return await res.json();\n    },\n  });\n\n  const { data: miniAdminsData } = useQuery({\n    queryKey: [\"/api/court-admin/mini-admins\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/mini-admins\");\n      if (!res.ok) throw new Error(\"Failed to fetch mini admins\");\n      return await res.json();\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, ...data }: TicketData & { id: string }) => {\n      const res = await fetch(`/api/court-admin/tickets/${id}`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to update ticket\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/tickets\"] });\n      toast({ title: \"Success\", description: \"Ticket updated successfully\" });\n      resetForm();\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const res = await fetch(`/api/court-admin/tickets/${id}`, { method: \"DELETE\" });\n      if (!res.ok) throw new Error(\"Failed to delete ticket\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/tickets\"] });\n      toast({ title: \"Success\", description: \"Ticket deleted successfully\" });\n    },\n  });\n\n  const resetForm = () => {\n    setResolutionNotes(\"\");\n    setAssignedTo(null);\n    setStatus(\"Pending\");\n    setIsEditOpen(false);\n    setEditingTicket(null);\n  };\n\n  const handleEdit = (ticket: any) => {\n    setEditingTicket(ticket);\n    setResolutionNotes(ticket.resolution_notes || \"\");\n    setAssignedTo(ticket.assigned_to || null);\n    setStatus(ticket.status || \"Pending\");\n    setIsEditOpen(true);\n  };\n\n  const handleSubmit = () => {\n    if (editingTicket?.id) {\n      updateMutation.mutate({\n        id: editingTicket.id,\n        question: editingTicket.question,\n        source: editingTicket.source,\n        status,\n        assigned_to: assignedTo,\n        resolution_notes: resolutionNotes,\n      });\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'Pending': return 'bg-yellow-100 text-yellow-800';\n      case 'In Review': return 'bg-blue-100 text-blue-800';\n      case 'Resolved': return 'bg-green-100 text-green-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const pendingTickets = ticketsData?.tickets?.filter((t: any) => t.status === 'Pending') || [];\n  const allTickets = ticketsData?.tickets || [];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h3 className=\"text-xl font-bold text-gray-900\">Unanswered Queries & Tickets</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">\n            Questions that the assistant couldn't answer automatically\n          </p>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"text-center\">\n              <p className=\"text-3xl font-bold text-yellow-600\">{pendingTickets.length}</p>\n              <p className=\"text-sm text-gray-600 mt-1\">Pending Tickets</p>\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"text-center\">\n              <p className=\"text-3xl font-bold text-blue-600\">\n                {allTickets.filter((t: any) => t.status === 'In Review').length}\n              </p>\n              <p className=\"text-sm text-gray-600 mt-1\">In Review</p>\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"text-center\">\n              <p className=\"text-3xl font-bold text-green-600\">\n                {allTickets.filter((t: any) => t.status === 'Resolved').length}\n              </p>\n              <p className=\"text-sm text-gray-600 mt-1\">Resolved</p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"space-y-4\">\n        {allTickets.map((ticket: any) => (\n          <Card key={ticket.id}>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-3 mb-3\">\n                    <Ticket className=\"w-5 h-5 text-purple-600\" />\n                    <span className={`px-2 py-1 text-xs font-medium rounded ${getStatusColor(ticket.status)}`}>\n                      {ticket.status}\n                    </span>\n                    <span className=\"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded\">\n                      {ticket.source || 'web'}\n                    </span>\n                    <span className=\"text-xs text-gray-500\">\n                      {format(new Date(ticket.created_at), 'PPp')}\n                    </span>\n                  </div>\n                  \n                  <h4 className=\"font-bold text-gray-900 mb-2\">{ticket.question}</h4>\n                  \n                  {ticket.assigned && (\n                    <p className=\"text-sm text-gray-600 mb-2\">\n                      <span className=\"font-medium\">Assigned to:</span> {ticket.assigned.name}\n                    </p>\n                  )}\n                  \n                  {ticket.resolution_notes && (\n                    <div className=\"mt-3 p-3 bg-green-50 rounded-lg border border-green-200\">\n                      <p className=\"text-xs font-medium text-green-900 mb-1\">Resolution Notes:</p>\n                      <p className=\"text-sm text-green-800\">{ticket.resolution_notes}</p>\n                    </div>\n                  )}\n                </div>\n                \n                <div className=\"flex gap-2 ml-4\">\n                  <Button size=\"sm\" variant=\"ghost\" onClick={() => handleEdit(ticket)}>\n                    <Edit className=\"h-4 w-4\" />\n                  </Button>\n                  <Button size=\"sm\" variant=\"ghost\" onClick={() => deleteMutation.mutate(ticket.id)}>\n                    <Trash2 className=\"h-4 w-4 text-red-600\" />\n                  </Button>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n\n        {allTickets.length === 0 && (\n          <Card>\n            <CardContent className=\"p-12 text-center text-gray-500\">\n              <CheckCircle className=\"w-12 h-12 mx-auto mb-4 text-green-500\" />\n              <p>No unanswered queries! The assistant is handling everything well.</p>\n            </CardContent>\n          </Card>\n        )}\n      </div>\n\n      <Dialog open={isEditOpen} onOpenChange={setIsEditOpen}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>Manage Ticket</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div>\n              <Label>Question</Label>\n              <p className=\"mt-2 p-3 bg-gray-50 rounded-lg text-sm text-gray-900\">\n                {editingTicket?.question}\n              </p>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>Status</Label>\n                <Select value={status} onValueChange={setStatus}>\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"Pending\">Pending</SelectItem>\n                    <SelectItem value=\"In Review\">In Review</SelectItem>\n                    <SelectItem value=\"Resolved\">Resolved</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label>Assign To</Label>\n                <Select value={assignedTo || \"\"} onValueChange={(value) => setAssignedTo(value || null)}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select mini admin\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"\">None</SelectItem>\n                    {miniAdminsData?.miniAdmins?.map((admin: any) => (\n                      <SelectItem key={admin.id} value={admin.id}>\n                        {admin.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div>\n              <Label>Resolution Notes</Label>\n              <Textarea\n                value={resolutionNotes}\n                onChange={(e) => setResolutionNotes(e.target.value)}\n                placeholder=\"Enter resolution notes or how this was addressed\"\n                rows={4}\n              />\n            </div>\n\n            <div className=\"flex justify-end gap-2 pt-4\">\n              <Button variant=\"outline\" onClick={resetForm}>Cancel</Button>\n              <Button\n                onClick={handleSubmit}\n                disabled={updateMutation.isPending}\n              >\n                {updateMutation.isPending ? \"Updating...\" : \"Update Ticket\"}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":10877},"client/src/pages/court-admin-login.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Lock, Scale } from \"lucide-react\";\nimport { useMutation } from \"@tanstack/react-query\";\n\nexport default function CourtAdminLogin() {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  const loginMutation = useMutation({\n    mutationFn: async (credentials: { username: string; password: string }) => {\n      const res = await fetch(\"/api/court-admin/login\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(credentials),\n      });\n      if (!res.ok) throw new Error(\"Invalid credentials\");\n      return await res.json();\n    },\n    onSuccess: (data) => {\n      localStorage.setItem(\"courtAdminId\", data.admin.id);\n      localStorage.setItem(\"courtAdminUsername\", data.admin.username);\n      toast({\n        title: \"Success\",\n        description: \"Login successful\",\n      });\n      setLocation(\"/court-admin\");\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    loginMutation.mutate({ username, password });\n  };\n\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gradient-to-br from-purple-50 via-white to-violet-100\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardHeader className=\"space-y-1 text-center\">\n          <div className=\"flex justify-center mb-4\">\n            <div className=\"p-3 bg-purple-600 rounded-full\">\n              <Scale className=\"h-8 w-8 text-white\" />\n            </div>\n          </div>\n          <CardTitle className=\"text-2xl font-bold\">Court Admin Panel</CardTitle>\n          <CardDescription>\n            Kaithal District Court Management System\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"username\">Username</Label>\n              <Input\n                id=\"username\"\n                type=\"text\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n                placeholder=\"Enter admin username\"\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Password</Label>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-3 top-3 h-4 w-4 text-gray-400\" />\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  placeholder=\"Enter admin password\"\n                  className=\"pl-10\"\n                  required\n                />\n              </div>\n            </div>\n            <Button \n              type=\"submit\" \n              className=\"w-full bg-purple-600 hover:bg-purple-700\" \n              disabled={loginMutation.isPending}\n            >\n              {loginMutation.isPending ? \"Logging in...\" : \"Login\"}\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":3718},"client/src/components/court-admin/SettingsSection.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Settings, Save, Download } from \"lucide-react\";\n\nexport function SettingsSection() {\n  const [currentPassword, setCurrentPassword] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const { toast } = useToast();\n\n  const handleChangePassword = () => {\n    if (!currentPassword || !newPassword || !confirmPassword) {\n      toast({\n        title: \"Error\",\n        description: \"Please fill in all password fields\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (newPassword !== confirmPassword) {\n      toast({\n        title: \"Error\",\n        description: \"New passwords do not match\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    toast({\n      title: \"Success\",\n      description: \"Password changed successfully (feature coming soon)\",\n    });\n    setCurrentPassword(\"\");\n    setNewPassword(\"\");\n    setConfirmPassword(\"\");\n  };\n\n  const handleExportData = () => {\n    toast({\n      title: \"Export Started\",\n      description: \"Preparing data export (feature coming soon)\",\n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h3 className=\"text-xl font-bold text-gray-900\">Settings & Configuration</h3>\n        <p className=\"text-sm text-gray-600 mt-1\">\n          Manage system settings and administrative preferences\n        </p>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Settings className=\"h-5 w-5\" />\n            Change Admin Password\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label>Current Password</Label>\n            <Input\n              type=\"password\"\n              value={currentPassword}\n              onChange={(e) => setCurrentPassword(e.target.value)}\n              placeholder=\"Enter current password\"\n            />\n          </div>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <Label>New Password</Label>\n              <Input\n                type=\"password\"\n                value={newPassword}\n                onChange={(e) => setNewPassword(e.target.value)}\n                placeholder=\"Enter new password\"\n              />\n            </div>\n            <div>\n              <Label>Confirm New Password</Label>\n              <Input\n                type=\"password\"\n                value={confirmPassword}\n                onChange={(e) => setConfirmPassword(e.target.value)}\n                placeholder=\"Confirm new password\"\n              />\n            </div>\n          </div>\n          <div className=\"flex justify-end\">\n            <Button onClick={handleChangePassword}>\n              <Save className=\"mr-2 h-4 w-4\" />\n              Change Password\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Language Settings</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div>\n            <Label>Default System Language</Label>\n            <p className=\"text-sm text-gray-600 mt-2\">\n              Current: Hindi & English (Bilingual Support)\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Data Management</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <h4 className=\"font-medium mb-2\">Export Database</h4>\n            <p className=\"text-sm text-gray-600 mb-4\">\n              Export all court data including buildings, rooms, staff, FAQs, and announcements\n            </p>\n            <Button onClick={handleExportData} variant=\"outline\">\n              <Download className=\"mr-2 h-4 w-4\" />\n              Export Data\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Feature Toggles</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n              <div>\n                <h4 className=\"font-medium\">Mini-Admin Creation</h4>\n                <p className=\"text-sm text-gray-600\">Allow creation of new mini-admin accounts</p>\n              </div>\n              <div className=\"px-3 py-1 bg-green-100 text-green-800 rounded text-sm font-medium\">\n                Enabled\n              </div>\n            </div>\n            <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n              <div>\n                <h4 className=\"font-medium\">Voice Assistant</h4>\n                <p className=\"text-sm text-gray-600\">Court voice assistant for visitors</p>\n              </div>\n              <div className=\"px-3 py-1 bg-green-100 text-green-800 rounded text-sm font-medium\">\n                Enabled\n              </div>\n            </div>\n            <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n              <div>\n                <h4 className=\"font-medium\">Auto-Ticket Creation</h4>\n                <p className=\"text-sm text-gray-600\">Automatically create tickets for unanswered queries</p>\n              </div>\n              <div className=\"px-3 py-1 bg-green-100 text-green-800 rounded text-sm font-medium\">\n                Enabled\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":5826},"client/src/components/court-admin/GeneralInfoSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Calendar as CalendarUI } from \"@/components/ui/calendar\";\nimport { Save, Calendar, Edit, Plus, Trash2, ChevronDown, Sparkles, Check, X } from \"lucide-react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger, DialogDescription } from \"@/components/ui/dialog\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { EnhancedAIInput } from \"../admin/EnhancedAIInput\";\nimport { EnhancedAIPreview } from \"../admin/EnhancedAIPreview\";\nimport { format, startOfYear, endOfYear, eachWeekOfInterval, getDay, addDays, startOfMonth, endOfMonth, eachMonthOfInterval } from \"date-fns\";\n\ninterface Holiday {\n  id: string;\n  date: string;\n  name: string;\n  type: \"gazetted\" | \"restricted\" | \"weekly_off\" | \"vacation\";\n}\n\ninterface AdditionalInfoEntry {\n  id: string;\n  title: string;\n  content: string;\n  category?: string;\n}\n\ninterface DynamicField {\n  id: string;\n  label: string;\n  value: string;\n}\n\nexport function GeneralInfoSection() {\n  const [isEditing, setIsEditing] = useState(false);\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: generalInfo } = useQuery({\n    queryKey: [\"/api/court-admin/general-info\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/general-info\");\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  const [formData, setFormData] = useState({\n    court_name: \"District and Sessions Court, Kaithal\",\n    address: \"District Courts Complex, Karnal Road, Kaithal, Haryana, India\",\n    pin_code: \"136027\",\n    landmark: \"\",\n    contact_reception: \"01746-235749\",\n    contact_pro: \"9817709002\",\n    contact_legal_aid: \"01746-235759\",\n    email: \"dsjktl@hry.nic.in\",\n    website: \"https://kaithal.dcourts.gov.in/\",\n    working_hours: \"10:00 AM to 4:00 PM (Monday to Friday)\",\n    lunch_break: \"1:00 PM to 1:45 PM (Typically)\",\n  });\n\n  // Dynamic fields state\n  const [dynamicFields, setDynamicFields] = useState<DynamicField[]>([]);\n  const [isAddingField, setIsAddingField] = useState(false);\n  const [newFieldLabel, setNewFieldLabel] = useState(\"\");\n  const [newFieldValue, setNewFieldValue] = useState(\"\");\n  const [fieldDialogOpen, setFieldDialogOpen] = useState(false);\n  const [fieldMode, setFieldMode] = useState<'manual' | 'ai'>('manual');\n  const [fieldAiPrompt, setFieldAiPrompt] = useState(\"\");\n  const [isGeneratingField, setIsGeneratingField] = useState(false);\n  const [fieldAiData, setFieldAiData] = useState<any>(null);\n\n  useEffect(() => {\n    if (generalInfo?.data) {\n      setFormData({\n        court_name: generalInfo.data.court_name || \"District and Sessions Court, Kaithal\",\n        address: generalInfo.data.address || \"District Courts Complex, Karnal Road, Kaithal, Haryana, India\",\n        pin_code: generalInfo.data.pin_code || \"136027\",\n        landmark: generalInfo.data.landmark || \"\",\n        contact_reception: generalInfo.data.contact_reception || \"01746-235749\",\n        contact_pro: generalInfo.data.contact_pro || \"9817709002\",\n        contact_legal_aid: generalInfo.data.contact_legal_aid || \"01746-235759\",\n        email: generalInfo.data.email || \"dsjktl@hry.nic.in\",\n        website: generalInfo.data.website || \"https://kaithal.dcourts.gov.in/\",\n        working_hours: generalInfo.data.working_hours || \"10:00 AM to 4:00 PM (Monday to Friday)\",\n        lunch_break: generalInfo.data.lunch_break || \"1:00 PM to 1:45 PM (Typically)\",\n      });\n      if (generalInfo.data.dynamic_fields) {\n        setDynamicFields(generalInfo.data.dynamic_fields);\n      }\n    }\n  }, [generalInfo]);\n\n  const updateMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await fetch(\"/api/court-admin/general-info\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ ...data, dynamic_fields: dynamicFields }),\n      });\n      if (!res.ok) throw new Error(\"Failed to update\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/general-info\"] });\n      toast({ title: \"Success\", description: \"General info updated successfully\" });\n      setIsEditing(false);\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  // Holidays state and handlers\n  const [holidays, setHolidays] = useState<Holiday[]>([]);\n  const [isEditingHolidays, setIsEditingHolidays] = useState(false);\n  const [newHoliday, setNewHoliday] = useState({\n    date: new Date(),\n    name: \"\",\n    type: \"gazetted\" as Holiday[\"type\"],\n  });\n  const [isHolidayDialogOpen, setIsHolidayDialogOpen] = useState(false);\n  const [holidayMode, setHolidayMode] = useState<'manual' | 'ai'>('manual');\n  const [holidayAiPrompt, setHolidayAiPrompt] = useState(\"\");\n  const [isGeneratingHoliday, setIsGeneratingHoliday] = useState(false);\n\n  // Additional Info state and handlers\n  const [additionalInfo, setAdditionalInfo] = useState<AdditionalInfoEntry[]>([]);\n  const [isEditingAdditionalInfo, setIsEditingAdditionalInfo] = useState(false);\n  const [isAddInfoDialogOpen, setIsAddInfoDialogOpen] = useState(false);\n  const [addInfoMode, setAddInfoMode] = useState<'manual' | 'ai'>('manual');\n  const [newInfoEntry, setNewInfoEntry] = useState({ title: \"\", content: \"\", category: \"\" });\n  const [editingInfoId, setEditingInfoId] = useState<string | null>(null);\n  const [editedInfoEntry, setEditedInfoEntry] = useState<AdditionalInfoEntry | null>(null);\n  const [aiPrompt, setAiPrompt] = useState(\"\");\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [aiGeneratedData, setAiGeneratedData] = useState<any>(null);\n  const [currentPreviewIndex, setCurrentPreviewIndex] = useState(0);\n  const [isListening, setIsListening] = useState(false);\n  const [browserSupported] = useState(() => 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window);\n\n  // Fetch holidays\n  const { data: holidaysData } = useQuery({\n    queryKey: [\"/api/court-admin/holidays\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/holidays\");\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  // Fetch additional info\n  const { data: additionalInfoData } = useQuery({\n    queryKey: [\"/api/court-admin/additional-info\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/additional-info\");\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      return await res.json();\n    },\n  });\n\n  useEffect(() => {\n    if (holidaysData?.holidays) {\n      setHolidays(holidaysData.holidays);\n    }\n  }, [holidaysData]);\n\n  useEffect(() => {\n    if (additionalInfoData?.entries) {\n      setAdditionalInfo(additionalInfoData.entries);\n    }\n  }, [additionalInfoData]);\n\n  const handleSave = () => {\n    updateMutation.mutate(formData);\n  };\n\n  // Dynamic field handlers\n  const handleOpenFieldDialog = (mode: 'manual' | 'ai') => {\n    setFieldMode(mode);\n    setFieldDialogOpen(true);\n    setFieldAiData(null);\n    setFieldAiPrompt(\"\");\n  };\n\n  const handleAddDynamicField = () => {\n    if (!newFieldLabel.trim() || !newFieldValue.trim()) {\n      toast({ title: \"Error\", description: \"Both label and value are required\", variant: \"destructive\" });\n      return;\n    }\n    const newField: DynamicField = {\n      id: Date.now().toString(),\n      label: newFieldLabel,\n      value: newFieldValue,\n    };\n    setDynamicFields([...dynamicFields, newField]);\n    setNewFieldLabel(\"\");\n    setNewFieldValue(\"\");\n    setFieldDialogOpen(false);\n    toast({ title: \"Success\", description: \"Field added\" });\n  };\n\n  const handleGenerateField = async () => {\n    if (!fieldAiPrompt.trim()) {\n      toast({ title: \"Error\", description: \"Please enter a description\", variant: \"destructive\" });\n      return;\n    }\n\n    setIsGeneratingField(true);\n    try {\n      const response = await fetch(\"/api/court-admin/ai-generate\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          prompt: fieldAiPrompt,\n          type: \"court_field\",\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || \"Failed to generate\");\n      }\n      \n      const result = await response.json();\n      setFieldAiData(result);\n      toast({ title: \"Success\", description: \"Field generated successfully\" });\n    } catch (error: any) {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    } finally {\n      setIsGeneratingField(false);\n    }\n  };\n\n  const handleConfirmFieldAI = () => {\n    if (!fieldAiData) return;\n    const fields = fieldAiData.fields || [fieldAiData];\n    const newFields = fields.map((f: any) => ({\n      id: Date.now().toString() + Math.random(),\n      label: f.label || f.field_name,\n      value: f.value || f.field_value || \"\",\n    }));\n    setDynamicFields([...dynamicFields, ...newFields]);\n    setFieldAiData(null);\n    setFieldAiPrompt(\"\");\n    setFieldDialogOpen(false);\n    toast({ title: \"Success\", description: `${newFields.length} field(s) added` });\n  };\n\n  const handleDeleteDynamicField = (id: string) => {\n    setDynamicFields(dynamicFields.filter((f) => f.id !== id));\n    toast({ title: \"Success\", description: \"Field removed\" });\n  };\n\n  const handleUpdateDynamicField = (id: string, label: string, value: string) => {\n    setDynamicFields(dynamicFields.map((f) => \n      f.id === id ? { ...f, label, value } : f\n    ));\n  };\n\n  const saveHolidaysMutation = useMutation({\n    mutationFn: async (data: Holiday[]) => {\n      const res = await fetch(\"/api/court-admin/holidays\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ holidays: data }),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/holidays\"] });\n      toast({ title: \"Success\", description: \"Holidays updated successfully\" });\n      setIsEditingHolidays(false);\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const saveAdditionalInfoMutation = useMutation({\n    mutationFn: async (data: AdditionalInfoEntry[]) => {\n      const res = await fetch(\"/api/court-admin/additional-info\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ entries: data }),\n      });\n      if (!res.ok) throw new Error(\"Failed to save\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/additional-info\"] });\n      toast({ title: \"Success\", description: \"Additional info updated successfully\" });\n      setIsEditingAdditionalInfo(false);\n      setEditingInfoId(null);\n      setEditedInfoEntry(null);\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleAddHoliday = () => {\n    if (!newHoliday.name.trim()) {\n      toast({ title: \"Error\", description: \"Holiday name is required\", variant: \"destructive\" });\n      return;\n    }\n    const holiday: Holiday = {\n      id: Date.now().toString(),\n      date: format(newHoliday.date, \"yyyy-MM-dd\"),\n      name: newHoliday.name,\n      type: newHoliday.type,\n    };\n    setHolidays([...holidays, holiday]);\n    setNewHoliday({ date: new Date(), name: \"\", type: \"gazetted\" });\n    setIsHolidayDialogOpen(false);\n    toast({ title: \"Success\", description: \"Holiday added\" });\n  };\n\n  // Smart AI Holiday generation\n  const handleGenerateHolidayAI = async () => {\n    if (!holidayAiPrompt.trim()) {\n      toast({ title: \"Error\", description: \"Please describe the holidays\", variant: \"destructive\" });\n      return;\n    }\n\n    setIsGeneratingHoliday(true);\n    try {\n      // Parse natural language for smart holiday generation\n      const prompt = holidayAiPrompt.toLowerCase();\n      const newHolidays: Holiday[] = [];\n      const currentYear = new Date().getFullYear();\n      const yearStart = startOfYear(new Date(currentYear, 0, 1));\n      const yearEnd = endOfYear(new Date(currentYear, 11, 31));\n\n      // Check for weekly patterns\n      if (prompt.includes('sunday') && (prompt.includes('weekly') || prompt.includes('every'))) {\n        const sundays = eachWeekOfInterval({ start: yearStart, end: yearEnd }).map(week => {\n          const sunday = addDays(week, 0 - getDay(week));\n          return sunday;\n        });\n        sundays.forEach((date, index) => {\n          newHolidays.push({\n            id: `sunday-${index}-${Date.now()}`,\n            date: format(date, \"yyyy-MM-dd\"),\n            name: \"Sunday (Weekly Off)\",\n            type: \"weekly_off\",\n          });\n        });\n      }\n\n      // Check for 2nd Saturday pattern (but not if user wants to exclude it)\n      if ((prompt.includes('2nd saturday') || prompt.includes('second saturday')) && \n          !prompt.includes('except')) {\n        const months = eachMonthOfInterval({ start: yearStart, end: yearEnd });\n        \n        months.forEach((month, monthIndex) => {\n          const monthStart = startOfMonth(month);\n          const monthEnd = endOfMonth(month);\n          \n          // Get all Saturdays in this month\n          const saturdays = eachWeekOfInterval({ start: monthStart, end: monthEnd })\n            .map(week => addDays(week, 6 - getDay(week)))\n            .filter(sat => sat >= monthStart && sat <= monthEnd);\n          \n          // Get the 2nd Saturday (index 1)\n          if (saturdays.length >= 2) {\n            const secondSaturday = saturdays[1];\n            newHolidays.push({\n              id: `2nd-sat-${monthIndex}-${Date.now()}`,\n              date: format(secondSaturday, \"yyyy-MM-dd\"),\n              name: \"2nd Saturday (Weekly Off)\",\n              type: \"weekly_off\",\n            });\n          }\n        });\n      }\n\n      // Check for all Saturdays except 2nd\n      if ((prompt.includes('saturday') && prompt.includes('except 2nd')) || \n          (prompt.includes('1st') && prompt.includes('saturday'))) {\n        const months = eachMonthOfInterval({ start: yearStart, end: yearEnd });\n        \n        months.forEach((month) => {\n          const monthStart = startOfMonth(month);\n          const monthEnd = endOfMonth(month);\n          \n          // Get all Saturdays in this month\n          const saturdays = eachWeekOfInterval({ start: monthStart, end: monthEnd })\n            .map(week => addDays(week, 6 - getDay(week)))\n            .filter(sat => sat >= monthStart && sat <= monthEnd);\n          \n          // Add all Saturdays except the 2nd one (index 1)\n          saturdays.forEach((saturday, index) => {\n            if (index !== 1) { // Skip 2nd Saturday\n              newHolidays.push({\n                id: `sat-${index}-${month.getMonth()}-${Date.now()}`,\n                date: format(saturday, \"yyyy-MM-dd\"),\n                name: \"Saturday (Weekly Off)\",\n                type: \"weekly_off\",\n              });\n            }\n          });\n        });\n      }\n\n      // If no pattern detected, use AI API\n      if (newHolidays.length === 0) {\n        const response = await fetch(\"/api/court-admin/ai-generate\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            prompt: holidayAiPrompt,\n            type: \"court_holidays\",\n          }),\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(errorData.message || \"Failed to generate\");\n        }\n        \n        const result = await response.json();\n        const aiHolidays = result.holidays || [result];\n        aiHolidays.forEach((h: any, index: number) => {\n          newHolidays.push({\n            id: `ai-${index}-${Date.now()}`,\n            date: h.date || format(new Date(), \"yyyy-MM-dd\"),\n            name: h.name || h.holiday_name || \"Holiday\",\n            type: h.type || \"gazetted\",\n          });\n        });\n      }\n\n      setHolidays([...holidays, ...newHolidays]);\n      setHolidayAiPrompt(\"\");\n      setIsHolidayDialogOpen(false);\n      toast({ \n        title: \"Success\", \n        description: `${newHolidays.length} holiday(s) added successfully` \n      });\n    } catch (error: any) {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    } finally {\n      setIsGeneratingHoliday(false);\n    }\n  };\n\n  const handleDeleteHoliday = (id: string) => {\n    setHolidays(holidays.filter((h) => h.id !== id));\n    toast({ title: \"Success\", description: \"Holiday removed\" });\n  };\n\n  const handleSaveHolidays = () => {\n    saveHolidaysMutation.mutate(holidays);\n  };\n\n  // Additional Info handlers\n  const handleOpenAddInfoDialog = (mode: 'manual' | 'ai') => {\n    setAddInfoMode(mode);\n    setIsAddInfoDialogOpen(true);\n    setAiGeneratedData(null);\n    setAiPrompt(\"\");\n  };\n\n  const handleAddInfoEntry = () => {\n    if (!newInfoEntry.title || !newInfoEntry.content) {\n      toast({ title: \"Error\", description: \"Title and content are required\", variant: \"destructive\" });\n      return;\n    }\n    const entry: AdditionalInfoEntry = {\n      id: Date.now().toString(),\n      ...newInfoEntry,\n    };\n    setAdditionalInfo([...additionalInfo, entry]);\n    setNewInfoEntry({ title: \"\", content: \"\", category: \"\" });\n    setIsAddInfoDialogOpen(false);\n    toast({ title: \"Success\", description: \"Entry added\" });\n  };\n\n  const handleEditInfoEntry = (entry: AdditionalInfoEntry) => {\n    setEditingInfoId(entry.id);\n    setEditedInfoEntry({ ...entry });\n  };\n\n  const handleSaveEditedInfo = () => {\n    if (!editedInfoEntry) return;\n    setAdditionalInfo(additionalInfo.map(e => \n      e.id === editingInfoId ? editedInfoEntry : e\n    ));\n    setEditingInfoId(null);\n    setEditedInfoEntry(null);\n    toast({ title: \"Success\", description: \"Entry updated\" });\n  };\n\n  const handleCancelEditInfo = () => {\n    setEditingInfoId(null);\n    setEditedInfoEntry(null);\n  };\n\n  const handleDeleteInfoEntry = (id: string) => {\n    setAdditionalInfo(additionalInfo.filter((e) => e.id !== id));\n    toast({ title: \"Success\", description: \"Entry removed\" });\n  };\n\n  const handleSaveAdditionalInfo = () => {\n    saveAdditionalInfoMutation.mutate(additionalInfo);\n  };\n\n  // AI Generation handlers\n  const handleGenerateAI = async () => {\n    if (!aiPrompt.trim()) {\n      toast({ title: \"Error\", description: \"Please enter a description\", variant: \"destructive\" });\n      return;\n    }\n\n    setIsGenerating(true);\n    try {\n      const response = await fetch(\"/api/court-admin/ai-generate\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          prompt: aiPrompt,\n          type: \"court_additional_info\",\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || \"Failed to generate\");\n      }\n      \n      const result = await response.json();\n      setAiGeneratedData(result);\n      setCurrentPreviewIndex(0);\n      toast({ title: \"Success\", description: \"Information generated successfully\" });\n    } catch (error: any) {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  const handleConfirmAI = () => {\n    if (!aiGeneratedData) return;\n    const newEntries = aiGeneratedData.entries || [aiGeneratedData];\n    const entriesWithIds = newEntries.map((entry: any) => ({\n      id: Date.now().toString() + Math.random(),\n      title: entry.title,\n      content: entry.content,\n      category: entry.category || \"\",\n    }));\n    setAdditionalInfo([...additionalInfo, ...entriesWithIds]);\n    setAiGeneratedData(null);\n    setAiPrompt(\"\");\n    setIsAddInfoDialogOpen(false);\n    toast({ \n      title: \"Success\", \n      description: `${entriesWithIds.length} entry/entries added successfully` \n    });\n  };\n\n  const handleRegenerateAI = () => {\n    setAiGeneratedData(null);\n    setCurrentPreviewIndex(0);\n  };\n\n  const handleEditAIEntry = (entry: any, index: number) => {\n    const updatedEntries = [...(aiGeneratedData.entries || [aiGeneratedData])];\n    updatedEntries[index] = entry;\n    setAiGeneratedData({ ...aiGeneratedData, entries: updatedEntries });\n  };\n\n  const handleDeleteAIEntry = (index: number) => {\n    const updatedEntries = [...(aiGeneratedData.entries || [aiGeneratedData])];\n    updatedEntries.splice(index, 1);\n    if (updatedEntries.length === 0) {\n      setAiGeneratedData(null);\n    } else {\n      setAiGeneratedData({ ...aiGeneratedData, entries: updatedEntries });\n    }\n  };\n\n  const handleToggleVoice = () => {\n    if (!browserSupported) {\n      toast({ title: \"Not Supported\", description: \"Voice input not supported in this browser\", variant: \"destructive\" });\n      return;\n    }\n    setIsListening(!isListening);\n  };\n\n  // Get holiday color based on type\n  const getHolidayColor = (type: Holiday[\"type\"]) => {\n    switch (type) {\n      case \"gazetted\":\n        return \"bg-red-500\";\n      case \"restricted\":\n        return \"bg-orange-500\";\n      case \"weekly_off\":\n        return \"bg-blue-500\";\n      case \"vacation\":\n        return \"bg-green-500\";\n      default:\n        return \"bg-gray-500\";\n    }\n  };\n\n  const getHolidayTypeLabel = (type: Holiday[\"type\"]) => {\n    switch (type) {\n      case \"gazetted\":\n        return \"Gazetted Holiday\";\n      case \"restricted\":\n        return \"Restricted Holiday\";\n      case \"weekly_off\":\n        return \"Weekly Off\";\n      case \"vacation\":\n        return \"Vacation\";\n      default:\n        return type;\n    }\n  };\n\n  // Get holidays for calendar display\n  const holidayDates = holidays.map(h => new Date(h.date));\n  const modifiers = {\n    gazetted: holidays.filter(h => h.type === \"gazetted\").map(h => new Date(h.date)),\n    restricted: holidays.filter(h => h.type === \"restricted\").map(h => new Date(h.date)),\n    weeklyOff: holidays.filter(h => h.type === \"weekly_off\").map(h => new Date(h.date)),\n    vacation: holidays.filter(h => h.type === \"vacation\").map(h => new Date(h.date)),\n  };\n\n  const modifiersStyles = {\n    gazetted: { backgroundColor: \"#ef4444\", color: \"white\", borderRadius: \"50%\" },\n    restricted: { backgroundColor: \"#f97316\", color: \"white\", borderRadius: \"50%\" },\n    weeklyOff: { backgroundColor: \"#3b82f6\", color: \"white\", borderRadius: \"50%\" },\n    vacation: { backgroundColor: \"#22c55e\", color: \"white\", borderRadius: \"50%\" },\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Basic Court Information */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex justify-between items-center\">\n            <CardTitle>Basic Court Information</CardTitle>\n            {!isEditing ? (\n              <Button onClick={() => setIsEditing(true)} variant=\"outline\">\n                <Edit className=\"h-4 w-4 mr-2\" />\n                Edit\n              </Button>\n            ) : (\n              <div className=\"flex gap-2\">\n                <Button onClick={() => setIsEditing(false)} variant=\"outline\">\n                  Cancel\n                </Button>\n                <Button onClick={handleSave} disabled={updateMutation.isPending}>\n                  <Save className=\"h-4 w-4 mr-2\" />\n                  {updateMutation.isPending ? \"Saving...\" : \"Save Changes\"}\n                </Button>\n              </div>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"md:col-span-2\">\n              <Label>Court Name</Label>\n              {isEditing ? (\n                <Input\n                  value={formData.court_name}\n                  onChange={(e) => setFormData({ ...formData, court_name: e.target.value })}\n                  placeholder=\"Enter court name\"\n                />\n              ) : (\n                <p className=\"mt-2 text-gray-700\">{formData.court_name || \"N/A\"}</p>\n              )}\n            </div>\n\n            <div className=\"md:col-span-2\">\n              <Label>Address</Label>\n              {isEditing ? (\n                <Textarea\n                  value={formData.address}\n                  onChange={(e) => setFormData({ ...formData, address: e.target.value })}\n                  placeholder=\"Enter full address\"\n                  rows={2}\n                />\n              ) : (\n                <p className=\"mt-2 text-gray-700\">{formData.address || \"N/A\"}</p>\n              )}\n            </div>\n\n            <div>\n              <Label>Pin Code</Label>\n              {isEditing ? (\n                <Input\n                  value={formData.pin_code}\n                  onChange={(e) => setFormData({ ...formData, pin_code: e.target.value })}\n                  placeholder=\"Enter pin code\"\n                />\n              ) : (\n                <p className=\"mt-2 text-gray-700\">{formData.pin_code || \"N/A\"}</p>\n              )}\n            </div>\n\n            <div>\n              <Label>Landmark</Label>\n              {isEditing ? (\n                <Input\n                  value={formData.landmark}\n                  onChange={(e) => setFormData({ ...formData, landmark: e.target.value })}\n                  placeholder=\"Enter landmark\"\n                />\n              ) : (\n                <p className=\"mt-2 text-gray-700\">{formData.landmark || \"N/A\"}</p>\n              )}\n            </div>\n\n            <div>\n              <Label>Contact Number (Reception)</Label>\n              {isEditing ? (\n                <Input\n                  value={formData.contact_reception}\n                  onChange={(e) => setFormData({ ...formData, contact_reception: e.target.value })}\n                  placeholder=\"Enter reception contact\"\n                />\n              ) : (\n                <p className=\"mt-2 text-gray-700\">{formData.contact_reception || \"N/A\"}</p>\n              )}\n            </div>\n\n            <div>\n              <Label>Contact Number (PRO)</Label>\n              {isEditing ? (\n                <Input\n                  value={formData.contact_pro}\n                  onChange={(e) => setFormData({ ...formData, contact_pro: e.target.value })}\n                  placeholder=\"Enter PRO contact\"\n                />\n              ) : (\n                <p className=\"mt-2 text-gray-700\">{formData.contact_pro || \"N/A\"}</p>\n              )}\n            </div>\n\n            <div>\n              <Label>Contact Number (Legal Aid)</Label>\n              {isEditing ? (\n                <Input\n                  value={formData.contact_legal_aid}\n                  onChange={(e) => setFormData({ ...formData, contact_legal_aid: e.target.value })}\n                  placeholder=\"Enter legal aid contact\"\n                />\n              ) : (\n                <p className=\"mt-2 text-gray-700\">{formData.contact_legal_aid || \"N/A\"}</p>\n              )}\n            </div>\n\n            <div>\n              <Label>Official Email</Label>\n              {isEditing ? (\n                <Input\n                  type=\"email\"\n                  value={formData.email}\n                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                  placeholder=\"Enter email\"\n                />\n              ) : (\n                <p className=\"mt-2 text-gray-700\">{formData.email || \"N/A\"}</p>\n              )}\n            </div>\n\n            <div>\n              <Label>Official Website</Label>\n              {isEditing ? (\n                <Input\n                  value={formData.website}\n                  onChange={(e) => setFormData({ ...formData, website: e.target.value })}\n                  placeholder=\"Enter website URL\"\n                />\n              ) : (\n                <p className=\"mt-2 text-gray-700\">{formData.website || \"N/A\"}</p>\n              )}\n            </div>\n\n            <div>\n              <Label>Working Hours</Label>\n              {isEditing ? (\n                <Input\n                  value={formData.working_hours}\n                  onChange={(e) => setFormData({ ...formData, working_hours: e.target.value })}\n                  placeholder=\"e.g., 10:00 AM - 5:00 PM\"\n                />\n              ) : (\n                <p className=\"mt-2 text-gray-700\">{formData.working_hours || \"N/A\"}</p>\n              )}\n            </div>\n\n            <div>\n              <Label>Lunch Break</Label>\n              {isEditing ? (\n                <Input\n                  value={formData.lunch_break}\n                  onChange={(e) => setFormData({ ...formData, lunch_break: e.target.value })}\n                  placeholder=\"e.g., 1:00 PM - 2:00 PM\"\n                />\n              ) : (\n                <p className=\"mt-2 text-gray-700\">{formData.lunch_break || \"N/A\"}</p>\n              )}\n            </div>\n\n            {/* Dynamic Fields */}\n            {dynamicFields.map((field) => (\n              <div key={field.id} className=\"md:col-span-2\">\n                <Label>{field.label}</Label>\n                {isEditing ? (\n                  <div className=\"flex gap-2\">\n                    <Input\n                      value={field.label}\n                      onChange={(e) => handleUpdateDynamicField(field.id, e.target.value, field.value)}\n                      placeholder=\"Field label\"\n                      className=\"flex-1\"\n                    />\n                    <Input\n                      value={field.value}\n                      onChange={(e) => handleUpdateDynamicField(field.id, field.label, e.target.value)}\n                      placeholder=\"Field value\"\n                      className=\"flex-1\"\n                    />\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      onClick={() => handleDeleteDynamicField(field.id)}\n                    >\n                      <Trash2 className=\"h-4 w-4 text-red-600\" />\n                    </Button>\n                  </div>\n                ) : (\n                  <p className=\"mt-2 text-gray-700\">{field.value || \"N/A\"}</p>\n                )}\n              </div>\n            ))}\n          </div>\n\n          {/* Add Field Button */}\n          {isEditing && (\n            <div className=\"pt-4 border-t\">\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button variant=\"outline\" className=\"w-full sm:w-auto\">\n                    <Plus className=\"mr-2 h-4 w-4\" />\n                    Add Field\n                    <ChevronDown className=\"h-4 w-4 ml-2\" />\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent>\n                  <DropdownMenuItem onClick={() => handleOpenFieldDialog('manual')}>\n                    Manual Entry\n                  </DropdownMenuItem>\n                  <DropdownMenuItem onClick={() => handleOpenFieldDialog('ai')}>\n                    <Sparkles className=\"mr-2 h-4 w-4\" />\n                    AI Powered\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n\n              {/* Add Field Dialog */}\n              <Dialog open={fieldDialogOpen} onOpenChange={setFieldDialogOpen}>\n                <DialogContent>\n                  <DialogHeader>\n                    <DialogTitle>\n                      {fieldMode === 'ai' ? 'AI-Powered Add Field' : 'Manual Add Field'}\n                    </DialogTitle>\n                  </DialogHeader>\n\n                  {fieldMode === 'ai' ? (\n                    <div className=\"space-y-4\">\n                      {!fieldAiData ? (\n                        <>\n                          <Textarea\n                            value={fieldAiPrompt}\n                            onChange={(e) => setFieldAiPrompt(e.target.value)}\n                            placeholder=\"Describe the field(s) you want to add... e.g., 'Add fax number field'\"\n                            rows={4}\n                          />\n                          <Button \n                            onClick={handleGenerateField} \n                            disabled={isGeneratingField}\n                            className=\"w-full\"\n                          >\n                            {isGeneratingField ? \"Generating...\" : \"Generate with AI\"}\n                          </Button>\n                        </>\n                      ) : (\n                        <>\n                          <div className=\"space-y-2 p-4 border rounded-lg bg-gray-50\">\n                            <p className=\"font-semibold\">Generated Field:</p>\n                            <p><strong>Label:</strong> {fieldAiData.label || fieldAiData.field_name}</p>\n                            <p><strong>Value:</strong> {fieldAiData.value || fieldAiData.field_value}</p>\n                          </div>\n                          <div className=\"flex gap-2\">\n                            <Button onClick={() => setFieldAiData(null)} variant=\"outline\" className=\"flex-1\">\n                              Regenerate\n                            </Button>\n                            <Button onClick={handleConfirmFieldAI} className=\"flex-1\">\n                              Add Field\n                            </Button>\n                          </div>\n                        </>\n                      )}\n                    </div>\n                  ) : (\n                    <div className=\"space-y-4\">\n                      <div className=\"space-y-2\">\n                        <Label>Field Label</Label>\n                        <Input\n                          value={newFieldLabel}\n                          onChange={(e) => setNewFieldLabel(e.target.value)}\n                          placeholder=\"e.g., Fax Number\"\n                        />\n                      </div>\n                      <div className=\"space-y-2\">\n                        <Label>Field Value</Label>\n                        <Input\n                          value={newFieldValue}\n                          onChange={(e) => setNewFieldValue(e.target.value)}\n                          placeholder=\"Enter value\"\n                        />\n                      </div>\n                      <Button onClick={handleAddDynamicField} className=\"w-full\">\n                        Add Field\n                      </Button>\n                    </div>\n                  )}\n                </DialogContent>\n              </Dialog>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Holidays Calendar */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex justify-between items-center\">\n            <CardTitle className=\"flex items-center gap-2\">\n              <Calendar className=\"h-5 w-5\" />\n              Holidays Calendar\n            </CardTitle>\n            {!isEditingHolidays ? (\n              <Button onClick={() => setIsEditingHolidays(true)} variant=\"outline\">\n                <Edit className=\"h-4 w-4 mr-2\" />\n                Edit\n              </Button>\n            ) : (\n              <div className=\"flex gap-2\">\n                <Button onClick={() => setIsEditingHolidays(false)} variant=\"outline\">\n                  Cancel\n                </Button>\n                <Button onClick={handleSaveHolidays} disabled={saveHolidaysMutation.isPending}>\n                  <Save className=\"h-4 w-4 mr-2\" />\n                  {saveHolidaysMutation.isPending ? \"Saving...\" : \"Save Holidays\"}\n                </Button>\n              </div>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          {/* Calendar Display - Made Wider */}\n          <div className=\"flex justify-center\">\n            <div className=\"w-full max-w-4xl\">\n              <CalendarUI\n                mode=\"single\"\n                modifiers={modifiers}\n                modifiersStyles={modifiersStyles}\n                className=\"rounded-md border w-full scale-125 origin-top\"\n              />\n            </div>\n          </div>\n\n          {/* Holiday Legend */}\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-4 h-4 rounded-full bg-red-500\"></div>\n              <span className=\"text-sm text-gray-700\">Gazetted Holiday</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-4 h-4 rounded-full bg-orange-500\"></div>\n              <span className=\"text-sm text-gray-700\">Restricted Holiday</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-4 h-4 rounded-full bg-blue-500\"></div>\n              <span className=\"text-sm text-gray-700\">Weekly Off</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-4 h-4 rounded-full bg-green-500\"></div>\n              <span className=\"text-sm text-gray-700\">Vacation</span>\n            </div>\n          </div>\n\n          {/* Add Holiday Button (Only in Edit Mode) */}\n          {isEditingHolidays && (\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button className=\"w-full\">\n                  <Plus className=\"mr-2 h-4 w-4\" />\n                  Add Holiday\n                  <ChevronDown className=\"h-4 w-4 ml-2\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent>\n                <DropdownMenuItem onClick={() => { setHolidayMode('manual'); setIsHolidayDialogOpen(true); }}>\n                  Manual Entry\n                </DropdownMenuItem>\n                <DropdownMenuItem onClick={() => { setHolidayMode('ai'); setIsHolidayDialogOpen(true); }}>\n                  <Sparkles className=\"mr-2 h-4 w-4\" />\n                  AI Powered (Smart)\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          )}\n\n          {/* Add Holiday Dialog */}\n          <Dialog open={isHolidayDialogOpen} onOpenChange={setIsHolidayDialogOpen}>\n            <DialogContent>\n              <DialogHeader>\n                <DialogTitle>\n                  {holidayMode === 'ai' ? 'AI-Powered Add Holiday' : 'Manual Add Holiday'}\n                </DialogTitle>\n                {holidayMode === 'ai' && (\n                  <DialogDescription>\n                    Use natural language like \"weekly holiday on Sunday\" or \"2nd Saturday off\"\n                  </DialogDescription>\n                )}\n              </DialogHeader>\n\n              {holidayMode === 'ai' ? (\n                <div className=\"space-y-4 mt-4\">\n                  <div className=\"space-y-2\">\n                    <Label>Describe Holidays</Label>\n                    <Textarea\n                      value={holidayAiPrompt}\n                      onChange={(e) => setHolidayAiPrompt(e.target.value)}\n                      placeholder=\"e.g., 'Weekly holiday on Sunday' or '2nd Saturday off' or 'All Saturdays except 2nd Saturday'\"\n                      rows={4}\n                    />\n                  </div>\n                  <div className=\"text-sm text-gray-600 space-y-1\">\n                    <p className=\"font-semibold\">Smart Examples:</p>\n                    <p>â€¢ \"Weekly holiday on Sunday\" - Marks all Sundays</p>\n                    <p>â€¢ \"2nd Saturday off\" - Marks all 2nd Saturdays</p>\n                    <p>â€¢ \"All Saturdays except 2nd Saturday\" - Marks 1st, 3rd, 4th Saturdays</p>\n                  </div>\n                  <Button \n                    onClick={handleGenerateHolidayAI} \n                    disabled={isGeneratingHoliday}\n                    className=\"w-full\"\n                  >\n                    {isGeneratingHoliday ? \"Generating...\" : \"Generate Holidays\"}\n                  </Button>\n                </div>\n              ) : (\n                <div className=\"space-y-4 mt-4\">\n                  <div className=\"space-y-2\">\n                    <Label>Holiday Name</Label>\n                    <Input\n                      value={newHoliday.name}\n                      onChange={(e) => setNewHoliday({ ...newHoliday, name: e.target.value })}\n                      placeholder=\"Enter holiday name\"\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label>Date</Label>\n                    <CalendarUI\n                      mode=\"single\"\n                      selected={newHoliday.date}\n                      onSelect={(date) => date && setNewHoliday({ ...newHoliday, date })}\n                      className=\"rounded-md border\"\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label>Type</Label>\n                    <Select\n                      value={newHoliday.type}\n                      onValueChange={(value: Holiday[\"type\"]) => setNewHoliday({ ...newHoliday, type: value })}\n                    >\n                      <SelectTrigger>\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"gazetted\">Gazetted Holiday</SelectItem>\n                        <SelectItem value=\"restricted\">Restricted Holiday</SelectItem>\n                        <SelectItem value=\"weekly_off\">Weekly Off</SelectItem>\n                        <SelectItem value=\"vacation\">Vacation</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  <Button onClick={handleAddHoliday} className=\"w-full\">\n                    Add Holiday\n                  </Button>\n                </div>\n              )}\n            </DialogContent>\n          </Dialog>\n\n          {/* Holidays List */}\n          {holidays.length > 0 && (\n            <div className=\"space-y-3\">\n              <h4 className=\"font-semibold text-sm text-gray-700\">Holidays List:</h4>\n              <div className=\"space-y-2\">\n                {holidays.sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime()).map((holiday) => (\n                  <div\n                    key={holiday.id}\n                    className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50\"\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <div className={`w-3 h-3 rounded-full ${getHolidayColor(holiday.type)}`}></div>\n                      <div>\n                        <p className=\"font-medium text-sm\">{holiday.name}</p>\n                        <p className=\"text-xs text-gray-600\">\n                          {format(new Date(holiday.date), \"MMMM dd, yyyy\")} â€¢ {getHolidayTypeLabel(holiday.type)}\n                        </p>\n                      </div>\n                    </div>\n                    {isEditingHolidays && (\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        onClick={() => handleDeleteHoliday(holiday.id)}\n                      >\n                        <Trash2 className=\"h-4 w-4 text-red-600\" />\n                      </Button>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Additional Information Section */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle>Additional Information</CardTitle>\n              <p className=\"text-sm text-gray-600 mt-1\">Add custom information manually or with AI assistance</p>\n            </div>\n            {!isEditingAdditionalInfo ? (\n              <Button onClick={() => setIsEditingAdditionalInfo(true)} variant=\"outline\">\n                <Edit className=\"h-4 w-4 mr-2\" />\n                Edit\n              </Button>\n            ) : (\n              <div className=\"flex gap-2\">\n                <Button onClick={() => setIsEditingAdditionalInfo(false)} variant=\"outline\">\n                  Cancel\n                </Button>\n                <Button onClick={handleSaveAdditionalInfo} disabled={saveAdditionalInfoMutation.isPending}>\n                  <Save className=\"h-4 w-4 mr-2\" />\n                  {saveAdditionalInfoMutation.isPending ? \"Saving...\" : \"Save All\"}\n                </Button>\n              </div>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {/* Add Information Button (Only in Edit Mode) */}\n          {isEditingAdditionalInfo && (\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button className=\"w-full sm:w-auto\">\n                  <Plus className=\"mr-2 h-4 w-4\" />\n                  Add Information\n                  <ChevronDown className=\"h-4 w-4 ml-2\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent>\n                <DropdownMenuItem onClick={() => handleOpenAddInfoDialog('manual')}>\n                  Manual Entry\n                </DropdownMenuItem>\n                <DropdownMenuItem onClick={() => handleOpenAddInfoDialog('ai')}>\n                  <Sparkles className=\"mr-2 h-4 w-4\" />\n                  AI Powered\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          )}\n\n          {/* Add Information Dialog */}\n          <Dialog open={isAddInfoDialogOpen} onOpenChange={setIsAddInfoDialogOpen}>\n            <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n              <DialogHeader>\n                <DialogTitle>\n                  {addInfoMode === 'ai' ? 'AI-Powered Add Information' : 'Manual Add Information'}\n                </DialogTitle>\n                <DialogDescription>\n                  {addInfoMode === 'ai' \n                    ? \"Describe the information in natural language and AI will structure it for you\" \n                    : \"Add additional information manually\"}\n                </DialogDescription>\n              </DialogHeader>\n\n              {addInfoMode === 'ai' ? (\n                <>\n                  {!aiGeneratedData ? (\n                    <EnhancedAIInput\n                      prompt={aiPrompt}\n                      onPromptChange={setAiPrompt}\n                      onGenerate={handleGenerateAI}\n                      isGenerating={isGenerating}\n                      isListening={isListening}\n                      onToggleVoice={handleToggleVoice}\n                      browserSupported={browserSupported}\n                      placeholder=\"Describe the court information you want to add...\"\n                      examples={[\n                        \"Add information about court timings and procedures\",\n                        \"Add details about visiting guidelines and security protocols\",\n                        \"Add information about legal aid services available\"\n                      ]}\n                      sectionType=\"court information\"\n                    />\n                  ) : (\n                    <EnhancedAIPreview\n                      entries={aiGeneratedData.entries || [aiGeneratedData]}\n                      currentIndex={currentPreviewIndex}\n                      onIndexChange={setCurrentPreviewIndex}\n                      renderPreview={(entry) => (\n                        <div className=\"space-y-3\">\n                          <div>\n                            <span className=\"font-semibold text-gray-700 block mb-1\">Title:</span>\n                            <p className=\"text-gray-900 text-lg\">{entry.title}</p>\n                          </div>\n                          {entry.category && (\n                            <div>\n                              <span className=\"font-semibold text-gray-700 block mb-1\">Category:</span>\n                              <p className=\"text-gray-900\">{entry.category}</p>\n                            </div>\n                          )}\n                          <div>\n                            <span className=\"font-semibold text-gray-700 block mb-1\">Content:</span>\n                            <p className=\"text-gray-900 whitespace-pre-wrap\">{entry.content}</p>\n                          </div>\n                        </div>\n                      )}\n                      onConfirmAll={handleConfirmAI}\n                      onRegenerate={handleRegenerateAI}\n                      onEditEntry={handleEditAIEntry}\n                      onDeleteEntry={handleDeleteAIEntry}\n                      confirmButtonText={`Add ${(aiGeneratedData.entries || [aiGeneratedData]).length} Entry/Entries`}\n                      entryTypeName=\"Information\"\n                    />\n                  )}\n                </>\n              ) : (\n                <div className=\"space-y-4 mt-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"title\">Title *</Label>\n                    <Input\n                      id=\"title\"\n                      value={newInfoEntry.title}\n                      onChange={(e) => setNewInfoEntry({ ...newInfoEntry, title: e.target.value })}\n                      placeholder=\"Enter title\"\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"category\">Category (Optional)</Label>\n                    <Input\n                      id=\"category\"\n                      value={newInfoEntry.category}\n                      onChange={(e) => setNewInfoEntry({ ...newInfoEntry, category: e.target.value })}\n                      placeholder=\"e.g., Procedures, Services, Guidelines\"\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"content\">Content *</Label>\n                    <Textarea\n                      id=\"content\"\n                      value={newInfoEntry.content}\n                      onChange={(e) => setNewInfoEntry({ ...newInfoEntry, content: e.target.value })}\n                      placeholder=\"Enter content\"\n                      rows={6}\n                    />\n                  </div>\n                  <Button onClick={handleAddInfoEntry} className=\"w-full\">\n                    Add Entry\n                  </Button>\n                </div>\n              )}\n            </DialogContent>\n          </Dialog>\n\n          {/* Additional Information List */}\n          {additionalInfo.length > 0 ? (\n            <div className=\"space-y-3\">\n              {additionalInfo.map((entry) => (\n                <div\n                  key={entry.id}\n                  className=\"p-4 border rounded-lg hover:bg-gray-50\"\n                >\n                  {editingInfoId === entry.id ? (\n                    // Edit Mode\n                    <div className=\"space-y-3\">\n                      <div>\n                        <Label className=\"text-xs\">Title</Label>\n                        <Input\n                          value={editedInfoEntry?.title || \"\"}\n                          onChange={(e) => setEditedInfoEntry({ ...editedInfoEntry!, title: e.target.value })}\n                          className=\"mt-1\"\n                        />\n                      </div>\n                      <div>\n                        <Label className=\"text-xs\">Category</Label>\n                        <Input\n                          value={editedInfoEntry?.category || \"\"}\n                          onChange={(e) => setEditedInfoEntry({ ...editedInfoEntry!, category: e.target.value })}\n                          className=\"mt-1\"\n                        />\n                      </div>\n                      <div>\n                        <Label className=\"text-xs\">Content</Label>\n                        <Textarea\n                          value={editedInfoEntry?.content || \"\"}\n                          onChange={(e) => setEditedInfoEntry({ ...editedInfoEntry!, content: e.target.value })}\n                          rows={4}\n                          className=\"mt-1\"\n                        />\n                      </div>\n                      <div className=\"flex gap-2\">\n                        <Button onClick={handleSaveEditedInfo} size=\"sm\" className=\"flex-1\">\n                          <Check className=\"h-4 w-4 mr-1\" />\n                          Save\n                        </Button>\n                        <Button onClick={handleCancelEditInfo} size=\"sm\" variant=\"outline\" className=\"flex-1\">\n                          <X className=\"h-4 w-4 mr-1\" />\n                          Cancel\n                        </Button>\n                      </div>\n                    </div>\n                  ) : (\n                    // View Mode\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <h4 className=\"font-semibold text-gray-900\">{entry.title}</h4>\n                        {entry.category && (\n                          <p className=\"text-xs text-gray-600 mt-1\">Category: {entry.category}</p>\n                        )}\n                        <p className=\"text-sm text-gray-700 mt-2 whitespace-pre-wrap\">{entry.content}</p>\n                      </div>\n                      {isEditingAdditionalInfo && (\n                        <div className=\"flex gap-1 ml-2\">\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            onClick={() => handleEditInfoEntry(entry)}\n                          >\n                            <Edit className=\"h-4 w-4 text-blue-600\" />\n                          </Button>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            onClick={() => handleDeleteInfoEntry(entry.id)}\n                          >\n                            <Trash2 className=\"h-4 w-4 text-red-600\" />\n                          </Button>\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"text-sm text-gray-600 text-center py-8\">\n              No additional information added yet. Click \"Add Information\" to get started.\n            </p>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":55207},"client/src/components/court-admin/MiniAdminsSection.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Plus, Trash2, UserCog, ExternalLink, Eye, RefreshCw, Shield } from \"lucide-react\";\n\ninterface MiniAdminData {\n  id?: string;\n  name: string;\n  username: string;\n  password?: string;\n  role: string;\n  scope_type?: string;\n  scope_value?: string;\n  email?: string;\n}\n\nexport function MiniAdminsSection() {\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\n  const [isPasswordPromptOpen, setIsPasswordPromptOpen] = useState(false);\n  const [selectedMiniAdmin, setSelectedMiniAdmin] = useState<any>(null);\n  const [adminPassword, setAdminPassword] = useState(\"\");\n  const [newCredentials, setNewCredentials] = useState<any>(null);\n  const [formData, setFormData] = useState<MiniAdminData>({\n    name: \"\",\n    username: \"\",\n    role: \"\",\n    scope_type: \"\",\n    scope_value: \"\",\n    email: \"\",\n  });\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: miniAdminsData } = useQuery({\n    queryKey: [\"/api/court-admin/mini-admins\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/mini-admins\");\n      if (!res.ok) throw new Error(\"Failed to fetch mini admins\");\n      return await res.json();\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: MiniAdminData) => {\n      const res = await fetch(\"/api/court-admin/mini-admins\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to create mini admin\");\n      return await res.json();\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/mini-admins\"] });\n      setNewCredentials(data.credentials);\n      toast({ title: \"Success\", description: \"Mini admin created successfully\" });\n      resetForm();\n    },\n  });\n\n  const regenerateMutation = useMutation({\n    mutationFn: async ({ id, adminPassword }: { id: string; adminPassword: string }) => {\n      const res = await fetch(`/api/court-admin/mini-admins/${id}/regenerate`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ adminPassword }),\n      });\n      if (!res.ok) {\n        const error = await res.json();\n        throw new Error(error.message || \"Failed to regenerate password\");\n      }\n      return await res.json();\n    },\n    onSuccess: (data) => {\n      toast({ \n        title: \"Success\", \n        description: `New password: ${data.newPassword}`,\n        duration: 10000,\n      });\n      setIsPasswordPromptOpen(false);\n      setAdminPassword(\"\");\n    },\n    onError: (error: Error) => {\n      toast({ \n        title: \"Error\", \n        description: error.message, \n        variant: \"destructive\" \n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const res = await fetch(`/api/court-admin/mini-admins/${id}`, { method: \"DELETE\" });\n      if (!res.ok) throw new Error(\"Failed to delete mini admin\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/mini-admins\"] });\n      toast({ title: \"Success\", description: \"Mini admin deleted successfully\" });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      name: \"\",\n      username: \"\",\n      role: \"\",\n      scope_type: \"\",\n      scope_value: \"\",\n      email: \"\",\n    });\n    setIsCreateOpen(false);\n  };\n\n  const handleSubmit = () => {\n    createMutation.mutate(formData);\n  };\n\n  const handleRegeneratePassword = () => {\n    if (selectedMiniAdmin && adminPassword) {\n      regenerateMutation.mutate({ id: selectedMiniAdmin.id, adminPassword });\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h3 className=\"text-xl font-bold text-gray-900\">Mini-Admins Management</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">Create and manage mini admin accounts with limited scope access</p>\n        </div>\n        <Button onClick={() => setIsCreateOpen(true)}>\n          <Plus className=\"mr-2 h-4 w-4\" />\n          Create Mini-Admin\n        </Button>\n      </div>\n\n      {newCredentials && (\n        <Alert className=\"bg-green-50 border-green-200\">\n          <Shield className=\"h-4 w-4\" />\n          <AlertDescription>\n            <p className=\"font-bold text-green-900 mb-2\">New Mini-Admin Created!</p>\n            <div className=\"space-y-1 text-sm\">\n              <p><span className=\"font-medium\">Username:</span> {newCredentials.username}</p>\n              <p><span className=\"font-medium\">Password:</span> {newCredentials.password}</p>\n              <p><span className=\"font-medium\">Panel Link:</span> {newCredentials.panel_link}</p>\n            </div>\n            <p className=\"text-xs text-green-700 mt-2\">Please save these credentials. The password won't be shown again.</p>\n            <Button size=\"sm\" variant=\"outline\" className=\"mt-3\" onClick={() => setNewCredentials(null)}>\n              Close\n            </Button>\n          </AlertDescription>\n        </Alert>\n      )}\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {miniAdminsData?.miniAdmins?.map((miniAdmin: any) => (\n          <Card key={miniAdmin.id}>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-start gap-4 mb-4\">\n                <div className=\"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center\">\n                  <UserCog className=\"w-6 h-6 text-purple-600\" />\n                </div>\n                <div className=\"flex-1\">\n                  <h4 className=\"font-bold text-gray-900\">{miniAdmin.name}</h4>\n                  <p className=\"text-xs text-gray-600\">@{miniAdmin.username}</p>\n                  <p className=\"text-sm text-gray-700 mt-1\">{miniAdmin.role}</p>\n                </div>\n              </div>\n\n              <div className=\"space-y-2 mb-4\">\n                {miniAdmin.scope_type && (\n                  <p className=\"text-xs text-gray-600\">\n                    <span className=\"font-medium\">Scope:</span> {miniAdmin.scope_type} - {miniAdmin.scope_value}\n                  </p>\n                )}\n                {miniAdmin.email && (\n                  <p className=\"text-xs text-gray-600\">\n                    <span className=\"font-medium\">Email:</span> {miniAdmin.email}\n                  </p>\n                )}\n                <p className=\"text-xs text-gray-600\">\n                  <span className=\"font-medium\">Panel Link:</span> {miniAdmin.panel_link}\n                </p>\n              </div>\n\n              <div className=\"flex gap-2 flex-wrap\">\n                <Button \n                  size=\"sm\" \n                  variant=\"outline\"\n                  onClick={() => {\n                    setSelectedMiniAdmin(miniAdmin);\n                    setIsPasswordPromptOpen(true);\n                  }}\n                >\n                  <RefreshCw className=\"h-3 w-3 mr-1\" />\n                  Regenerate\n                </Button>\n                <Button\n                  size=\"sm\"\n                  variant=\"outline\"\n                  onClick={() => window.open(miniAdmin.panel_link, '_blank')}\n                >\n                  <ExternalLink className=\"h-3 w-3 mr-1\" />\n                  Open Panel\n                </Button>\n                <Button \n                  size=\"sm\" \n                  variant=\"destructive\" \n                  onClick={() => deleteMutation.mutate(miniAdmin.id)}\n                >\n                  <Trash2 className=\"h-3 w-3 mr-1\" />\n                  Delete\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n\n        {(!miniAdminsData?.miniAdmins || miniAdminsData.miniAdmins.length === 0) && (\n          <Card className=\"col-span-full\">\n            <CardContent className=\"p-12 text-center text-gray-500\">\n              No mini admins found. Click \"Create Mini-Admin\" to create one.\n            </CardContent>\n          </Card>\n        )}\n      </div>\n\n      <Dialog open={isCreateOpen} onOpenChange={setIsCreateOpen}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>Create New Mini-Admin</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>Name *</Label>\n                <Input\n                  value={formData.name}\n                  onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                  placeholder=\"e.g., Building A Admin\"\n                />\n              </div>\n              <div>\n                <Label>Username *</Label>\n                <Input\n                  value={formData.username}\n                  onChange={(e) => setFormData({ ...formData, username: e.target.value })}\n                  placeholder=\"e.g., buildinga_admin\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <Label>Role *</Label>\n              <Input\n                value={formData.role}\n                onChange={(e) => setFormData({ ...formData, role: e.target.value })}\n                placeholder=\"e.g., Building Manager, Department Head\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>Scope Type</Label>\n                <Input\n                  value={formData.scope_type}\n                  onChange={(e) => setFormData({ ...formData, scope_type: e.target.value })}\n                  placeholder=\"e.g., building, department\"\n                />\n              </div>\n              <div>\n                <Label>Scope Value</Label>\n                <Input\n                  value={formData.scope_value}\n                  onChange={(e) => setFormData({ ...formData, scope_value: e.target.value })}\n                  placeholder=\"e.g., Building A, Civil Dept\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <Label>Email (Optional)</Label>\n              <Input\n                type=\"email\"\n                value={formData.email}\n                onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                placeholder=\"admin@example.com\"\n              />\n            </div>\n\n            <div className=\"flex justify-end gap-2 pt-4\">\n              <Button variant=\"outline\" onClick={resetForm}>Cancel</Button>\n              <Button\n                onClick={handleSubmit}\n                disabled={!formData.name || !formData.username || !formData.role || createMutation.isPending}\n              >\n                {createMutation.isPending ? \"Creating...\" : \"Create Mini-Admin\"}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      <Dialog open={isPasswordPromptOpen} onOpenChange={setIsPasswordPromptOpen}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Verify Main Admin Password</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <Alert>\n              <Shield className=\"h-4 w-4\" />\n              <AlertDescription>\n                For security reasons, please enter your main admin password to regenerate credentials.\n              </AlertDescription>\n            </Alert>\n            <div>\n              <Label>Main Admin Password *</Label>\n              <Input\n                type=\"password\"\n                value={adminPassword}\n                onChange={(e) => setAdminPassword(e.target.value)}\n                placeholder=\"Enter main admin password\"\n              />\n            </div>\n            <div className=\"flex justify-end gap-2\">\n              <Button variant=\"outline\" onClick={() => {\n                setIsPasswordPromptOpen(false);\n                setAdminPassword(\"\");\n              }}>\n                Cancel\n              </Button>\n              <Button\n                onClick={handleRegeneratePassword}\n                disabled={!adminPassword || regenerateMutation.isPending}\n              >\n                {regenerateMutation.isPending ? \"Regenerating...\" : \"Regenerate Password\"}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":12866},"client/src/components/court-admin/StaffSection.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Plus, Edit, Trash2, User, Mail, Phone } from \"lucide-react\";\n\ninterface StaffData {\n  id?: string;\n  full_name: string;\n  employee_id: string;\n  department_id?: string | null;\n  designation: string;\n  role?: string;\n  email?: string;\n  phone?: string;\n  assigned_building_id?: string | null;\n  assigned_room_id?: string | null;\n  photo_url?: string;\n}\n\nexport function StaffSection() {\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\n  const [editingStaff, setEditingStaff] = useState<StaffData | null>(null);\n  const [formData, setFormData] = useState<StaffData>({\n    full_name: \"\",\n    employee_id: \"\",\n    department_id: null,\n    designation: \"\",\n    role: \"\",\n    email: \"\",\n    phone: \"\",\n    assigned_building_id: null,\n    assigned_room_id: null,\n    photo_url: \"\",\n  });\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: staffData } = useQuery({\n    queryKey: [\"/api/court-admin/staff\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/staff\");\n      if (!res.ok) throw new Error(\"Failed to fetch staff\");\n      return await res.json();\n    },\n  });\n\n  const { data: departmentsData } = useQuery({\n    queryKey: [\"/api/court-admin/departments\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/departments\");\n      if (!res.ok) throw new Error(\"Failed to fetch departments\");\n      return await res.json();\n    },\n  });\n\n  const { data: buildingsData } = useQuery({\n    queryKey: [\"/api/court-admin/buildings\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/buildings\");\n      if (!res.ok) throw new Error(\"Failed to fetch buildings\");\n      return await res.json();\n    },\n  });\n\n  const { data: roomsData } = useQuery({\n    queryKey: [\"/api/court-admin/rooms\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/rooms\");\n      if (!res.ok) throw new Error(\"Failed to fetch rooms\");\n      return await res.json();\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: StaffData) => {\n      const res = await fetch(\"/api/court-admin/staff\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to create staff\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/staff\"] });\n      toast({ title: \"Success\", description: \"Staff member created successfully\" });\n      resetForm();\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, ...data }: StaffData & { id: string }) => {\n      const res = await fetch(`/api/court-admin/staff/${id}`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to update staff\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/staff\"] });\n      toast({ title: \"Success\", description: \"Staff member updated successfully\" });\n      resetForm();\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const res = await fetch(`/api/court-admin/staff/${id}`, { method: \"DELETE\" });\n      if (!res.ok) throw new Error(\"Failed to delete staff\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/staff\"] });\n      toast({ title: \"Success\", description: \"Staff member deleted successfully\" });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      full_name: \"\",\n      employee_id: \"\",\n      department_id: null,\n      designation: \"\",\n      role: \"\",\n      email: \"\",\n      phone: \"\",\n      assigned_building_id: null,\n      assigned_room_id: null,\n      photo_url: \"\",\n    });\n    setIsCreateOpen(false);\n    setEditingStaff(null);\n  };\n\n  const handleSubmit = () => {\n    if (editingStaff?.id) {\n      updateMutation.mutate({ ...formData, id: editingStaff.id });\n    } else {\n      createMutation.mutate(formData);\n    }\n  };\n\n  const handleEdit = (staff: any) => {\n    setEditingStaff(staff);\n    setFormData({\n      full_name: staff.full_name,\n      employee_id: staff.employee_id,\n      department_id: staff.department_id || null,\n      designation: staff.designation,\n      role: staff.role || \"\",\n      email: staff.email || \"\",\n      phone: staff.phone || \"\",\n      assigned_building_id: staff.assigned_building_id || null,\n      assigned_room_id: staff.assigned_room_id || null,\n      photo_url: staff.photo_url || \"\",\n    });\n    setIsCreateOpen(true);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h3 className=\"text-xl font-bold text-gray-900\">Staff Directory</h3>\n        <Button onClick={() => setIsCreateOpen(true)}>\n          <Plus className=\"mr-2 h-4 w-4\" />\n          Add Staff Member\n        </Button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {staffData?.staff?.map((staff: any) => (\n          <Card key={staff.id}>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-start gap-4 mb-4\">\n                <div className=\"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center\">\n                  <User className=\"w-6 h-6 text-indigo-600\" />\n                </div>\n                <div className=\"flex-1\">\n                  <h4 className=\"font-bold text-gray-900\">{staff.full_name}</h4>\n                  <p className=\"text-xs text-gray-600\">{staff.employee_id}</p>\n                  <p className=\"text-sm text-gray-700 mt-1\">{staff.designation}</p>\n                </div>\n              </div>\n\n              <div className=\"space-y-2 mb-4\">\n                {staff.department && (\n                  <p className=\"text-xs text-gray-600\">\n                    <span className=\"font-medium\">Dept:</span> {staff.department.name}\n                  </p>\n                )}\n                {staff.email && (\n                  <p className=\"text-xs text-gray-600 flex items-center gap-1\">\n                    <Mail className=\"h-3 w-3\" /> {staff.email}\n                  </p>\n                )}\n                {staff.phone && (\n                  <p className=\"text-xs text-gray-600 flex items-center gap-1\">\n                    <Phone className=\"h-3 w-3\" /> {staff.phone}\n                  </p>\n                )}\n                {staff.building && (\n                  <p className=\"text-xs text-gray-600\">\n                    <span className=\"font-medium\">Building:</span> {staff.building.name}\n                  </p>\n                )}\n              </div>\n\n              <div className=\"flex gap-2\">\n                <Button size=\"sm\" variant=\"outline\" onClick={() => handleEdit(staff)}>\n                  <Edit className=\"h-3 w-3 mr-1\" />\n                  Edit\n                </Button>\n                <Button size=\"sm\" variant=\"destructive\" onClick={() => deleteMutation.mutate(staff.id)}>\n                  <Trash2 className=\"h-3 w-3 mr-1\" />\n                  Delete\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n\n        {(!staffData?.staff || staffData.staff.length === 0) && (\n          <Card className=\"col-span-full\">\n            <CardContent className=\"p-12 text-center text-gray-500\">\n              No staff members found. Click \"Add Staff Member\" to create one.\n            </CardContent>\n          </Card>\n        )}\n      </div>\n\n      <Dialog open={isCreateOpen} onOpenChange={setIsCreateOpen}>\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingStaff ? \"Edit Staff Member\" : \"Add New Staff Member\"}\n            </DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>Full Name *</Label>\n                <Input\n                  value={formData.full_name}\n                  onChange={(e) => setFormData({ ...formData, full_name: e.target.value })}\n                  placeholder=\"Enter full name\"\n                />\n              </div>\n              <div>\n                <Label>Employee ID *</Label>\n                <Input\n                  value={formData.employee_id}\n                  onChange={(e) => setFormData({ ...formData, employee_id: e.target.value })}\n                  placeholder=\"e.g., EMP-001\"\n                />\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>Designation *</Label>\n                <Input\n                  value={formData.designation}\n                  onChange={(e) => setFormData({ ...formData, designation: e.target.value })}\n                  placeholder=\"e.g., Clerk, Registrar\"\n                />\n              </div>\n              <div>\n                <Label>Role</Label>\n                <Input\n                  value={formData.role}\n                  onChange={(e) => setFormData({ ...formData, role: e.target.value })}\n                  placeholder=\"e.g., Administrative\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <Label>Department</Label>\n              <Select value={formData.department_id || \"\"} onValueChange={(value) => setFormData({ ...formData, department_id: value || null })}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select department\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"\">None</SelectItem>\n                  {departmentsData?.departments?.map((dept: any) => (\n                    <SelectItem key={dept.id} value={dept.id}>\n                      {dept.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>Email</Label>\n                <Input\n                  type=\"email\"\n                  value={formData.email}\n                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                  placeholder=\"email@example.com\"\n                />\n              </div>\n              <div>\n                <Label>Phone</Label>\n                <Input\n                  value={formData.phone}\n                  onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n                  placeholder=\"+91-XXXXXXXXXX\"\n                />\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>Assigned Building</Label>\n                <Select value={formData.assigned_building_id || \"\"} onValueChange={(value) => setFormData({ ...formData, assigned_building_id: value || null })}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select building\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"\">None</SelectItem>\n                    {buildingsData?.buildings?.map((building: any) => (\n                      <SelectItem key={building.id} value={building.id}>\n                        {building.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label>Assigned Room</Label>\n                <Select value={formData.assigned_room_id || \"\"} onValueChange={(value) => setFormData({ ...formData, assigned_room_id: value || null })}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select room\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"\">None</SelectItem>\n                    {roomsData?.rooms?.map((room: any) => (\n                      <SelectItem key={room.id} value={room.id}>\n                        {room.room_number} - {room.room_name || room.purpose}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div className=\"flex justify-end gap-2 pt-4\">\n              <Button variant=\"outline\" onClick={resetForm}>Cancel</Button>\n              <Button\n                onClick={handleSubmit}\n                disabled={!formData.full_name || !formData.employee_id || !formData.designation || createMutation.isPending || updateMutation.isPending}\n              >\n                {createMutation.isPending || updateMutation.isPending ? \"Saving...\" : editingStaff ? \"Update\" : \"Create\"}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":13664},"client/src/components/court-admin/DepartmentsSection.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Plus, Edit, Trash2, Building2 } from \"lucide-react\";\n\ninterface DepartmentData {\n  id?: string;\n  name: string;\n  slug: string;\n  department_code: string;\n  head_name?: string;\n  head_designation?: string;\n  contact_email?: string;\n  contact_phone?: string;\n  description?: string;\n}\n\nexport function DepartmentsSection() {\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\n  const [editingDept, setEditingDept] = useState<DepartmentData | null>(null);\n  const [formData, setFormData] = useState<DepartmentData>({\n    name: \"\",\n    slug: \"\",\n    department_code: \"\",\n    head_name: \"\",\n    head_designation: \"\",\n    contact_email: \"\",\n    contact_phone: \"\",\n    description: \"\",\n  });\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: departmentsData } = useQuery({\n    queryKey: [\"/api/court-admin/departments\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/departments\");\n      if (!res.ok) throw new Error(\"Failed to fetch departments\");\n      return await res.json();\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: DepartmentData) => {\n      const res = await fetch(\"/api/court-admin/departments\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to create department\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/departments\"] });\n      toast({ title: \"Success\", description: \"Department created successfully\" });\n      resetForm();\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, ...data }: DepartmentData & { id: string }) => {\n      const res = await fetch(`/api/court-admin/departments/${id}`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to update department\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/departments\"] });\n      toast({ title: \"Success\", description: \"Department updated successfully\" });\n      resetForm();\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const res = await fetch(`/api/court-admin/departments/${id}`, { method: \"DELETE\" });\n      if (!res.ok) throw new Error(\"Failed to delete department\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/departments\"] });\n      toast({ title: \"Success\", description: \"Department deleted successfully\" });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      name: \"\",\n      slug: \"\",\n      department_code: \"\",\n      head_name: \"\",\n      head_designation: \"\",\n      contact_email: \"\",\n      contact_phone: \"\",\n      description: \"\",\n    });\n    setIsCreateOpen(false);\n    setEditingDept(null);\n  };\n\n  const generateSlugAndCode = (name: string) => {\n    const slug = name.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');\n    const code = `DEPT-${slug.substring(0, 3).toUpperCase()}`;\n    setFormData({ ...formData, name, slug, department_code: code });\n  };\n\n  const handleSubmit = () => {\n    if (editingDept?.id) {\n      updateMutation.mutate({ ...formData, id: editingDept.id });\n    } else {\n      createMutation.mutate(formData);\n    }\n  };\n\n  const handleEdit = (dept: any) => {\n    setEditingDept(dept);\n    setFormData({\n      name: dept.name,\n      slug: dept.slug,\n      department_code: dept.department_code,\n      head_name: dept.head_name || \"\",\n      head_designation: dept.head_designation || \"\",\n      contact_email: dept.contact_email || \"\",\n      contact_phone: dept.contact_phone || \"\",\n      description: dept.description || \"\",\n    });\n    setIsCreateOpen(true);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h3 className=\"text-xl font-bold text-gray-900\">Departments Management</h3>\n        <Button onClick={() => setIsCreateOpen(true)}>\n          <Plus className=\"mr-2 h-4 w-4\" />\n          Add Department\n        </Button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {departmentsData?.departments?.map((dept: any) => (\n          <Card key={dept.id}>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\n                    <Building2 className=\"w-6 h-6 text-blue-600\" />\n                  </div>\n                  <div>\n                    <h4 className=\"font-bold text-gray-900\">{dept.name}</h4>\n                    <p className=\"text-xs text-gray-600\">{dept.department_code}</p>\n                  </div>\n                </div>\n              </div>\n\n              {dept.description && (\n                <p className=\"text-sm text-gray-700 mb-3\">{dept.description}</p>\n              )}\n\n              <div className=\"space-y-2 mb-4\">\n                {dept.head_name && (\n                  <div>\n                    <p className=\"text-xs font-medium text-gray-600\">Head:</p>\n                    <p className=\"text-sm text-gray-900\">{dept.head_name}</p>\n                    {dept.head_designation && (\n                      <p className=\"text-xs text-gray-600\">{dept.head_designation}</p>\n                    )}\n                  </div>\n                )}\n                {dept.contact_email && (\n                  <p className=\"text-xs text-gray-600\">\n                    <span className=\"font-medium\">Email:</span> {dept.contact_email}\n                  </p>\n                )}\n                {dept.contact_phone && (\n                  <p className=\"text-xs text-gray-600\">\n                    <span className=\"font-medium\">Phone:</span> {dept.contact_phone}\n                  </p>\n                )}\n              </div>\n\n              <div className=\"flex gap-2\">\n                <Button size=\"sm\" variant=\"outline\" onClick={() => handleEdit(dept)}>\n                  <Edit className=\"h-3 w-3 mr-1\" />\n                  Edit\n                </Button>\n                <Button size=\"sm\" variant=\"destructive\" onClick={() => deleteMutation.mutate(dept.id)}>\n                  <Trash2 className=\"h-3 w-3 mr-1\" />\n                  Delete\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n\n        {(!departmentsData?.departments || departmentsData.departments.length === 0) && (\n          <Card className=\"col-span-full\">\n            <CardContent className=\"p-12 text-center text-gray-500\">\n              No departments found. Click \"Add Department\" to create one.\n            </CardContent>\n          </Card>\n        )}\n      </div>\n\n      <Dialog open={isCreateOpen} onOpenChange={setIsCreateOpen}>\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingDept ? \"Edit Department\" : \"Add New Department\"}\n            </DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div>\n              <Label>Department Name *</Label>\n              <Input\n                value={formData.name}\n                onChange={(e) => generateSlugAndCode(e.target.value)}\n                placeholder=\"e.g., Civil Court, Criminal Court\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>Slug (Auto-generated)</Label>\n                <Input\n                  value={formData.slug}\n                  onChange={(e) => setFormData({ ...formData, slug: e.target.value })}\n                  placeholder=\"e.g., civil-court\"\n                />\n              </div>\n              <div>\n                <Label>Department Code (Auto-generated)</Label>\n                <Input\n                  value={formData.department_code}\n                  onChange={(e) => setFormData({ ...formData, department_code: e.target.value })}\n                  placeholder=\"e.g., DEPT-CIV\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <Label>Description</Label>\n              <Textarea\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                placeholder=\"Enter department description\"\n                rows={3}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>Head Name</Label>\n                <Input\n                  value={formData.head_name}\n                  onChange={(e) => setFormData({ ...formData, head_name: e.target.value })}\n                  placeholder=\"e.g., Justice R.K. Sharma\"\n                />\n              </div>\n              <div>\n                <Label>Head Designation</Label>\n                <Input\n                  value={formData.head_designation}\n                  onChange={(e) => setFormData({ ...formData, head_designation: e.target.value })}\n                  placeholder=\"e.g., Senior Judge\"\n                />\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>Contact Email</Label>\n                <Input\n                  type=\"email\"\n                  value={formData.contact_email}\n                  onChange={(e) => setFormData({ ...formData, contact_email: e.target.value })}\n                  placeholder=\"dept@court.gov.in\"\n                />\n              </div>\n              <div>\n                <Label>Contact Phone</Label>\n                <Input\n                  value={formData.contact_phone}\n                  onChange={(e) => setFormData({ ...formData, contact_phone: e.target.value })}\n                  placeholder=\"+91-XXXXXXXXXX\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex justify-end gap-2 pt-4\">\n              <Button variant=\"outline\" onClick={resetForm}>Cancel</Button>\n              <Button\n                onClick={handleSubmit}\n                disabled={!formData.name || createMutation.isPending || updateMutation.isPending}\n              >\n                {createMutation.isPending || updateMutation.isPending ? \"Saving...\" : editingDept ? \"Update\" : \"Create\"}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":11308},"client/src/components/court-admin/RoomsSection.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Plus, Edit, Trash2, DoorOpen } from \"lucide-react\";\n\ninterface RoomData {\n  id?: string;\n  room_number: string;\n  room_name?: string;\n  building_id: string;\n  floor?: number;\n  purpose?: string;\n  in_charge_staff_id?: string | null;\n  timing?: string;\n  status?: string;\n  photo_url?: string;\n  notes?: string;\n}\n\nexport function RoomsSection() {\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\n  const [editingRoom, setEditingRoom] = useState<RoomData | null>(null);\n  const [formData, setFormData] = useState<RoomData>({\n    room_number: \"\",\n    room_name: \"\",\n    building_id: \"\",\n    floor: 1,\n    purpose: \"\",\n    in_charge_staff_id: null,\n    timing: \"\",\n    status: \"Open\",\n    photo_url: \"\",\n    notes: \"\",\n  });\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: roomsData } = useQuery({\n    queryKey: [\"/api/court-admin/rooms\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/rooms\");\n      if (!res.ok) throw new Error(\"Failed to fetch rooms\");\n      return await res.json();\n    },\n  });\n\n  const { data: buildingsData } = useQuery({\n    queryKey: [\"/api/court-admin/buildings\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/buildings\");\n      if (!res.ok) throw new Error(\"Failed to fetch buildings\");\n      return await res.json();\n    },\n  });\n\n  const { data: staffData } = useQuery({\n    queryKey: [\"/api/court-admin/staff\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/staff\");\n      if (!res.ok) throw new Error(\"Failed to fetch staff\");\n      return await res.json();\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: RoomData) => {\n      const res = await fetch(\"/api/court-admin/rooms\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to create room\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/rooms\"] });\n      toast({ title: \"Success\", description: \"Room created successfully\" });\n      resetForm();\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, ...data }: RoomData & { id: string }) => {\n      const res = await fetch(`/api/court-admin/rooms/${id}`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to update room\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/rooms\"] });\n      toast({ title: \"Success\", description: \"Room updated successfully\" });\n      resetForm();\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const res = await fetch(`/api/court-admin/rooms/${id}`, { method: \"DELETE\" });\n      if (!res.ok) throw new Error(\"Failed to delete room\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/rooms\"] });\n      toast({ title: \"Success\", description: \"Room deleted successfully\" });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      room_number: \"\",\n      room_name: \"\",\n      building_id: \"\",\n      floor: 1,\n      purpose: \"\",\n      in_charge_staff_id: null,\n      timing: \"\",\n      status: \"Open\",\n      photo_url: \"\",\n      notes: \"\",\n    });\n    setIsCreateOpen(false);\n    setEditingRoom(null);\n  };\n\n  const handleSubmit = () => {\n    if (editingRoom?.id) {\n      updateMutation.mutate({ ...formData, id: editingRoom.id });\n    } else {\n      createMutation.mutate(formData);\n    }\n  };\n\n  const handleEdit = (room: any) => {\n    setEditingRoom(room);\n    setFormData({\n      room_number: room.room_number,\n      room_name: room.room_name || \"\",\n      building_id: room.building_id,\n      floor: room.floor || 1,\n      purpose: room.purpose || \"\",\n      in_charge_staff_id: room.in_charge_staff_id || null,\n      timing: room.timing || \"\",\n      status: room.status || \"Open\",\n      photo_url: room.photo_url || \"\",\n      notes: room.notes || \"\",\n    });\n    setIsCreateOpen(true);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h3 className=\"text-xl font-bold text-gray-900\">Rooms & Courtrooms Management</h3>\n        <Button onClick={() => setIsCreateOpen(true)}>\n          <Plus className=\"mr-2 h-4 w-4\" />\n          Add Room\n        </Button>\n      </div>\n\n      <div className=\"bg-white rounded-xl shadow-md overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-gray-50 border-b border-gray-200\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Room No.</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Name</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Building</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Floor</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Purpose</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">In-charge</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Status</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Actions</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-gray-200\">\n              {roomsData?.rooms?.map((room: any) => (\n                <tr key={room.id} className=\"hover:bg-gray-50\">\n                  <td className=\"px-6 py-4 text-sm font-medium text-gray-900\">{room.room_number}</td>\n                  <td className=\"px-6 py-4 text-sm text-gray-700\">{room.room_name || \"-\"}</td>\n                  <td className=\"px-6 py-4 text-sm text-gray-700\">{room.building?.name || \"-\"}</td>\n                  <td className=\"px-6 py-4 text-sm text-gray-700\">{room.floor || \"-\"}</td>\n                  <td className=\"px-6 py-4 text-sm text-gray-700\">{room.purpose || \"-\"}</td>\n                  <td className=\"px-6 py-4 text-sm text-gray-700\">{room.in_charge?.full_name || \"-\"}</td>\n                  <td className=\"px-6 py-4\">\n                    <span className={`px-2 py-1 text-xs rounded-full ${\n                      room.status === 'Open' ? 'bg-green-100 text-green-800' :\n                      room.status === 'Closed' ? 'bg-red-100 text-red-800' :\n                      'bg-yellow-100 text-yellow-800'\n                    }`}>\n                      {room.status}\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4 text-sm\">\n                    <div className=\"flex gap-2\">\n                      <Button size=\"sm\" variant=\"ghost\" onClick={() => handleEdit(room)}>\n                        <Edit className=\"h-3 w-3\" />\n                      </Button>\n                      <Button size=\"sm\" variant=\"ghost\" onClick={() => deleteMutation.mutate(room.id)}>\n                        <Trash2 className=\"h-3 w-3 text-red-600\" />\n                      </Button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n              {(!roomsData?.rooms || roomsData.rooms.length === 0) && (\n                <tr>\n                  <td colSpan={8} className=\"px-6 py-12 text-center text-gray-500\">\n                    No rooms found. Click \"Add Room\" to create one.\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      <Dialog open={isCreateOpen} onOpenChange={setIsCreateOpen}>\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingRoom ? \"Edit Room\" : \"Add New Room\"}\n            </DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>Room Number *</Label>\n                <Input\n                  value={formData.room_number}\n                  onChange={(e) => setFormData({ ...formData, room_number: e.target.value })}\n                  placeholder=\"e.g., 101, CR-5\"\n                />\n              </div>\n              <div>\n                <Label>Room Name</Label>\n                <Input\n                  value={formData.room_name}\n                  onChange={(e) => setFormData({ ...formData, room_name: e.target.value })}\n                  placeholder=\"e.g., Civil Court Room 1\"\n                />\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>Building *</Label>\n                <Select value={formData.building_id} onValueChange={(value) => setFormData({ ...formData, building_id: value })}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select building\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {buildingsData?.buildings?.map((building: any) => (\n                      <SelectItem key={building.id} value={building.id}>\n                        {building.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label>Floor</Label>\n                <Input\n                  type=\"number\"\n                  value={formData.floor}\n                  onChange={(e) => setFormData({ ...formData, floor: parseInt(e.target.value) || 1 })}\n                />\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>Purpose</Label>\n                <Input\n                  value={formData.purpose}\n                  onChange={(e) => setFormData({ ...formData, purpose: e.target.value })}\n                  placeholder=\"e.g., Hearing room, Office\"\n                />\n              </div>\n              <div>\n                <Label>Status</Label>\n                <Select value={formData.status} onValueChange={(value) => setFormData({ ...formData, status: value })}>\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"Open\">Open</SelectItem>\n                    <SelectItem value=\"Closed\">Closed</SelectItem>\n                    <SelectItem value=\"In Use\">In Use</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>In-charge (Staff)</Label>\n                <Select value={formData.in_charge_staff_id || \"\"} onValueChange={(value) => setFormData({ ...formData, in_charge_staff_id: value || null })}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select staff member\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"\">None</SelectItem>\n                    {staffData?.staff?.map((staff: any) => (\n                      <SelectItem key={staff.id} value={staff.id}>\n                        {staff.full_name} ({staff.designation})\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label>Timing</Label>\n                <Input\n                  value={formData.timing}\n                  onChange={(e) => setFormData({ ...formData, timing: e.target.value })}\n                  placeholder=\"e.g., 10:00 - 16:00\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <Label>Notes</Label>\n              <Textarea\n                value={formData.notes}\n                onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\n                placeholder=\"Additional information about the room\"\n                rows={3}\n              />\n            </div>\n\n            <div className=\"flex justify-end gap-2 pt-4\">\n              <Button variant=\"outline\" onClick={resetForm}>Cancel</Button>\n              <Button\n                onClick={handleSubmit}\n                disabled={!formData.room_number || !formData.building_id || createMutation.isPending || updateMutation.isPending}\n              >\n                {createMutation.isPending || updateMutation.isPending ? \"Saving...\" : editingRoom ? \"Update\" : \"Create\"}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":13737},"client/src/components/court-admin/AnnouncementsSection.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Plus, Edit, Trash2, Megaphone, Pin } from \"lucide-react\";\nimport { format } from \"date-fns\";\n\ninterface AnnouncementData {\n  id?: string;\n  title: string;\n  message: string;\n  priority?: string;\n  is_pinned?: boolean;\n  expiry_date?: string | null;\n  department_id?: string | null;\n}\n\nexport function AnnouncementsSection() {\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\n  const [editingAnnouncement, setEditingAnnouncement] = useState<AnnouncementData | null>(null);\n  const [formData, setFormData] = useState<AnnouncementData>({\n    title: \"\",\n    message: \"\",\n    priority: \"normal\",\n    is_pinned: false,\n    expiry_date: null,\n    department_id: null,\n  });\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: announcementsData } = useQuery({\n    queryKey: [\"/api/court-admin/announcements\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/announcements\");\n      if (!res.ok) throw new Error(\"Failed to fetch announcements\");\n      return await res.json();\n    },\n  });\n\n  const { data: departmentsData } = useQuery({\n    queryKey: [\"/api/court-admin/departments\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/departments\");\n      if (!res.ok) throw new Error(\"Failed to fetch departments\");\n      return await res.json();\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: AnnouncementData) => {\n      const res = await fetch(\"/api/court-admin/announcements\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to create announcement\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/announcements\"] });\n      toast({ title: \"Success\", description: \"Announcement created successfully\" });\n      resetForm();\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, ...data }: AnnouncementData & { id: string }) => {\n      const res = await fetch(`/api/court-admin/announcements/${id}`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to update announcement\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/announcements\"] });\n      toast({ title: \"Success\", description: \"Announcement updated successfully\" });\n      resetForm();\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const res = await fetch(`/api/court-admin/announcements/${id}`, { method: \"DELETE\" });\n      if (!res.ok) throw new Error(\"Failed to delete announcement\");\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/court-admin/announcements\"] });\n      toast({ title: \"Success\", description: \"Announcement deleted successfully\" });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      title: \"\",\n      message: \"\",\n      priority: \"normal\",\n      is_pinned: false,\n      expiry_date: null,\n      department_id: null,\n    });\n    setIsCreateOpen(false);\n    setEditingAnnouncement(null);\n  };\n\n  const handleSubmit = () => {\n    if (editingAnnouncement?.id) {\n      updateMutation.mutate({ ...formData, id: editingAnnouncement.id });\n    } else {\n      createMutation.mutate(formData);\n    }\n  };\n\n  const handleEdit = (announcement: any) => {\n    setEditingAnnouncement(announcement);\n    setFormData({\n      title: announcement.title,\n      message: announcement.message,\n      priority: announcement.priority || \"normal\",\n      is_pinned: announcement.is_pinned || false,\n      expiry_date: announcement.expiry_date ? announcement.expiry_date.split('T')[0] : null,\n      department_id: announcement.department_id || null,\n    });\n    setIsCreateOpen(true);\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'high': return 'bg-red-100 text-red-800';\n      case 'medium': return 'bg-yellow-100 text-yellow-800';\n      case 'normal': return 'bg-blue-100 text-blue-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h3 className=\"text-xl font-bold text-gray-900\">Announcements</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">\n            Create and manage court announcements that the assistant can read to users\n          </p>\n        </div>\n        <Button onClick={() => setIsCreateOpen(true)}>\n          <Plus className=\"mr-2 h-4 w-4\" />\n          Add Announcement\n        </Button>\n      </div>\n\n      <div className=\"space-y-4\">\n        {announcementsData?.announcements?.map((announcement: any) => (\n          <Card key={announcement.id}>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-3 mb-3\">\n                    <Megaphone className=\"w-5 h-5 text-purple-600\" />\n                    {announcement.is_pinned && (\n                      <Pin className=\"w-4 h-4 text-red-600\" />\n                    )}\n                    <span className={`px-2 py-1 text-xs font-medium rounded ${getPriorityColor(announcement.priority)}`}>\n                      {announcement.priority}\n                    </span>\n                    {announcement.department && (\n                      <span className=\"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded\">\n                        {announcement.department.name}\n                      </span>\n                    )}\n                    <span className=\"text-xs text-gray-500\">\n                      {format(new Date(announcement.created_at), 'PP')}\n                    </span>\n                  </div>\n                  \n                  <h4 className=\"font-bold text-gray-900 mb-2\">{announcement.title}</h4>\n                  <p className=\"text-sm text-gray-700 mb-3\">{announcement.message}</p>\n                  \n                  {announcement.expiry_date && (\n                    <p className=\"text-xs text-gray-600\">\n                      <span className=\"font-medium\">Expires:</span>{' '}\n                      {format(new Date(announcement.expiry_date), 'PP')}\n                    </p>\n                  )}\n                </div>\n                \n                <div className=\"flex gap-2 ml-4\">\n                  <Button size=\"sm\" variant=\"ghost\" onClick={() => handleEdit(announcement)}>\n                    <Edit className=\"h-4 w-4\" />\n                  </Button>\n                  <Button size=\"sm\" variant=\"ghost\" onClick={() => deleteMutation.mutate(announcement.id)}>\n                    <Trash2 className=\"h-4 w-4 text-red-600\" />\n                  </Button>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n\n        {(!announcementsData?.announcements || announcementsData.announcements.length === 0) && (\n          <Card>\n            <CardContent className=\"p-12 text-center text-gray-500\">\n              No announcements found. Click \"Add Announcement\" to create one.\n            </CardContent>\n          </Card>\n        )}\n      </div>\n\n      <Dialog open={isCreateOpen} onOpenChange={setIsCreateOpen}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingAnnouncement ? \"Edit Announcement\" : \"Add New Announcement\"}\n            </DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div>\n              <Label>Title *</Label>\n              <Input\n                value={formData.title}\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                placeholder=\"Enter announcement title\"\n              />\n            </div>\n\n            <div>\n              <Label>Message *</Label>\n              <Textarea\n                value={formData.message}\n                onChange={(e) => setFormData({ ...formData, message: e.target.value })}\n                placeholder=\"Enter announcement message\"\n                rows={4}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label>Priority</Label>\n                <Select value={formData.priority} onValueChange={(value) => setFormData({ ...formData, priority: value })}>\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"normal\">Normal</SelectItem>\n                    <SelectItem value=\"medium\">Medium</SelectItem>\n                    <SelectItem value=\"high\">High</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label>Expiry Date (Optional)</Label>\n                <Input\n                  type=\"date\"\n                  value={formData.expiry_date || \"\"}\n                  onChange={(e) => setFormData({ ...formData, expiry_date: e.target.value || null })}\n                />\n              </div>\n            </div>\n\n            <div>\n              <Label>Department (Optional)</Label>\n              <Select value={formData.department_id || \"\"} onValueChange={(value) => setFormData({ ...formData, department_id: value || null })}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select department\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"\">All Departments</SelectItem>\n                  {departmentsData?.departments?.map((dept: any) => (\n                    <SelectItem key={dept.id} value={dept.id}>\n                      {dept.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"flex items-center space-x-2\">\n              <Switch\n                id=\"pinned\"\n                checked={formData.is_pinned}\n                onCheckedChange={(checked) => setFormData({ ...formData, is_pinned: checked })}\n              />\n              <Label htmlFor=\"pinned\" className=\"cursor-pointer\">\n                Pin this announcement (shows first)\n              </Label>\n            </div>\n\n            <div className=\"flex justify-end gap-2 pt-4\">\n              <Button variant=\"outline\" onClick={resetForm}>Cancel</Button>\n              <Button\n                onClick={handleSubmit}\n                disabled={!formData.title || !formData.message || createMutation.isPending || updateMutation.isPending}\n              >\n                {createMutation.isPending || updateMutation.isPending ? \"Saving...\" : editingAnnouncement ? \"Update\" : \"Create\"}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":11868},"client/src/components/court-admin/DashboardSection.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Building, DoorOpen, Users, Building2, Ticket, MessageSquare } from \"lucide-react\";\n\nexport function DashboardSection() {\n  const { data: stats } = useQuery({\n    queryKey: [\"/api/court-admin/stats\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/court-admin/stats\");\n      if (!res.ok) throw new Error(\"Failed to fetch stats\");\n      return await res.json();\n    },\n  });\n\n  const statCards = [\n    { title: \"Total Buildings\", value: stats?.buildings || 0, icon: Building, color: \"purple\" },\n    { title: \"Total Rooms\", value: stats?.rooms || 0, icon: DoorOpen, color: \"violet\" },\n    { title: \"Staff Members\", value: stats?.staff || 0, icon: Users, color: \"indigo\" },\n    { title: \"Departments\", value: stats?.departments || 0, icon: Building2, color: \"blue\" },\n    { title: \"Pending Tickets\", value: stats?.pending_tickets || 0, icon: Ticket, color: \"red\" },\n    { title: \"FAQs\", value: stats?.faqs || 0, icon: MessageSquare, color: \"green\" },\n  ];\n\n  const colorClasses: Record<string, { border: string; bg: string; text: string }> = {\n    purple: { border: 'border-purple-500', bg: 'bg-purple-100', text: 'text-purple-600' },\n    violet: { border: 'border-violet-500', bg: 'bg-violet-100', text: 'text-violet-600' },\n    indigo: { border: 'border-indigo-500', bg: 'bg-indigo-100', text: 'text-indigo-600' },\n    blue: { border: 'border-blue-500', bg: 'bg-blue-100', text: 'text-blue-600' },\n    red: { border: 'border-red-500', bg: 'bg-red-100', text: 'text-red-600' },\n    green: { border: 'border-green-500', bg: 'bg-green-100', text: 'text-green-600' },\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {statCards.map((stat) => {\n          const classes = colorClasses[stat.color];\n          const Icon = stat.icon;\n          \n          return (\n            <Card key={stat.title} className={`border-l-4 ${classes.border} shadow-md`}>\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm text-gray-600 font-medium\">{stat.title}</p>\n                    <p className=\"text-3xl font-bold text-gray-900 mt-2\">{stat.value}</p>\n                  </div>\n                  <div className={`w-12 h-12 ${classes.bg} rounded-lg flex items-center justify-center`}>\n                    <Icon className={classes.text} size={24} />\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          );\n        })}\n      </div>\n\n      <Card>\n        <CardContent className=\"p-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">Quick Actions</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div className=\"p-4 bg-purple-50 rounded-lg border border-purple-200\">\n              <h4 className=\"font-medium text-purple-900\">Add Building</h4>\n              <p className=\"text-sm text-purple-700 mt-1\">Create new court building</p>\n            </div>\n            <div className=\"p-4 bg-blue-50 rounded-lg border border-blue-200\">\n              <h4 className=\"font-medium text-blue-900\">Add Staff</h4>\n              <p className=\"text-sm text-blue-700 mt-1\">Register new staff member</p>\n            </div>\n            <div className=\"p-4 bg-green-50 rounded-lg border border-green-200\">\n              <h4 className=\"font-medium text-green-900\">Add FAQ</h4>\n              <p className=\"text-sm text-green-700 mt-1\">Create new FAQ entry</p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardContent className=\"p-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">Court Information Summary</h3>\n          <div className=\"space-y-3\">\n            <div className=\"flex justify-between items-center p-3 bg-gray-50 rounded-lg\">\n              <span className=\"text-sm font-medium text-gray-700\">Court Name</span>\n              <span className=\"text-sm text-gray-900\">Kaithal District Court</span>\n            </div>\n            <div className=\"flex justify-between items-center p-3 bg-gray-50 rounded-lg\">\n              <span className=\"text-sm font-medium text-gray-700\">Working Hours</span>\n              <span className=\"text-sm text-gray-900\">10:00 AM - 5:00 PM</span>\n            </div>\n            <div className=\"flex justify-between items-center p-3 bg-gray-50 rounded-lg\">\n              <span className=\"text-sm font-medium text-gray-700\">Lunch Break</span>\n              <span className=\"text-sm text-gray-900\">1:00 PM - 2:00 PM</span>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":4792},"COURT_ADMIN_LOGIN_FIX.md":{"content":"# Court Admin Login Fix - Step by Step Instructions\n\n## Problem Solved\nâœ… Schema file updated with correct password hash for `admin123`\nâœ… Old duplicate admin panel file deleted\n\n## To Fix Login Issue\n\n### Option 1: Update Existing Admin Password in Database (QUICKEST)\n\nIf you already have the database setup, run this in Supabase SQL Editor:\n\n```sql\nUPDATE court_main_admin \nSET password = '$2b$10$2S.wv7lMYqwbH6RfQrK/kurTMIBV2h7gloOdm3KPgiM/EFybylLzm'\nWHERE username = 'admin';\n```\n\n### Option 2: Fresh Database Setup\n\n1. Go to your Supabase Dashboard: https://supabase.com/dashboard\n2. Select your project\n3. Click on \"SQL Editor\" in left sidebar\n4. Click \"New Query\"\n5. Copy entire content from `court-admin-supabase-schema-fixed.sql` file\n6. Paste in SQL Editor\n7. Click \"Run\" button\n\nThis will create all tables with correct admin credentials.\n\n## Login Credentials\n\n- **Username**: `admin`\n- **Password**: `admin123`\n\n## Files Status\n\nâœ… `client/src/pages/court-admin-main.tsx` - Main admin panel (ACTIVE)\nâœ… `client/src/pages/court-admin-login.tsx` - Login page (ACTIVE)\nâŒ `client/src/pages/court-admin.tsx` - DELETED (was duplicate/old version)\n\n## Routes\n\n- Login: `/court-admin-login`\n- Admin Panel: `/court-admin`\n\n---\n\n**Important**: After running the SQL, try logging in with username `admin` and password `admin123`.\n","size_bytes":1339},"server/court-static-data.ts":{"content":"/**\n * Court Static Data - Building Image + Room & Service Lookup System\n * This module provides static data structures for court navigation and service lookup\n */\n\nexport interface Building {\n  name: string;\n  image: string;\n  description: string;\n}\n\nexport interface Room {\n  building: keyof typeof BUILDINGS;\n  purpose: string;\n}\n\nexport const BUILDINGS = {\n  civil: {\n    name: \"Civil Block\",\n    image: \"/images/court/civil_block.png\",\n    description: \"Is building me courtrooms, judge chambers aur legal aid cell hota hai.\"\n  },\n  record: {\n    name: \"Record / Copy Section\",\n    image: \"/images/court/record_section.png\",\n    description: \"Yahan case records aur certified copy issue hoti hai.\"\n  },\n  filing: {\n    name: \"Filing & Registration Section\",\n    image: \"/images/court/filing_section.png\",\n    description: \"Yahan naye case ki filing, application submission aur stamp/token ka kaam hota hai.\"\n  }\n} as const;\n\nexport const ROOMS: Record<number, Room> = {\n  // Civil Block Rooms\n  21: { building: \"civil\", purpose: \"Civil Courtroom (Hearing)\" },\n  22: { building: \"civil\", purpose: \"Civil Courtroom (Hearing)\" },\n  23: { building: \"civil\", purpose: \"Judge Chamber\" },\n  24: { building: \"civil\", purpose: \"Waiting / Witness Area\" },\n  25: { building: \"civil\", purpose: \"Legal Aid Cell (Free Legal Help)\" },\n\n  // Record / Copy Section Rooms\n  11: { building: \"record\", purpose: \"Old Case Record Storage\" },\n  12: { building: \"record\", purpose: \"Record Index Search Desk\" },\n  13: { building: \"record\", purpose: \"Copy Form Submission Counter\" },\n  14: { building: \"record\", purpose: \"Certified Copy Issue Counter\" },\n  15: { building: \"record\", purpose: \"Record Vault\" },\n\n  // Filing & Registration Section Rooms\n  31: { building: \"filing\", purpose: \"Filing Clerk Office\" },\n  32: { building: \"filing\", purpose: \"Case Filing / Application Submission\" },\n  33: { building: \"filing\", purpose: \"Affidavit Verification Desk\" },\n  34: { building: \"filing\", purpose: \"Token Issue Counter\" },\n  35: { building: \"filing\", purpose: \"Stamp / Payment Desk\" }\n};\n\nexport const SERVICES: Record<string, number> = {\n  // File submission/filing\n  \"file submit\": 32,\n  \"file jama\": 32,\n  \"case file\": 32,\n  \"application\": 32,\n  \"filing\": 32,\n  \"case filing\": 32,\n  \"naya case\": 32,\n  \"case register\": 32,\n  \"file karna\": 32,\n  \"file submit karna\": 32,\n  \"application submit\": 32,\n  \n  // Certified copy\n  \"certified copy\": 14,\n  \"copy\": 14,\n  \"case copy\": 14,\n  \"copy leni\": 14,\n  \"certified copy chahiye\": 14,\n  \"copy issue\": 14,\n  \"copy nikalna\": 14,\n  \"record copy\": 14,\n  \"nakal\": 14,\n  \n  // Legal aid\n  \"legal aid\": 25,\n  \"free legal help\": 25,\n  \"mujhe vakil chahiye\": 25,\n  \"lawyer chahiye\": 25,\n  \"free lawyer\": 25,\n  \"legal help\": 25,\n  \"vakil ki madad\": 25,\n  \"kanuni madad\": 25,\n  \n  // Judge chamber\n  \"judge se milna\": 23,\n  \"judge chamber\": 23,\n  \"judge ka kamra\": 23,\n  \n  // Hearing\n  \"hearing\": 21,\n  \"court hearing\": 21,\n  \"sunwai\": 21,\n  \"case hearing\": 21,\n  \n  // Affidavit\n  \"affidavit\": 33,\n  \"affidavit verification\": 33,\n  \"shapat patra\": 33,\n  \n  // Token/Queue\n  \"token\": 34,\n  \"queue number\": 34,\n  \"number lena\": 34,\n  \"token lena\": 34,\n  \n  // Payment/Stamp\n  \"payment\": 35,\n  \"stamp\": 35,\n  \"fee payment\": 35,\n  \"court fee\": 35,\n  \"stamp paper\": 35,\n  \"fee jama\": 35,\n  \n  // Record search\n  \"record search\": 12,\n  \"case record\": 12,\n  \"purana record\": 12,\n  \"record dekhna\": 12,\n  \n  // Copy form\n  \"copy form\": 13,\n  \"form submission\": 13,\n  \"copy ke liye form\": 13\n};\n\n/**\n * Helper Functions\n */\n\nexport interface LookupResult {\n  matched: boolean;\n  type?: 'service' | 'room' | 'building';\n  roomNumber?: number;\n  building?: keyof typeof BUILDINGS;\n  buildingData?: Building;\n  roomData?: Room;\n  responseText?: string;\n  spokenText?: string;\n  imageUrl?: string;\n}\n\n/**\n * Match service keyword in user query and return room/building info\n */\nexport function matchService(query: string): LookupResult {\n  const lowerQuery = query.toLowerCase().trim();\n  \n  // Check service keywords\n  for (const [keyword, roomNumber] of Object.entries(SERVICES)) {\n    if (lowerQuery.includes(keyword.toLowerCase())) {\n      const room = ROOMS[roomNumber];\n      if (room) {\n        const building = BUILDINGS[room.building];\n        const responseText = `${room.purpose} ${building.name} ke Room ${roomNumber} me hai. ${building.description}`;\n        const spokenText = `${room.purpose} ${building.name} ke Room ${roomNumber} me milti hai.`;\n        \n        return {\n          matched: true,\n          type: 'service',\n          roomNumber,\n          building: room.building,\n          buildingData: building,\n          roomData: room,\n          responseText,\n          spokenText,\n          imageUrl: building.image\n        };\n      }\n    }\n  }\n  \n  return { matched: false };\n}\n\n/**\n * Match direct room number in query\n */\nexport function matchRoomNumber(query: string): LookupResult {\n  const lowerQuery = query.toLowerCase();\n  \n  // Extract room number from query\n  const roomNumberMatch = lowerQuery.match(/room\\s*(?:number|no\\.?|#)?\\s*(\\d+)/i) ||\n                          lowerQuery.match(/kamra\\s*(?:number|no\\.?|#)?\\s*(\\d+)/i) ||\n                          lowerQuery.match(/(\\d+)\\s*(?:room|kamra)/i);\n  \n  if (roomNumberMatch) {\n    const roomNumber = parseInt(roomNumberMatch[1], 10);\n    const room = ROOMS[roomNumber];\n    \n    if (room) {\n      const building = BUILDINGS[room.building];\n      const responseText = `Room ${roomNumber} ${building.name} me hai. Yeh ${room.purpose} ke liye use hota hai. ${building.description}`;\n      const spokenText = `Room ${roomNumber} ${building.name} me hai. Yeh ${room.purpose} ke liye hai.`;\n      \n      return {\n        matched: true,\n        type: 'room',\n        roomNumber,\n        building: room.building,\n        buildingData: building,\n        roomData: room,\n        responseText,\n        spokenText,\n        imageUrl: building.image\n      };\n    }\n  }\n  \n  return { matched: false };\n}\n\n/**\n * Match building name in query\n */\nexport function matchBuilding(query: string): LookupResult {\n  const lowerQuery = query.toLowerCase();\n  \n  // Check for building names\n  if (lowerQuery.includes('civil block') || lowerQuery.includes('civil building')) {\n    const building = BUILDINGS.civil;\n    \n    const responseText = `Civil Block me aapko courtrooms, judge chambers aur legal aid cell milenge. Hearing ke liye aap Room 21 ya Room 22 me ja sakte hain. Agar judge se milna hai to Room 23 me unka chamber hai. Aur agar aapko free legal help chahiye to Room 25 me Legal Aid Cell hai. ${building.description}`;\n    const spokenText = `${building.name} me courtrooms, judge chambers aur legal aid cell hai. Hearing Room 21 ya 22 me hoti hai, aur legal help ke liye Room 25 me ja sakte hain.`;\n    \n    return {\n      matched: true,\n      type: 'building',\n      building: 'civil',\n      buildingData: building,\n      responseText,\n      spokenText,\n      imageUrl: building.image\n    };\n  }\n  \n  if (lowerQuery.includes('record') && (lowerQuery.includes('section') || lowerQuery.includes('copy'))) {\n    const building = BUILDINGS.record;\n    \n    const responseText = `Record Section me aapko purane case records aur certified copy milti hai. Agar aapko certified copy chahiye to Room 14 me ja sakte hain. Copy form submit karne ke liye Room 13 hai, aur record search ke liye Room 12 me help mil jayegi. ${building.description}`;\n    const spokenText = `${building.name} me case records aur certified copy ka kaam hota hai. Certified copy ke liye Room 14 me ja sakte hain.`;\n    \n    return {\n      matched: true,\n      type: 'building',\n      building: 'record',\n      buildingData: building,\n      responseText,\n      spokenText,\n      imageUrl: building.image\n    };\n  }\n  \n  if (lowerQuery.includes('filing') || lowerQuery.includes('registration')) {\n    const building = BUILDINGS.filing;\n    \n    const responseText = `Filing Section me aap naya case file kar sakte hain ya application submit kar sakte hain. Case filing ke liye Room 32 me jaiye. Token lene ke liye Room 34 hai, aur stamp ya payment ke liye Room 35 me ja sakte hain. ${building.description}`;\n    const spokenText = `${building.name} me naye case ki filing aur registration hoti hai. Filing ke liye Room 32 me ja sakte hain.`;\n    \n    return {\n      matched: true,\n      type: 'building',\n      building: 'filing',\n      buildingData: building,\n      responseText,\n      spokenText,\n      imageUrl: building.image\n    };\n  }\n  \n  return { matched: false };\n}\n\n/**\n * Main lookup function - tries all matching strategies\n */\nexport function lookupCourtInfo(query: string): LookupResult {\n  // Priority 1: Service keyword match\n  let result = matchService(query);\n  if (result.matched) return result;\n  \n  // Priority 2: Direct room number\n  result = matchRoomNumber(query);\n  if (result.matched) return result;\n  \n  // Priority 3: Building name\n  result = matchBuilding(query);\n  if (result.matched) return result;\n  \n  return { matched: false };\n}\n","size_bytes":9010}},"version":2}